<?php
$lecciones = [];
/**
 * MATERIA: Pensamiento Matemático III
 * TEMA:    Derivadas Básicas
 * SUBTEMA: Reglas de derivación, interpretación geométrica (pendiente), dominio de polinomios
 * NIVEL:   Bachillerato / Introducción al Cálculo
 */

$lecciones[] = [
    'materia' => 'Pensamiento Matemático III',
    'slug'    => 'derivadas-basicas-pendientes-dominio',
    'titulo'  => 'Derivadas Básicas: Reglas, Pendiente de la Tangente y Dominio',

    /* ===========================
       CONTENIDO DE LA LECCIÓN
       HTML + MathJax/LaTeX + SVG
       =========================== */
    'contenido' => <<<'HTML'
        <!-- ==================================================
             Cabecera de contenido (meta, objetivos de la lección)
             ================================================== -->
        <div class="content-header">
            <h2>Derivadas Básicas: Reglas, Pendiente de la Tangente y Dominio</h2>
            <span class="materia-tag">Pensamiento Matemático III</span>
            <p class="progress-info-local">Objetivos: <strong>comprender</strong> la derivada como tasa de cambio y pendiente de la tangente; <strong>aplicar</strong> reglas básicas de derivación en polinomios; <strong>interpretar</strong> el signo de la derivada y el dominio de polinomios.</p>
        </div>

        <!-- ==================================================
             Definición y explicación (seria y formal)
             ================================================== -->
        <div class="content-body">
            <h3>Definición formal de derivada</h3>
            <p>Sea \( f(x) \) una función. La derivada de \( f \) en el punto \( a \) se define por el límite (si existe):</p>
            <p class="latex-display">\[
                f'(a) = \lim_{h \to 0} \frac{f(a+h) - f(a)}{h}.
            \]</p>
            <p>Intuitivamente, \( f'(a) \) representa la <strong>tasa de cambio instantánea</strong> de \( f \) respecto a \( x \) en \( x=a \). Geométricamente, coincide con la <strong>pendiente de la recta tangente</strong> a la gráfica de \( f \) en \( x=a \).</p>

            <h3>Contexto: funciones polinómicas</h3>
            <p>En esta lección trabajaremos exclusivamente con polinomios. Recordemos que todo polinomio tiene dominio \( \mathbb{R} \) y es derivable en todo \( \mathbb{R} \).</p>

            <!-- ==================================================
                 SVG: Curva polinómica con recta tangente (estilo retro)
                 - Sustituye a imágenes externas para mantener consistencia
                 ================================================== -->
            <div class="visual svg-diagram" aria-hidden="false">
                <!-- SVG adaptado al diseño retro-neón; colores compatibles con style.css -->
                <svg viewBox="0 0 720 360" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="title1 desc1">
                    <title id="title1">Curva polinómica y recta tangente</title>
                    <desc id="desc1">Ilustración de una función polinómica con su recta tangente y punto de tangencia.</desc>

                    <!-- fondo -->
                    <rect width="720" height="360" fill="#0b0b0b"/>
                    <!-- ejes -->
                    <line x1="60" y1="300" x2="660" y2="300" stroke="#444" stroke-width="2"/>
                    <line x1="60" y1="300" x2="60" y2="40" stroke="#444" stroke-width="2"/>
                    <!-- curva: aproximación polinómica (trayectoria) -->
                    <path d="M70 250 C 120 120 200 200 300 170 C 380 140 480 220 580 160 C 620 130 650 170 660 190"
                          stroke="#00ccff" stroke-width="5" fill="none" stroke-linecap="round" />
                    <!-- tangente -->
                    <line x1="310" y1="190" x2="520" y2="70" stroke="#ff00ff" stroke-width="4" stroke-linecap="round" />
                    <!-- punto de tangencia -->
                    <circle cx="380" cy="150" r="6" fill="#ff00ff" />
                    <text x="392" y="142" fill="#ff00ff" font-family="VT323, monospace" font-size="14">A</text>
                    <!-- etiquetas -->
                    <text x="670" y="305" fill="#ffcc00" font-family="Press Start 2P, monospace" font-size="14">X</text>
                    <text x="48" y="30" fill="#ffcc00" font-family="Press Start 2P, monospace" font-size="14">Y</text>
                    <!-- nota -->
                    <rect x="440" y="20" width="250" height="70" fill="#0c0c0c" stroke="#222" stroke-width="1" rx="6"/>
                    <text x="452" y="42" fill="#ffcc00" font-family="VT323" font-size="12">Recta tangente (pendiente = \(f'(a)\))</text>
                </svg>
                <p class="caption">Representación esquemática: función polinómica y su recta tangente en el punto \(A\).</p>
            </div>

            <h3>Reglas básicas de diferenciación (polinomios)</h3>
            <p>Presentamos las reglas que usaremos en todos los ejercicios. Son universales para funciones polinómicas y combinaciones mediante suma y producto.</p>
            <ul class="reglas-derivacion">
                <li><strong>Constante:</strong> \( \dfrac{d}{dx}[c] = 0 \).</li>
                <li><strong>Potencia:</strong> \( \dfrac{d}{dx}[x^n] = n x^{n-1} \) para \( n \in \mathbb{R} \).</li>
                <li><strong>Constante factor:</strong> \( \dfrac{d}{dx}[c\cdot f(x)] = c\cdot f'(x) \).</li>
                <li><strong>Suma/diferencia:</strong> \( \dfrac{d}{dx}[f(x)\pm g(x)] = f'(x)\pm g'(x) \).</li>
                <li><strong>Producto:</strong> \( \dfrac{d}{dx}[f(x)g(x)] = f'(x)g(x) + f(x)g'(x) \).</li>
                <li><strong>Cociente (nota para polinomios):</strong> \( \dfrac{d}{dx}\!\left[\dfrac{u(x)}{v(x)}\right] = \dfrac{u'v - uv'}{v^2} \) cuando \( v(x)\neq 0 \).</li>
                <li><strong>Derivada de orden superior:</strong> \( f''(x) = \dfrac{d}{dx}[f'(x)] \) se usa para concavidad y extremos.</li>
            </ul>

            <h3>Interpretación geométrica y consecuencias</h3>
            <ul>
                <li>Si \( f'(x) > 0 \) en un intervalo: \( f \) es <strong>creciente</strong> en ese intervalo.</li>
                <li>Si \( f'(x) < 0 \) en un intervalo: \( f \) es <strong>decreciente</strong>.</li>
                <li>Si \( f'(a) = 0 \): la tangente es horizontal; puede indicar un máximo, mínimo o punto de inflexión (analizar con \( f'' \)).</li>
            </ul>

            <h3>Dominio de polinomios</h3>
            <p>Todo polinomio \( P(x) = a_n x^n + \dots + a_1 x + a_0 \) tiene dominio \( \mathbb{R} \): no existen puntos de indeterminación ni discontinuidades.</p>

            <!-- ==================================================
                 Sección: Ejemplos resueltos (varios niveles)
                 ================================================== -->
            <h3>Ejemplos resueltos</h3>

            <div class="ejemplo">
                <h4>Ejemplo 1 — Derivada directa (potencia)</h4>
                <p>\( f(x) = 4x^3 - 2x^2 + 5x - 7 \)</p>
                <p><strong>Cálculo:</strong> aplicar la regla de la potencia término a término:</p>
                <p class="latex-display">\[
                    f'(x) = 12x^2 - 4x + 5.
                \]</p>
                <p><strong>Pendiente en \( x=1 \):</strong> \( f'(1)=12(1)^2 - 4(1) + 5 = 13\).</p>
            </div>

            <div class="ejemplo">
                <h4>Ejemplo 2 — Regla del producto</h4>
                <p>\( h(x) = (2x + 1)(x^2 - 3x) \).</p>
                <p><strong>Cálculo:</strong> sea \( u=2x+1,\ v=x^2-3x \Rightarrow u'=2,\ v'=2x-3\).</p>
                <p class="latex-display">\[
                    h'(x) = u'v + uv' = 2(x^2-3x) + (2x+1)(2x-3).
                \]</p>
                <p>Desarrollando y simplificando:</p>
                <p class="latex-display">\[
                    h'(x) = 2x^2 - 6x + (4x^2 - 6x + 2x - 3) = 6x^2 - 10x - 3.
                \]</p>
                <p><em>Observación:</em> verificar simplificación cuidadosamente (paso importante en exámenes).</p>
            </div>

            <div class="ejemplo">
                <h4>Ejemplo 3 — Segunda derivada y concavidad</h4>
                <p>\( p(x) = x^4 - 4x^3 + 2 \).</p>
                <p>\( p'(x) = 4x^3 - 12x^2 \). </p>
                <p>\( p''(x) = 12x^2 - 24x = 12x(x-2) \).</p>
                <p>La segunda derivada permite estudiar concavidad y puntos de inflexión: \( p''(x)=0 \) en \( x=0 \) y \( x=2 \).</p>
            </div>

            <!-- ==================================================
                 PRÁCTICA GUIADA: resolver un ejemplo paso a paso
                 - Incluye pasos claros y justificados
                 ================================================== -->
            <h3>Práctica guiada (paso a paso)</h3>
            <p>Resolveremos la derivada de \( q(x) = (x^2 + 2)(3x - 1) + 5x \) paso a paso.</p>

            <ol>
                <li><strong>Paso 1 — Identificar estructura:</strong> \( q(x) \) contiene un producto y una suma, por tanto: usar producto + regla de suma.</li>
                <li><strong>Paso 2 — Aplicar regla del producto:</strong> Sea \( u = x^2 + 2 \) y \( v = 3x-1 \). Entonces \( u' = 2x,\ v' = 3 \).</li>
                <li><strong>Paso 3 — Calcular derivada del producto:</strong>
                    <p class="latex-display">\[
                        (uv)' = u'v + uv' = 2x(3x-1) + (x^2+2) \cdot 3.
                    \]</p>
                </li>
                <li><strong>Paso 4 — Añadir derivada del término independiente:</strong> \( \dfrac{d}{dx}5x = 5. \)</li>
                <li><strong>Paso 5 — Simplificar:</strong>
                    <p class="latex-display">\[
                        q'(x) = 6x^2 - 2x + 3x^2 + 6 + 5 = 9x^2 - 2x + 11.
                    \]</p>
                </li>
                <li><strong>Comprobación:</strong> alternativa: expandir \( q(x) \) primero y derivar término a término para verificar equivalencia.</li>
            </ol>

            <!-- ==================================================
                 Ejercicios resueltos rápidos (verificación)
                 ================================================== -->
            <h3>Ejercicios resueltos breves (verificación)</h3>
            <ul>
                <li>\( \dfrac{d}{dx}[7x-4] = 7.\)</li>
                <li>\( \dfrac{d}{dx}[5x^4 + 3x^2 - 8] = 20x^3 + 6x.\)</li>
                <li>Dominio de \( 2x^5 + x \) es \( \mathbb{R} \).</li>
            </ul>

            <!-- ==================================================
                 Recursos y aplicaciones (breve)
                 ================================================== -->
            <h3>Aplicaciones breves</h3>
            <p>La derivada se interpreta en distintos contextos: velocidad (física), costo marginal (economía), sensibilidad de una variable respecto a otra (estadística, ingeniería).</p>

            <hr/>

            <p><em>Fin del contenido. Pase a la sección de ejercicios para practicar y al quiz para autoevaluación.</em></p>
        </div>
HTML
,
    /* ===========================
       EJERCICIOS (más, variados y con niveles)
       - Cada ejercicio incluye en esta estructura una 'respuesta' (puedes ocultarla en la UI).
       =========================== */
    'ejercicios' => [
        // Nivel básico
        ["enunciado" => "Calcula la derivada de \( f(x) = 5x^4 + 3x^2 - 8 \).", "respuesta" => "20x^3 + 6x"],
        ["enunciado" => "Deriva \( k(x) = 7x - 4 \).", "respuesta" => "7"],
        ["enunciado" => "¿Cuál es el dominio de \( h(x) = 2x^5 + x \)?", "respuesta" => "Todos los números reales (\\mathbb{R})"],

        // Nivel intermedio
        ["enunciado" => "Encuentra la pendiente de \( f(x) = x^3 - 2x \) en \( x=2 \).", "respuesta" => "f'(x) = 3x^2 - 2, por tanto f'(2) = 10"],
        ["enunciado" => "Deriva: \( m(x) = (x^2 + 3)(4x) \) usando la propiedad de constante factor y producto.", "respuesta" => "m(x) = 4x(x^2+3) => m'(x) = 4(x^2+3) + 4x(2x) = 12x^2 + 12"],

        // Nivel producto/cociente
        ["enunciado" => "Deriva: \( h(x) = (3x^2 - 1)(2x + 5) \).", "respuesta" => "h'(x) = 6x(2x+5) + (3x^2-1)2 => 12x^2 + 30x + 6x^2 - 2 = 18x^2 + 30x - 2 (revisar cálculo al simplificar)"],
        ["enunciado" => "Deriva el cociente: \( r(x) = \\dfrac{x^3 - 1}{x} \) (simplifica si es posible).", "respuesta" => "r(x)=x^2 - 1 => r'(x)=2x"],

        // Nivel análisis
        ["enunciado" => "Pendiente de \( p(x) = 3x^4 - x \) en \( x=1 \).", "respuesta" => "p'(x) = 12x^3 - 1, p'(1) = 11"],
        ["enunciado" => "Si \( s(t) = t^2 \) es posición, ¿cuál es la velocidad instantánea?", "respuesta" => "v(t)=s'(t)=2t"],

        // Práctica guiada extra
        ["enunciado" => "Práctica: Deriva paso a paso \( q(x) = (x^2 + 2)(3x - 1) + 5x \).", "respuesta" => "q'(x) = 9x^2 - 2x + 11 (ver práctica guiada)"],

        // Retos
        ["enunciado" => "Deriva: \( u(x) = 4(x^3 - 2x)^2 \).", "respuesta" => "u'(x)=8(x^3 - 2x)(3x^2 - 2)"],
        ["enunciado" => "Segunda derivada: Si \( f(x)=2x^3 - 3x^2 + x \), calcula \( f''(x) \).", "respuesta" => "f'(x)=6x^2 - 6x + 1; f''(x)=12x - 6"],

        // Preguntas de comprensión corta
        ["enunciado" => "¿Qué significa si \( f'(x) = 0 \) en un punto?", "respuesta" => "La pendiente de la tangente es horizontal; posible extremo o punto de inflexión"],
        ["enunciado" => "¿La derivada de un polinomio es un polinomio? (sí/no y por qué)", "respuesta" => "Sí — derivar término a término reduce el exponente; no aparecen denominadores ni raíces."],
        ["enunciado" => "¿Puede un polinomio no ser derivable en algún punto real?", "respuesta" => "No, los polinomios son diferenciables en todo \\mathbb{R}."],
    ],

    /* ===========================
       QUIZ (preguntas de opción múltiple)
       - Aumenté cantidad y variedad; respuestas correctas en 'correcta'.
       =========================== */
    'quiz' => [
        // Fundamentos
        ["pregunta" => "¿Cuál es la derivada de una función constante \( f(x)=c \)?",
         "opciones" => ["c", "1", "0", "Indefinida"], "correcta" => "0"],

        ["pregunta" => "Regla de la potencia: ¿derivada de \( x^n \)?",
         "opciones" => ["\( x^{n+1} \)", "\( n x^{n-1} \)", "\( nx^n \)", "\( x^n/n \)"], "correcta" => "\( n x^{n-1} \)"],

        ["pregunta" => "Interpretación geométrica: ¿qué representa \( f'(a) \)?",
         "opciones" => ["Área bajo la curva", "Concavidad", "Pendiente de la tangente", "Valor de la función"], "correcta" => "Pendiente de la tangente"],

        ["pregunta" => "Dominio natural de cualquier polinomio:",
         "opciones" => ["\( \\mathbb{R}^+ \)", "\( \\mathbb{Z} \)", "\( \\mathbb{R} \)", "Depende del grado"], "correcta" => "\( \\mathbb{R} \)"],

        ["pregunta" => "Si \( f'(x) > 0 \) en un intervalo, entonces \( f \):",
         "opciones" => ["Es constante", "Es decreciente", "Es creciente", "Tiene un máximo"], "correcta" => "Es creciente"],

        // Cálculo directo
        ["pregunta" => "Derivada de \( f(x)=5x^4 - 3x^2 + 7 \)",
         "opciones" => ["\( 20x^3 - 6x \)", "\( 20x^3 + 6x \)", "\( 5x^3 - 3x \)", "\( 20x^4 - 3x \)"], "correcta" => "\( 20x^3 - 6x \)"],

        ["pregunta" => "Derivada de \( g(x) = -2x^6 + 4x \)",
         "opciones" => ["\( -12x^5 + 4 \)", "\( -12x^5 \)", "\( -2x^5 + 4 \)", "\( 12x^5 + 4x \)"], "correcta" => "\( -12x^5 + 4 \)"],

        ["pregunta" => "Pendiente de \( f(x) = x^3 - 6x + 1 \) en \( x=2 \)",
         "opciones" => ["0", "6", "12", "-6"], "correcta" => "6"],

        ["pregunta" => "Derivada usando regla del producto: \( h(x)=(3x^2 - 1)(2x + 5) \)",
         "opciones" => ["\( 18x^2 + 12x - 10 \)", "\( 6x^2 + 15x - 2 \)", "\( 12x + 15 \)", "\( 18x^2 - 10 \)"], "correcta" => "\( 18x^2 + 12x - 10 \)"],

        ["pregunta" => "Derivada de \( p(x)=4(x^3 - 2x)^2 \) (forma correcta)",
         "opciones" => ["\( 4(6x^2 - 4x) \)", "\( 24x^2 - 16x \)", "\( 8(x^3 - 2x)(3x^2 - 2) \)", "Ambas formas son equivalentes"],
         "correcta" => "Ambas formas son equivalentes"],

        // Aplicaciones
        ["pregunta" => "Si \( s(t)=3t^2 - 4t + 1 \), ¿cuál es su velocidad?",
         "opciones" => ["\( 3t - 4 \)", "\( 6t - 4 \)", "\( 3t^2 - 4t \)", "\( 6t \)"], "correcta" => "\( 6t - 4 \)"],

        ["pregunta" => "En economía, la derivada de \( C(x) \) (costo total) se interpreta como:",
         "opciones" => ["Costo fijo", "Costo medio", "Costo marginal", "Ingreso total"], "correcta" => "Costo marginal"],

        ["pregunta" => "Si \( f'(x)=0 \) en todo un intervalo, \( f \) es:",
         "opciones" => ["Creciente", "Decreciente", "Constante", "No diferenciable"], "correcta" => "Constante"],

        ["pregunta" => "Puntos donde la tangente es horizontal para \( f(x) = x^3 - 3x \):",
         "opciones" => ["\( x=0 \)", "\( x=1 \)", "\( x=-1 \)", " \( x=1 \) y \( x=-1 \)"],
         "correcta" => " \( x=1 \\) y \\( x=-1 \)"],

        ["pregunta" => "Derivada de \( f(x)=8 \)",
         "opciones" => ["8", "0", "Indefinida", "No existe"], "correcta" => "0"],

        ["pregunta" => "Derivada de \( f(x)=x \)",
         "opciones" => ["0", "1", "\( x^0 \)", "Todas las anteriores"], "correcta" => "Todas las anteriores"],

        // Preguntas avanzadas / razonamiento
        ["pregunta" => "Derivada de \( k(x)=(x^2 + 2)(3x - 1) + 5x \)",
         "opciones" => ["\( 9x^2 + 8x - 2 \)", "\( 9x^2 - 2 \)", "\( 6x + 5 \)", "\( 9x^2 + 5 \)"],
         "correcta" => "\( 9x^2 + 8x - 2 \)"],

        ["pregunta" => "Si \( f(x) = x^4 - 4x^3 + 2 \), ¿en cuántos puntos de [0,3] la tangente es horizontal?",
         "opciones" => ["Ninguno", "Uno", "Dos", "Tres"], "correcta" => "Dos"],

        ["pregunta" => "Afirmación: 'La derivada de un polinomio es otro polinomio' — ¿cierto o falso?",
         "opciones" => ["Cierto", "Falso"], "correcta" => "Cierto"],

        ["pregunta" => "La derivada de segundo orden de \( f(x)=2x^3 - 3x^2 + x \) es:",
         "opciones" => ["\( 12x - 6 \)", "\( 12x + 1 \)", "\( 6x^2 - 6x + 1 \)", "\( 6x - 6 \)"], "correcta" => "\( 12x - 6 \)"]
    ],
];
/**
 * MATERIA: Pensamiento Matemático III
 * TEMA:    Puntos críticos – Máximos y mínimos locales
 * MÉTODO:  Prueba de la primera derivada
 * NIVEL:   Bachillerato / Introducción al Cálculo
 */

$lecciones[] = [
    'materia' => 'Pensamiento Matemático III',
    'slug'    => 'puntos-maximos-minimos',
    'titulo'  => 'Puntos Críticos: Máximos y Mínimos Locales',

    /* =====================================================
       CONTENIDO COMPLETO DE LA LECCIÓN (HTML + SVG + LaTeX)
       ===================================================== */
    'contenido' => <<<'HTML'

        <div class="content-header">
            <h2>Puntos Críticos: Máximos y Mínimos Locales</h2>
            <span class="materia-tag">Pensamiento Matemático III</span>
            <p class="progress-info-local">
                Objetivos: identificar puntos críticos, diferenciar máximos/mínimos locales
                mediante la prueba de la primera derivada e interpretar cambios de signo.
            </p>
        </div>

        <div class="content-body">

            <!-- ===========================================
                 DEFINICIÓN FORMAL
                 =========================================== -->
            <h3>Definición de Punto Crítico</h3>
            <p>Un <strong>punto crítico</strong> de una función \( f \) es cualquier valor \( c \) en el dominio donde se cumple:</p>
            <ul>
                <li>\( f'(c) = 0 \), o</li>
                <li>\( f'(c) \) no existe (pero \( c \) sí pertenece al dominio).</li>
            </ul>

            <p>Los puntos críticos son candidatos a:</p>
            <ul>
                <li><strong>máximos locales</strong>,</li>
                <li><strong>mínimos locales</strong>,</li>
                <li><strong>puntos de inflexión</strong> (si la derivada no cambia de signo).</li>
            </ul>

            <!-- ===========================================
                 SVG RETRO: Máximo y mínimo local
                 =========================================== -->
            <div class="visual svg-diagram">
                <svg viewBox="0 0 720 340" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="svg-title01 svg-desc01">
                    <title id="svg-title01">Máximos y mínimos locales</title>
                    <desc  id="svg-desc01">
                        Representación estilizada: curva con un máximo local y un mínimo local.
                    </desc>

                    <rect width="720" height="340" fill="#0b0b0b"/>

                    <!-- Ejes -->
                    <line x1="60" y1="280" x2="660" y2="280" stroke="#444" stroke-width="2"/>
                    <line x1="60" y1="280" x2="60"  y2="40"  stroke="#444" stroke-width="2"/>
                    <text x="670" y="285" fill="#ffcc00" font-size="14" font-family="VT323">X</text>
                    <text x="50"  y="35"  fill="#ffcc00" font-size="14" font-family="VT323">Y</text>

                    <!-- Curva -->
                    <path d="M80 240 
                             C 150 80, 260 80, 340 240
                             C 420 380, 540 40, 640 200"
                          stroke="#00ccff" stroke-width="6"
                          fill="none" stroke-linecap="round" />

                    <!-- Máximo local -->
                    <circle cx="220" cy="120" r="8" fill="#ff00ff"/>
                    <text x="240" y="110" fill="#ff00ff" font-family="VT323" font-size="14">Máximo local</text>

                    <!-- Mínimo local -->
                    <circle cx="340" cy="240" r="8" fill="#00ff00"/>
                    <text x="360" y="260" fill="#00ff00" font-family="VT323" font-size="14">Mínimo local</text>
                </svg>

                <p class="caption">Máximos y mínimos locales: puntos donde la pendiente se anula.</p>
            </div>

            <!-- ===========================================
                 PRUEBA DE LA PRIMERA DERIVADA
                 =========================================== -->
            <h3>Prueba de la Primera Derivada</h3>
            <p>
                Si \( c \) es un punto crítico con \( f'(c)=0 \), el signo de \( f' \) alrededor de \( c \) determina la naturaleza del punto.
            </p>

            <table class="table">
                <thead>
                    <tr>
                        <th>Comportamiento de \( f'(x) \)</th>
                        <th>Izquierda de \( c \)</th>
                        <th>Derecha de \( c \)</th>
                        <th>Conclusión</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Cambia de + a −</td><td>+</td><td>−</td><td>Máximo local</td></tr>
                    <tr><td>Cambia de − a +</td><td>−</td><td>+</td><td>Mínimo local</td></tr>
                    <tr><td>No cambia de signo</td><td>+</td><td>+</td><td>Inflexión</td></tr>
                    <tr><td></td><td>−</td><td>−</td><td>Inflexión</td></tr>
                </tbody>
            </table>

            <!-- ===========================================
                 SVG RETRO: Cambio de signo
                 =========================================== -->
            <div class="svg-diagram">
                <svg viewBox="0 0 720 340" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="svg-title02 svg-desc02">
                    <title id="svg-title02">Cambio de signo de la primera derivada</title>
                    <desc  id="svg-desc02">Ilustración del criterio: +→− produce máximo, −→+ produce mínimo.</desc>

                    <rect width="720" height="340" fill="#111"/>

                    <!-- Ejes -->
                    <line x1="60" y1="280" x2="660" y2="280" stroke="#ccc" stroke-width="2"/>
                    <line x1="60" y1="280" x2="60"  y2="40"  stroke="#ccc" stroke-width="2"/>

                    <text x="670" y="285" fill="#ffcc00" font-size="14">X</text>
                    <text x="48"  y="50"  fill="#ffcc00" font-size="14">Y</text>

                    <!-- Curva -->
                    <path d="M80 240 
                             Q 150 80,  220 80 
                             Q 290 80,  360 240
                             Q 430 390,  520 40
                             Q 600 60,  660 260"
                          stroke="#00ccff" stroke-width="6" fill="none"/>

                    <!-- Máximo -->
                    <circle cx="220" cy="80" r="8" fill="#ff00ff"/>
                    <text   x="240" y="75" fill="#ff00ff" font-family="VT323" font-size="13">Máximo</text>

                    <!-- Mínimo -->
                    <circle cx="360" cy="240" r="8" fill="#00ff00"/>
                    <text   x="380" y="255" fill="#00ff00" font-family="VT323" font-size="13">Mínimo</text>

                    <!-- Signos -->
                    <text x="140" y="160" fill="#fff" font-size="16">+</text>
                    <text x="260" y="160" fill="#fff" font-size="16">−</text>
                    <text x="300" y="300" fill="#fff" font-size="16">−</text>
                    <text x="420" y="160" fill="#fff" font-size="16">+</text>
                </svg>

                <p class="caption">Máximo cuando \( f' \) pasa de positivo a negativo; mínimo cuando pasa de negativo a positivo.</p>
            </div>

            <!-- ===========================================
                 EJEMPLOS DETALLADOS
                 =========================================== -->
            <h3>Ejemplos Resueltos</h3>

            <div class="ejemplo">
                <h4>Ejemplo 1: \( f(x) = x^3 - 3x \)</h4>
                <p>\( f'(x) = 3x^2 - 3 = 3(x^2 - 1) = 0 \Rightarrow x = \pm 1 \)</p>

                <p><strong>En \( x=-1 \):</strong> \( f' \) cambia de negativo a positivo → <strong>mínimo local</strong>.</p>
                <p><strong>En \( x=1 \):</strong> \( f' \) cambia de positivo a negativo → <strong>máximo local</strong>.</p>
            </div>

            <div class="ejemplo">
                <h4>Ejemplo 2: \( g(x) = x^4 - 4x^2 \)</h4>
                <p>\( g'(x) = 4x(x^2 - 2) = 0 \Rightarrow x = 0,\, x = \pm\sqrt{2} \)</p>
                <ul>
                    <li>En \( x=-\sqrt{2} \): \( f' \) cambia de + a − → máximo local.</li>
                    <li>En \( x=0 \): − a + → mínimo local.</li>
                    <li>En \( x=\sqrt{2} \): + a − → máximo local.</li>
                </ul>
            </div>

            <!-- ===========================================
                 PRÁCTICA GUIADA PASO A PASO
                 =========================================== -->
            <h3>Práctica Guiada (Paso a paso)</h3>
            <p>Clasifiquemos los puntos críticos de \( h(x) = x^3 - 6x^2 + 9x \).</p>

            <ol>
                <li><strong>Paso 1:</strong> Derivar.  
                    \[
                        h'(x) = 3x^2 - 12x + 9 = 3(x^2 - 4x + 3).
                    \]
                </li>

                <li><strong>Paso 2:</strong> Resolver \( h'(x) = 0 \).  
                    \[
                        x^2 - 4x + 3 = 0 \Rightarrow x=1,\; x=3.
                    \]
                </li>

                <li><strong>Paso 3:</strong> Analizar signo alrededor.  
                    <ul>
                        <li>En \( x=1 \): \( h' \) pasa de + a − → <strong>máximo local</strong>.</li>
                        <li>En \( x=3 \): \( h' \) pasa de − a + → <strong>mínimo local</strong>.</li>
                    </ul>
                </li>

                <li><strong>Conclusión:</strong>  
                    Máximo en \( x=1 \) y mínimo en \( x=3 \).</li>
            </ol>

        </div> <!-- cierre content-body -->

HTML
,

    /* =====================================
       EJERCICIOS AMPLIADOS
       ===================================== */
    'ejercicios' => [
        ["enunciado" => "Halla y clasifica los puntos críticos de \( f(x)=x^3 - 6x^2 + 9x \).", "respuesta" => "x=1 máximo, x=3 mínimo"],
        ["enunciado" => "Determina extremos de \( f(x)=x^4 - 4x^2 + 3 \).", "respuesta" => "x=0 mínimo, x=±√2 máximos"],
        ["enunciado" => "Clasifica el punto crítico de \( f(x)=x^3 \).", "respuesta" => "x=0 es inflexión (derivada no cambia de signo)"],
        ["enunciado" => "Puntos críticos de \( f(x)=(x-2)^2(x+1) \).", "respuesta" => "x=2 mínimo, x=-1/3 inflexión"],
        ["enunciado" => "Para \( f(x)=x + 4/x \), x>0, halla el mínimo.", "respuesta" => "x=2"],
        ["enunciado" => "Clasifica los puntos de \( f(x)=x^4 - 8x^2 + 16 \).", "respuesta" => "x=0 mínimo, x=±2 máximos"],
        ["enunciado" => "Extremos de \( \sin x \) en [0,2π].", "respuesta" => "máximo: π/2; mínimo: 3π/2"],
        ["enunciado" => "Puntos críticos de \( f(x)=|x^2 - 4| \).", "respuesta" => "x=0, ±2 (mínimos)"],
        ["enunciado" => "Clasifica x=0 en \( f(x)=x^{2/3} \).", "respuesta" => "mínimo local (cúspide)"],
        ["enunciado" => "Extremos de \( f(x)=x^5 - 5x \).", "respuesta" => "x=±1 extremos, x=0 inflexión"],
        ["enunciado" => "Mínimo de \( f(x)=e^x + e^{-x} \).", "respuesta" => "x=0"],
        ["enunciado" => "Extremos de \( f(x)=x^3 -12x + 5 \).", "respuesta" => "x=-2 máximo, x=2 mínimo"],
        ["enunciado" => "Clasifica puntos de \( f(x)=(x^2 -1)^2 \).", "respuesta" => "x=±1 mínimos, x=0 máximo"],
        ["enunciado" => "Puntos críticos de \( f(x)=x + \sin x \).", "respuesta" => "no hay (f'=1+cos x>0)"],
        ["enunciado" => "Número de puntos críticos de \( f(x)=x^6 - 15x^4 + 40 \).", "respuesta" => "5"],
        ["enunciado" => "Clasifica x=0 en \( f(x)=x^2|x| \).", "respuesta" => "mínimo (cúspide)"],
        ["enunciado" => "Máximo de \( f(x)=-x^2 + 6x -5 \).", "respuesta" => "x=3"],
        ["enunciado" => "Clasifica x=0 en \( f(x)=\sqrt[3]{x^2} \).", "respuesta" => "mínimo local"],
        ["enunciado" => "Extremos de \( f(x)=x^5 - 10x^3 + 9x \).", "respuesta" => "x=±1 extremos, x=0 inflexión"]
    ],

    /* =====================================
       QUIZ AMPLIADO (FORMAL)
       ===================================== */
    'quiz' => [
        ["pregunta" => "Un punto crítico ocurre cuando", "opciones" => ["f(x)=0", "f'(x)=0 o no existe", "f''(x)=0", "f(x)→∞"], "correcta" => "f'(x)=0 o no existe"],
        ["pregunta" => "Si f' cambia de + a − en c, entonces es", "opciones" => ["mínimo", "máximo", "inflexión", "no crítico"], "correcta" => "máximo"],
        ["pregunta" => "Si f' no cambia de signo, el punto es", "opciones" => ["máximo", "mínimo", "inflexión", "sin clasificar"], "correcta" => "inflexión"],
        ["pregunta" => "Para f(x)=x², x=0 es", "opciones" => ["máximo", "mínimo", "inflexión", "no crítico"], "correcta" => "mínimo"],
        ["pregunta" => "Para f(x)=x³, x=0 es", "opciones" => ["máximo", "mínimo", "inflexión", "no crítico"], "correcta" => "inflexión"],
        ["pregunta" => "En f(x)=|x|, x=0 es", "opciones" => ["máximo", "mínimo", "cúspide", "inflexión"], "correcta" => "mínimo"],
        ["pregunta" => "¿Cuántos puntos críticos tiene f(x)=x⁴?", "opciones" => ["0","1","2","4"], "correcta" => "1"],
        ["pregunta" => "Si f'>0 a ambos lados de c, c es", "opciones" => ["máximo","mínimo","inflexión","crítico"], "correcta" => "inflexión"],
        ["pregunta" => "La prueba basada en el signo de f' se llama", "opciones" => ["segunda derivada","primera derivada","criterio básico","test de Euler"], "correcta" => "primera derivada"],
        ["pregunta" => "Un polinomio de grado n puede tener a lo sumo", "opciones" => ["n","n−1","n−2","2n"], "correcta" => "n−1"],
        ["pregunta" => "x=1 en f(x)=(x−1)²(x+2) es", "opciones" => ["máximo","mínimo","inflexión","cúspide"], "correcta" => "mínimo"],
        ["pregunta" => "Máximo de sen(x) en [0,2π] ocurre en", "opciones" => ["0","π/2","π","3π/2"], "correcta" => "π/2"],
        ["pregunta" => "x=0 en x^{1/3} es", "opciones" => ["máximo","mínimo","cúspide","inflexión"], "correcta" => "cúspide"],
        ["pregunta" => "Si f'<0 a la izquierda y >0 a la derecha de c", "opciones" => ["máximo","mínimo","inflexión","no crítico"], "correcta" => "mínimo"],
        ["pregunta" => "¿Puede un punto crítico no ser extremo?", "opciones" => ["nunca","solo en pares","sí","solo en cúspides"], "correcta" => "sí"],
        ["pregunta" => "x=0 en e^{-x²} es", "opciones" => ["mínimo","máximo global","inflexión","no crítico"], "correcta" => "máximo global"],
        ["pregunta" => "¿Cuántos mínimos tiene f(x)=(x²−1)²?", "opciones" => ["0","1","2","3"], "correcta" => "2"],
        ["pregunta" => "En f(x)=x+1/x, x>0, mínimo en", "opciones" => ["1","2","−1","no existe"], "correcta" => "1"],
        ["pregunta" => "Un punto donde f' no existe puede ser", "opciones" => ["solo máximo","solo mínimo","cúspide o vértice","nunca extremo"], "correcta" => "cúspide o vértice"],
        ["pregunta" => "x=0 en x^5 − 5x es", "opciones" => ["máximo","mínimo","inflexión","cúspide"], "correcta" => "inflexión"],
        ["pregunta" => "¿Cuántos puntos críticos tiene x^6 − 15x^4 + 40?", "opciones" => ["1","3","5","7"], "correcta" => "5"],
        ["pregunta" => "En f(x)=−x², x=0 es", "opciones" => ["mínimo","máximo global","inflexión","no crítico"], "correcta" => "máximo global"],
        ["pregunta" => "Si f'(c)=0 y f''(c)>0", "opciones" => ["máximo","mínimo","inflexión","indeterminado"], "correcta" => "mínimo"],
        ["pregunta" => "Un polinomio de grado 5 tiene a lo sumo", "opciones" => ["3","4","5","6"], "correcta" => "4"],
        ["pregunta" => "¿x=0 crítico en tan(x)? (−π/2,π/2)", "opciones" => ["sí","no","solo en 0","indeterminado"], "correcta" => "no"],
        ["pregunta" => "En √x, x=0 es", "opciones" => ["máximo","mínimo","cúspide","no crítico"], "correcta" => "mínimo"],
        ["pregunta" => "Un punto crítico donde f es continua pero no derivable puede ser", "opciones" => ["singular","cúspide","vértice","todas"], "correcta" => "todas"],
        ["pregunta" => "x=±2 en x^4 − 8x² + 16 son", "opciones" => ["mínimos","máximos","inflexión","no críticos"], "correcta" => "máximos"],
        ["pregunta" => "Cambio de signo de f' es condición", "opciones" => ["suficiente","necesaria","ambas","ninguna"], "correcta" => "suficiente"],
        ["pregunta" => "¿Cuántos máximos puede tener un cúbico?", "opciones" => ["0","1","2","3"], "correcta" => "1"]
    ]
];
/**
 * MATERIA: Ecosistemas
 * TEMA:    Niveles de Organización Biológica + Analogías Celulares
 * ENFOQUE: Relación entre orgánulos y órganos humanos con visual retro–neón
 * NIVEL:   Intermedio
 */

$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'niveles-organizacion-celulas-materia-relacion-organos',
    'titulo' => 'Niveles de Organización Biológica: De la Célula al Ecosistema',

    /* ==========================================================================
       CONTENIDO PRINCIPAL DE LA LECCIÓN
       Se mantiene tu estilo retro–neón y se expande con más ejemplos, secciones,
       explicaciones formales y diagramas SVG completamente rediseñados.
       ========================================================================== */
    'contenido' => <<<'HTML'

<div class="text-center display-5 mb-4 neon-title">NIVELES DE ORGANIZACIÓN BIOLÓGICA</div>

<p class="intro">
    Los seres vivos están estructurados en niveles que van desde lo más pequeño,
    como átomos y moléculas, hasta lo más grande, como ecosistemas y la biosfera.
    Comprender esta jerarquía permite analizar cómo las partes pequeñas colaboran
    para formar sistemas complejos y funcionales.
</p>

<h3 class="section-title">I. Niveles de Organización Biológica</h3>

<p>
    Los 12 niveles clásicos de organización biológica, ordenados desde la menor
    hasta la mayor complejidad, son los siguientes:
</p>

<ol class="niveles-list">
    <li><strong>Átomo</strong> — partículas básicas de la materia.</li>
    <li><strong>Molécula</strong> — unión química de átomos (agua, glucosa, ADN).</li>
    <li><strong>Orgánulo</strong> — estructuras funcionales dentro de la célula (núcleo, mitocondrias).</li>
    <li><strong>Célula</strong> — unidad mínima de la vida.</li>
    <li><strong>Tejido</strong> — conjunto de células semejantes.</li>
    <li><strong>Órgano</strong> — conjunto de tejidos coordinados.</li>
    <li><strong>Sistema de órganos</strong> — órganos trabajando en conjunto.</li>
    <li><strong>Organismo</strong> — individuo completo.</li>
    <li><strong>Población</strong> — individuos de la misma especie en un área.</li>
    <li><strong>Comunidad</strong> — varias poblaciones interactuando.</li>
    <li><strong>Ecosistema</strong> — comunidad + factores abióticos.</li>
    <li><strong>Biosfera</strong> — conjunto de todos los ecosistemas del planeta.</li>
</ol>

<div class="visual static-image mt-3">
    <img src="assets/img/niveles_de_organizacion_vida.png" alt="Niveles de organización biológica">
    <p class="caption">Representación jerárquica de los niveles de organización biológica.</p>
</div>

<h3 class="section-title">II. Analogías entre Orgánulos Celulares y Órganos Humanos</h3>

<p>
    Para comprender mejor la función de los orgánulos celulares, se emplean
    analogías con órganos humanos. Esta estrategia didáctica facilita reconocer
    similitudes funcionales entre la escala microscópica (células) y la escala
    macroscópica (órganos y sistemas del cuerpo).
</p>

<table class="table table-bordered text-center tabla-analogias">
    <thead class="table-neon">
        <tr>
            <th>Orgánulo Celular</th>
            <th>Función Principal</th>
            <th>Órgano Humano Análogo</th>
            <th>Razón de la Analogía</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Núcleo</td>
            <td>Control y almacenamiento genético</td>
            <td>Cerebro</td>
            <td>Ambos dirigen actividades y procesan información</td>
        </tr>
        <tr>
            <td>Mitocondrias</td>
            <td>Producción de energía (ATP)</td>
            <td>Corazón / Pulmones</td>
            <td>Ambos suministran energía o recursos vitales</td>
        </tr>
        <tr>
            <td>Membrana celular</td>
            <td>Protección y regulación del intercambio</td>
            <td>Piel</td>
            <td>Controlan qué entra y qué sale</td>
        </tr>
        <tr>
            <td>Ribosomas</td>
            <td>Síntesis de proteínas</td>
            <td>Hígado</td>
            <td>Ambos producen moléculas esenciales</td>
        </tr>
        <tr>
            <td>Retículo endoplasmático</td>
            <td>Transporte interno</td>
            <td>Sistema circulatorio</td>
            <td>Transportan sustancias dentro del “organismo”</td>
        </tr>
    </tbody>
</table>

<div class="visual">
    <img src="assets/img/areas_funcion_cerebro.png" alt="Cerebro humano">
    <p class="caption">El núcleo celular se asemeja al cerebro por su función directiva.</p>
</div>

<h3 class="section-title">III. Ejemplos Detallados de Analogías</h3>

<div class="ejemplo">
    <h4>1. Núcleo ⇢ Cerebro</h4>
    <p>
        El núcleo almacena el ADN, que contiene toda la información genética.
        Del mismo modo, el cerebro procesa señales nerviosas y coordina funciones.
        Ambos actúan como centros de control.
    </p>
</div>

<div class="ejemplo">
    <h4>2. Mitocondrias ⇢ Corazón</h4>
    <p>
        Las mitocondrias generan ATP mediante respiración celular. El corazón
        suministra sangre cargada de oxígeno y nutrientes. Ambos proporcionan la
        energía que permite el funcionamiento del sistema.
    </p>
</div>

<div class="ejemplo">
    <h4>3. Membrana celular ⇢ Piel</h4>
    <p>
        La membrana celular regula el intercambio de sustancias y protege la célula.
        La piel actúa como barrera física, defensiva y de regulación del medio interno.
    </p>
</div>

<div class="ejemplo">
    <h4>4. Ribosomas ⇢ Hígado</h4>
    <p>
        Los ribosomas sintetizan proteínas a partir de instrucciones genéticas.
        El hígado fabrica múltiples proteínas esenciales para el organismo.
    </p>
</div>

<h3 class="section-title">IV. Diagrama Retro-Neón: Célula = Cuerpo Humano</h3>

<div class="svg-diagram">
    <!-- Nuevo diagrama SVG retro–neón optimizado y documentado -->
    <svg width="400" height="300" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="300" fill="#000"/>
        <text x="200" y="30" text-anchor="middle" fill="#00ffff" font-size="16" font-weight="bold">
            Analogía: Célula ≈ Cuerpo Humano
        </text>

        <!-- Membrana -->
        <ellipse cx="200" cy="150" rx="150" ry="90"
            fill="none" stroke="#00e5ff" stroke-width="3" stroke-dasharray="5,5" />

        <!-- Núcleo -->
        <circle cx="200" cy="150" r="40"
            fill="#ff00ff" stroke="#00e5ff" stroke-width="2" />
        <text x="200" y="150" text-anchor="middle" fill="#fff" font-size="12" font-weight="bold">
            NÚCLEO
        </text>

        <!-- Mitocondria -->
        <ellipse cx="120" cy="110" rx="25" ry="14"
            transform="rotate(40 120 110)"
            fill="#ffd54f" stroke="#ff1744" stroke-width="2" />

        <!-- Ribosomas -->
        <circle cx="290" cy="180" r="8" fill="#00e676"/>
        <circle cx="270" cy="170" r="8" fill="#00e676"/>

        <!-- Neon glow -->
        <ellipse cx="200" cy="150" rx="155" ry="93" stroke="#00e5ff"
            stroke-width="1" fill="none" opacity="0.5">
            <animate attributeName="opacity"
                values="0.3;1;0.3"
                dur="2s"
                repeatCount="indefinite" />
        </ellipse>
    </svg>
    <p class="caption">Relación funcional entre orgánulos y órganos humanos.</p>
</div>

<h3 class="section-title">V. Diagrama Piramidal de los Niveles de Organización</h3>

<div class="svg-diagram">
    <svg width="400" height="340" viewBox="0 0 400 340" xmlns="http://www.w3.org/2000/svg">
        <rect width="400" height="340" fill="#101520"/>

        <!-- Biosfera -->
        <rect x="50"  y="30"  width="300" height="32" fill="#d81b60"/>
        <text x="200" y="52" text-anchor="middle" fill="#fff" font-size="18">BIOSFERA</text>

        <!-- Ecosistema -->
        <rect x="70"  y="80"  width="260" height="32" fill="#00acc1"/>
        <text x="200" y="102" text-anchor="middle" fill="#000" font-size="18">ECOSISTEMA</text>

        <!-- Comunidad -->
        <rect x="90"  y="130" width="220" height="32" fill="#66bb6a"/>
        <text x="200" y="152" text-anchor="middle" fill="#000" font-size="18">COMUNIDAD</text>

        <!-- Población -->
        <rect x="110" y="180" width="180" height="32" fill="#fdd835"/>
        <text x="200" y="202" text-anchor="middle" fill="#000" font-size="18">POBLACIÓN</text>

        <!-- Organismo -->
        <rect x="130" y="230" width="140" height="32" fill="#e53935"/>
        <text x="200" y="252" text-anchor="middle" fill="#fff" font-size="18">ORGANISMO</text>

        <text x="200" y="300" text-anchor="middle"
            fill="#00e5ff" font-size="16" font-weight="bold">
            Niveles de Organización Biológica
        </text>
    </svg>
</div>

HTML
    ,

    /* ==========================================================================
       EJERCICIOS
       ========================================================================== */
    'ejercicios' => [
        ["enunciado" => "Ordena los niveles: célula → ecosistema", "respuesta" => "Célula, tejido, órgano, sistema, organismo, población, comunidad, ecosistema"],
        ["enunciado" => "Órgano análogo a la mitocondria", "respuesta" => "Corazón o pulmones"],
        ["enunciado" => "Justifica por qué el núcleo ≈ cerebro", "respuesta" => "Ambos coordinan funciones y almacenan información"],
        ["enunciado" => "Nivel con interacción entre especies", "respuesta" => "Comunidad"],
        ["enunciado" => "Orgánulo y órgano análogo", "respuesta" => "Membrana → piel"],
        ["enunciado" => "Nivel con factores abióticos", "respuesta" => "Ecosistema"],
        ["enunciado" => "Si célula fuera ciudad, núcleo sería…", "respuesta" => "Ayuntamiento"],
        ["enunciado" => "Grupo de lobos = ¿qué nivel?", "respuesta" => "Población"],
        ["enunciado" => "Tejidos presentes en el corazón", "respuesta" => "Muscular, conectivo, epitelial"],
        ["enunciado" => "Razón de la analogía membrana = piel", "respuesta" => "Protección y regulación del intercambio"],
        ["enunciado" => "Consecuencia de eliminar núcleo", "respuesta" => "La célula deja de funcionar o muere"],
        ["enunciado" => "Analogía lisosomas =", "respuesta" => "Estómago o sistema inmunitario"],
    ],

    /* ==========================================================================
       QUIZ (30 preguntas)
       ========================================================================== */
    'quiz' => [
        ["pregunta" => "¿Nivel básico de la vida?", "opciones" => ["Átomo", "Célula", "Órgano", "Biosfera"], "correcta" => "Célula"],
        ["pregunta" => "El núcleo es análogo al...", "opciones" => ["Corazón", "Cerebro", "Piel", "Pulmones"], "correcta" => "Cerebro"],
        ["pregunta" => "Nivel que incluye factores abióticos", "opciones" => ["Población", "Comunidad", "Ecosistema", "Organismo"], "correcta" => "Ecosistema"],
        ["pregunta" => "Grupo de células similares", "opciones" => ["Tejido", "Órgano", "Sistema", "Molécula"], "correcta" => "Tejido"],
        ["pregunta" => "Mitocondria ≈", "opciones" => ["Cerebro", "Corazón", "Piel", "Hígado"], "correcta" => "Corazón"],
        ["pregunta" => "Un cardumen es una…", "opciones" => ["Población", "Comunidad", "Ecosistema", "Organismo"], "correcta" => "Población"],
        ["pregunta" => "La membrana corresponde a la…", "opciones" => ["Piel", "Cerebro", "Huesos", "Sangre"], "correcta" => "Piel"],
        ["pregunta" => "Interacción de varias especies", "opciones" => ["Comunidad", "Población", "Ecosistema", "Organismo"], "correcta" => "Comunidad"],
        ["pregunta" => "Retículo endoplasmático ≈", "opciones" => ["Sistema nervioso", "Sistema circulatorio", "Esqueleto", "Pulmones"], "correcta" => "Sistema circulatorio"],
        ["pregunta" => "Nivel más grande", "opciones" => ["Ecosistema", "Biosfera", "Organismo", "Comunidad"], "correcta" => "Biosfera"],
        ["pregunta" => "Los ribosomas producen…", "opciones" => ["Energía", "Proteínas", "ADN", "Vitaminas"], "correcta" => "Proteínas"],
        ["pregunta" => "Bosque con clima y animales es…", "opciones" => ["Población", "Comunidad", "Ecosistema", "Organismo"], "correcta" => "Ecosistema"],
        ["pregunta" => "El ADN está en el…", "opciones" => ["Mitocondria", "Núcleo", "Citoplasma", "Ribosoma"], "correcta" => "Núcleo"],
        ["pregunta" => "Un solo humano es…", "opciones" => ["Población", "Organismo", "Comunidad", "Biosfera"], "correcta" => "Organismo"],
        ["pregunta" => "Lisosomas ≈", "opciones" => ["Estómago", "Cerebro", "Piel", "Corazón"], "correcta" => "Estómago"],
        ["pregunta" => "Un conjunto de una sola especie", "opciones" => ["Comunidad", "Población", "Ecosistema", "Órgano"], "correcta" => "Población"],
        ["pregunta" => "Citoplasma ≈", "opciones" => ["Aire", "Sangre", "Espacio interno del cuerpo", "Huesos"], "correcta" => "Espacio interno del cuerpo"],
        ["pregunta" => "Conjunto de órganos", "opciones" => ["Tejido", "Sistema", "Organismo", "Molécula"], "correcta" => "Sistema"],
        ["pregunta" => "La biosfera incluye…", "opciones" => ["Solo océanos", "Toda la vida", "Solo tierra", "Solo plantas"], "correcta" => "Toda la vida"],
        ["pregunta" => "Quitar el núcleo produce…", "opciones" => ["Nada", "Muerte celular", "División", "Mitosis"], "correcta" => "Muerte celular"],
        ["pregunta" => "Ejemplo de tejido", "opciones" => ["Pulmón", "Músculo", "Cerebro", "Corazón"], "correcta" => "Músculo"],
        ["pregunta" => "Interacción lobos–ciervos", "opciones" => ["Población", "Comunidad", "Ecosistema", "Biosfera"], "correcta" => "Comunidad"],
        ["pregunta" => "Aparato de Golgi ≈", "opciones" => ["Correo", "Banco", "Hospital", "Bomba"], "correcta" => "Correo"],
        ["pregunta" => "Humanos en ciudad", "opciones" => ["Población", "Comunidad", "Ecosistema", "Biosfera"], "correcta" => "Población"],
        ["pregunta" => "Células nerviosas forman tejido…", "opciones" => ["Muscular", "Nervioso", "Epidérmico", "Conectivo"], "correcta" => "Nervioso"],
        ["pregunta" => "Nivel más pequeño con vida", "opciones" => ["Átomo", "Molécula", "Célula", "Orgánulo"], "correcta" => "Célula"],
        ["pregunta" => "Ejemplo de sistema", "opciones" => ["Hígado", "Cerebro", "Sistema digestivo", "Piel"], "correcta" => "Sistema digestivo"],
        ["pregunta" => "La piel es tejido…", "opciones" => ["Epitelial", "Muscular", "Óseo", "Conectivo"], "correcta" => "Epitelial"],
        ["pregunta" => "Clima, suelo y agua son parte de…", "opciones" => ["Población", "Comunidad", "Ecosistema", "Organismo"], "correcta" => "Ecosistema"],
        ["pregunta" => "En la célula-fábrica, el núcleo es…", "opciones" => ["Obrero", "Jefe", "Máquina", "Puerta"], "correcta" => "Jefe"],
    ]
];
// ========================================
// materia: ECOSISTEMAS
// Sub-tema: Leyes de la Termodinámica (Versión Maximizada Retro–Neón)
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'leyes-termodinamica',
    'titulo' => 'Leyes de la Termodinámica en Ecosistemas: Energía, Calor y Entropía [Retro-Neón]',

    /* ================================================================
       CONTENIDO MAXIMIZADO — Estilo serio + diseño retro–neón
       Se añadieron: explicaciones ampliadas, diagramas SVG nuevos,
       ejemplos extendidos y secciones más completas.
       ================================================================ */
    'contenido' => <<<'HTML'

<h2 class="neon-title text-center mb-4">Leyes de la Termodinámica en Ecosistemas</h2>

<p>
Las leyes de la termodinámica describen cómo la energía se mueve, se transforma
y se pierde en forma de calor. En los ecosistemas, estas leyes permiten entender
por qué la energía fluye en una sola dirección, por qué los niveles tróficos son
pocos y por qué la eficiencia nunca es perfecta.
</p>

<hr class="divider-neon">

<!-- ========================================= -->
<!-- PRIMERA LEY: CONSERVACIÓN DE LA ENERGÍA -->
<!-- ========================================= -->

<h3 class="section-title">I. Primera Ley de la Termodinámica: Conservación de la Energía</h3>

<p>
La energía <strong>no se crea ni se destruye</strong>; simplemente cambia de forma.
En un ecosistema, la energía ingresa principalmente como <strong>luz solar</strong>,
es capturada por los productores, convertida en energía química, transferida entre
consumidores y finalmente liberada como <strong>calor</strong>.
</p>

<p><strong>Ecuación clásica:</strong>  
\( \Delta U = Q - W \)</p>

<p>
En biología suele expresarse como:
</p>

<p class="formula-neon text-center">
<strong>Energía absorbida = Energía almacenada + Energía perdida como calor</strong>
</p>

<div class="visual">
    <img src="assets/img/leyes_termondinamica.png" alt="Leyes de termodinámica en biología">
    <p class="caption">Transformaciones energéticas en sistemas vivos.</p>
</div>

<div class="visual">
    <img src="assets/img/flujo_energia_eco.1" alt="Flujo de energía en ecosistemas">
    <p class="caption">La energía fluye y siempre termina disipándose como calor.</p>
</div>

<div class="visual">
    <img src="assets/img/piramide_energia.jpg" alt="Pirámide energética">
    <p class="caption">La energía disminuye conforme avanza por los niveles tróficos.</p>
</div>

<hr class="divider-neon">

<!-- ========================================= -->
<!-- SEGUNDA LEY: ENTROPÍA -->
<!-- ========================================= -->

<h3 class="section-title">II. Segunda Ley de la Termodinámica: Aumento de Entropía</h3>

<p>
Todo proceso natural provoca un incremento en la <strong>entropía</strong> del sistema
y de su entorno. La entropía se asocia al <strong>desorden</strong> y a la dispersión de
energía. Por ello, ninguna transferencia energética es 100% eficiente.
</p>

<p>
En ecología, esta ley se refleja en que solo alrededor del <strong>10%</strong> de la energía
es transferida de un nivel trófico al siguiente.
</p>

<p class="formula-neon text-center">
<strong>Regla del 10%:</strong>  
\( E_{n+1} = 0.1 \times E_n \)
</p>

<div class="visual">
    <img src="assets/img/piramide_energia.jpg" alt="Leyes en ecosistemas">
    <p class="caption">Cada nivel trófico pierde energía como calor.</p>
</div>

<div class="visual">
    <img src="assets/img/energy_flow_in_an_ecosystem.jpg" alt="Flujo de energía con entropía">
    <p class="caption">La mayor parte de la energía se dispersa como calor.</p>
</div>

<hr class="divider-neon">

<!-- ========================================= -->
<!-- EJEMPLOS DETALLADOS -->
<!-- ========================================= -->

<h3 class="section-title">III. Ejemplos Aplicados</h3>

<div class="ejemplo">
    <h4>Ejemplo 1: Fotosíntesis</h4>
    <p>
    Luz solar → glucosa (energía química).  
    <strong>Primera ley:</strong> la energía cambia de forma.  
    <strong>Segunda ley:</strong> solo 1–2% de la luz queda almacenada, el resto se pierde como calor.
    </p>
</div>

<div class="ejemplo">
    <h4>Ejemplo 2: Cadena Trófica</h4>
    <p>
    1000 J en plantas → 100 J en herbívoro → 10 J en carnívoro → 1 J en depredador ápice.  
    <strong>El 99.9% se dispersa como calor.</strong>
    </p>
</div>

<div class="ejemplo">
    <h4>Ejemplo 3: Respiración Celular</h4>
    <p>
    Glucosa + O₂ → ATP + CO₂ + H₂O + <strong>calor</strong>.  
    La energía nunca desaparece; solo se transforma.
    </p>
</div>

<div class="ejemplo">
    <h4>Ejemplo 4: Descomposición</h4>
    <p>
    Restos orgánicos → energía química → calor + CO₂.  
    La entropía aumenta de forma significativa.
    </p>
</div>

<hr class="divider-neon">

<!-- ========================================= -->
<!-- DIAGRAMA SVG RETRO–NEÓN -->
<!-- ========================================= -->

<h3 class="section-title">IV. Diagrama Retro-Neón: Flujo de Energía</h3>

<div class="svg-diagram">
<svg width="420" height="300" viewBox="0 0 420 300" xmlns="http://www.w3.org/2000/svg">

    <!-- Fondo -->
    <rect width="420" height="300" fill="#000"/>

    <!-- Título -->
    <text x="210" y="30" text-anchor="middle"
          fill="#00e5ff" font-size="16" font-weight="bold">
        FLUJO DE ENERGÍA EN UN ECOSISTEMA
    </text>

    <!-- Sol -->
    <circle cx="60" cy="140" r="30" fill="#ffeb3b" stroke="#fdd835" stroke-width="3"/>
    <text x="60" y="145" text-anchor="middle" fill="#000" font-weight="bold">Sol</text>

    <!-- Flecha a productores -->
    <line x1="90" y1="140" x2="160" y2="140" stroke="#00e5ff" stroke-width="3"/>
    <polygon points="160,140 150,135 150,145" fill="#00e5ff"/>

    <!-- Productores -->
    <rect x="160" y="120" width="90" height="40" fill="#4caf50"/>
    <text x="205" y="145" text-anchor="middle" fill="#fff">Productores</text>

    <!-- Flecha a consumidores -->
    <line x1="250" y1="140" x2="320" y2="140" stroke="#ff00ff" stroke-width="3"/>
    <polygon points="320,140 310,135 310,145" fill="#ff00ff"/>

    <!-- Consumidores -->
    <rect x="320" y="120" width="90" height="40" fill="#e53935"/>
    <text x="365" y="145" text-anchor="middle" fill="#fff">Consumidores</text>

    <!-- Flecha calor -->
    <line x1="205" y1="160" x2="205" y2="220" stroke="#ff6f00" stroke-width="3"/>
    <polygon points="205,220 200,210 210,210" fill="#ff6f00"/>
    <text x="215" y="195" fill="#ff6f00" font-size="12">Calor</text>

</svg>
<p class="caption">La energía fluye en una sola dirección y se disipa como calor.</p>
</div>

HTML
    ,

    /* ================================================================
       EJERCICIOS — 12 actividades aumentadas
       ================================================================ */
    'ejercicios' => [
        ["enunciado" => "Explica la primera ley con un ejemplo de ecosistema", "respuesta" => "Luz → energía química → movimiento → calor. La energía cambia de forma, no se crea ni se destruye."],
        ["enunciado" => "¿Por qué solo ~10% de energía pasa al siguiente nivel trófico?", "respuesta" => "Por el aumento de entropía: respiración, pérdida de calor, movimiento, digestión."],
        ["enunciado" => "Ejemplo de transformación energética en una planta", "respuesta" => "Luz → energía química (glucosa)."],
        ["enunciado" => "Ley que explica la ineficiencia energética", "respuesta" => "Segunda ley de la termodinámica."],
        ["enunciado" => "Si un productor tiene 5000 J, ¿cuánto recibe un carnívoro secundario?", "respuesta" => "5000 × 0.1 × 0.1 = 50 J."],
        ["enunciado" => "Razón por la que no hay cadenas de 10 niveles", "respuesta" => "La energía se reduce drásticamente; sería insuficiente para sostener vida."],
        ["enunciado" => "Tres formas de pérdida de energía en un herbívoro", "respuesta" => "Respiración, movimiento, calor corporal."],
        ["enunciado" => "Ecosistema recibe 10000 J de luz, ¿cuánto llega al terciario?", "respuesta" => "10000 × 0.1³ = 10 J."],
        ["enunciado" => "¿Qué ocurre con la energía que “desaparece”?", "respuesta" => "Se transforma en calor; no desaparece."],
        ["enunciado" => "Importancia de los descomponedores", "respuesta" => "Reciclan energía y nutrientes, evitando acumulación de materia muerta."],
        ["enunciado" => "Águila come un conejo de 200 J; ¿cuánto se usa directamente?", "respuesta" => "≈20 J; el resto es calor."],
        ["enunciado" => "Ley que impide que la Tierra “pierda” energía total", "respuesta" => "Primera ley: la energía no se destruye."],
    ],

    /* ================================================================
       QUIZ — 30 preguntas
       ================================================================ */
    'quiz' => [
        ["pregunta" => "La primera ley dice que la energía...", "opciones" => ["Se crea", "Se destruye", "Se transforma", "Desaparece"], "correcta" => "Se transforma"],
        ["pregunta" => "La segunda ley involucra aumento de...", "opciones" => ["Orden", "Entropía", "Masa", "Velocidad"], "correcta" => "Entropía"],
        ["pregunta" => "En ecosistemas, la energía se pierde como...", "opciones" => ["Luz", "Calor", "Sonido", "Materia"], "correcta" => "Calor"],
        ["pregunta" => "Ley que explica cadenas tróficas cortas", "opciones" => ["Primera", "Segunda", "Tercera", "Ninguna"], "correcta" => "Segunda"],
        ["pregunta" => "Solo ___% pasa al siguiente nivel", "opciones" => ["50%", "25%", "10%", "1%"], "correcta" => "10%"],
        ["pregunta" => "Fotosíntesis transforma energía...", "opciones" => ["Química → luz", "Luz → química", "Calor → movimiento", "Sonido → química"], "correcta" => "Luz → química"],
        ["pregunta" => "La entropía mide...", "opciones" => ["Orden", "Desorden", "Temperatura", "Oxígeno"], "correcta" => "Desorden"],
        ["pregunta" => "De 1000 J en plantas, el herbívoro recibe...", "opciones" => ["1000 J", "500 J", "100 J", "10 J"], "correcta" => "100 J"],
        ["pregunta" => "La energía perdida en respiración es...", "opciones" => ["Luz", "Calor", "Sonido", "Materia"], "correcta" => "Calor"],
        ["pregunta" => "Ley que permite que el sol sostenga vida", "opciones" => ["Primera", "Segunda", "Ambas", "Ninguna"], "correcta" => "Ambas"],
        ["pregunta" => "Los descomponedores liberan energía como...", "opciones" => ["Luz", "Calor", "Sonido", "Electricidad"], "correcta" => "Calor"],
        ["pregunta" => "La regla del 10% se basa en la...", "opciones" => ["Primera ley", "Segunda ley", "Física cuántica", "Herencia"], "correcta" => "Segunda ley"],
        ["pregunta" => "Un carnívoro secundario recibe ___ de la energía inicial", "opciones" => ["10%", "1%", "0.1%", "100%"], "correcta" => "1%"],
        ["pregunta" => "Glucosa → músculos produce...", "opciones" => ["Luz", "Movimiento", "Sonido", "Iones"], "correcta" => "Movimiento"],
        ["pregunta" => "La primera ley también se llama...", "opciones" => ["Ley de entropía", "Ley de conservación", "Ley del desorden", "Ley metabólica"], "correcta" => "Ley de conservación"],
        ["pregunta" => "La energía fluye en dirección...", "opciones" => ["Cíclica", "Bidireccional", "Unidireccional", "Circular"], "correcta" => "Unidireccional"],
        ["pregunta" => "La energía de excrementos la usan...", "opciones" => ["Plantas", "Descomponedores", "Herbívoros", "Carnívoros"], "correcta" => "Descomponedores"],
        ["pregunta" => "La eficiencia energética siempre es...", "opciones" => ["100%", "50%", "<100%", "0%"], "correcta" => "<100%"],
        ["pregunta" => "Máxima entropía significa...", "opciones" => ["Orden total", "Desorden total", "Equilibrio químico", "Oxigenación"], "correcta" => "Desorden total"],
        ["pregunta" => "La energía que sale del ecosistema es...", "opciones" => ["Luz", "Calor", "Materia", "Sonido"], "correcta" => "Calor"],
        ["pregunta" => "Ley que permite existencia de vida", "opciones" => ["Primera", "Segunda", "Ambas", "Ninguna"], "correcta" => "Ambas"],
        ["pregunta" => "Sin segunda ley, las cadenas serían...", "opciones" => ["Cortas", "Largas", "Inestables", "Circulares"], "correcta" => "Largas"],
        ["pregunta" => "La energía en un cadáver se vuelve...", "opciones" => ["Luz", "Calor", "Sonido", "Electricidad"], "correcta" => "Calor"],
        ["pregunta" => "La energía total del universo es...", "opciones" => ["Creciente", "Decreciente", "Constante", "Cero"], "correcta" => "Constante"],
        ["pregunta" => "El 90% de la energía se pierde como...", "opciones" => ["Luz", "Calor", "Biomasa", "Materia"], "correcta" => "Calor"],
        ["pregunta" => "La energía solar entra como...", "opciones" => ["Calor", "Luz", "Química", "Eléctrica"], "correcta" => "Luz"],
        ["pregunta" => "Un ejemplo de entropía biológica es...", "opciones" => ["Crecimiento", "Calor corporal", "Fotosíntesis", "Nado"], "correcta" => "Calor corporal"],
        ["pregunta" => "La energía útil disminuye por...", "opciones" => ["Fotosíntesis", "Entropía", "Consumo", "Evaporación"], "correcta" => "Entropía"],
        ["pregunta" => "El flujo energético siempre termina en...", "opciones" => ["Luz", "Calor", "Materia", "Oxígeno"], "correcta" => "Calor"],
        ["pregunta" => "Ley que garantiza balance energético universal", "opciones" => ["Primera", "Segunda", "Tercera", "Cero"], "correcta" => "Primera"],
    ]
];
/**
 * MATERIA: ECOSISTEMAS
 * TEMA: Radiación Electromagnética y su impacto en los ecosistemas
 * VERSIÓN: Maximizada — Retro-neón Cyberpunk total
 * Notas:
 * - Se mantienen SVG y estructura original
 * - Se amplían explicaciones, redacción académica y ejemplos
 * - Totalmente compatible con tu estilo retro-neón
 */

$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug'    => 'radiacion-electromagnetica',
    'titulo'  => 'Radiación Electromagnética: El Motor Energético de los Ecosistemas',

    'contenido' => <<<'HTML'

<h2 class="neon-title text-center mb-4">Radiación Electromagnética y su Importancia en los Ecosistemas</h2>

<p>
La <strong>radiación electromagnética (REM)</strong> es la forma fundamental en que la energía viaja a través del espacio.
Está compuesta por <strong>ondas transversales</strong> formadas por campos eléctricos y magnéticos que vibran
perpendicularmente entre sí, propagándose a la velocidad de la luz:
</p>

<p class="formula-neon text-center">
\( c = 3 \times 10^8 \, \text{m/s} \)
</p>

<p>
La REM es crítica para los ecosistemas porque:
</p>

<ul>
    <li><strong>Luz visible:</strong> permite la fotosíntesis, regulando el flujo energético global.</li>
    <li><strong>Radiación UV:</strong> puede dañar ADN y alterar poblaciones microbianas.</li>
    <li><strong>Infrarrojo:</strong> es responsable del calor y del equilibrio térmico planetario.</li>
</ul>

<p>
Relación fundamental entre longitud de onda y frecuencia:
</p>

<p class="formula-neon text-center">
<strong>\( c = \lambda \cdot f \)</strong>  
(velocidad = longitud de onda × frecuencia)
</p>

<hr class="divider-neon">

<!-- IMÁGENES DE REFERENCIA -->
<div class="visual">
    <img src="assets/img/spectrum-properties-nasa.jpg" alt="Espectro electromagnético completo">
    <p class="caption">Espectro completo: de ondas de radio a rayos gamma.</p>
</div>

<div class="visual">
    <img src="assets/img/electromagnetic-spectrum.png" alt="Efectos de la radiación">
    <p class="caption">Cada banda del espectro tiene efectos distintos en organismos vivos.</p>
</div>

<div class="visual">
    <img src="assets/img/radiacion_fotosintesis.jpg" alt="Radiación y fotosíntesis">
    <p class="caption">La radiación visible impulsa la fotosíntesis al activar clorofila.</p>
</div>

<div class="visual">
    <img src="assets/img/uv_dano_adn.png" alt="UV y daño al ADN">
    <p class="caption">La radiación UV puede romper enlaces del ADN, generando mutaciones.</p>
</div>

<hr class="divider-neon">

<!-- SVG MEGA-RETRO -->
<h3 class="section-title">Espectro Electromagnético (Diagrama Retro-Neón)</h3>

<div class="svg-diagram">
    <!-- (SVG INTACTO — NO MODIFICADO PARA MANTENER ESTILO) -->
    <svg viewBox="0 0 860 460" xmlns="http://www.w3.org/2000/svg" aria-labelledby="svg-title svg-desc">
        <title id="svg-title">Espectro Electromagnético Completo – Estilo Cyberpunk</title>
        <desc id="svg-desc">Barra continua del espectro, gradientes realistas y efectos neón.</desc>

        <rect width="860" height="460" fill="#000"/>

        <text x="430" y="70" fill="#ff00ff" font-size="46" font-weight="bold" text-anchor="middle"
              filter="url(#glow-magenta)">Espectro Electromagnético</text>

        <defs>
            <linearGradient id="spectrum" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%"   stop-color="#9400d3"/>
                <stop offset="6%"   stop-color="#8a2be2"/>
                <stop offset="14%"  stop-color="#4169e1"/>
                <stop offset="22%"  stop-color="#00bfff"/>
                <stop offset="30%"  stop-color="#00ced1"/>
                <stop offset="37%"  stop-color="#00ff7f"/>
                <stop offset="44%"  stop-color="#adff2f"/>
                <stop offset="50%"  stop-color="#ffff00"/>
                <stop offset="57%"  stop-color="#ffa500"/>
                <stop offset="68%"  stop-color="#ff4500"/>
                <stop offset="82%"  stop-color="#ff0000"/>
                <stop offset="100%" stop-color="#8b0000"/>
            </linearGradient>

            <filter id="glow-cyan">
                <feGaussianBlur stdDeviation="6" result="blur"/>
                <feFlood flood-color="#00ffff"/>
                <feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>

            <filter id="glow-magenta">
                <feGaussianBlur stdDeviation="8" result="blur"/>
                <feFlood flood-color="#ff00ff"/>
                <feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
        </defs>

        <rect x="90" y="160" width="680" height="90" rx="45" fill="url(#spectrum)" stroke="#00ffff" stroke-width="10" filter="url(#glow-cyan)"/>

        <text x="110" y="130" fill="#00ffff" font-size="22" font-weight="bold" filter="url(#glow-cyan)">Rayos Gamma</text>
        <text x="210" y="130" fill="#00ffff" font-size="22" filter="url(#glow-cyan)">Rayos X</text>
        <text x="320" y="130" fill="#ff00ff" font-size="26" font-weight="bold" filter="url(#glow-magenta)">Ultravioleta</text>
        <text x="430" y="130" fill="#00ff00" font-size="32" font-weight="bold" text-anchor="middle" filter="url(#glow-cyan)">Luz Visible</text>
        <text x="580" y="130" fill="#ff1744" font-size="26" font-weight="bold" filter="url(#glow-magenta)">Infrarrojo</text>
        <text x="720" y="130" fill="#f1c40f" font-size="22" filter="url(#glow-cyan)">Microondas / Radio</text>

        <text x="110" y="290" fill="#00ffff" font-size="20" filter="url(#glow-cyan)">λ &lt; 10⁻¹² m</text>
        <text x="220" y="290" fill="#00ffff" font-size="20" filter="url(#glow-cyan)">~10⁻¹⁰ m</text>
        <text x="340" y="290" fill="#ff00ff" font-size="22" font-weight="bold" filter="url(#glow-magenta)">10⁻⁸ – 400 nm</text>
        <text x="430" y="290" fill="#00ff00" font-size="28" font-weight="bold" text-anchor="middle" filter="url(#glow-cyan)">400 – 700 nm</text>
        <text x="590" y="290" fill="#ff1744" font-size="22" filter="url(#glow-magenta)">700 nm – 1 mm</text>
        <text x="740" y="290" fill="#f1c40f" font-size="20" filter="url(#glow-cyan)">λ &gt; 1 m</text>

        <path d="M90 200 L40 185 M90 200 L40 215" stroke="#ff1744" stroke-width="8" filter="url(#glow-magenta)"/>
        <text x="35" y="205" fill="#ff1744" font-size="28" text-anchor="end" font-weight="bold" filter="url(#glow-magenta)">Alta energía</text>

        <path d="M770 200 L820 185 M770 200 L820 215" stroke="#00e676" stroke-width="8" filter="url(#glow-cyan)"/>
        <text x="825" y="205" fill="#00e676" font-size="28" font-weight="bold" filter="url(#glow-cyan)">Baja energía</text>

        <text x="430" y="390" fill="#00ffff" font-size="24" text-anchor="middle" filter="url(#glow-cyan)">
            Longitud de onda aumenta → Frecuencia y energía disminuyen
        </text>
    </svg>

    <p class="caption">
        <em>Solo la luz visible (400–700 nm) es utilizada directamente por la fotosíntesis.</em>
    </p>
</div>

<hr class="divider-neon">

<h3 class="section-title">Impacto de la Radiación Electromagnética en los Ecosistemas</h3>

<table class="table table-bordered text-center">
    <thead class="table-primary">
        <tr>
            <th>Tipo</th>
            <th>Longitud de onda</th>
            <th>Efecto ecológico principal</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>Luz visible</td><td>400–700 nm</td><td>Fotosíntesis, visión, producción primaria</td></tr>
        <tr><td>UV</td><td>&lt;400 nm</td><td>Daño al ADN, afecta fitoplancton</td></tr>
        <tr><td>Infrarrojo</td><td>&gt;700 nm</td><td>Termorregulación, efecto invernadero</td></tr>
        <tr><td>Microondas</td><td>mm – cm</td><td>Calentamiento; poco impacto directo</td></tr>
    </tbody>
</table>

<hr class="divider-neon">

<!-- EJEMPLOS -->

<h3 class="section-title">Ejemplos Aplicados</h3>

<div class="ejemplo">
    <h4>Ejemplo 1: Fotosíntesis</h4>
    <p>
        La clorofila absorbe principalmente luz roja (~680 nm) y azul (~450 nm).
        Esta energía excita electrones, iniciando la producción de glucosa.
    </p>
</div>

<div class="ejemplo">
    <h4>Ejemplo 2: Agujero de Ozono</h4>
    <p>
        La disminución del ozono estratosférico permite que más radiación UV-B llegue a la superficie,
        reduciendo poblaciones de fitoplancton marino.
    </p>
</div>

<div class="ejemplo">
    <h4>Ejemplo 3: Infrarrojo y Calentamiento Global</h4>
    <p>
        Gases como CO₂ y metano absorben radiación infrarroja y la reemiten en forma de calor,
        elevando la temperatura media global.
    </p>
</div>

<div class="ejemplo">
    <h4>Ejemplo 4: Visión Animal</h4>
    <p>
        Algunos animales perciben bandas del espectro invisibles para el ojo humano:
        <ul>
            <li>Abejas: luz ultravioleta</li>
            <li>Serpientes: infrarrojo térmico</li>
        </ul>
    </p>
</div>

HTML
,

    'ejercicios' => [
        ["enunciado" => "¿Qué parte del espectro utilizan las plantas para la fotosíntesis?", "respuesta" => "Luz visible (400–700 nm)."],
        ["enunciado" => "Explica cómo la radiación UV afecta al fitoplancton.", "respuesta" => "Daño al ADN → menos fotosíntesis → disminución del oxígeno oceánico."],
        ["enunciado" => "¿Qué ondas tienen mayor longitud de onda y menor energía?", "respuesta" => "Ondas de radio (>1 m)."],
        ["enunciado" => "Ejemplo de impacto del infrarrojo en el clima", "respuesta" => "El IR atrapado causa efecto invernadero y aumento de temperatura global."],
        ["enunciado" => "Calcula λ si f = 5×10¹⁴ Hz (usa c = λf)", "respuesta" => "λ = 600 nm → luz naranja."],
        ["enunciado" => "¿Por qué las plantas son verdes?", "respuesta" => "Porque reflejan luz verde (~550 nm)."],
        ["enunciado" => "Nombra un animal que vea UV", "respuesta" => "Abejas."],
        ["enunciado" => "¿Qué pasa si aumenta el UV por el agujero de ozono?", "respuesta" => "Disminuye el fitoplancton → menos O₂."],
        ["enunciado" => "¿Qué radiación usan los satélites para medir temperatura?", "respuesta" => "Infrarrojo térmico."],
        ["enunciado" => "Ordena de mayor a menor energía: UV, visible, IR", "respuesta" => "UV > visible > IR."],
        ["enunciado" => "¿Qué radiación usa el control remoto?", "respuesta" => "Infrarrojo."],
        ["enunciado" => "¿Por qué el cielo es azul?", "respuesta" => "Por la dispersión de la luz azul (Rayleigh)."],
    ],

    'quiz' => [
        ["pregunta" => "¿Qué radiación es esencial para la fotosíntesis?", "opciones" => ["Rayos X", "Luz visible", "Radio", "Gamma"], "correcta" => "Luz visible"],
        ["pregunta" => "Velocidad de la luz en el vacío", "opciones" => ["3×10⁶ m/s", "3×10⁸ m/s", "3×10¹⁰ m/s", "Variable"], "correcta" => "3×10⁸ m/s"],
        ["pregunta" => "¿Qué banda daña el ADN del fitoplancton?", "opciones" => ["IR", "UV-B", "Microondas", "Radio"], "correcta" => "UV-B"],
        ["pregunta" => "La clorofila refleja principalmente...", "opciones" => ["400 nm", "550 nm", "700 nm", "1000 nm"], "correcta" => "550 nm"],
        ["pregunta" => "Si λ = 600 nm, la frecuencia es...", "opciones" => ["5×10¹⁴ Hz", "6×10¹⁴ Hz", "4×10¹⁴ Hz", "7×10¹⁴ Hz"], "correcta" => "5×10¹⁴ Hz"],
        ["pregunta" => "Abejas ven en...", "opciones" => ["IR", "UV", "Gamma", "Radio"], "correcta" => "UV"],
        ["pregunta" => "El efecto invernadero atrapa...", "opciones" => ["UV", "Visible", "Infrarrojo", "Gamma"], "correcta" => "Infrarrojo"],
        ["pregunta" => "Mayor energía del visible", "opciones" => ["Rojo", "Verde", "Azul-violeta", "Amarillo"], "correcta" => "Azul-violeta"],
        ["pregunta" => "NDVI usa bandas...", "opciones" => ["UV y azul", "Rojo e IR cercano", "Microondas", "Rayos X"], "correcta" => "Rojo e IR cercano"],
        ["pregunta" => "Radiación ionizante", "opciones" => ["Radio", "UV/X/Gamma", "Visible", "IR"], "correcta" => "UV/X/Gamma"],
        ["pregunta" => "Luz más penetrante en océano", "opciones" => ["UV", "Azul", "Roja", "IR"], "correcta" => "Azul"],
        ["pregunta" => "Serpientes detectan presas con...", "opciones" => ["UV", "Infrarrojo", "Sonido", "Vibración"], "correcta" => "Infrarrojo"],
        ["pregunta" => "El cielo es azul por...", "opciones" => ["Absorción", "Dispersión", "Reflexión", "Emisión"], "correcta" => "Dispersión"],
        ["pregunta" => "Control remoto usa...", "opciones" => ["UV", "IR", "Visible", "Radio"], "correcta" => "IR"],
        ["pregunta" => "Energía aumenta cuando...", "opciones" => ["λ aumenta", "f aumenta", "Amplitud aumenta", "Velocidad baja"], "correcta" => "f aumenta"],
        ["pregunta" => "Pico de emisión solar", "opciones" => ["UV", "Visible", "IR", "Radio"], "correcta" => "Visible"],
        ["pregunta" => "Longitud de onda roja", "opciones" => ["400 nm", "550 nm", "700 nm", "1000 nm"], "correcta" => "700 nm"],
        ["pregunta" => "Agujero de ozono aumenta...", "opciones" => ["Visible", "UV-B", "IR", "X"], "correcta" => "UV-B"],
        ["pregunta" => "Microondas se usan en...", "opciones" => ["Cocina", "Fotosíntesis", "Visión", "Radioterapia"], "correcta" => "Cocina"],
        ["pregunta" => "Fitoplancton es sensible a...", "opciones" => ["IR", "UV", "Visible", "Radio"], "correcta" => "UV"],
        ["pregunta" => "Plantas reflejan verde porque...", "opciones" => ["La absorben", "La rechazan", "No tienen clorofila", "Es dañina"], "correcta" => "La rechazan"],
        ["pregunta" => "Radiación con mayor frecuencia", "opciones" => ["Radio", "Microondas", "UV", "Gamma"], "correcta" => "Gamma"],
        ["pregunta" => "Efecto invernadero atrapa...", "opciones" => ["UV", "Visible", "IR", "Gamma"], "correcta" => "IR"],
        ["pregunta" => "Si λ = 500 nm, f es...", "opciones" => ["6×10¹⁴ Hz", "5×10¹⁴ Hz", "3×10⁸ Hz", "500 Hz"], "correcta" => "6×10¹⁴ Hz"],
        ["pregunta" => "Radio sirve para...", "opciones" => ["Comunicación", "Fotosíntesis", "Visión", "Termorregulación"], "correcta" => "Comunicación"],
        ["pregunta" => "La luz azul tiene más energía porque...", "opciones" => ["λ mayor", "f mayor", "A mayor", "c mayor"], "correcta" => "f mayor"],
        ["pregunta" => "NDVI usa...", "opciones" => ["UV y visible", "Rojo e IR cercano", "Microondas", "Gamma"], "correcta" => "Rojo e IR cercano"],
        ["pregunta" => "Gamma tiene longitud...", "opciones" => ["Mayor que visible", "Menor que UV", "Entre visible/IR", "Igual a radio"], "correcta" => "Menor que UV"],
        ["pregunta" => "Satélites miden temperatura con...", "opciones" => ["UV", "IR térmico", "Radio", "X"], "correcta" => "IR térmico"],
        ["pregunta" => "Radiación más penetrante", "opciones" => ["UV", "X", "Visible", "IR"], "correcta" => "X"],
    ]
];
/**
 * MATERIA: ECOSISTEMAS
 * TEMA: Movimientos de la Tierra y su impacto en clima y vida
 * ESTILO: Retro-neón cyberpunk total – versión MAXIMIZADA
 */

$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug'    => 'movimientos-tierra',
    'titulo'  => 'Movimientos de la Tierra: El Ritmo Cósmico que Moldea el Clima y la Vida',

    'contenido' => <<<'HTML'
<h3 class="text-center display-5">Movimientos de la Tierra: El Motor Cósmico del Clima, la Luz y la Vida</h3>
<p>La Tierra es un cuerpo dinámico que se mueve constantemente dentro del sistema solar. Sus cuatro movimientos principales —<strong>rotación, traslación, precesión y nutación</strong>— determinan la distribución de la energía solar, los patrones climáticos, la duración del día, la intensidad de las estaciones y los ritmos biológicos de todos los seres vivos.</p>
<p>Sin estos movimientos, los ecosistemas tal como los conocemos no existirían: no habría ciclos de luz, ni estaciones, ni migraciones, ni equilibrio térmico global. La vida está literalmente sincronizada con la danza cósmica de nuestro planeta.</p>

<hr class="neon-divider">

<!-- ============================================================ -->
<!-- 1. ROTACIÓN TERRESTRE -->
<!-- ============================================================ -->
<h4>1. Rotación (≈24 h) → Alternancia Día / Noche</h4>

<p><strong>Definición:</strong> Movimiento de la Tierra sobre su eje, completado cada <strong>23 h 56 min 4 s</strong> (día sideral).</p>

<p><strong>Velocidad angular:</strong>  
    \( \omega = \frac{2\pi}{T} = 7.292 \times 10^{-5} \, \text{rad/s} \)
</p>

<p><strong>Consecuencias ecológicas principales:</strong></p>
<ul>
    <li>Ciclos de luz y oscuridad → control de fotosíntesis.</li>
    <li>Ritmos circadianos en animales, plantas y microorganismos.</li>
    <li>Patrones de comportamiento: actividad diurna/nocturna.</li>
    <li>Control térmico diario: máximas y mínimas de temperatura.</li>
</ul>

<div class="ejemplo">
    <strong>Ejemplo biológico:</strong>  
    Las plantas abren y cierran estomas según el fotoperiodo; búhos, murciélagos y felinos cazan de noche.
</div>

<div class="visual">
    <img src="assets/img/movimiento-de-rotacion.png" alt="Rotación terrestre">
    <p><em>Rotación vista desde el polo norte. Fuente: NASA.</em></p>
</div>

<hr class="neon-divider">

<!-- ============================================================ -->
<!-- 2. TRASLACIÓN + INCLINACIÓN AXIAL -->
<!-- ============================================================ -->
<h4>2. Traslación + Inclinación Axial → Estaciones del Año</h4>

<p>La Tierra describe una órbita elíptica alrededor del Sol. Sus características son:</p>

<ul>
    <li><strong>Semi-eje mayor:</strong> \( a = 149.6 \times 10^6 \, \text{km} \)</li>
    <li><strong>Excentricidad:</strong> \( e = 0.0167 \)</li>
    <li><strong>Inclinación del eje:</strong> \( \epsilon = 23.44^\circ \)</li>
</ul>

<p>La <strong>inclinación axial</strong> es la causa real de las estaciones: determina el ángulo de incidencia solar y la duración del día.</p>

<div class="ejemplo">
    <strong>Ejemplo biológico:</strong>  
    La mariposa monarca migra 4 000 km cada otoño en respuesta a los cambios de luz y temperatura.
</div>

<div class="visual">
    <img src="assets/img/eataciones_satelite.png" alt="Estaciones desde el espacio">
    <p><em>Estaciones observadas desde satélite. Fuente: NASA.</em></p>
</div>

<!-- SVG MEJORADO DE LAS ESTACIONES -->
<div class="svg-diagram">
    <svg viewBox="0 0 900 560" xmlns="http://www.w3.org/2000/svg">
        <rect width="100%" height="100%" fill="#000000"/>

        <defs>
            <filter id="glowCyan">
                <feGaussianBlur stdDeviation="8" result="blur"/>
                <feFlood flood-color="#00ffff"/>
                <feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <filter id="glowMagenta">
                <feGaussianBlur stdDeviation="8" result="blur"/>
                <feFlood flood-color="#ff00ff"/>
                <feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
        </defs>

        <!-- Sol -->
        <circle cx="180" cy="280" r="70" fill="#ff9500" stroke="#ffff33" stroke-width="12" filter="url(#glowMagenta)"/>
        <text x="180" y="285" fill="#000" font-size="28" text-anchor="middle" font-weight="bold">Sol</text>

        <!-- Órbita -->
        <ellipse cx="450" cy="280" rx="330" ry="190" fill="none" stroke="#00ffff" stroke-width="6" stroke-dasharray="12,10" filter="url(#glowCyan)"/>

        <!-- Tierra posiciones -->
        <g transform="translate(130,280)">
            <circle r="30" fill="#0066cc"/>
            <text x="-35" y="8" fill="#fff" font-size="18" font-weight="bold">Invierno NH</text>
            <line x1="0" y1="-30" x2="0" y2="30" stroke="#ff00ff" stroke-width="4" filter="url(#glowMagenta)"/>
        </g>

        <g transform="translate(450,110)">
            <circle r="30" fill="#00cc66"/>
            <text x="-40" y="8" fill="#fff" font-size="18" font-weight="bold">Primavera</text>
            <line x1="-22" y1="-22" x2="22" y2="22" stroke="#ff00ff" stroke-width="4" filter="url(#glowMagenta)"/>
        </g>

        <g transform="translate(770,280)">
            <circle r="30" fill="#ff6600"/>
            <text x="-32" y="8" fill="#fff" font-size="18" font-weight="bold">Verano NH</text>
            <line x1="0" y1="-30" x2="0" y2="30" stroke="#ff00ff" stroke-width="4" filter="url(#glowMagenta)"/>
        </g>

        <g transform="translate(450,450)">
            <circle r="30" fill="#cc99ff"/>
            <text x="-22" y="8" fill="#fff" font-size="18" font-weight="bold">Otoño</text>
            <line x1="22" y1="-22" x2="-22" y2="22" stroke="#ff00ff" stroke-width="4" filter="url(#glowMagenta)"/>
        </g>

        <!-- Inclinación etiqueta -->
        <text x="720" y="200" fill="#ff00ff" font-size="38" font-weight="bold" filter="url(#glowMagenta)">23.44°</text>

        <text x="450" y="520" fill="#00ffff" font-size="28" text-anchor="middle" filter="url(#glowCyan)">
            Inclinación axial + traslación → Estaciones del año
        </text>
    </svg>
    <div class="caption">Órbita terrestre e inclinación del eje: la verdadera causa de las estaciones.</div>
</div>

<hr class="neon-divider">

<!-- ============================================================ -->
<!-- 3. PRECESIÓN -->
<!-- ============================================================ -->
<h4>3. Precesión (≈25 772 años) → Cambios en la Estrella Polar</h4>

<p>Es un movimiento lento que hace que el eje terrestre trace un cono completo cada 25 772 años.</p>

<p><strong>Consecuencias:</strong></p>
<ul>
    <li>Cambia la estrella polar a lo largo de milenios.</li>
    <li>Modifica la orientación de los equinoccios.</li>
    <li>Influye en ciclos climáticos de largo plazo (Milankovitch).</li>
</ul>

<div class="ejemplo">
    <strong>Ejemplo histórico:</strong>  
    Hace 12 000 años, la estrella polar era Vega. En 12 000 años volverá a serlo.
</div>

<div class="visual">
    <img src="assets/img/precesión.svg" alt="Precesión del eje">
    <p><em>La Tierra precesa como un trompo. Fuente: Wikipedia.</em></p>
</div>

<hr class="neon-divider">

<!-- ============================================================ -->
<!-- 4. NUTACIÓN -->
<!-- ============================================================ -->
<h4>4. Nutación (18.6 años) → Pequeña oscilación del eje</h4>

<p><strong>Definición:</strong> ondulación periódica superpuesta a la precesión.</p>

<p><strong>Amplitud:</strong> ±9.2″</p>

<p><strong>Consecuencia:</strong> afecta ligeramente la oblicuidad del eje → importante para paleoclimatología fina.</p>

<div class="ejemplo">
    <strong>Ejemplo científico:</strong>  
    La nutación mejora la calibración de modelos de CO₂ presentes en núcleos de hielo.
</div>

<div class="visual">
    <img src="assets/img/precesion-y-nutacion.png" alt="Precesión + nutación">
    <p><em>La nutación se monta sobre la precesión. Fuente: Meteorología en Red.</em></p>
</div>

<hr class="neon-divider">

<h3 class="text-center">Impacto de los Movimientos Terrestres en los Ecosistemas</h3>
<table class="table text-center table-bordered">
    <thead>
        <tr class="table-primary">
            <th>Movimiento</th><th>Período</th><th>Efecto Físico</th><th>Impacto Ecológico</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>Rotación</td><td>24 h</td><td>Día/Noche</td><td>Fotosíntesis, ritmos circadianos</td></tr>
        <tr><td>Traslación</td><td>1 año</td><td>Estaciones</td><td>Migraciones, hibernación, floración</td></tr>
        <tr><td>Precesión</td><td>26 000 años</td><td>Cambios lentos en orientación</td><td>Ciclos glaciales</td></tr>
        <tr><td>Nutación</td><td>18.6 años</td><td>Oscilación fina del eje</td><td>Ajustes climáticos de precisión</td></tr>
    </tbody>
</table>

<div class="visual">
    <img src="assets/img/mariposas_monarca.png" alt="Migración monarca">
    <p><em>Migración anual de 4 000 km. Fuente: EPA.</em></p>
</div>

<div class="visual">
    <img src="assets/img/milankovitch-ciclos.jpg" alt="Ciclos de Milankovitch">
    <p><em>Las variaciones orbitales explican las eras glaciales. Fuente: Nature.</em></p>
</div>

HTML
,

    'ejercicios' => [
        ['enunciado' => '¿Qué movimiento origina el día y la noche?', 'respuesta' => 'La rotación.'],
        ['enunciado' => '¿Cuánto dura un día sideral?', 'respuesta' => '23 h 56 min 4 s.'],
        ['enunciado' => 'Define inclinación axial.', 'respuesta' => 'El ángulo de 23.44° entre el eje terrestre y la perpendicular a la órbita.'],
        ['enunciado' => '¿Cuál es la causa real de las estaciones?', 'respuesta' => 'La inclinación axial, no la distancia al Sol.'],
        ['enunciado' => '¿Qué estrella será la polar dentro de 12 000 años?', 'respuesta' => 'Vega.'],
        ['enunciado' => 'Calcula la velocidad angular: T = 24 h.', 'respuesta' => '\\( \\omega = \\frac{2\\pi}{24} = \\frac{\\pi}{12} \\, \\text{rad/h} \\approx 7.27 \\times 10^{-5} \\, \\text{rad/s} \\)'],
        ['enunciado' => '¿Por qué migran las mariposas monarca?', 'respuesta' => 'Cambios de fotoperiodo y temperatura debidos a la traslación.'],
        ['enunciado' => '¿Qué es la precesión?', 'respuesta' => 'Movimiento cónico del eje terrestre con período de ~25 772 años.'],
        ['enunciado' => '¿Qué causa la nutación?', 'respuesta' => 'La interacción gravitatoria entre la Luna y la Tierra.'],
        ['enunciado' => 'Período de nutación.', 'respuesta' => '18.6 años.'],
        ['enunciado' => '¿Cuál ciclo de Milankovitch tiene ~100 000 años?', 'respuesta' => 'La excentricidad orbital.'],
        ['enunciado' => 'Menciona dos consecuencias ecológicas de la rotación.', 'respuesta' => 'Ritmos circadianos y control de fotosíntesis.']
    ],

    'quiz' => [
        ['pregunta' => 'El día y la noche son causados por...', 'opciones' => ['Rotación', 'Traslación', 'Precesión', 'Nutación'], 'correcta' => 'Rotación'],
        ['pregunta' => 'La causa principal de las estaciones es...', 'opciones' => ['Distancia al Sol', 'Inclinación axial', 'Precesión', 'Velocidad orbital'], 'correcta' => 'Inclinación axial'],
        ['pregunta' => 'Duración del día sideral...', 'opciones' => ['24 h', '23 h 56 min 4 s', '25 h', '23 h'], 'correcta' => '23 h 56 min 4 s'],
        ['pregunta' => 'La estrella polar actual es...', 'opciones' => ['Vega', 'Sirio', 'Polaris', 'Aldebarán'], 'correcta' => 'Polaris'],
        ['pregunta' => 'Período de precesión...', 'opciones' => ['1 año', '18.6 años', '25 772 años', '100 000 años'], 'correcta' => '25 772 años'],
        ['pregunta' => 'Período de nutación...', 'opciones' => ['24 h', '1 año', '18.6 años', '26 000 años'], 'correcta' => '18.6 años'],
        ['pregunta' => 'La migración monarca se debe a...', 'opciones' => ['Precesión', 'Rotación', 'Estaciones', 'Nutación'], 'correcta' => 'Estaciones'],
        ['pregunta' => '¿Cuál no es un movimiento terrestre?', 'opciones' => ['Rotación', 'Traslación', 'Precesión', 'Expansión'], 'correcta' => 'Expansión'],
        ['pregunta' => 'La oblicuidad actual es...', 'opciones' => ['10°', '23.44°', '40°', '5°'], 'correcta' => '23.44°'],
        ['pregunta' => 'El ciclo de 41 000 años corresponde a...', 'opciones' => ['Precesión', 'Oblicuidad', 'Nutación', 'Rotación'], 'correcta' => 'Oblicuidad'],
        ['pregunta' => 'Estrella polar dentro de 12 000 años...', 'opciones' => ['Polaris', 'Vega', 'Betelgeuse', 'Rigel'], 'correcta' => 'Vega'],
        ['pregunta' => 'Movimiento responsable de ritmos circadianos...', 'opciones' => ['Traslación', 'Rotación', 'Nutación', 'Precesión'], 'correcta' => 'Rotación'],
        ['pregunta' => 'Excentricidad orbital actual...', 'opciones' => ['0.5', '0.0167', '1', '0'], 'correcta' => '0.0167'],
        ['pregunta' => 'El eje terrestre traza un cono por...', 'opciones' => ['Rotación', 'Traslación', 'Precesión', 'Nutación'], 'correcta' => 'Precesión'],
        ['pregunta' => 'La nutación es causada por...', 'opciones' => ['Sol', 'Luna', 'Júpiter', 'Viento solar'], 'correcta' => 'Luna'],
        ['pregunta' => 'La energía solar varía estacionalmente porque...', 'opciones' => ['La órbita es circular', 'Hay inclinación axial', 'El Sol cambia tamaño', 'La Luna bloquea luz'], 'correcta' => 'Hay inclinación axial'],
        ['pregunta' => 'El año bisiesto existe porque...', 'opciones' => ['El día dura más', 'El año trópico no es exacto', 'La Luna empuja', 'La nutación cambia días'], 'correcta' => 'El año trópico no es exacto'],
        ['pregunta' => 'La duración del día depende de...', 'opciones' => ['Traslación', 'Rotación', 'Nutación', 'Oblicuidad'], 'correcta' => 'Rotación'],
        ['pregunta' => 'Las estaciones afectan...', 'opciones' => ['Migraciones', 'Hibernación', 'Floración', 'Todas'], 'correcta' => 'Todas'],
        ['pregunta' => 'Un ejemplo de especie nocturna...', 'opciones' => ['Gallina', 'Búho', 'Vaca', 'Gato doméstico'], 'correcta' => 'Búho'],
        ['pregunta' => 'Eje inclinado genera...', 'opciones' => ['Estaciones', 'Ciclos glaciales', 'Día fijo', 'Lluvias'], 'correcta' => 'Estaciones'],
        ['pregunta' => 'Movimiento con más influencia en eras glaciales...', 'opciones' => ['Rotación', 'Traslación', 'Excentricidad', 'Nutación'], 'correcta' => 'Excentricidad'],
        ['pregunta' => 'La excentricidad varía cada...', 'opciones' => ['18.6 años', '41 000 años', '100 000 años', '10 años'], 'correcta' => '100 000 años'],
        ['pregunta' => 'El Sol está más cerca en...', 'opciones' => ['Julio', 'Enero', 'Septiembre', 'Marzo'], 'correcta' => 'Enero'],
        ['pregunta' => 'Las estaciones en hemisferio sur son...', 'opciones' => ['Iguales', 'Opuestas', 'Sincronizadas con norte', 'Aleatorias'], 'correcta' => 'Opuestas'],
        ['pregunta' => 'El ángulo entre eje y plano orbital se llama...', 'opciones' => ['Excentricidad', 'Oblicuidad', 'Perigeo', 'Longitud'], 'correcta' => 'Oblicuidad'],
        ['pregunta' => 'Las eras glaciales coinciden con variaciones de...', 'opciones' => ['Luz visible', 'Órbita terrestre', 'Cometas', 'Erupciones'], 'correcta' => 'Órbita terrestre'],
        ['pregunta' => '¿Qué controla la fotosíntesis diaria?', 'opciones' => ['Nutación', 'Rotación', 'Precesión', 'Excentricidad'], 'correcta' => 'Rotación']
    ]
];
/**
 * MATERIA: ECOSISTEMAS
 * TEMA: Respiración Celular – El motor energético de toda la vida
 * ESTILO: 100 % cyberpunk-neón profesional, SVG brutal, 12 ejercicios, 30 quiz perfectos
 */

$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug'    => 'respiracion-celular',
    'titulo'  => 'Respiración Celular: El Motor Energético de los Ecosistemas',

    'contenido' => <<<'HTML'

<h3 class="text-center display-5">Respiración Celular: El Fuego Interno de la Vida</h3>
<p>
    La respiración celular es el <strong>motor bioquímico que sostiene toda la vida</strong>. 
    Cada célula —desde una bacteria hasta una ballena azul— transforma la energía contenida en la glucosa 
    para producir <strong>ATP</strong>, la “moneda energética universal” que permite moverse, crecer, 
    reproducirse, mantener la temperatura, pensar, digerir y sostener cada proceso metabólico.
</p>
<p>
    Sin respiración celular no existirían <strong>ecosistemas</strong>, pues la energía dejaría de fluir entre 
    productores, consumidores y descomponedores. La vida, literalmente, se apagaría.
</p>

<h4>1. Ecuación Global de la Respiración Aeróbica</h4>

<div class="text-center my-5">
    <p class="fs-3 fw-bold text-cyan" style="text-shadow: 0 0 20px #00ffff;">
        Respiración aeróbica completa:
    </p>
    <div class="bg-black p-4 rounded-4 border border-cyan shadow-lg d-inline-block">
        $$ \ce{C6H12O6 + 6O2 -> 6CO2 + 6H2O + 38 ATP} $$
    </div>
    <p class="mt-4 fs-5">
        <strong class="text-yellow">Energía liberada:</strong>
        $$ \Delta G^\circ = -686 \, \text{kcal/mol} $$
        (≈ 36–38 ATP reales en condiciones celulares)
    </p>
</div>

<!-- SVG CYBERPUNK -->
<div class="svg-diagram">
    <svg viewBox="0 0 960 620" xmlns="http://www.w3.org/2000/svg" aria-labelledby="svg-title svg-desc">
        <title id="svg-title">Respiración Celular – Diagrama Cyberpunk Neón</title>
        <desc id="svg-desc">Flujo energético desde glucosa hasta producción de ATP en mitocondria.</desc>

        <rect width="960" height="620" fill="#000"/>

        <defs>
            <filter id="glow"><feGaussianBlur stdDeviation="8" result="b"/>
                <feFlood flood-color="#00ffff"/>
                <feComposite in2="b" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <filter id="glow-magenta"><feGaussianBlur stdDeviation="12" result="b"/>
                <feFlood flood-color="#ff00ff"/>
                <feComposite in2="b" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
        </defs>

        <!-- TÍTULO -->
        <text x="480" y="70" fill="#ff00ff" font-size="48" font-weight="bold" text-anchor="middle" filter="url(#glow-magenta)">
            RESPIRACIÓN CELULAR
        </text>

        <!-- GLUCOSA -->
        <circle cx="150" cy="200" r="55" fill="#ffcc00" stroke="#ffff00" stroke-width="8" filter="url(#glow)"/>
        <text x="150" y="210" fill="#000" font-size="24" font-weight="bold" text-anchor="middle">C₆H₁₂O₆</text>

        <defs>
            <marker id="arrow" markerWidth="22" markerHeight="22" refX="20" refY="6" orient="auto">
                <path d="M0,0 L20,6 L0,12 Z" fill="#00ffff"/>
            </marker>
        </defs>

        <!-- FLECHA -->
        <path d="M205 200 L300 200" stroke="#00ffff" stroke-width="10" marker-end="url(#arrow)" filter="url(#glow)"
              stroke-dasharray="100" stroke-dashoffset="100">
            <animate attributeName="stroke-dashoffset" from="100" to="0" dur="3s" repeatCount="indefinite"/>
        </path>

        <!-- GLICÓLISIS -->
        <rect x="320" y="140" width="190" height="130" rx="22"
              fill="#0044cc" stroke="#00ffff" stroke-width="8" filter="url(#glow)"/>
        <text x="415" y="190" fill="#fff" font-size="28" font-weight="bold" text-anchor="middle">GLICÓLISIS</text>
        <text x="415" y="230" fill="#ffff00" font-size="20" text-anchor="middle">2 ATP · 2 NADH · 2 Piruvato</text>

        <!-- PIRUVATO x2 -->
        <circle cx="580" cy="200" r="38" fill="#ff6600" stroke="#ff1744" stroke-width="6" filter="url(#glow-magenta)"/>
        <text x="580" y="210" fill="#fff" font-size="18" text-anchor="middle">Piruvato ×2</text>

        <!-- MITOCONDRIA -->
        <ellipse cx="480" cy="400" rx="310" ry="130" fill="#111" stroke="#00ffff" stroke-width="10" filter="url(#glow)"/>
        <ellipse cx="480" cy="400" rx="250" ry="90" fill="#000"/>

        <!-- CICLO KREBS -->
        <circle cx="360" cy="400" r="75" fill="#cc66ff" stroke="#ff00ff" stroke-width="8" filter="url(#glow-magenta)"/>
        <text x="360" y="385" fill="#fff" font-size="22" font-weight="bold" text-anchor="middle">CICLO</text>
        <text x="360" y="410" fill="#fff" font-size="22" font-weight="bold" text-anchor="middle">DE KREBS</text>
        <text x="360" y="450" fill="#ff00ff" font-size="18" text-anchor="middle" filter="url(#glow-magenta)">
            6 CO₂ · 8 NADH · 2 FADH₂
        </text>

        <!-- ETC -->
        <rect x="580" y="340" width="300" height="120" rx="22"
              fill="#0066cc" stroke="#00ffff" stroke-width="8" filter="url(#glow)"/>
        <text x="730" y="390" fill="#fff" font-size="26" font-weight="bold" text-anchor="middle">CADENA ETC</text>
        <text x="730" y="430" fill="#00ff00" font-size="24" text-anchor="middle" filter="url(#glow)">≈ 34 ATP + H₂O</text>

        <!-- ATP FINAL -->
        <circle cx="820" cy="200" r="70" fill="#00ff00" stroke="#00ffff" stroke-width="12" filter="url(#glow)"/>
        <text x="820" y="215" fill="#000" font-size="48" font-weight="bold" text-anchor="middle">38</text>
        <text x="820" y="185" fill="#000" font-size="28" text-anchor="middle">ATP</text>

        <text x="480" y="580" fill="#00ffff" font-size="28" text-anchor="middle" filter="url(#glow)">
            Glucosa → 38 ATP · CO₂ · H₂O
        </text>
    </svg>

    <div class="caption">Flujo completo de la respiración aeróbica en la mitocondria — Estética cyberpunk neón 2025.</div>
</div>

<h4>2. Etapas de la Respiración Aeróbica</h4>
<p>
    La respiración celular aeróbica se divide en tres etapas principales, cada una aportando una parte crítica 
    de energía y moléculas transportadoras:
</p>

<table class="table text-center">
    <thead>
        <tr><th>Etapa</th><th>Lugar celular</th><th>ATP neto</th><th>Productos clave</th></tr>
    </thead>
    <tbody>
        <tr><td>Glicólisis</td><td>Citosol</td><td>2 ATP</td><td>2 Piruvato · 2 NADH</td></tr>
        <tr><td>Ciclo de Krebs</td><td>Matriz mitocondrial</td><td>2 ATP</td><td>6 CO₂ · 8 NADH · 2 FADH₂</td></tr>
        <tr><td>Cadena Transportadora (ETC)</td><td>Membrana interna</td><td>≈ 34 ATP</td><td>H₂O · Gradiente H⁺</td></tr>
        <tr class="table-success">
            <td><strong>TOTAL</strong></td><td>—</td><td><strong>36–38 ATP</strong></td>
            <td>6 CO₂ · 6 H₂O</td>
        </tr>
    </tbody>
</table>

<h4>3. Respiración Anaeróbica (Fermentación)</h4>
<p>
    Cuando no hay oxígeno, las células recurren a procesos anaeróbicos que producen solo <strong>2 ATP</strong> por glucosa, 
    pero permiten mantener vivo al organismo.
</p>

<div class="row text-center my-5">
    <div class="col-md-6">
        <p class="fs-4 fw-bold text-danger">Fermentación láctica (músculos)</p>
        <div class="bg-dark p-4 rounded-4 border border-danger d-inline-block">
            $$ \ce{C6H12O6 -> 2 CH3CH(OH)COOH + 2 ATP} $$
        </div>
        <p class="mt-3 text-warning">Causa la sensación de ardor en ejercicio intenso.</p>
    </div>

    <div class="col-md-6">
        <p class="fs-4 fw-bold text-success">Fermentación alcohólica (levaduras)</p>
        <div class="bg-dark p-4 rounded-4 border border-success d-inline-block">
            $$ \ce{C6H12O6 -> 2 C2H5OH + 2 CO2 + 2 ATP} $$
        </div>
        <p class="mt-3 text-warning">Responsable del vino, cerveza y pan.</p>
    </div>
</div>

<h4>4. Importancia en los Ecosistemas</h4>
<p>
    La respiración celular conecta y sostiene todo flujo energético dentro de un ecosistema:
</p>

<ul class="fs-5">
    <li><strong>Libera CO₂</strong>, indispensable para la fotosíntesis.</li>
    <li><strong>Consume O₂</strong>, producido por los organismos fotosintéticos.</li>
    <li>Es la base del <strong> flujo de energía </strong> entre niveles tróficos.</li>
    <li>Permite el funcionamiento continuo del <strong>ciclo del carbono</strong>.</li>
</ul>

<div class="visual">
    <img src="assets/img/ciclo-de-carbono.png" alt="Ciclo del carbono">
    <p><em>La respiración y la fotosíntesis mantienen el equilibrio global del carbono. Fuente: NOAA.</em></p>
</div>

HTML
,

    'ejercicios' => [
        ['enunciado' => 'Escribe la ecuación completa de la respiración aeróbica', 'respuesta' => '\\ce{C6H12O6 + 6O2 -> 6CO2 + 6H2O + 36-38 ATP}'],
        ['enunciado' => 'Lugar exacto de la glicólisis', 'respuesta' => 'Citosol (citoplasma)'],
        ['enunciado' => 'Lugar exacto del ciclo de Krebs', 'respuesta' => 'Matriz mitocondrial'],
        ['enunciado' => '¿Cuántos ATP produce la cadena transportadora de electrones?', 'respuesta' => 'Aproximadamente 34 ATP'],
        ['enunciado' => '¿Cuántos NADH genera el ciclo de Krebs?', 'respuesta' => '8 NADH por molécula de glucosa'],
        ['enunciado' => '¿Cuántas moléculas de CO₂ se liberan en total?', 'respuesta' => '6 CO₂'],
        ['enunciado' => 'Relación entre respiración celular y fotosíntesis', 'respuesta' => 'Son procesos químicos prácticamente inversos'],
        ['enunciado' => 'Gas que liberan los animales al respirar', 'respuesta' => 'CO₂'],
        ['enunciado' => 'Organismos que realizan fermentación alcohólica', 'respuesta' => 'Levaduras (Saccharomyces)'],
        ['enunciado' => 'Qué genera el gradiente de protones', 'respuesta' => 'La cadena transportadora de electrones'],
        ['enunciado' => 'Proceso que usa el gradiente H⁺ para sintetizar ATP', 'respuesta' => 'ATP sintasa (quimiósmosis)'],
        ['enunciado' => 'Qué ocurre en ausencia total de oxígeno', 'respuesta' => 'Fermentación — solo 2 ATP por glucosa']
    ],

    'quiz' => [
        ['pregunta' => 'La respiración celular produce principalmente…', 'opciones' => ['Oxígeno', 'ATP', 'Glucosa', 'Luz'], 'correcta' => 'ATP'],
        ['pregunta' => 'Gas consumido en respiración aeróbica', 'opciones' => ['CO₂', 'O₂', 'N₂', 'CH₄'], 'correcta' => 'O₂'],
        ['pregunta' => 'Organelo con mayor producción de ATP', 'opciones' => ['Núcleo', 'Cloroplasto', 'Mitocondria', 'Ribosoma'], 'correcta' => 'Mitocondria'],
        ['pregunta' => 'ATP totales en respiración aeróbica', 'opciones' => ['2 ATP', '4 ATP', '36–38 ATP', '80 ATP'], 'correcta' => '36–38 ATP'],
        ['pregunta' => 'Gas liberado al ambiente por seres vivos', 'opciones' => ['O₂', 'CO₂', 'N₂', 'Ar'], 'correcta' => 'CO₂'],
        ['pregunta' => 'Etapa que ocurre en el citosol', 'opciones' => ['Krebs', 'ETC', 'Glicólisis', 'Fermentación'], 'correcta' => 'Glicólisis'],
        ['pregunta' => 'El ciclo de Krebs produce directamente…', 'opciones' => ['2 ATP', '34 ATP', 'O₂', 'H₂O'], 'correcta' => '2 ATP'],
        ['pregunta' => 'Aceptor final de electrones en ETC', 'opciones' => ['NAD⁺', 'FAD', 'O₂', 'CO₂'], 'correcta' => 'O₂'],
        ['pregunta' => 'ATP por cada NADH en la ETC', 'opciones' => ['2', '2.5', '3', '4'], 'correcta' => '2.5'],
        ['pregunta' => 'ATP por cada FADH₂', 'opciones' => ['1', '1.5', '2', '3'], 'correcta' => '1.5'],
        ['pregunta' => 'Proceso que usa gradiente H⁺', 'opciones' => ['Fotosíntesis', 'Quimiósmosis', 'Replicación', 'Glucólisis'], 'correcta' => 'Quimiósmosis'],
        ['pregunta' => 'En ausencia de O₂, las células musculares realizan…', 'opciones' => ['Fotosíntesis', 'Fermentación láctica', 'Krebs', 'ETC'], 'correcta' => 'Fermentación láctica'],
        ['pregunta' => 'Las levaduras producen…', 'opciones' => ['Ácido láctico', 'Alcohol + CO₂', 'ATP extra', 'NADH'], 'correcta' => 'Alcohol + CO₂'],
        ['pregunta' => 'Proceso opuesto a la respiración celular', 'opciones' => ['Digestión', 'Fotosíntesis', 'Transpiración', 'Mitosis'], 'correcta' => 'Fotosíntesis'],
        ['pregunta' => 'El gradiente de H⁺ se forma en…', 'opciones' => ['Citosol', 'Espacio intermembrana', 'Núcleo', 'Cloroplasto'], 'correcta' => 'Espacio intermembrana'],
        ['pregunta' => 'Toxina que bloquea la ETC', 'opciones' => ['Cianuro', 'Alcohol', 'CO₂', 'Agua'], 'correcta' => 'Cianuro'],
        ['pregunta' => 'CO₂ total del ciclo de Krebs por glucosa', 'opciones' => ['2', '4', '6', '8'], 'correcta' => '6'],
        ['pregunta' => 'Complejo I se llama…', 'opciones' => ['Citocromo c', 'NADH deshidrogenasa', 'ATP sintasa', 'Fumarasa'], 'correcta' => 'NADH deshidrogenasa'],
        ['pregunta' => 'Efecto Warburg', 'opciones' => ['Fotosíntesis en animales', 'Fermentación con O₂ presente', 'Respiración hiperactiva', 'Quimiósmosis duplicada'], 'correcta' => 'Fermentación con O₂ presente'],
        ['pregunta' => 'Eficiencia energética real', 'opciones' => ['~10%', '~30%', '~70%', '~90%'], 'correcta' => '~30%'],
        ['pregunta' => 'NADH producido en glicólisis', 'opciones' => ['0', '1', '2', '4'], 'correcta' => '2'],
        ['pregunta' => 'Molécula que entra a Krebs', 'opciones' => ['Glucosa', 'Piruvato', 'Acetil-CoA', 'Citrat'], 'correcta' => 'Acetil-CoA'],
        ['pregunta' => 'La ATP sintasa funciona como…', 'opciones' => ['Bomba', 'Turbina molecular', 'Canal', 'Receptor'], 'correcta' => 'Turbina molecular'],
        ['pregunta' => 'Protones bombeados por Complejo I', 'opciones' => ['2', '4', '6', '10'], 'correcta' => '4'],
        ['pregunta' => 'Moléculas que se oxidan en ETC', 'opciones' => ['ATP', 'CO₂', 'NADH y FADH₂', 'O₂'], 'correcta' => 'NADH y FADH₂'],
        ['pregunta' => 'Producto final reducido en ETC', 'opciones' => ['CO₂', 'O₂ → H₂O', 'Piruvato', 'NAD⁺'], 'correcta' => 'O₂ → H₂O'],
        ['pregunta' => 'Proceso que NO ocurre en mitocondria', 'opciones' => ['Krebs', 'ETC', 'Glicólisis', 'Quimiósmosis'], 'correcta' => 'Glicólisis'],
        ['pregunta' => 'ΔG mide…', 'opciones' => ['Calor', 'Energía libre', 'Entropía', 'Masa'], 'correcta' => 'Energía libre'],
        ['pregunta' => 'CO₂ producido al año por un humano promedio', 'opciones' => ['50 kg', '150 kg', '300 kg', '1 tonelada'], 'correcta' => '150 kg'],
        ['pregunta' => 'La respiración celular es esencial para…', 'opciones' => ['Solo animales', 'Solo plantas', 'Todos los seres vivos', 'Solo bacterias'], 'correcta' => 'Todos los seres vivos']
    ]
];
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug'    => 'componentes-sistema-climatico',
    'titulo'  => 'Componentes del Sistema Climático: El Mega-Sistema que Controla el Planeta',

    'contenido' => <<<'HTML'
<h3 class="text-center display-4 neon-title">Los 5 Componentes del Sistema Climático</h3>
<p class="fs-5">
    El clima terrestre no es un fenómeno aislado: es un <strong>súper-sistema complejo</strong> donde energía, agua, gases, hielo, roca y vida interactúan de manera continua. 
    Las cinco esferas —atmósfera, hidrosfera, criosfera, litosfera y biosfera— forman la maquinaria que 
    <strong>regula la temperatura, los vientos, las lluvias, el nivel del mar y todas las condiciones que hacen posible la vida.</strong>
</p>

<!-- SVG REFORZADO: SISTEMA CLIMÁTICO CYBERPUNK -->
<div class="svg-diagram">
    <svg viewBox="0 0 1000 720" xmlns="http://www.w3.org/2000/svg" aria-labelledby="svg-title svg-desc">
        <title id="svg-title">Sistema Climático Completo – Cyberpunk Ultra Edition</title>
        <desc id="svg-desc">Representación visual del sistema climático global, con interacciones energéticas entre atmósfera, hidrosfera, criosfera, litosfera y biosfera.</desc>

        <!-- FONDO -->
        <rect width="1000" height="720" fill="#000" />

        <!-- DEFINICIONES DE EFECTOS -->
        <defs>
            <!-- Glow cian -->
            <filter id="glow">
                <feGaussianBlur stdDeviation="10" result="blur"/>
                <feFlood flood-color="#00ffff"/>
                <feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>

            <!-- Glow magenta -->
            <filter id="glow-magenta">
                <feGaussianBlur stdDeviation="12" result="blur"/>
                <feFlood flood-color="#ff00ff"/>
                <feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>

            <!-- Flechas -->
            <marker id="arrow" markerWidth="16" markerHeight="16" refX="14" refY="8" orient="auto">
                <path d="M0,0 L14,8 L0,16 Z" fill="#00ffff"/>
            </marker>
        </defs>

        <!-- TÍTULO -->
        <text x="500" y="70" fill="#ff00ff" font-size="56" font-weight="bold" text-anchor="middle" filter="url(#glow-magenta)">
            SISTEMA CLIMÁTICO TERRESTRE
        </text>

        <!-- ATMÓSFERA -->
        <rect x="400" y="100" width="200" height="110" rx="30"
              fill="#1e90ff" stroke="#00ffff" stroke-width="8" filter="url(#glow)"/>
        <text x="500" y="150" fill="#ffffff" font-size="32" font-weight="bold" 
              text-anchor="middle" filter="url(#glow)">ATMÓSFERA</text>
        <text x="500" y="190" fill="#00ffff" font-size="20" text-anchor="middle">
            78% N₂ │ 21% O₂ │ 0.04% CO₂
        </text>

        <!-- HIDROSFERA -->
        <rect x="100" y="280" width="200" height="110" rx="30"
              fill="#0066cc" stroke="#00ffff" stroke-width="8" filter="url(#glow)"/>
        <text x="200" y="330" fill="#ffffff" font-size="32" font-weight="bold" text-anchor="middle">
            HIDROSFERA
        </text>
        <text x="200" y="370" fill="#00ffff" font-size="20" text-anchor="middle">
            1.386×10⁹ km³
        </text>

        <!-- CRIOSFERA -->
        <rect x="700" y="280" width="200" height="110" rx="30"
              fill="#e0f7fa" stroke="#00ffff" stroke-width="8" filter="url(#glow)"/>
        <text x="800" y="330" fill="#000" font-size="32" font-weight="bold" text-anchor="middle">
            CRIOSFERA
        </text>
        <text x="800" y="370" fill="#00ffff" font-size="20" text-anchor="middle">
            Albedo ≈ 0.8
        </text>

        <!-- LITOSFERA -->
        <rect x="200" y="500" width="200" height="110" rx="30"
              fill="#8B4513" stroke="#00ffff" stroke-width="8" filter="url(#glow)"/>
        <text x="300" y="550" fill="#ffffff" font-size="32" font-weight="bold" text-anchor="middle">
            LITOSFERA
        </text>
        <text x="300" y="590" fill="#00ffff" font-size="20" text-anchor="middle">
            10⁶ GtC
        </text>

        <!-- BIOSFERA -->
        <rect x="600" y="500" width="200" height="110" rx="30"
              fill="#228B22" stroke="#00ffff" stroke-width="8" filter="url(#glow)"/>
        <text x="700" y="550" fill="#ffffff" font-size="32" font-weight="bold" text-anchor="middle">
            BIOSFERA
        </text>
        <text x="700" y="590" fill="#00ffff" font-size="20" text-anchor="middle">
            550 GtC
        </text>

        <!-- Flechas de interacción -->
        <path d="M500 210 L500 270" stroke="#00ffff" stroke-width="6"
              marker-end="url(#arrow)" filter="url(#glow)">
            <animate attributeName="stroke-dashoffset" from="60" to="0" dur="4s" repeatCount="indefinite"/>
        </path>

        <path d="M300 390 L400 490" stroke="#00ffff" stroke-width="6"
              marker-end="url(#arrow)" filter="url(#glow)"/>

        <path d="M800 390 L700 500" stroke="#00ffff" stroke-width="6"
              marker-end="url(#arrow)" filter="url(#glow)" />

        <path d="M200 390 L300 500" stroke="#00ffff" stroke-width="6"
              marker-end="url(#arrow)" filter="url(#glow)" />

        <path d="M800 390 L700 500" stroke="#00ffff" stroke-width="6"
              marker-end="url(#arrow)" filter="url(#glow)" />

        <!-- Mensaje final -->
        <text x="500" y="680" fill="#00ffff" font-size="30" text-anchor="middle" filter="url(#glow)">
            Todo está conectado. Todo afecta a todo.
        </text>
    </svg>

    <div class="caption">
        Interacciones dinámicas entre los 5 componentes del sistema climático. Edición cyberpunk-neón profesional.
    </div>
</div>

<h4>1. Atmósfera – El escudo gaseoso del planeta</h4>
<p>
    Mezcla dinámica de gases que regula la temperatura, distribuye energía solar, genera vientos, transporta humedad y 
    protege de radiación dañina. Su física se gobierna por el balance energético:
</p>

<div class="eq text-center">
    $$ S(1 - \alpha) = \sigma T^{4} $$
</div>
<p class="text-center"><em>Ecuación fundamental del balance radiativo terrestre.</em></p>

<h4>2. Hidrosfera – El gran regulador térmico</h4>
<p>
    Los océanos almacenan más calor que toda la atmósfera gracias a su enorme capacidad calorífica
    (<strong>4186 J/kg·K</strong>). Controlan lluvias, huracanes y oscilaciones climáticas como El Niño–La Niña.
</p>

<h4>3. Criosfera – El espejo climatológico</h4>
<p>
    El hielo refleja hasta <strong>80% de la radiación solar</strong>, modulando la temperatura global. 
    El derretimiento reduce el albedo → el planeta absorbe más energía → calentamiento acelerado.
</p>

<h4>4. Litosfera – El archivo y almacén de carbono</h4>
<p>
    Contiene el mayor depósito de carbono del planeta (~1 000 000 GtC). Controla procesos geológicos, volcanismo 
    y ciclos biogeoquímicos esenciales.
</p>

<h4>5. Biosfera – La red viva del planeta</h4>
<p>
    Organismos terrestres y marinos que absorben CO₂, liberan O₂, regulan nutrientes y modulan el clima global. 
    Biomasa aproximada: <strong>550 GtC</strong>.
</p>

<h4 class="text-center mt-5">Interacciones Clave</h4>

<table class="table text-center">
    <thead>
        <tr><th>Interacción</th><th>Efecto principal</th><th>Ejemplo real</th></tr>
    </thead>
    <tbody>
        <tr><td>Atmósfera ↔ Hidrosfera</td><td>Evaporación, tormentas</td><td>El Niño</td></tr>
        <tr><td>Hidrosfera ↔ Criosfera</td><td>Derretimiento</td><td>Subida del nivel del mar</td></tr>
        <tr><td>Biosfera ↔ Atmósfera</td><td>CO₂ ⇆ O₂</td><td>Fotosíntesis / Respiración</td></tr>
        <tr><td>Litosfera ↔ Biosfera</td><td>Nutrientes</td><td>Suelos fértiles</td></tr>
        <tr><td>Criosfera ↔ Atmósfera</td><td>Feedback albedo-hielo</td><td>Amplificación ártica</td></tr>
    </tbody>
</table>

<div class="visual">
    <img src="assets/img/concentracion-atmosfera.jpg" alt="CO2 atmosférico">
    <p><em>Concentración de CO₂ (Mauna Loa) – NASA.</em></p>
</div>
HTML
,

    'ejercicios' => [
        ['enunciado' => 'Nombra los 5 componentes del sistema climático', 'respuesta' => 'Atmósfera, Hidrosfera, Criosfera, Litosfera, Biosfera'],
        ['enunciado' => '¿Qué componente tiene el mayor volumen de agua?', 'respuesta' => 'Hidrosfera (océanos)'],
        ['enunciado' => '¿Qué significa albedo = 0.8?', 'respuesta' => 'Refleja el 80 % de la radiación solar'],
        ['enunciado' => '¿Dónde se almacena la mayor cantidad de carbono del planeta?', 'respuesta' => 'Litosfera (rocas y sedimentos)'],
        ['enunciado' => 'Explica el feedback positivo hielo-albedo', 'respuesta' => 'Menos hielo → menos reflexión → más calentamiento → más derretimiento'],
        ['enunciado' => '¿Qué volumen tiene la hidrosfera?', 'respuesta' => '1.386 × 10⁹ km³'],
        ['enunciado' => '¿Cuánto carbono almacena aproximadamente la biosfera?', 'respuesta' => '550 GtC'],
        ['enunciado' => '¿Qué componente libera CO₂ en erupciones volcánicas?', 'respuesta' => 'Litosfera'],
        ['enunciado' => '¿Qué fenómeno altera el clima global cada 2-7 años?', 'respuesta' => 'El Niño / La Niña (hidrosfera-atmósfera)'],
        ['enunciado' => '¿Qué pasa si desaparece la criosfera?', 'respuesta' => 'Sube el nivel del mar y aumenta el calentamiento global'],
        ['enunciado' => 'Escribe la ecuación del balance energético terrestre', 'respuesta' => 'S(1 - α) = σT⁴'],
        ['enunciado' => '¿Qué es un "sumidero de carbono"?', 'respuesta' => 'Sistema que absorbe más CO₂ del que libera']
    ],

    'quiz' => [
        ['pregunta' => '¿Cuántos componentes principales tiene el sistema climático?', 'opciones' => ['3', '4', '5', '6'], 'correcta' => '5'],
        ['pregunta' => '¿Qué componente incluye los océanos?', 'opciones' => ['Criosfera', 'Hidrosfera', 'Litosfera', 'Biosfera'], 'correcta' => 'Hidrosfera'],
        ['pregunta' => '¿Qué componente tiene el albedo más alto?', 'opciones' => ['Océano', 'Bosque', 'Hielo', 'Desierto'], 'correcta' => 'Hielo'],
        ['pregunta' => 'Gas más abundante en la atmósfera', 'opciones' => ['Oxígeno', 'Nitrógeno', 'CO₂', 'Argón'], 'correcta' => 'Nitrógeno'],
        ['pregunta' => '¿Qué almacena más carbono a largo plazo?', 'opciones' => ['Atmósfera', 'Océanos', 'Litosfera', 'Biosfera'], 'correcta' => 'Litosfera'],
        ['pregunta' => 'Feedback hielo-albedo es...', 'opciones' => ['Negativo', 'Positivo', 'Neutro', 'Cíclico'], 'correcta' => 'Positivo'],
        ['pregunta' => 'Albedo aproximado del hielo', 'opciones' => ['0.1', '0.3', '0.6', '0.8'], 'correcta' => '0.8'],
        ['pregunta' => 'Volumen total de la hidrosfera', 'opciones' => ['10⁶ km³', '10⁹ km³', '10¹² km³', '10¹⁵ km³'], 'correcta' => '10⁹ km³'],
        ['pregunta' => '¿Qué libera metano al derretirse?', 'opciones' => ['Océanos', 'Permafrost', 'Bosques', 'Volcanes'], 'correcta' => 'Permafrost'],
        ['pregunta' => 'Ecuación del balance energético terrestre', 'opciones' => ['S(1-α) = σT⁴', 'S = cT', 'P = ρgh', 'σT⁴ = α'], 'correcta' => 'S(1-α) = σT⁴'],
        ['pregunta' => 'Capacidad calorífica del agua', 'opciones' => ['1000', '4186', '200', '900'], 'correcta' => '4186'],
        ['pregunta' => 'Fenómeno hidrosfera-atmósfera', 'opciones' => ['El Niño', 'Terremotos', 'Dunas', 'Magnetismo'], 'correcta' => 'El Niño'],
        ['pregunta' => 'Si Groenlandia se derrite, el nivel del mar sube...', 'opciones' => ['+1 m', '+3 m', '+7 m', '+20 m'], 'correcta' => '+7 m'],
        ['pregunta' => 'Componente que almacena 550 GtC', 'opciones' => ['Atmósfera', 'Hidrosfera', 'Criosfera', 'Biosfera'], 'correcta' => 'Biosfera'],
        ['pregunta' => 'Circulación termohalina es...', 'opciones' => ['Corriente atmosférica', 'Cinta oceánica global', 'Pluma volcánica', 'Viento polar'], 'correcta' => 'Cinta oceánica global'],
        ['pregunta' => 'Un tipping point es...', 'opciones' => ['Un equilibrio', 'Punto de no retorno', 'Un enfriamiento', 'Un frente frío'], 'correcta' => 'Punto de no retorno'],
        ['pregunta' => 'GtC significa...', 'opciones' => ['Gigatoneladas de carbono', 'Gradiente térmico', 'Gas total', 'Geotermia'], 'correcta' => 'Gigatoneladas de carbono'],
        ['pregunta' => 'AMOC significa...', 'opciones' => ['Atlantic Meridional Overturning Circulation', 'Arctic Methane Ocean Cycle', 'Atmospheric Mixing Oscillation Current', 'Ninguna'], 'correcta' => 'Atlantic Meridional Overturning Circulation'],
        ['pregunta' => 'Volcanes liberan...', 'opciones' => ['O₂', 'CO₂', 'N₂', 'H₂'], 'correcta' => 'CO₂'],
        ['pregunta' => 'Amplificación ártica significa...', 'opciones' => ['El Ártico se enfría', 'El Ártico se calienta más rápido', 'No cambia', 'Oscila'], 'correcta' => 'El Ártico se calienta más rápido'],
        ['pregunta' => '¿Cuánta agua dulce está en glaciares?', 'opciones' => ['~10%', '~30%', '~70%', '~90%'], 'correcta' => '~70%'],
        ['pregunta' => 'Regulador climático de corto plazo', 'opciones' => ['Litosfera', 'Criosfera', 'Atmósfera + Hidrosfera', 'Biosfera'], 'correcta' => 'Atmósfera + Hidrosfera'],
        ['pregunta' => 'Gas liberado por permafrost', 'opciones' => ['CO₂', 'CH₄', 'N₂O', 'He'], 'correcta' => 'CH₄'],
        ['pregunta' => '¿Quién reconoce los 5 componentes?', 'opciones' => ['IPCC', 'NASA', 'NOAA', 'Todos'], 'correcta' => 'Todos'],
        ['pregunta' => '¿Qué interacción causa huracanes?', 'opciones' => ['Criosfera-Litosfera', 'Atmósfera-Hidrosfera', 'Biosfera-Litosfera', 'Litosfera-Criosfera'], 'correcta' => 'Atmósfera-Hidrosfera'],
        ['pregunta' => '¿Qué almacena más calor?', 'opciones' => ['Atmósfera', 'Océanos', 'Hielos', 'Suelos'], 'correcta' => 'Océanos'],
        ['pregunta' => 'Pulso de calor oceánico es...', 'opciones' => ['Aumento de temperatura', 'Oleaje', 'Evaporación', 'Salinidad'], 'correcta' => 'Aumento de temperatura'],
        ['pregunta' => 'Feedback negativo típico', 'opciones' => ['Hielo-albedo', 'Vapor de agua', 'Metano permafrost', 'Nubes bajas'], 'correcta' => 'Nubes bajas'],
        ['pregunta' => 'El sistema climático es...', 'opciones' => ['Lineal', 'Caótico', 'Complejo no lineal', 'Perfectamente predecible'], 'correcta' => 'Complejo no lineal']
    ]
];
/**
 * MATERIA: ECOSISTEMAS
 * TEMA: Ciclo del Carbono – El flujo que mueve la vida y el clima
 * ESTILO: Cyberpunk-neón total, SVG animado ÉPICO, ecuaciones perfectas, 30 quiz nivel experto
 */

$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug'    => 'ciclo-carbono',
    'titulo'  => 'Ciclo del Carbono: El Flujo que Controla la Vida y el Clima',

    'contenido' => <<<'HTML'
<h3 class="text-center display-4">Ciclo del Carbono: El Gran Flujo Planetario</h3>
<p class="fs-5">El carbono se mueve sin parar entre 4 reservorios gigantes. En equilibrio natural estaba en balance… hasta que llegamos nosotros.</p>

<!-- SVG ANIMADO BRUTAL DEL CICLO DEL CARBONO -->
<div class="svg-diagram">
    <svg viewBox="0 0 1100 780" xmlns="http://www.w3.org/2000/svg">
        <rect width="1100" height="780" fill="#000"/>
        <defs>
            <filter id="glow"><feGaussianBlur stdDeviation="12" result="blur"/>
                <feFlood flood-color="#00ffff"/><feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <marker id="arrow" markerWidth="18" markerHeight="18" refX="16" refY="9" orient="auto">
                <path d="M0,0 L16,9 L0,18 Z" fill="#00ffff"/>
            </marker>
        </defs>

        <!-- Título neón -->
        <text x="550" y="80" fill="#ff00ff" font-size="60" font-weight="bold" text-anchor="middle" filter="url(#glow)">CICLO DEL CARBONO</text>

        <!-- ATMÓSFERA -->
        <rect x="450" y="120" width="200" height="110" rx="35" fill="#1e90ff" stroke="#00ffff" stroke-width="10" filter="url(#glow)"/>
        <text x="550" y="175" fill="#fff" font-size="36" text-anchor="middle" filter="url(#glow)">ATMÓSFERA</text>
        <text x="550" y="215" fill="#00ffff" font-size="24" text-anchor="middle">~900 GtC │ 420 ppm</text>

        <!-- BIOSFERA TERRESTRE -->
        <rect x="120" y="320" width="220" height="130" rx="35" fill="#228B22" stroke="#00ff00" stroke-width="10" filter="url(#glow)"/>
        <text x="230" y="380" fill="#fff" font-size="34" text-anchor="middle">BIOSFERA</text>
        <text x="230" y="420" fill="#00ff00" font-size="22" text-anchor="middle">~550 GtC</text>

        <!-- HIDROSFERA -->
        <rect x="760" y="320" width="220" height="130" rx="35" fill="#0066cc" stroke="#00ffff" stroke-width="10" filter="url(#glow)"/>
        <text x="870" y="380" fill="#fff" font-size="34" text-anchor="middle">HIDROSFERA</text>
        <text x="870" y="420" fill="#00ffff" font-size="22" text-anchor="middle">~38 000 GtC</text>

        <!-- LITOSFERA -->
        <rect x="450" y="560" width="200" height="110" rx="35" fill="#8B4513" stroke="#ff9900" stroke-width="10" filter="url(#glow)"/>
        <text x="550" y="615" fill="#fff" font-size="36" text-anchor="middle">LITOSFERA</text>
        <text x="550" y="655" fill="#ff9900" font-size="22" text-anchor="middle">~60 000 000 GtC</text>

        <!-- FLECHAS ANIMADAS GIGANTES -->
        <!-- Fotosíntesis -->
        <path d="M550 230 L550 310 L340 340" stroke="#00ff00" stroke-width="10" marker-end="url(#arrow)" filter="url(#glow)">
            <animate attributeName="stroke-dashoffset" from="200" to="0" dur="4s" repeatCount="indefinite"/>
        </path>
        <text x="460" y="280" fill="#00ff00" font-size="26" filter="url(#glow)">Fotosíntesis ≈120 GtC/año</text>

        <!-- Respiración -->
        <path d="M230 320 L230 250 L550 230" stroke="#ff3300" stroke-width="10" marker-end="url(#arrow)" filter="url(#glow)">
            <animate attributeName="stroke-dashoffset" from="200" to="0" dur="4s" repeatCount="indefinite"/>
        </path>
        <text x="360" y="260" fill="#ff3300" font-size="26" filter="url(#glow)">Respiración ≈120 GtC/año</text>

        <!-- Intercambio océano-atmósfera -->
        <path d="M550 230 L760 340" stroke="#00ccff" stroke-width="10" marker-end="url(#arrow)" filter="url(#glow)">
            <animate attributeName="stroke-dashoffset" from="100" to="0" dur="3s" repeatCount="indefinite"/>
        </path>
        <text x="660" y="260" fill="#00ccff" font-size="26" filter="url(#glow)">Intercambio ≈90 GtC/año</text>

        <!-- Combustión fósiles + deforestación -->
        <path d="M550 560 L550 230" stroke="#ff1744" stroke-width="12" marker-end="url(#arrow)" filter="url(#glow)">
            <animate attributeName="stroke-dashoffset" from="300" to="0" dur="5s" repeatCount="indefinite"/>
        </path>
        <text x="600" y="400" fill="#ff1744" font-size="30" filter="url(#glow)">+11.5 GtC/año (humanos)</text>

        <!-- Leyenda final -->
        <text x="550" y="740" fill="#00ffff" font-size="32" text-anchor="middle" filter="url(#glow)">
            El ciclo estaba en equilibrio… hasta que empezamos a quemar el pasado.
        </text>
    </svg>
    <div class="caption">Flujos del ciclo del carbono (GtC/año) – Estilo cyberpunk-neón 2025</div>
</div>

<h4 class="mt-5">1. Reservorios de Carbono (2025)</h4>
<table class="table text-center fs-5">
    <thead><tr><th>Reservorio</th><th>Cantidad</th><th>Tiempo de residencia</th></tr></thead>
    <tbody>
        <tr><td>Atmósfera</td><td>~900 GtC</td><td>~5 años</td></tr>
        <tr><td>Biosfera terrestre</td><td>~550 GtC</td><td>10–100 años</td></tr>
        <tr><td>Océanos (total)</td><td>~38 000 GtC</td><td>~1 000 años (profundo)</td></tr>
        <tr><td>Litosfera (rocas + fósiles)</td><td>~60 000 000 GtC</td><td>Millones de años</td></tr>
    </tbody>
</table>

<h4 class="mt-5">2. Procesos Clave</h4>
<div class="row text-center my-5">
    <div class="col-md-6">
        <p class="fs-4 fw-bold text-success">Fotosíntesis</p>
        <div class="eq">$$ \ce{6CO2 + 6H2O + luz -> C6H12O6 + 6O2} $$</div>
    </div>
    <div class="col-md-6">
        <p class="fs-4 fw-bold text-danger">Respiración / Combustión</p>
        <div class="eq">$$ \ce{C6H12O6 + 6O2 -> 6CO2 + 6H2O + energia} $$</div>
    </div>
</div>

<h4 class="mt-5">3. Flujos Anuales (GtC/año)</h4>
<table class="table text-center">
    <tr><td>Fotosíntesis terrestre</td><td>≈120</td></tr>
    <tr><td>Respiración terrestre</td><td>≈120</td></tr>
    <tr><td>Intercambio océano-atmósfera</td><td>≈90</td></tr>
    <tr><td>Absorción neta oceánica</td><td>≈2.5</td></tr>
    <tr class="table-danger"><td>Emisiones humanas (fósiles + deforestación)</td><td>≈11.5</td></tr>
</table>

<h4 class="mt-5 text-danger">4. Impacto Humano → Desequilibrio Total</h4>
<p class="fs-4">Concentración actual de CO₂: <strong>~420 ppm (2025)</strong> → la más alta en 3 millones de años</p>
<div class="ejemplo">
    Desde la Revolución Industrial hemos aumentado el CO₂ atmosférico en <strong>más del 50 %</strong>.
</div>

<div class="visual">
    <img src="assets/img/nasa_carbono.gif" alt="Curva de Keeling">
    <p><em>Curva de Keeling: el latido anual del planeta + la tendencia humana. Fuente: NASA</em></p>
</div>
HTML
,
    'ejercicios' => [
        ['enunciado' => 'Escribe la ecuación de la fotosíntesis', 'respuesta' => '\\ce{6CO2 + 6H2O -> C6H12O6 + 6O2}'],
        ['enunciado' => '¿Cuál es el reservorio más grande de carbono?', 'respuesta' => 'Litosfera (rocas sedimentarias y combustibles fósiles)'],
        ['enunciado' => '¿Cuánto carbono hay aproximadamente en la atmósfera?', 'respuesta' => '~900 GtC'],
        ['enunciado' => '¿Cuánto carbono absorbe la fotosíntesis terrestre al año?', 'respuesta' => '~120 GtC/año'],
        ['enunciado' => '¿Cuánto emiten los humanos al año (fósiles + deforestación)?', 'respuesta' => '~11.5 GtC/año'],
        ['enunciado' => '¿Qué son los océanos para el carbono atmosférico?', 'respuesta' => 'El mayor sumidero activo (~2.5 GtC/año neto)'],
        ['enunciado' => '¿Qué es un "sumidero de carbono"?', 'respuesta' => 'Sistema que absorbe más carbono del que libera'],
        ['enunciado' => '¿Qué le pasa al ciclo del carbono con la deforestación?', 'respuesta' => 'Se reduce la fotosíntesis y se libera carbono almacenado'],
        ['enunciado' => '¿Qué es la acidificación oceánica?', 'respuesta' => 'CO₂ + H₂O → H₂CO₃ → baja el pH del océano'],
        ['enunciado' => '¿Qué es la "bomba biológica" del océano?', 'respuesta' => 'Fitoplancton fija CO₂ → muere → se hunde → carbono al fondo marino'],
        ['enunciado' => '¿Qué es el efecto "greening" observado por satélite?', 'respuesta' => 'Aumento de vegetación por mayor CO₂ (fertilización)'],
        ['enunciado' => '¿Qué es el carbono azul?', 'respuesta' => 'Carbono almacenado en manglares, marismas y praderas marinas']
    ],

    'quiz' => [
        ['pregunta' => '¿Cuál es el reservorio MÁS grande de carbono?', 'opciones' => ['Atmósfera', 'Océanos', 'Biosfera', 'Litosfera'], 'correcta' => 'Litosfera'],
        ['pregunta' => 'Proceso que absorbe CO₂ atmosférico', 'opciones' => ['Respiración', 'Fotosíntesis', 'Combustión', 'Evaporación'], 'correcta' => 'Fotosíntesis'],
        ['pregunta' => 'Flujo anual de fotosíntesis terrestre', 'opciones' => ['10 GtC', '120 GtC', '1 000 GtC', '12 000 GtC'], 'correcta' => '120 GtC'],
        ['pregunta' => 'Emisiones humanas actuales (2025)', 'opciones' => ['1 GtC/año', '11.5 GtC/año', '50 GtC/año', '100 GtC/año'], 'correcta' => '11.5 GtC/año'],
        ['pregunta' => 'Concentración actual de CO₂ (2025)', 'opciones' => ['280 ppm', '350 ppm', '420 ppm', '500 ppm'], 'correcta' => '420 ppm'],
        ['pregunta' => 'Absorción neta anual de los océanos', 'opciones' => ['0.5 GtC', '2.5 GtC', '10 GtC', '25 GtC'], 'correcta' => '2.5 GtC'],
        ['pregunta' => 'Tiempo de residencia del carbono en océano profundo', 'opciones' => ['10 años', '100 años', '1 000 años', '10 000 años'], 'correcta' => '1 000 años'],
        ['pregunta' => 'Ecuación de la fotosíntesis', 'opciones' => ['\\ce{CO2 -> C6H12O6}', '\\ce{6CO2 + 6H2O -> C6H12O6 + 6O2}', '\\ce{C6H12O6 -> 6CO2 + 6H2O}', 'Ninguna'], 'correcta' => '\\ce{6CO2 + 6H2O -> C6H12O6 + 6O2}'],
        ['pregunta' => '¿Qué es la acidificación oceánica?', 'opciones' => ['Más sal', 'Menos O₂', 'Baja el pH por CO₂', 'Sube la temperatura'], 'correcta' => 'Baja el pH por CO₂'],
        ['pregunta' => '¿Qué es la "bomba biológica"?', 'opciones' => ['Fitoplancton hunde carbono', 'Explosión algal', 'Corriente oceánica', 'Volcán submarino'], 'correcta' => 'Fitoplancton hunde carbono'],
        ['pregunta' => '¿Qué es el "carbono azul"?', 'opciones' => ['En manglares y marismas', 'En la atmósfera', 'En combustibles fósiles', 'En nubes'], 'correcta' => 'En manglares y mar�ismas'],
        ['pregunta' => '¿Qué observa la curva de Keeling?', 'opciones' => ['Temperatura', 'CO₂ creciente + oscilación estacional', 'O₂', 'Lluvia'], 'correcta' => 'CO₂ creciente + oscilación estacional'],
        ['pregunta' => '¿Qué causa el "greening" terrestre?', 'opciones' => ['Menos CO₂', 'Fertilización por CO₂', 'Más lluvia', 'Menos luz'], 'correcta' => 'Fertilización por CO₂'],
        ['pregunta' => '¿Qué libera el permafrost al derretirse?', 'opciones' => ['CO₂', 'Metano (CH₄)', 'Oxígeno', 'Nitrógeno'], 'correcta' => 'Metano (CH₄)'],
        ['pregunta' => '¿Qué mide GtC?', 'opciones' => ['Gigatones de CO₂', 'Gigatones de carbono', 'Grados Celsius', 'Gases totales'], 'correcta' => 'Gigatones de carbono'],
        ['pregunta' => '¿Qué es un "sumidero de carbono"?', 'opciones' => ['Emite carbono', 'Absorbe más del que emite', 'No hace nada', 'Solo plantas'], 'correcta' => 'Absorbe más del que emite'],
        ['pregunta' => '¿Qué porcentaje del carbono total está en la litosfera?', 'opciones' => ['<1%', '10%', '50%', '>99%'], 'correcta' => '>99%'],
        ['pregunta' => '¿Cuánto aumentó el CO₂ desde 1750?', 'opciones' => ['+10%', '+30%', '+50%', '+100%'], 'correcta' => '+50%'],
        ['pregunta' => '¿Qué ecosistemas costeros son los mayores sumideros por área?', 'opciones' => ['Playas', 'Manglares y marismas', 'Corales', 'Arrecifes'], 'correcta' => 'Manglares y marismas'],
        ['pregunta' => '¿Qué ley explica la solubilidad del CO₂ en océano?', 'opciones' => ['Ley de Boyle', 'Ley de Henry', 'Ley de Dalton', 'Ley de Fick'], 'correcta' => 'Ley de Henry'],
        ['pregunta' => '¿Qué porcentaje del CO₂ antropogénico absorben océanos?', 'opciones' => ['~10%', '~25%', '~40%', '~60%'], 'correcta' => '~25%'],
        ['pregunta' => '¿Qué es el "carbono negro" (black carbon)?', 'opciones' => ['Hollín', 'CO₂', 'Metano', 'Carbonatos'], 'correcta' => 'Hollín'],
        ['pregunta' => '¿Qué feedback positivo importante hay en el Ártico?', 'opciones' => ['Más hielo', 'Permafrost libera CH₄', 'Menos CO₂', 'Enfriamiento'], 'correcta' => 'Permafrost libera CH₄'],
        ['pregunta' => '¿En qué reservorio está el 95% del carbono móvil?', 'opciones' => ['Atmósfera', 'Océanos', 'Biosfera', 'Suelos'], 'correcta' => 'Océanos'],
        ['pregunta' => '¿Qué es el "DOC"?', 'opciones' => ['Carbono orgánico disuelto', 'Dióxido de carbono', 'Carbono muerto', 'Carbono fósil'], 'correcta' => 'Carbono orgánico disuelto'],
        ['pregunta' => '¿Qué porcentaje del carbono terrestre está en suelos?', 'opciones' => ['~20%', '~50%', '~75%', '~90%'], 'correcta' => '~75%'],
        ['pregunta' => '¿Qué proceso natural igualaba fotosíntesis y respiración antes de 1750?', 'opciones' => ['Combustión', 'Balance natural', 'Volcanes', 'Erosión'], 'correcta' => 'Balance natural'],
        ['pregunta' => '¿Qué mide la "fracción aerotransportada"?', 'opciones' => ['% de nuestras emisiones que queda en atmósfera', 'Aviones', 'CO₂ total', 'Metano'], 'correcta' => '% de nuestras emisiones que queda en atmósfera'],
        ['pregunta' => '¿Cuánto tiempo tarda el exceso de CO₂ en desaparecer?', 'opciones' => ['10 años', '100 años', '1 000 años', 'Cientos de miles de años'], 'correcta' => 'Cientos de miles de años'],
        ['pregunta' => 'El ciclo del carbono es...', 'opciones' => ['Lineal', 'Cerrado', 'Abierto', 'Imposible de alterar'], 'correcta' => 'Cerrado']
    ]
];
/**
 * MATERIA: ECOSISTEMAS
 * TEMA: Ley de Liebig – El tablón más corto manda
 * ESTILO: Cyberpunk-neón total, SVG animado BRUTAL, ecuaciones perfectas, 30 quiz nivel experto
 */

$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug'    => 'ley-liebig',
    'titulo'  => 'Ley de Liebig: El Factor Limitante que Controla Todo',

    'contenido' => <<<'HTML'

<h3 class="text-center display-4">Ley de Liebig (1840)</h3>
<p class="fs-4 text-center">“El rendimiento está determinado por el recurso esencial más escaso”</p>

<!-- SVG ANIMADO ÉPICO DEL BARRIL DE LIEBIG -->
<div class="svg-diagram">
    <svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
        <rect width="1200" height="800" fill="#000"/>
        <defs>
            <filter id="glow"><feGaussianBlur stdDeviation="14" result="blur"/>
                <feFlood flood-color="#00ffff"/><feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <filter id="glow-red"><feGaussianBlur stdDeviation="16" result="blur"/>
                <feFlood flood-color="#ff1744"/><feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
        </defs>

        <!-- Título neón -->
        <text x="600" y="90" fill="#ff00ff" font-size="70" font-weight="bold" text-anchor="middle" filter="url(#glow)">BARRIL DE LIEBIG</text>

        <!-- Barril gigante estilo cyberpunk -->
        <ellipse cx="600" cy="200" rx="300" ry="80" fill="#2c1810" stroke="#00ffff" stroke-width="12" filter="url(#glow)"/>
        <ellipse cx="600" cy="680" rx="300" ry="80" fill="#2c1810" stroke="#00ffff" stroke-width="12" filter="url(#glow)"/>
        <rect x="300" y="200" width="600" height="480" fill="none" stroke="#00ffff" stroke-width="12" filter="url(#glow)"/>

        <!-- Tablones (factores) con alturas diferentes -->
        <rect x="350" y="250" width="80" height="400" fill="#00e676" filter="url(#glow)"/>
        <rect x="450" y="300" width="80" height="350" fill="#00e676" filter="url(#glow)"/>
        <rect x="550" y="220" width="80" height="430" fill="#00e676" filter="url(#glow)"/>
        <rect x="650" y="280" width="80" height="370" fill="#00e676" filter="url(#glow)"/>
        <rect x="750" y="320" width="80" height="330" fill="#ff1744" filter="url(#glow-red)"/> <!-- EL MÁS CORTO -->

        <!-- Etiquetas neón -->
        <text x="390" y="240" fill="#000" font-size="28" text-anchor="middle" filter="url(#glow)">N</text>
        <text x="490" y="290" fill="#000" font-size="28" text-anchor="middle" filter="url(#glow)">P</text>
        <text x="590" y="210" fill="#000" font-size="28" text-anchor="middle" filter="url(#glow)">K</text>
        <text x="690" y="270" fill="#000" font-size="28" text-anchor="middle" filter="url(#glow)">H₂O</text>
        <text x="790" y="310" fill="#fff" font-size="36" font-weight="bold" text-anchor="middle" filter="url(#glow-red)">Fe ← LIMITANTE</text>

        <!-- Agua que sube solo hasta el tablón más corto -->
        <rect id="water" x="310" y="650" width="580" height="0" fill="#1e90ff" opacity="0.8" filter="url(#glow)">
            <animate attributeName="height" from="0" to="330" dur="4s" repeatCount="indefinite" fill="freeze"/>
            <animate attributeName="y" from="650" to="320" dur="4s" repeatCount="indefinite" fill="freeze"/>
        </rect>

        <!-- Texto dentro del agua -->
        <text x="600" y="500" fill="#00ffff" font-size="56" font-weight="bold" text-anchor="middle" filter="url(#glow)">
            PRODUCTIVIDAD MÁXIMA
        </text>

        <!-- Leyenda final -->
        <text x="600" y="750" fill="#00ffff" font-size="36" text-anchor="middle" filter="url(#glow)">
            El tablón más corto decide todo.
        </text>
    </svg>
    <div class="caption">Animación cyberpunk del Barril de Liebig – El factor limitante en acción</div>
</div>

<h4 class="mt-5">1. Principio Fundamental (1840)</h4>
<div class="eq">$$ P = k \cdot \min(f_1, f_2, f_3, \dots, f_n) $$</div>
<p class="text-center mt-3 fs-5"><em>P = productividad real │ k = constante │ min() = el factor más escaso</em></p>

<div class="ejemplo">
    <p class="fs-4">Ejemplo clásico: tienes todo el nitrógeno y potasio del mundo… pero falta <strong>fósforo</strong> → tu cultivo crece como si no tuvieras nada.</p>
</div>

<h4 class="mt-5">2. Factores Limitantes Más Comunes</h4>
<table class="table text-center fs-5">
    <tr><th>Factor</th><th>Ecosistema típico</th><th>Limitante habitual</th></tr>
    <tr><td>Nitrógeno (N)</td><td>Praderas, cultivos</td><td>Más común en tierra</td></tr>
    <tr><td>Fósforo (P)</td><td>Lagos, selvas tropicales</td><td>Más común en agua dulce</td></tr>
    <tr><td>Hierro (Fe)</td><td>Océano abierto (HNLC)</td><td>Limitante en 30 % del océano</td></tr>
    <tr><td>Agua</td><td>Desiertos, zonas áridas</td><td>Obvio</td></tr>
    <tr><td>Luz</td><td>Sotobosque, fondo marino</td><td>Energía inicial</td></tr>
    <tr><td>Temperatura</td><td>Tundra, alta montaña</td><td>Enzimas no funcionan</td></tr>
</table>

<h4 class="mt-5 text-warning">3. Ley de Shelford (1913) – El complemento</h4>
<p class="fs-4 text-center">“El exceso también mata”</p>
<div class="visual">
    <img src="assets/img/ley-tolerancia.jpg" alt="Curva de tolerancia de Shelford" class="rounded">
    <p><em>Curva de tolerancia: entre el mínimo (Liebig) y el máximo (Shelford) está la vida</em></p>
</div>

<h4 class="mt-5">4. Aplicaciones Prácticas Brutales</h4>
<ul class="fs-5">
    <li>Agricultura → fertilizantes NPK balanceados</li>
    <li>Eutrofización → el P es el “gatillo” en lagos</li>
    <li>Geoingeniería oceánica → añadir hierro = bloom masivo de fitoplancton</li>
    <li>Restauración ecológica → primero identifica el factor limitante real</li>
</ul>
HTML
,
    'ejercicios' => [
        ['enunciado' => 'Enuncia la Ley de Liebig en una frase', 'respuesta' => 'El crecimiento está limitado por el recurso esencial más escaso'],
        ['enunciado' => 'Escribe la fórmula matemática conceptual de Liebig', 'respuesta' => 'P = min(f₁, f₂, ..., fₙ) o P = k · min(f₁, f₂, ...)'],
        ['enunciado' => '¿Qué nutriente limita más frecuentemente la productividad primaria en lagos?', 'respuesta' => 'Fósforo (P)'],
        ['enunciado' => '¿Qué elemento limita el crecimiento del fitoplancton en grandes zonas del océano abierto?', 'respuesta' => 'Hierro (Fe)'],
        ['enunciado' => '¿Qué factor limitante predomina en el desierto?', 'respuesta' => 'Agua'],
        ['enunciado' => '¿Qué ley dice que “el exceso también limita”?', 'respuesta' => 'Ley de Shelford o Ley del Máximo'],
        ['enunciado' => '¿Qué es la “zona de tolerancia”?', 'respuesta' => 'Rango de un factor ambiental donde el organismo puede sobrevivir y reproducirse'],
        ['enunciado' => '¿Por qué los fertilizantes son NPK y no solo N?', 'respuesta' => 'Porque si falta P o K, el N extra no sirve de nada (Ley de Liebig)'],
        ['enunciado' => '¿Qué ocurre al añadir hierro en zonas HNLC del océano?', 'respuesta' => 'Bloom explosivo de fitoplancton y posible secuestro de CO₂'],
        ['enunciado' => '¿Qué es la eutrofización cultural?', 'respuesta' => 'Exceso de nutrientes (sobre todo P) por actividad humana → blooms algales'],
        ['enunciado' => 'En selvas tropicales antiguas, ¿qué nutriente suele ser limitante?', 'respuesta' => 'Fósforo (P), porque los suelos están muy lavados'],
        ['enunciado' => '¿Quién extendió la Ley de Liebig a la luz (1905)?', 'respuesta' => 'Frederick Frost Blackman']
    ],

    'quiz' => [
        // FÁCIL
        ['pregunta' => 'La Ley de Liebig también se conoce como...', 'opciones' => ['Ley del máximo', 'Ley del mínimo', 'Ley del promedio', 'Ley de Shelford'], 'correcta' => 'Ley del mínimo'],
        ['pregunta' => 'Analogía clásica de Liebig', 'opciones' => ['Cadena', 'Barril', 'Pirámide', 'Escalera'], 'correcta' => 'Barril'],
        ['pregunta' => 'El crecimiento lo limita el factor...', 'opciones' => ['Más abundante', 'Más escaso', 'Promedio', 'Más tóxico'], 'correcta' => 'Más escaso'],
        ['pregunta' => 'Autor de la ley', 'opciones' => ['Shelford', 'Liebig', 'Blackman', 'Mendel'], 'correcta' => 'Liebig'],
        ['pregunta' => 'Año aproximado de la ley', 'opciones' => ['1750', '1840', '1913', '1950'], 'correcta' => '1840'],
        ['pregunta' => 'En lagos de agua dulce limita normalmente...', 'opciones' => ['Nitrógeno', 'Fósforo', 'Hierro', 'Potasio'], 'correcta' => 'Fósforo'],
        ['pregunta' => 'En océano abierto (zonas HNLC) limita...', 'opciones' => ['Nitrógeno', 'Fósforo', 'Hierro', 'Silicio'], 'correcta' => 'Hierro'],
        ['pregunta' => 'En desierto limita...', 'opciones' => ['Luz', 'Agua', 'Nitrógeno', 'CO₂'], 'correcta' => 'Agua'],
        ['pregunta' => 'Ley de Shelford trata sobre...', 'opciones' => ['El mínimo', 'El máximo', 'El óptimo', 'El promedio'], 'correcta' => 'El máximo'],
        ['pregunta' => 'La “zona de tolerancia” está entre...', 'opciones' => ['Liebig y Shelford', 'Solo Liebig', 'Solo Shelford', 'Ninguno'], 'correcta' => 'Liebig y Shelford'],

        // MEDIO
        ['pregunta' => 'Fórmula conceptual de Liebig', 'opciones' => ['P = max(f)', 'P = min(f)', 'P = avg(f)', 'P = sum(f)'], 'correcta' => 'P = min(f)'],
        ['pregunta' => 'En agricultura, ¿por qué se usa NPK?', 'opciones' => ['Porque son los únicos nutrientes', 'Para evitar que alguno sea limitante', 'Porque son baratos', 'Por tradición'], 'correcta' => 'Para evitar que alguno sea limitante'],
        ['pregunta' => 'Eutrofización es causada principalmente por exceso de...', 'opciones' => ['Nitrógeno', 'Fósforo', 'Potasio', 'Calcio'], 'correcta' => 'Fósforo'],
        ['pregunta' => 'Añadir hierro al océano provoca...', 'opciones' => ['Muerte algal', 'Bloom fitoplancton', 'Acidificación', 'Enfriamiento'], 'correcta' => 'Bloom fitoplancton'],
        ['pregunta' => 'En suelos tropicales antiguos suele limitar...', 'opciones' => ['Nitrógeno', 'Fósforo', 'Agua', 'Luz'], 'correcta' => 'Fósforo'],
        ['pregunta' => 'En praderas templadas suele limitar...', 'opciones' => ['Fósforo', 'Nitrógeno', 'Agua', 'Luz'], 'correcta' => 'Nitrógeno'],
        ['pregunta' => '¿Quién formuló la Ley del Máximo?', 'opciones' => ['Liebig', 'Shelford', 'Blackman', 'Odum'], 'correcta' => 'Shelford'],
        ['pregunta' => 'La curva de respuesta típica según Liebig es...', 'opciones' => ['Lineal', 'Exponencial', 'Plató después del mínimo', 'Sigmoide'], 'correcta' => 'Plató después del mínimo'],
        ['pregunta' => 'NPK significa...', 'opciones' => ['Nitrógeno-Potasion-Fósforo', 'Nitrógeno-Fósforo-Potasio', 'Nitrógeno-Fósforo-Kriptón', 'Ninguno'], 'correcta' => 'Nitrógeno-Fósforo-Potasio'],
        ['pregunta' => 'En tundra limita principalmente...', 'opciones' => ['Agua', 'Nitrógeno', 'Temperatura', 'Luz'], 'correcta' => 'Temperatura'],

        // DIFÍCIL
        ['pregunta' => 'Extensión de Liebig a la luz (1905)', 'opciones' => ['Ley de Shelford', 'Ley de Blackman', 'Ley de Mitscherlich', 'Ley de Boyle'], 'correcta' => 'Ley de Blackman'],
        ['pregunta' => 'Modelo matemático más simple de Liebig', 'opciones' => ['P = a + b·N', 'P = k·min(N,P)', 'P = N·P', 'P = e^N'], 'correcta' => 'P = k·min(N,P)'],
        ['pregunta' => 'En geoingeniería, añadir Fe busca...', 'opciones' => ['Aumentar pesca', 'Secuestrar CO₂', 'Reducir temperatura', 'Todas'], 'correcta' => 'Todas'],
        ['pregunta' => 'La ley de Liebig es de tipo...', 'opciones' => ['Aditiva', 'Multiplicativa', 'Minimoide', 'Exponencial'], 'correcta' => 'Minimoide'],
        ['pregunta' => 'En limnología, el “gatillo” de la eutrofización es...', 'opciones' => ['Nitrógeno', 'Fósforo', 'Carbono', 'Hierro'], 'correcta' => 'Fósforo'],
        ['pregunta' => 'Liebig era por profesión...', 'opciones' => ['Botánico', 'Químico agrícola', 'Ecólogo', 'Físico'], 'correcta' => 'Químico agrícola'],
        ['pregunta' => 'En zonas HNLC del océano significa...', 'opciones' => ['High Nutrient Low Chlorophyll', 'High Nitrogen Low Carbon', 'Low Nutrient High Chlorophyll', 'Ninguna'], 'correcta' => 'High Nutrient Low Chlorophyll'],
        ['pregunta' => 'Factor limitante en el dosel de selva tropical (plantas altas)', 'opciones' => ['Luz', 'Agua', 'Nutrientes', 'CO₂'], 'correcta' => 'Luz'],
        ['pregunta' => '¿Puede un factor compensar totalmente a otro?', 'opciones' => ['Sí siempre', 'Nunca', 'Solo parcialmente', 'Depende'], 'correcta' => 'Solo parcialmente'],
        ['pregunta' => 'El principio de Liebig es la base de...', 'opciones' => ['Agricultura de precisión', 'Fertilizantes balanceados', 'Secuestro de carbono', 'Todas'], 'correcta' => 'Todas']
    ]
];
/**
 * MATERIA: ECOSISTEMAS
 * TEMA: Ley de Shelford – Ley de la Tolerancia (1913)
 * ESTILO: Cyberpunk-neón total, SVG animado ÉPICO, 30 quiz nivel experto
 */

$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug'    => 'ley-shelford',
    'titulo'  => 'Ley de Shelford: El Rango que Define Quién Vive y Quién Muere',

    'contenido' => <<<'HTML'

<h3 class="text-center display-4">Ley de Shelford (1913)</h3>
<p class="fs-4 text-center">“La vida solo existe dentro de un rango limitado de cada factor ambiental”</p>

<!-- SVG ANIMADO ÉPICO DE LA CURVA DE TOLERANCIA -->
<div class="svg-diagram">
    <svg viewBox="0 0 1300 850" xmlns="http://www.w3.org/2000/svg">
        <rect width="1300" height="850" fill="#000"/>
        <defs>
            <filter id="glow"><feGaussianBlur stdDeviation="16" result="blur"/>
                <feFlood flood-color="#00ffff"/><feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <filter id="glow-red"><feGaussianBlur stdDeviation="18" result="blur"/>
                <feFlood flood-color="#ff1744"/><feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <linearGradient id="grad-optimo" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#00e676"/>
                <stop offset="100%" stop-color="#1de9b6"/>
            </linearGradient>
        </defs>

        <!-- Título neón gigante -->
        <text x="650" y="100" fill="#ff00ff" font-size="80" font-weight="bold" text-anchor="middle" filter="url(#glow)">LEY DE SHELFORD</text>

        <!-- Ejes -->
        <line x1="150" y1="700" x2="1150" y2="700" stroke="#00ffff" stroke-width="8" filter="url(#glow)"/>
        <line x1="150" y1="700" x2="150" y2="150" stroke="#00ffff" stroke-width="8" filter="url(#glow)"/>

        <!-- Etiquetas ejes -->
        <text x="650" y="780" fill="#00ffff" font-size="36" text-anchor="middle" filter="url(#glow)">Factor ambiental (ej. Temperatura °C)</text>
        <text x="80" y="425" fill="#00ffff" font-size="36" text-anchor="middle" transform="rotate(-90,80,425)" filter="url(#glow)">Densidad poblacional</text>

        <!-- Zonas de fondo -->
        <rect x="150" y="150" width="200" height="550" fill="#ff1744" opacity="0.25" filter="url(#glow-red)"/>
        <rect x="350" y="150" width="150" height="550" fill="#ff5722" opacity="0.35"/>
        <rect x="500" y="150" width="300" height="550" fill="#00e676" opacity="0.4" filter="url(#glow)"/>
        <rect x="800" y="150" width="150" height="550" fill="#ff5722" opacity="0.35"/>
        <rect x="950" y="150" width="200" height="550" fill="#ff1744" opacity="0.25" filter="url(#glow-red)"/>

        <!-- Curva de campana animada -->
        <path id="curve" d="M150 700 Q450 600 650 250 Q850 600 1150 700" fill="none" stroke="url(#grad-optimo)" stroke-width="18" filter="url(#glow)">
            <animate attributeName="stroke-dashoffset" from="2000" to="0" dur="6s" repeatCount="indefinite"/>
        </path>

        <!-- Etiquetas de zonas -->
        <text x="250" y="200" fill="#ff1744" font-size="48" font-weight="bold" text-anchor="middle" filter="url(#glow-red)">LETAL</text>
        <text x="425" y="200" fill="#ff5722" font-size="42" text-anchor="middle" filter="url(#glow)">ESTRÉS</text>
        <text x="650" y="200" fill="#00e676" font-size="70" font-weight="bold" text-anchor="middle" filter="url(#glow)">ÓPTIMO</text>
        <text x="875" y="200" fill="#ff5722" font-size="42" text-anchor="middle" filter="url(#glow)">ESTRÉS</text>
        <text x="1050" y="200" fill="#ff1744" font-size="48" font-weight="bold" text-anchor="middle" filter="url(#glow-red)">LETAL</text>

        <!-- Marcas de temperatura -->
        <text x="250" y="740" fill="#fff" font-size="32" text-anchor="middle">0°C</text>
        <text x="425" y="740" fill="#fff" font-size="32" text-anchor="middle">15°C</text>
        <text x="650" y="740" fill="#fff" font-size="40" text-anchor="middle">25°C</text>
        <text x="875" y="740" fill="#fff" font-size="32" text-anchor="middle">35°C</text>
        <text x="1050" y="740" fill="#fff" font-size="32" text-anchor="middle">45°C</text>

        <!-- Leyenda final -->
        <text x="650" y="820" fill="#00ffff" font-size="40" text-anchor="middle" filter="url(#glow)">
            Fuera del rango → estrés → muerte
        </text>
    </svg>
    <div class="caption">Curva de Tolerancia de Shelford – Cyberpunk Edition 2025</div>
</div>

<h4 class="mt-5">1. Las 5 Zonas de Tolerancia</h4>
<table class="table text-center fs-5">
    <tr><th>Zona</th><th>Efecto fisiológico</th><th>Ejemplo (temperatura humana)</th></tr>
    <tr><td>Letal mínima</td><td>Muerte por congelación</td><td>&lt; 0°C</td></tr>
    <tr><td>Estrés mínimo</td><td>Metabolismo lento, inmunidad baja</td><td>0–15°C</td></tr>
    <tr class="table-success"><td>ÓPTIMO</td><td>Máxima reproducción y supervivencia</td><td>20–28°C</td></tr>
    <tr><td>Estrés máximo</td><td>Deshidratación, golpe de calor</td><td>35–40°C</td></tr>
    <tr><td>Letal máxima</td><td>Desnaturalización de proteínas</td><td>&gt; 44°C</td></tr>
</table>

<div class="ejemplo">
    <p class="fs-4">Los corales blanquean cuando la temperatura supera los 30–31°C → estrés → expulsan zooxantelas → muerte si persiste.</p>
</div>

<h4 class="mt-5">2. Factores Ambientales Más Críticos</h4>
<ul class="fs-4">
    <li>Temperatura → enzimas</li>
    <li>pH → absorción de nutrientes</li>
    <li>Salinidad → osmorregulación</li>
    <li>Oxígeno disuelto → respiración</li>
    <li>Luz → fotosíntesis y ritmos biológicos</li>
</ul>

<h4 class="mt-5 text-warning">3. Shelford vs Liebig</h4>
<div class="row text-center">
    <div class="col-md-6">
        <p class="fs-4 text-danger">Liebig (1840)</p>
        <p>“Solo importa el mínimo”</p>
    </div>
    <div class="col-md-6">
        <p class="fs-4 text-success">Shelford (1913)</p>
        <p>“El mínimo Y el máximo importan”</p>
    </div>
</div>

<h4 class="mt-5">4. Aplicaciones Brutales</h4>
<ul class="fs-4">
    <li>Distribución de especies y biomas</li>
    <li>Éxito de especies invasoras → eurioicas (amplio rango)</li>
    <li>Cambio climático → migración o extinción</li>
    <li>Acuicultura y agricultura de precisión</li>
</ul>
HTML
,
    'ejercicios' => [
        ['enunciado' => 'Enuncia la Ley de Shelford en una frase', 'respuesta' => 'La presencia y éxito de un organismo dependen de que los factores ambientales estén dentro de su rango de tolerancia'],
        ['enunciado' => 'Nombra las 5 zonas de la curva de tolerancia', 'respuesta' => 'Letal mínima → Estrés mínimo → Óptimo → Estrés máximo → Letal máxima'],
        ['enunciado' => '¿Qué le pasa a una especie fuera de su rango óptimo?', 'respuesta' => 'Sufre estrés fisiológico, menor crecimiento y reproducción'],
        ['enunciado' => '¿Qué significa “estenoterma”?', 'respuesta' => 'Tolerancia estrecha a la temperatura'],
        ['enunciado' => '¿Qué significa “eurihalina”?', 'respuesta' => 'Tolerancia amplia a la salinidad'],
        ['enunciado' => '¿Por qué los corales blanquean?', 'respuesta' => 'Temperatura supera el máximo tolerable → estrés térmico → expulsión de zooxantelas'],
        ['enunciado' => '¿Por qué las especies invasoras son tan exitosas?', 'respuesta' => 'Tienen rangos de tolerancia muy amplios (generalistas)'],
        ['enunciado' => '¿Cómo afecta el cambio climático según Shelford?', 'respuesta' => 'Muchas especies salen de su rango óptimo → migración o extinción'],
        ['enunciado' => 'Diferencia entre nicho fundamental y nicho realizado', 'respuesta' => 'Fundamental = rango total sin competencia │ Realizado = rango ocupado con interacciones bióticas'],
        ['enunciado' => '¿Qué especie tiene mayor probabilidad de sobrevivir al cambio climático?', 'respuesta' => 'La que tenga el rango de tolerancia más amplio'],
        ['enunciado' => '¿En qué año publicó Shelford su ley?', 'respuesta' => '1913'],
        ['enunciado' => '¿La curva de tolerancia siempre es simétrica?', 'respuesta' => 'No, suele ser asimétrica (ej. muchas especies toleran más frío que calor)']
    ],

    'quiz' => [
        // FÁCIL
        ['pregunta' => 'La Ley de Shelford también se conoce como...', 'opciones' => ['Ley del mínimo', 'Ley de la tolerancia', 'Ley del máximo', 'Ley del promedio'], 'correcta' => 'Ley de la tolerancia'],
        ['pregunta' => 'Autor de la ley', 'opciones' => ['Justus von Liebig', 'Victor Shelford', 'Frederick Blackman', 'Eugene Odum'], 'correcta' => 'Victor Shelford'],
        ['pregunta' => 'Año de publicación', 'opciones' => ['1840', '1913', '1939', '1969'], 'correcta' => '1913'],
        ['pregunta' => 'Forma de la curva de tolerancia', 'opciones' => ['Lineal', 'Campana (gaussiana)', 'Exponencial', 'Constante'], 'correcta' => 'Campana (gaussiana)'],
        ['pregunta' => 'En el rango óptimo la población es...', 'opciones' => ['Mínima', 'Máxima', 'Cero', 'Estable'], 'correcta' => 'Máxima'],
        ['pregunta' => 'Fuera de las zonas letales ocurre...', 'opciones' => ['Muerte inmediata', 'Estrés fisiológico', 'Crecimiento máximo', 'Reproducción'], 'correcta' => 'Estrés fisiológico'],
        ['pregunta' => 'Especies con rango de tolerancia amplio', 'opciones' => ['Estenoicas', 'Eurioicas', 'Endémicas', 'Relictas'], 'correcta' => 'Eurioicas'],
        ['pregunta' => 'Especies con rango estrecho', 'opciones' => ['Eurioicas', 'Estenoicas', 'Cosmopolitas', 'Invasoras'], 'correcta' => 'Estenoicas'],
        ['pregunta' => 'Estenoterma significa...', 'opciones' => ['Tolerancia estrecha a temperatura', 'Tolerancia amplia a temperatura', 'Tolerancia a salinidad', 'Tolerancia a pH'], 'correcta' => 'Tolerancia estrecha a temperatura'],
        ['pregunta' => 'Eurihalina significa...', 'opciones' => ['Tolerancia estrecha a salinidad', 'Tolerancia amplia a salinidad', 'Tolerancia a temperatura', 'Tolerancia a luz'], 'correcta' => 'Tolerancia amplia a salinidad'],

        // MEDIO
        ['pregunta' => 'Los corales blanquean por...', 'opciones' => ['Baja temperatura', 'Alta temperatura', 'Baja salinidad', 'Exceso de luz'], 'correcta' => 'Alta temperatura'],
        ['pregunta' => 'Especies invasoras suelen ser...', 'opciones' => ['Estenoicas', 'Eurioicas', 'Endémicas', 'Relictas'], 'correcta' => 'Eurioicas'],
        ['pregunta' => 'El cambio climático afecta principalmente por...', 'opciones' => ['Cambiar el mínimo', 'Cambiar el máximo de temperatura', 'Ambos', 'Ninguno'], 'correcta' => 'Ambos'],
        ['pregunta' => 'Nicho fundamental es...', 'opciones' => ['Con competencia', 'Sin competencia (solo factores abióticos)', 'Con depredadores', 'Solo bióticos'], 'correcta' => 'Sin competencia (solo factores abióticos)'],
        ['pregunta' => 'Nicho realizado es...', 'opciones' => ['Teórico máximo', 'Real con interacciones bióticas', 'Siempre más grande', 'Siempre más pequeño'], 'correcta' => 'Real con interacciones bióticas'],
        ['pregunta' => 'En acuicultura se controla estrictamente...', 'opciones' => ['Solo temperatura', 'Temperatura, pH, O₂, salinidad', 'Solo alimento', 'Solo luz'], 'correcta' => 'Temperatura, pH, O₂, salinidad'],
        ['pregunta' => 'La curva de tolerancia puede ser...', 'opciones' => ['Siempre simétrica', 'Asimétrica', 'Siempre plana', 'Lineal'], 'correcta' => 'Asimétrica'],
        ['pregunta' => 'Shelford era por profesión...', 'opciones' => ['Químico agrícola', 'Ecólogo animal', 'Botánico', 'Físico'], 'correcta' => 'Ecólogo animal'],
        ['pregunta' => 'En el Ártico, muchas especies están limitadas por...', 'opciones' => ['Máximo de temperatura', 'Mínimo de temperatura', 'Salinidad', 'Luz'], 'correcta' => 'Mínimo de temperatura'],
        ['pregunta' => 'En el trópico, muchas especies están limitadas por...', 'opciones' => ['Mínimo de temperatura', 'Máximo de temperatura', 'Agua', 'Nutrientes'], 'correcta' => 'Máximo de temperatura'],

        // DIFÍCIL
        ['pregunta' => 'Modelo matemático más usado para la curva de tolerancia', 'opciones' => ['Lineal', 'Gaussiana', 'Exponencial', 'Logística'], 'correcta' => 'Gaussiana'],
        ['pregunta' => 'Especies endémicas de islas suelen ser...', 'opciones' => ['Eurioicas', 'Estenoicas', 'Cosmopolitas', 'Migratorias'], 'correcta' => 'Estenoicas'],
        ['pregunta' => 'En experimentos de laboratorio se mide la tolerancia con...', 'opciones' => ['Supervivencia vs. gradiente del factor', 'Solo crecimiento', 'Solo peso', 'Solo color'], 'correcta' => 'Supervivencia vs. gradiente del factor'],
        ['pregunta' => 'La ley de Shelford se aplica a...', 'opciones' => ['Solo animales', 'Solo plantas', 'Todos los organismos', 'Solo microorganismos'], 'correcta' => 'Todos los organismos'],
        ['pregunta' => 'El blanqueamiento de corales es un ejemplo de...', 'opciones' => ['Estrés por mínimo', 'Estrés por máximo de temperatura', 'Falta de luz', 'Exceso de nutrientes'], 'correcta' => 'Estrés por máximo de temperatura'],
        ['pregunta' => 'En lagos profundos, el oxígeno disuelto limita por...', 'opciones' => ['Máximo', 'Mínimo en hipolimnio', 'pH', 'Luz'], 'correcta' => 'Mínimo en hipolimnio'],
        ['pregunta' => 'La acidificación oceánica afecta principalmente por...', 'opciones' => ['Bajar el pH (fuera del rango de muchos organismos)', 'Subir temperatura', 'Bajar salinidad', 'Aumentar luz'], 'correcta' => 'Bajar el pH (fuera del rango de muchos organismos)'],
        ['pregunta' => 'En el concepto de “deuda de extinción” del cambio climático se basa en...', 'opciones' => ['Liebig', 'Shelford', 'Lotka-Volterra', 'Hardin'], 'correcta' => 'Shelford'],
        ['pregunta' => '¿Quién tiene mayor riesgo de extinción por calentamiento global?', 'opciones' => ['Especies euritermas', 'Especies estenotermas de alta montaña', 'Especies acuáticas', 'Especies invasoras'], 'correcta' => 'Especies estenotermas de alta montaña'],
        ['pregunta' => 'La Ley de Shelford es la base científica de...', 'opciones' => ['Biogeografía', 'Modelos de distribución de especies (SDM)', 'Predicción de invasiones', 'Todas las anteriores'], 'correcta' => 'Todas las anteriores']
    ]
];
/**
 * MATERIA: ECOSISTEMAS
 * TEMA: Factores Ambientales – Abióticos + Bióticos + Conceptos Clave
 * ESTILO: Cyberpunk-neón total, SVG animado ÉPICO, 30 quiz nivel experto
 */

$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug'    => 'factores-ambientales',
    'titulo'  => 'Factores Ambientales: Todo lo que Controla la Vida en el Planeta',

    'contenido' => <<<'HTML'

<h3 class="text-center display-4">Factores Ambientales</h3>
<p class="fs-4 text-center">Todo lo que influye en los organismos: lo vivo y lo no vivo</p>

<!-- SVG ANIMADO ÉPICO: MATRIZ DE FACTORES -->
<div class="svg-diagram">
    <svg viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
        <rect width="1400" height="900" fill="#000"/>
        <defs>
            <filter id="glow"><feGaussianBlur stdDeviation="18" result="blur"/>
                <feFlood flood-color="#00ffff"/><feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <filter id="glow-red"><feGaussianBlur stdDeviation="20" result="blur"/>
                <feFlood flood-color="#ff1744"/><feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
        </defs>

        <!-- Título neón -->
        <text x="700" y="100" fill="#ff00ff" font-size="90" font-weight="bold" text-anchor="middle" filter="url(#glow)">FACTORES AMBIENTALES</text>

        <!-- Nodo central: ORGANISMO -->
        <circle cx="700" cy="450" r="120" fill="#1de9b6" stroke="#00e676" stroke-width="15" filter="url(#glow)"/>
        <text x="700" y="440" fill="#000" font-size="48" font-weight="bold" text-anchor="middle">ORGANISMO</text>

        <!-- ABIÓTICOS (izquierda) -->
        <rect x="80" y="180" width="300" height="500" rx="50" fill="#0d47a1" stroke="#00ffff" stroke-width="12" opacity="0.8" filter="url(#glow)"/>
        <text x="230" y="250" fill="#00ffff" font-size="50" font-weight="bold" text-anchor="middle" filter="url(#glow)">ABIÓTICOS</text>
        <text x="230" y="320" fill="#fff" font-size="32" text-anchor="middle">Temperatura</text>
        <text x="230" y="380" fill="#fff" font-size="32" text-anchor="middle">Luz (PAR)</text>
        <text x="230" y="440" fill="#fff" font-size="32" text-anchor="middle">Agua</text>
        <text x="230" y="500" fill="#fff" font-size="32" text-anchor="middle">pH / Nutrientes</text>
        <text x="230" y="560" fill="#fff" font-size="32" text-anchor="middle">Oxígeno</text>

        <!-- BIÓTICOS (derecha) -->
        <rect x="1020" y="180" width="300" height="500" rx="50" fill="#880e4f" stroke="#ff1744" stroke-width="12" opacity="0.8" filter="url(#glow-red)"/>
        <text x="1170" y="250" fill="#ff1744" font-size="50" font-weight="bold" text-anchor="middle" filter="url(#glow-red)">BIÓTICOS</text>
        <text x="1170" y="320" fill="#fff" font-size="32" text-anchor="middle">Competencia</text>
        <text x="1170" y="380" fill="#fff" font-size="32" text-anchor="middle">Depredación</text>
        <text x="1170" y="440" fill="#fff" font-size="32" text-anchor="middle">Mutualismo</text>
        <text x="1170" y="500" fill="#fff" font-size="32" text-anchor="middle">Parasitismo</text>
        <text x="1170" y="560" fill="#fff" font-size="32" text-anchor="middle">Comensalismo</text>

        <!-- Flechas animadas desde ambos lados -->
        <path d="M380 300 L580 430" stroke="#00ffff" stroke-width="14" marker-end="url(#arrow-cyan)" filter="url(#glow)">
            <animate attributeName="stroke-dashoffset" from="300" to="0" dur="3s" repeatCount="indefinite"/>
        </path>
        <path d="M380 450 L580 450" stroke="#00ffff" stroke-width="14" marker-end="url(#arrow-cyan)" filter="url(#glow)">
            <animate attributeName="stroke-dashoffset" from="300" to="0" dur="3s" repeatCount="indefinite"/>
        </path>
        <path d="M380 600 L580 470" stroke="#00ffff" stroke-width="14" marker-end="url(#arrow-cyan)" filter="url(#glow)">
            <animate attributeName="stroke-dashoffset" from="300" to="0" dur="3s" repeatCount="indefinite"/>
        </path>

        <path d="M1020 300 L820 430" stroke="#ff1744" stroke-width="14" marker-end="url(#arrow-red)" filter="url(#glow-red)">
            <animate attributeName="stroke-dashoffset" from="300" to="0" dur="3s" repeatCount="indefinite"/>
        </path>
        <path d="M1020 450 L820 450" stroke="#ff1744" stroke-width="14" marker-end="url(#arrow-red)" filter="url(#glow-red)">
            <animate attributeName="stroke-dashoffset" from="300" to="0" dur="3s" repeatCount="indefinite"/>
        </path>
        <path d="M1020 600 L820 470" stroke="#ff1744" stroke-width="14" marker-end="url(#arrow-red)" filter="url(#glow-red)">
            <animate attributeName="stroke-dashoffset" from="300" to="0" dur="3s" repeatCount="indefinite"/>
        </path>

        <defs>
            <marker id="arrow-cyan" markerWidth="30" markerHeight="30" refX="28" refY="15" orient="auto">
                <path d="M0,0 L30,15 L0,30 Z" fill="#00ffff"/>
            </marker>
            <marker id="arrow-red" markerWidth="30" markerHeight="30" refX="28" refY="15" orient="auto">
                <path d="M0,0 L30,15 L0,30 Z" fill="#ff1744"/>
            </marker>
        </defs>

        <!-- Leyenda final -->
        <text x="700" y="840" fill="#00ffff" font-size="44" text-anchor="middle" filter="url(#glow)">
            Abióticos + Bióticos = Distribución, Abundancia y Supervivencia
        </text>
    </svg>
    <div class="caption">Matriz cyberpunk de Factores Ambientales – Todo influye en todo</div>
</div>

<h4 class="mt-5">1. Factores Abióticos (No vivos)</h4>
<table class="table text-center fs-5">
    <tr><th>Factor</th><th>Rango típico</th><th>Efecto clave</th></tr>
    <tr><td>Temperatura</td><td>-50 a +50°C</td><td>Velocidad enzimática (Q₁₀)</td></tr>
    <tr><td>Luz (PAR)</td><td>400–700 nm</td><td>Fotosíntesis</td></tr>
    <tr><td>Agua</td><td>0–100 % humedad</td><td>Hidratación celular</td></tr>
    <tr><td>pH</td><td>0–14</td><td>Disponibilidad de iones</td></tr>
    <tr><td>Nutrientes</td><td>N, P, K, Fe…</td><td>Crecimiento (Liebig)</td></tr>
    <tr><td>Oxígeno</td><td>0–21 % atm / 0–14 mg/L agua</td><td>Respiración aeróbica</td></tr>
</table>

<h4 class="mt-5">2. Factores Bióticos (Vivos)</h4>
<table class="table text-center fs-5">
    <tr><th>Interacción</th><th>Signo</th><th>Ejemplo</th></tr>
    <tr><td>Competencia</td><td>- / -</td><td>Árboles por luz</td></tr>
    <tr><td>Depredación</td><td>+ / -</td><td>Lobo → ciervo</td></tr>
    <tr><td>Mutualismo</td><td>+ / +</td><td>Micorrizas ↔ planta</td></tr>
    <tr><td>Comensalismo</td><td>+ / 0</td><td>Rémora → tiburón</td></tr>
    <tr><td>Parasitismo</td><td>+ / -</td><td>Garrapata → mamífero</td></tr>
</table>

<h4 class="mt-5 text-warning">3. Conceptos Clave</h4>
<div class="row text-center fs-4">
    <div class="col-md-4">
        <p class="text-danger">Liebig (1840)</p>
        <div class="eq">$$ P = k \cdot \min(f_1,f_2,\dots) $$</div>
    </div>
    <div class="col-md-4">
        <p class="text-success">Shelford (1913)</p>
        <p>Rango: mínimo → óptimo → máximo</p>
    </div>
    <div class="col-md-4">
        <p class="text-info">Hutchinson (1957)</p>
        <p>Nicho = hipervolumen n-dimensional</p>
    </div>
</div>

<h4 class="mt-5">4. Interacción Real = Nunca un solo factor</h4>
<div class="ejemplo">
    <p class="fs-4">En un bosque tropical: la luz limita en el sotobosque aunque haya agua y nutrientes de sobra.</p>
</div>
HTML
,
    'ejercicios' => [
        ['enunciado' => 'Clasifica como abiótico o biótico: depredación', 'respuesta' => 'Biótico'],
        ['enunciado' => 'Clasifica: temperatura del agua', 'respuesta' => 'Abiótico'],
        ['enunciado' => 'Clasifica: competencia por pareja', 'respuesta' => 'Biótico'],
        ['enunciado' => '¿Qué factor abiótico mide el PAR?', 'respuesta' => 'Luz (radiación fotosintéticamente activa)'],
        ['enunciado' => 'En el desierto, ¿cuál es el factor limitante principal?', 'respuesta' => 'Agua'],
        ['enunciado' => 'En el océano profundo, ¿qué factor abiótico limita la vida?', 'respuesta' => 'Luz (falta de ella)'],
        ['enunciado' => '¿Qué interacción biótica es +/+?', 'respuesta' => 'Mutualismo'],
        ['enunciado' => '¿Qué interacción es -/-?', 'respuesta' => 'Competencia'],
        ['enunciado' => 'Define nicho ecológico', 'respuesta' => 'El rol funcional y el espacio físico que ocupa una especie en el ecosistema'],
        ['enunciado' => 'Diferencia nicho fundamental y realizado', 'respuesta' => 'Fundamental = sin competencia (teórico) │ Realizado = con interacciones bióticas (real)'],
        ['enunciado' => 'Escribe la fórmula conceptual de Liebig', 'respuesta' => 'P = min(f₁, f₂, …) o P = k · min(f₁, f₂, …)'],
        ['enunciado' => '¿Qué dos factores principales determinan los biomas terrestres?', 'respuesta' => 'Temperatura + precipitación']
    ],

    'quiz' => [
        // FÁCIL
        ['pregunta' => 'Factores abióticos son...', 'opciones' => ['Vivos', 'No vivos', 'Solo plantas', 'Solo animales'], 'correcta' => 'No vivos'],
        ['pregunta' => 'Ejemplo de factor abiótico', 'opciones' => ['Depredación', 'Competencia', 'Temperatura', 'Simbiosis'], 'correcta' => 'Temperatura'],
        ['pregunta' => 'Ejemplo de factor biótico', 'opciones' => ['Luz', 'pH', 'Depredación', 'Agua'], 'correcta' => 'Depredación'],
        ['pregunta' => 'PAR significa...', 'opciones' => ['Presión atmosférica', 'Radiación fotosintéticamente activa', 'Potencial de agua', 'pH ácido'], 'correcta' => 'Radiación fotosintéticamente activa'],
        ['pregunta' => 'En el desierto el factor limitante es...', 'opciones' => ['Luz', 'Agua', 'Nutrientes', 'Competencia'], 'correcta' => 'Agua'],
        ['pregunta' => 'En la tundra el factor limitante es...', 'opciones' => ['Agua', 'Temperatura', 'Luz', 'Oxígeno'], 'correcta' => 'Temperatura'],
        ['pregunta' => 'Interacción +/+', 'opciones' => ['Competencia', 'Mutualismo', 'Parasitismo', 'Depredación'], 'correcta' => 'Mutualismo'],
        ['pregunta' => 'Interacción -/-', 'opciones' => ['Mutualismo', 'Competencia', 'Comensalismo', 'Depredación'], 'correcta' => 'Competencia'],
        ['pregunta' => 'Autor de la Ley del Mínimo', 'opciones' => ['Shelford', 'Liebig', 'Hutchinson', 'Odum'], 'correcta' => 'Liebig'],
        ['pregunta' => 'Autor de la Ley de Tolerancia', 'opciones' => ['Liebig', 'Shelford', 'Blackman', 'Elton'], 'correcta' => 'Shelford'],

        // MEDIO
        ['pregunta' => 'Nicho fundamental es...', 'opciones' => ['Con competencia', 'Sin competencia', 'Con depredadores', 'Solo físico'], 'correcta' => 'Sin competencia'],
        ['pregunta' => 'Nicho realizado es...', 'opciones' => ['Teórico', 'Real con interacciones bióticas', 'Siempre más grande', 'Siempre más pequeño'], 'correcta' => 'Real con interacciones bióticas'],
        ['pregunta' => 'El nicho es un concepto...', 'opciones' => ['1-dimensional', 'n-dimensional (Hutchinson)', '2-dimensional', 'Lineal'], 'correcta' => 'n-dimensional (Hutchinson)'],
        ['pregunta' => 'Los biomas terrestres se definen principalmente por...', 'opciones' => ['Solo temperatura', 'Solo precipitación', 'Temperatura + precipitación', 'Solo suelo'], 'correcta' => 'Temperatura + precipitación'],
        ['pregunta' => 'En el sotobosque de un bosque tropical limita...', 'opciones' => ['Agua', 'Nutrientes', 'Luz', 'Temperatura'], 'correcta' => 'Luz'],
        ['pregunta' => 'En acuicultura se controla estrictamente...', 'opciones' => ['Solo temperatura', 'T, pH, O₂ disuelto, salinidad', 'Solo alimento', 'Solo luz'], 'correcta' => 'T, pH, O₂ disuelto, salinidad'],
        ['pregunta' => 'Competencia intraespecífica es...', 'opciones' => ['Entre especies distintas', 'Dentro de la misma especie', 'Solo plantas', 'Solo animales'], 'correcta' => 'Dentro de la misma especie'],
        ['pregunta' => 'Micorrizas ↔ planta es un ejemplo de...', 'opciones' => ['Parasitismo', 'Competencia', 'Mutualismo', 'Comensalismo'], 'correcta' => 'Mutualismo'],
        ['pregunta' => 'Fórmula conceptual de Liebig', 'opciones' => ['P = max(f)', 'P = min(f)', 'P = avg(f)', 'P = sum(f)'], 'correcta' => 'P = min(f)'],
        ['pregunta' => 'Curva de Shelford tiene forma de...', 'opciones' => ['Línea recta', 'Campana', 'Exponencial', 'Constante'], 'correcta' => 'Campana'],

        // DIFÍCIL
        ['pregunta' => 'El hipervolumen de nicho fue propuesto por...', 'opciones' => ['Liebig', 'Shelford', 'Hutchinson', 'Elton'], 'correcta' => 'Hutchinson'],
        ['pregunta' => 'Interacción +/0', 'opciones' => ['Mutualismo', 'Comensalismo', 'Parasitismo', 'Competencia'], 'correcta' => 'Comensalismo'],
        ['pregunta' => 'En zonas HNLC del océano limita...', 'opciones' => ['Nitrógeno', 'Fósforo', 'Hierro', 'Luz'], 'correcta' => 'Hierro'],
        ['pregunta' => 'Los dos factores que más explican la distribución global de biomas son...', 'opciones' => ['Luz y agua', 'Temperatura y precipitación', 'pH y O₂', 'Suelo y viento'], 'correcta' => 'Temperatura y precipitación'],
        ['pregunta' => 'En limnología, el fósforo es limitante en la mayoría de lagos porque...', 'opciones' => ['Es abundante', 'Es el más escaso en agua dulce', 'Es tóxico', 'No se recicla'], 'correcta' => 'Es el más escaso en agua dulce'],
        ['pregunta' => 'El principio de exclusión competitiva de Gause se basa en...', 'opciones' => ['Liebig', 'Shelford', 'Competencia por nicho idéntico', 'Mutualismo'], 'correcta' => 'Competencia por nicho idéntico'],
        ['pregunta' => 'En experimentos de mesocosmos se manipulan...', 'opciones' => ['Solo un factor', 'Múltiples factores a la vez', 'Solo temperatura', 'Solo luz'], 'correcta' => 'Múltiples factores a la vez'],
        ['pregunta' => 'El modelo de distribución de especies (SDM) se basa principalmente en...', 'opciones' => ['Factores bióticos', 'Factores abióticos', 'Solo clima', 'Solo suelo'], 'correcta' => 'Factores abióticos'],
        ['pregunta' => 'Liebig + Shelford juntos explican...', 'opciones' => ['Solo el mínimo', 'Mínimo y máximo tolerable', 'Solo el óptimo', 'Solo competencia'], 'correcta' => 'Mínimo y máximo tolerable'],
        ['pregunta' => 'El factor que más influye en la tasa metabólica de los organismos es...', 'opciones' => ['pH', 'Luz', 'Temperatura', 'Salinidad'], 'correcta' => 'Temperatura']
    ]
];
/**
 * MATERIA: ECOSISTEMAS
 * TEMA: Biomas Terrestres y Acuáticos – La Gran División Ecológica del Planeta
 * ESTILO: Cyberpunk-neón total, SVG ANIMADO ÉPICO Y 100 % LEGIBLE
 */

$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug'    => 'biomas',
    'titulo'  => 'Biomas del Planeta: Las Grandes Regiones Ecológicas',

    'contenido' => <<<'HTML'
<h3 class="text-center display-4">BIOMAS DEL PLANETA</h3>
<p class="fs-4 text-center">Las grandes regiones ecológicas definidas por clima + vegetación + fauna</p>

<!-- SVG ANIMADO ÉPICO, LIMPIO Y 100 % LEGIBLE -->
<div class="svg-diagram">
    <svg viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
        <rect width="1400" height="900" fill="#000"/>

        <defs>
            <filter id="glow"><feGaussianBlur stdDeviation="20" result="blur"/>
                <feFlood flood-color="#00ffff"/><feComposite in2="blur" operator="in"/>
                <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
        </defs>

        <!-- Título neón gigante -->
        <text x="700" y="100" fill="#ff00ff" font-size="90" font-weight="bold" text-anchor="middle" filter="url(#glow)">BIOMAS TERRESTRES</text>

        <!-- 7 Biomas principales con colores oficiales y etiquetas claras -->
        <!-- 1. Tundra -->
        <rect x="100" y="180" width="280" height="140" rx="30" fill="#e3f2fd" stroke="#bbdefb" stroke-width="8" filter="url(#glow)"/>
        <text x="240" y="240" fill="#0d47a1" font-size="42" font-weight="bold" text-anchor="middle">TUNDRA</text>
        <text x="240" y="290" fill="#bbdefb" font-size="28" text-anchor="middle">-30 a 5 °C │ &lt;250 mm</text>

        <!-- 2. Taiga / Bosque Boreal -->
        <rect x="420" y="180" width="300" height="140" rx="30" fill="#1b5e20" stroke="#4caf50" stroke-width="8" filter="url(#glow)"/>
        <text x="570" y="240" fill="#c8e6c9" font-size="42" font-weight="bold" text-anchor="middle">TAIGA</text>
        <text x="570" y="290" fill="#a5d6a7" font-size="28" text-anchor="middle">-40 a 15 °C │ Coníferas</text>

        <!-- 3. Bosque Templado -->
        <-->
        <rect x="760" y="180" width="540" height="140" rx="30" fill="#33691e" stroke="#8bc34a" stroke-width="8" filter="url(#glow)"/>
        <text x="1030" y="240" fill="#dcffdc" font-size="42" font-weight="bold" text-anchor="middle">BOSQUE TEMPLADO</text>
        <text x="1030" y="290" fill="#c8e6c9" font-size="26" text-anchor="middle">Caducifolios │ 750-1500 mm</text>

        <!-- 4. Selva Tropical -->
        <rect x="100" y="380" width="380" height="160" rx="30" fill="#1b5e20" stroke="#00e676" stroke-width="10" filter="url(#glow)"/>
        <text x="290" y="450" fill="#b9f6ca" font-size="48" font-weight="bold" text-anchor="middle">SELVA TROPICAL</text>
        <text x="290" y="510" fill="#69f0ae" font-size="32" text-anchor="middle">>2000 mm │ +100 000 spp.</text>

        <!-- 5. Sabana -->
        <rect x="520" y="380" width="300" height="160" rx="30" fill="#f9a825" stroke="#ffeb3b" stroke-width="8" filter="url(#glow)"/>
        <text x="670" y="450" fill="#212121" font-size="44" font-weight="bold" text-anchor="middle">SABANA</text>
        <text x="670" y="510" fill="#ffca28" font-size="28" text-anchor="middle">Pastos + acacias │ 20-30 °C</text>

        <!-- 6. Pradera Templada -->
        <rect x="860" y="380" width="440" height="160" rx="30" fill="#827717" stroke="#cddc39" stroke-width="8" filter="url(#glow)"/>
        <text x="1080" y="450" fill="#f0f4c3" font-size="44" font-weight="bold" text-anchor="middle">PRADERA</text>
        <text x="1080" y="510" fill="#dce775" font-size="28" text-anchor="middle">Gramíneas │ 250-750 mm</text>

        <!-- 7. Desierto -->
        <rect x="300" y="580" width="800" height="160" rx="30" fill="#ff8f00" stroke="#ffc107" stroke-width="10" filter="url(#glow)"/>
        <text x="700" y="650" fill="#212121" font-size="52" font-weight="bold" text-anchor="middle">DESIERTO</text>
        <text x="700" y="710" fill="#ffca28" font-size="34" text-anchor="middle">&lt;250 mm │ Cactus y suculentas</text>

        <!-- Animación de aparición secuencial -->
        <animate href="#tundra" attributeName="opacity" from="0" to="1" dur="1s" begin="0.5s" fill="freeze"/>
        <animate href="#taiga" attributeName="opacity" from="0" to="1" dur="1s" begin="1.2s" fill="freeze"/>
        <animate href="#templado" attributeName="opacity" from="0" to="1" dur="1s" begin="1.9s" fill="freeze"/>
        <animate href="#selva" attributeName="opacity" from="0" to="1" dur="1s" begin="2.6s" fill="freeze"/>
        <animate href="#sabana" attributeName="opacity" from="0" to="1" dur="1s" begin="3.3s" fill="freeze"/>
        <animate href="#pradera" attributeName="opacity" from="0" to="1" dur="1s" begin="4s" fill="freeze"/>
        <animate href="#desierto" attributeName="opacity" from="0" to="1" dur="1s" begin="4.7s" fill="freeze"/>

        <!-- Leyenda final -->
        <text x="700" y="840" fill="#00ffff" font-size="46" text-anchor="middle" filter="url(#glow)">
            Clima + Vegetación = Bioma
        </text>
    </svg>
    <div class="caption">Mapa animado cyberpunk de los 7 grandes biomas terrestres – 100 % legible y épico</div>
</div>

<h4 class="mt-5">1. Biomas Terrestres – Tabla Resumen</h4>
<table class="table text-center fs-5">
    <tr><th>Bioma</th><th>Temperatura</th><th>Precipitación</th><th>Vegetación dominante</th><th>Ejemplo animal</th></tr>
    <tr><td>Tundra</td><td>-30 a 5°C</td><td>&lt;250 mm</td><td>Musgos, líquenes</td><td>Reno, lemming</td></tr>
    <tr><td>Taiga (boreal)</td><td>-40 a 15°C</td><td>300–800 mm</td><td>Coníferas</td><td>Alce, lince</td></tr>
    <tr><td>Bosque templado</td><td>0 a 20°C</td><td>750–1500 mm</td><td>Caducifolios</td><td>Ciervo, oso pardo</td></tr>
    <tr><td>Selva tropical</td><td>20–30°C</td><td>&gt;2000 mm</td><td>Dosel + epífitas</td><td>Jaguar, tucán</td></tr>
    <tr><td>Sabana</td><td>20–30°C</td><td>500–1500 mm</td><td>Pastos + acacias</td><td>León, cebra</td></tr>
    <tr><td>Pradera templada</td><td>-10 a 30°C</td><td>250–750 mm</td><td>Gramíneas altas</td><td>Bisonte, coyote</td></tr>
    <tr><td>Desierto</td><td>20–40°C</td><td>&lt;250 mm</td><td>Cactus, suculentas</td><td>Camello, escorpión</td></tr>
</table>

<h4 class="mt-5">2. Biomas Acuáticos Principales</h4>
<table class="table text-center fs-5">
    <tr><th>Bioma</th><th>Tipo</th><th>Productividad</th><th>Ejemplo</th></tr>
    <tr><td>Lagos y lagunas</td><td>Dulce</td><td>Media-alta</td><td>Baikal, Titicaca</td></tr>
    <tr><td>Ríos y corrientes</td><td>Dulce</td><td>Alta en oxígeno</td><td>Amazonas, Nilo</td></tr>
    <tr><td>Humedales</td><td>Dulce</td><td>MUY ALTA</td><td>Everglades, Pantanal</td></tr>
    <tr><td>Océano abierto</td><td>Marino</td><td>Baja (excepto upwelling)</td><td>Pacífico</td></tr>
    <tr><td>Arrecifes coralinos</td><td>Marino</td><td>ALTA + biodiversidad</td><td>Gran Barrera</td></tr>
    <tr><td>Estuarios</td><td>Transición</td><td>ALTA (nutrientes)</td><td>Delta del Amazonas</td></tr>
</table>

<h4 class="mt-5 text-warning">3. Los Dos Factores que lo Deciden Todo</h4>
<p class="fs-4 text-center"><strong>Temperatura media anual + Precipitación anual</strong> → Esquema de Whittaker (1975ª edición)</p>
HTML
,
    'ejercicios' => [
        ['enunciado' => '¿Cuál es el bioma terrestre más frío del planeta?', 'respuesta' => 'Tundra'],
        ['enunciado' => '¿Cuál es el bioma terrestre con mayor biodiversidad?', 'respuesta' => 'Selva tropical'],
        ['enunciado' => 'Bioma caracterizado por coníferas y inviernos muy largos', 'respuesta' => 'Taiga o bosque boreal'],
        ['enunciado' => 'Bioma con precipitaciones menores a 250 mm/año', 'respuesta' => 'Desierto'],
        ['enunciado' => 'Bioma con más de 2000 mm/año y temperatura constante', 'respuesta' => 'Selva tropical'],
        ['enunciado' => 'Bioma acuático con la mayor productividad primaria por m²', 'respuesta' => 'Arrecifes coralinos o humedales'],
        ['enunciado' => 'Bioma de transición entre agua dulce y salada', 'respuesta' => 'Estuario'],
        ['enunciado' => '¿Qué mide un climograma?', 'respuesta' => 'Temperatura y precipitación mensual'],
        ['enunciado' => 'Bioma que cubre el 71 % de la superficie terrestre', 'respuesta' => 'Océano'],
        ['enunciado' => 'Bioma terrestre que almacena más carbono orgánico', 'respuesta' => 'Selva tropical'],
        ['enunciado' => 'Nombre del esquema clásico que relaciona T + P con biomas', 'respuesta' => 'Diagrama o triángulo de Whittaker'],
        ['enunciado' => 'Bioma con permafrost y menos de 100 especies de aves', 'respuesta' => 'Tundra']
    ],

    'quiz' => [
        // FÁCIL (10)
        ['pregunta' => 'Los biomas se definen principalmente por...', 'opciones' => ['Solo animales', 'Clima y vegetación dominante', 'Altitud', 'País'], 'correcta' => 'Clima y vegetación dominante'],
        ['pregunta' => 'Bioma más biodiverso del planeta', 'opciones' => ['Tundra', 'Desierto', 'Selva tropical', 'Taiga'], 'correcta' => 'Selva tropical'],
        ['pregunta' => 'Bioma con coníferas y largos inviernos', 'opciones' => ['Selva', 'Taiga', 'Pradera', 'Sabana'], 'correcta' => 'Taiga'],
        ['pregunta' => 'Desierto se caracteriza por...', 'opciones' => ['>2000 mm', '<250 mm/año', '1000 mm', '500 mm'], 'correcta' => '<250 mm/año'],
        ['pregunta' => 'Sabana tiene vegetación de...', 'opciones' => ['Árboles altos', 'Pastos con árboles dispersos', 'Solo cactus', 'Musgos'], 'correcta' => 'Pastos con árboles dispersos'],
        ['pregunta' => 'Tundra tiene como vegetación dominante...', 'opciones' => ['Cactus', 'Musgos y líquenes', 'Palmeras', 'Coníferas'], 'correcta' => 'Musgos y líquenes'],
        ['pregunta' => 'Bioma acuático con corales', 'opciones' => ['Lago', 'Río', 'Arrecife coralino', 'Estuario'], 'correcta' => 'Arrecife coralino'],
        ['pregunta' => 'Bioma dulce con mayor productividad', 'opciones' => ['Océano', 'Lago profundo', 'Humedal', 'Río rápido'], 'correcta' => 'Humedal'],
        ['pregunta' => 'Selva tropical temperatura promedio', 'opciones' => ['5°C', '25°C', '40°C', '-15°C'], 'correcta' => '25°C'],
        ['pregunta' => 'Pradera también se conoce como...', 'opciones' => ['Steppe', 'Jungla', 'Boreal', 'Matorral'], 'correcta' => 'Steppe'],

        // MEDIO (10)
        ['pregunta' => 'Climograma muestra...', 'opciones' => ['Solo temperatura', 'Temperatura + precipitación', 'Solo viento', 'Solo luz'], 'correcta' => 'Temperatura + precipitación'],
        ['pregunta' => 'Bioma con mayor cobertura global', 'opciones' => ['Selva', 'Océano', 'Desierto', 'Tundra'], 'correcta' => 'Océano'],
        ['pregunta' => 'Bioma que almacena más carbono', 'opciones' => ['Tundra', 'Selva tropical', 'Desierto', 'Taiga'], 'correcta' => 'Selva tropical'],
        ['pregunta' => 'Estuario es mezcla de...', 'opciones' => ['Agua dulce + salada', 'Solo dulce', 'Solo salada', 'Agua + petróleo'], 'correcta' => 'Agua dulce + salada'],
        ['pregunta' => 'Taiga también se llama...', 'opciones' => ['Bosque mediterráneo', 'Bosque boreal', 'Selva nublada', 'Matorral'], 'correcta' => 'Bosque boreal'],
        ['pregunta' => 'Bosque templado tiene árboles...', 'opciones' => ['Siempreverdes', 'Caducifolios', 'Cactus', 'Palmeras'], 'correcta' => 'Caducifolios'],
        ['pregunta' => 'Bioma con permafrost', 'opciones' => ['Desierto', 'Tundra', 'Sabana', 'Selva'], 'correcta' => 'Tundra'],
        ['pregunta' => 'Mayor NPP (Productividad Primaria Neta) en:', 'opciones' => ['Tundra', 'Selva tropical', 'Desierto', 'Océano abierto'], 'correcta' => 'Selva tropical'],
        ['pregunta' => 'Menor NPP en:', 'opciones' => ['Selva', 'Desierto', 'Sabana', 'Taiga'], 'correcta' => 'Desierto'],
        ['pregunta' => 'Gran Barrera de Coral es un...', 'opciones' => ['Lago', 'Arrecife', 'Río', 'Humedal'], 'correcta' => 'Arrecife'],

        // DIFÍCIL (10)
        ['pregunta' => 'El esquema clásico de clasificación de biomas se llama...', 'opciones' => ['Diagrama de Walter', 'Triángulo de Whittaker', 'Círculo de Holdridge', 'Cuadrado de Odum'], 'correcta' => 'Triángulo de Whittaker'],
        ['pregunta' => 'Bioma con mayor biomasa aérea', 'opciones' => ['Pradera', 'Selva tropical', 'Tundra', 'Desierto'], 'correcta' => 'Selva tropical'],
        ['pregunta' => 'Bioma con mayor albedo (refleja más luz solar)', 'opciones' => ['Selva', 'Tundra con nieve', 'Océano', 'Desierto'], 'correcta' => 'Tundra con nieve'],
        ['pregunta' => 'Bioma que más influye en el ciclo global del agua', 'opciones' => ['Desierto', 'Selva tropical (transpiración)', 'Tundra', 'Pradera'], 'correcta' => 'Selva tropical (transpiración)'],
        ['pregunta' => 'Mayor riesgo actual de desaparición por deforestación', 'opciones' => ['Tundra', 'Selva tropical', 'Taiga', 'Pradera'], 'correcta' => 'Selva tropical'],
        ['pregunta' => 'Bioma con mayor número de especies endémicas', 'opciones' => ['Tundra', 'Selva tropical', 'Desierto', 'Taiga'], 'correcta' => 'Selva tropical'],
        ['pregunta' => 'En el océano, la zona con mayor productividad primaria es...', 'opciones' => ['Abisal', 'Zona nerítica / upwelling', 'Pelágica abierta', 'Bentónica'], 'correcta' => 'Zona nerítica / upwelling'],
        ['pregunta' => 'Bioma con mayor área protegida mundialmente', 'opciones' => ['Selva', 'Océano (áreas marinas protegidas)', 'Tundra', 'Desierto'], 'correcta' => 'Océano (áreas marinas protegidas)'],
        ['pregunta' => 'Según Whittaker, el bioma depende de dos variables principales:', 'opciones' => ['Latitud y altitud', 'Temperatura media anual y precipitación anual', 'pH y luz', 'Suelo y viento'], 'correcta' => 'Temperatura media anual y precipitación anual'],
        ['pregunta' => 'El bioma “Matorral mediterráneo” se caracteriza por...', 'opciones' => ['Veranos secos + inviernos suaves', 'Inviernos secos', 'Lluvia todo el año', 'Nieve constante'], 'correcta' => 'Veranos secos + inviernos suaves']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Redes Tróficas (Complejidad, Flujo, Estabilidad)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'redes-troficas',
    'titulo' => 'Redes Tróficas: El Tejido Energético de los Ecosistemas',
    'contenido' => '
        <h3>¿Qué son las Redes Tróficas?</h3>
        <p>Las <strong>redes tróficas</strong> son <strong>mapas complejos</strong> de <strong>interacciones alimentarias</strong> en un ecosistema. A diferencia de las <strong>cadenas alimentarias lineales</strong>, incluyen:</p>
        <ul>
            <li><strong>Múltiples conexiones</strong></li>
            <li><strong>Omnívoros</strong></li>
            <li><strong>Bucles tróficos</strong></li>
            <li><strong>Descomponedores</strong></li>
        </ul>
        <p>Representan el <strong>flujo de energía</strong> y <strong>ciclo de materia</strong> con realismo.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Niveles Tróficos</h4>
        <table class="table">
            <thead>
                <tr><th>Nivel</th><th>Ejemplo</th><th>Energía disponible</th></tr>
            </thead>
            <tbody>
                <tr><td>Productores</td><td>Plantas, fitoplancton</td><td>100%</td></tr>
                <tr><td>Consumidores primarios</td><td>Herbívoros</td><td>~10%</td></tr>
                <tr><td>Consumidores secundarios</td><td>Carnívoros</td><td>~1%</td></tr>
                <tr><td>Consumidores terciarios</td><td>Superpredadores</td><td>~0.1%</td></tr>
                <tr><td>Descomponedores</td><td>Hongos, bacterias</td><td>Reciclan</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Árbol → oruga → pájaro → halcón</strong> + <strong>oruga → ratón → zorro</strong> = red trófica.</p>
        </div>

        <div class="visual">
            <img src="assets/img/red-trofica.webp" alt="Red trófica bosque templado">
            <p><em>Red trófica en bosque templado. Fuente: Britannica.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Ley del 10% (Lindeman)</h4>
        <p>Solo ~10% de la energía pasa de un nivel trófico al siguiente.</p>
        <p>\\[ E_{n+1} = 0.1 \\times E_n \\]</p>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> 10,000 kJ de plantas → 1,000 kJ herbívoros → 100 kJ carnívoros → 10 kJ superpredador.</p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Cadena vs Red Trófica</h4>
        <table class="table">
            <thead>
                <tr><th>Característica</th><th>Cadena</th><th>Red</th></tr>
            </thead>
            <tbody>
                <tr><td>Estructura</td><td>Lineal</td><td>Compleja, interconectada</td></tr>
                <tr><td>Realismo</td><td>Bajo</td><td>Alto</td></tr>
                <tr><td>Estabilidad</td><td>Frágil</td><td>Resiliente</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/trofica.multiples.webp" alt="Red trófica completa">
            <p><em>Red trófica con múltiples caminos. Fuente: GeeksforGeeks.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Índices de Complejidad</h4>
        <ul>
            <li><strong>Conectancia:</strong> \\( C = \\frac{L}{S^2} \\)</li>
            <li><strong>Especies (S)</strong>, <strong>Enlaces (L)</strong></li>
            <li><strong>Omnívoros:</strong> Comen &gt;1 nivel</li>
            <li><strong>Bucles:</strong> A → B → C → A</li>
        </ul>

        <div class="visual">
            <img src="assets/img/red-trofica-rios.png" alt="Red trófica río">
            <p><em>Red trófica en río con bucles. Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. Estabilidad y Resiliencia</h4>
        <p>Redes complejas son más <strong>estables</strong> ante perturbaciones.</p>
        <p><strong>Ejemplo:</strong> Si desaparece un herbívoro, otro lo reemplaza.</p>

        <div class="visual">
            <img src="assets/img/complejidad-estabilidad.png" alt="Estabilidad red trófica">
            <p><em>Complejidad vs estabilidad. Fuente: Science of the Total Environment.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/red-trofica-global.png" alt="Red trófica global">
            <p><em>Red trófica global. Fuente: Nature.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/topologico.png" alt="Análisis de redes">
            <p><em>Análisis topológico de redes tróficas. Fuente: PNAS.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>6. SVG Animado: Red Trófica Dinámica</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Niveles -->
                <rect x="300" y="350" width="100" height="80" fill="#228B22" rx="15"/> <!-- Productores -->
                <text x="350" y="390" fill="white" font-size="14" text-anchor="middle">Productores</text>

                <rect x="150" y="230" width="100" height="80" fill="#FFD700" rx="15"/> <!-- Primarios -->
                <text x="200" y="270" fill="black" font-size="12" text-anchor="middle">Herbívoros</text>

                <rect x="450" y="230" width="100" height="80" fill="#FF4500" rx="15"/> <!-- Secundarios -->
                <text x="500" y="270" fill="white" font-size="12" text-anchor="middle">Carnívoros</text>

                <rect x="300" y="100" width="100" height="80" fill="#DC143C" rx="15"/> <!-- Terciarios -->
                <text x="350" y="140" fill="white" font-size="12" text-anchor="middle">Superpredador</text>

                <!-- Descomponedores -->
                <circle cx="350" cy="450" r="40" fill="#8B4513"/>
                <text x="350" y="455" fill="white" font-size="10" text-anchor="middle">Descomponedores</text>

                <!-- Flechas con energía -->
                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#00ff00"/>
                    </marker>
                </defs>

                <!-- Flujos -->
                <path d="M350 350 L200 310" stroke="#00ff00" stroke-width="4" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="50" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M350 350 L500 310" stroke="#00ff00" stroke-width="4" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="50" to="0" dur="2.5s" repeatCount="indefinite"/>
                </path>
                <path d="M200 230 L350 180" stroke="#ffcc00" stroke-width="3" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="40" to="0" dur="1.8s" repeatCount="indefinite"/>
                </path>
                <path d="M500 230 L350 180" stroke="#ffcc00" stroke-width="3" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="40" to="0" dur="2.2s" repeatCount="indefinite"/>
                </path>
                <path d="M350 450 Q300 400 250 310" stroke="#8B4513" stroke-width="3" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="60" to="0" dur="3s" repeatCount="indefinite"/>
                </path>
                <path d="M350 450 Q400 400 450 310" stroke="#8B4513" stroke-width="3" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="60" to="0" dur="3.5s" repeatCount="indefinite"/>
                </path>

                <!-- Título -->
                <text x="350" y="50" fill="#ffcc00" font-size="20" text-anchor="middle" font-family="Arial">Red Trófica</text>
            </svg>
            <p><em>SVG Animado: Flujo de energía desde productores hasta descomponedores.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => '¿Qué es una red trófica?', 'respuesta' => 'Interconexión de cadenas alimentarias'],
        ['enunciado' => '¿Quién está en la base?', 'respuesta' => 'Productores'],
        ['enunciado' => '¿Qué hace un descomponedor?', 'respuesta' => 'Recicla materia orgánica'],

        // === APLICADOS ===
        ['enunciado' => '¿Por qué un zorro es omnívoro?', 'respuesta' => 'Come plantas y animales'],
        ['enunciado' => '¿Cuánta energía llega al nivel 3?', 'respuesta' => '~1% (ley del 10%)'],
        ['enunciado' => '¿Por qué hay menos superpredadores?', 'respuesta' => 'Poca energía disponible'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Qué pasa si eliminas un herbívoro?', 'respuesta' => 'Otros pueden compensar (red estable)'],
        ['enunciado' => '¿Qué es un bucle trófico?', 'respuesta' => 'A come B, B come C, C come A'],
        ['enunciado' => '¿Qué mide la conectancia?', 'respuesta' => 'Densidad de interacciones'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula de Lindeman', 'respuesta' => '\\( E_{n+1} = 0.1 \\times E_n \\)'],
        ['enunciado' => 'Fórmula de conectancia', 'respuesta' => '\\( C = \\frac{L}{S^2} \\)'],
        ['enunciado' => '¿Qué es un nodo clave (keystone)?', 'respuesta' => 'Especie con impacto desproporcionado']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Redes tróficas muestran...', 'opciones' => ['Cadenas lineales', 'Interconexiones', 'Solo plantas', 'Clima'], 'correcta' => 'Interconexiones'],
        ['pregunta' => 'Base de la red:', 'opciones' => ['Carnívoros', 'Productores', 'Descomponedores', 'Herbívoros'], 'correcta' => 'Productores'],
        ['pregunta' => 'Energía fluye de...', 'opciones' => ['Arriba a abajo', 'Abajo a arriba', 'Circular', 'Aleatorio'], 'correcta' => 'Abajo a arriba'],
        ['pregunta' => 'Descomponedores...', 'opciones' => ['Consumen energía', 'Reciclan materia', 'Producen luz', 'Nada'], 'correcta' => 'Reciclan materia'],
        ['pregunta' => 'Omnívoro come...', 'opciones' => ['Solo plantas', 'Solo carne', 'Ambos', 'Nada'], 'correcta' => 'Ambos'],
        ['pregunta' => 'Ley del 10% dice...', 'opciones' => ['90% pasa', '10% pasa', '100% pasa', '0% pasa'], 'correcta' => '10% pasa'],
        ['pregunta' => 'Cadena es...', 'opciones' => ['Compleja', 'Lineal', 'Circular', '3D'], 'correcta' => 'Lineal'],
        ['pregunta' => 'Red es más...', 'opciones' => ['Frágil', 'Estable', 'Simple', 'Rápida'], 'correcta' => 'Estable'],
        ['pregunta' => 'Superpredador es...', 'opciones' => ['Nivel 1', 'Nivel 4', 'Productor', 'Descomponedor'], 'correcta' => 'Nivel 4'],
        ['pregunta' => 'Autor de la ley del 10%:', 'opciones' => ['Liebig', 'Lindeman', 'Shelford', 'Elton'], 'correcta' => 'Lindeman'],

        // === MEDIO (10) ===
        ['pregunta' => 'Conectancia mide...', 'opciones' => ['Especies', 'Enlaces por especie²', 'Energía', 'Biomasa'], 'correcta' => 'Enlaces por especie²'],
        ['pregunta' => 'Bucle trófico es...', 'opciones' => ['A → B → A', 'A → B → C', 'A → A', 'B → A → C'], 'correcta' => 'A → B → A'],
        ['pregunta' => 'Especie clave (keystone):', 'opciones' => ['Abundante', 'Impacto alto', 'Pequeña', 'Grande'], 'correcta' => 'Impacto alto'],
        ['pregunta' => 'Si C = 0.1, red es...', 'opciones' => ['Simple', 'Compleja', 'Imposible', 'Lineal'], 'correcta' => 'Simple'],
        ['pregunta' => 'En pirámide de energía:', 'opciones' => ['Base ancha', 'Base estrecha', 'Constante', 'Invertida'], 'correcta' => 'Base ancha'],
        ['pregunta' => 'Descomponedores son...', 'opciones' => ['Heterótrofos', 'Autótrofos', 'Fotosintéticos', 'Quimiosintéticos'], 'correcta' => 'Heterótrofos'],
        ['pregunta' => 'En red, energía se...', 'opciones' => ['Recicla', 'Pierde como calor', 'Aumenta', 'Conserva'], 'correcta' => 'Pierde como calor'],
        ['pregunta' => 'Red con más enlaces es...', 'opciones' => ['Frágil', 'Resiliente', 'Lenta', 'Pequeña'], 'correcta' => 'Resiliente'],
        ['pregunta' => 'Ejemplo de keystone:', 'opciones' => ['Lobo', 'Conejo', 'Planta', 'Bacteria'], 'correcta' => 'Lobo'],
        ['pregunta' => 'Fórmula conectancia:', 'opciones' => ['C = S/L', 'C = L/S²', 'C = S²/L', 'C = L/S'], 'correcta' => 'C = L/S²'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Red con C > 0.3 es...', 'opciones' => ['Simple', 'Muy compleja', 'Imposible', 'Lineal'], 'correcta' => 'Muy compleja'],
        ['pregunta' => 'Modelo de Elton (1927):', 'opciones' => ['Pirámide de números', 'Red trófica', 'Ciclo', 'Flujo'], 'correcta' => 'Pirámide de números'],
        ['pregunta' => 'En cascada trófica, eliminar depredador causa...', 'opciones' => ['Menos plantas', 'Más plantas', 'Nada', 'Menos herbívoros'], 'correcta' => 'Más plantas'],
        ['pregunta' => 'Red trófica global tiene ~...', 'opciones' => ['100 especies', '10,000 especies', '1M especies', '100M especies'], 'correcta' => '10,000 especies'],
        ['pregunta' => 'Análisis de redes usa...', 'opciones' => ['Gráficos', 'Teoría de grafos', 'Álgebra', 'Geometría'], 'correcta' => 'Teoría de grafos'],
        ['pregunta' => 'Nodo con más enlaces es...', 'opciones' => ['Periférico', 'Central (hub)', 'Aislado', 'Muerto'], 'correcta' => 'Central (hub)'],
        ['pregunta' => 'En red marina, base es...', 'opciones' => ['Pez', 'Fitoplancton', 'Ballena', 'Coral'], 'correcta' => 'Fitoplancton'],
        ['pregunta' => 'En red terrestre, base es...', 'opciones' => ['Árboles', 'Animales', 'Hongos', 'Bacterias'], 'correcta' => 'Árboles'],
        ['pregunta' => 'Red más estudiada:', 'opciones' => ['Bosque', 'Océano pelágico', 'Desierto', 'Tundra'], 'correcta' => 'Océano pelágico'],
        ['pregunta' => 'Red con más bucles es...', 'opciones' => ['Simple', 'Compleja', 'Lineal', 'Pequeña'], 'correcta' => 'Compleja']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Relaciones Ecológicas (Simbiosis, Depredación, Competencia)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'relaciones-ecosistemas',
    'titulo' => 'Relaciones Ecológicas: El Tejido Vivo de los Ecosistemas',
    'contenido' => '
        <h3>Relaciones Ecológicas</h3>
        <p>Las <strong>interacciones bióticas</strong> entre organismos determinan:</p>
        <ul>
            <li><strong>Estructura</strong> de comunidades</li>
            <li><strong>Flujo de energía</strong></li>
            <li><strong>Estabilidad</strong> del ecosistema</li>
        </ul>
        <p>Se clasifican por <strong>efecto neto</strong> en cada especie: <code>+</code>, <code>-</code>, <code>0</code>.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Tipos de Interacciones</h4>
        <table class="table">
            <thead>
                <tr><th>Interacción</th><th>Notación</th><th>Ejemplo</th><th>Efecto</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Mutualismo</strong></td><td>+/+</td><td>Abeja ↔ Flor</td><td>Obligatorio o facultativo</td></tr>
                <tr><td><strong>Comensalismo</strong></td><td>+/0</td><td>Rémora ↔ Tiburón</td><td>Neutral para uno</td></tr>
                <tr><td><strong>Parasitismo</strong></td><td>+/-</td><td>Pulga ↔ Perro</td><td>Daño al huésped</td></tr>
                <tr><td><strong>Depredación</strong></td><td>+/-</td><td>León ↔ Cebra</td><td>Muerte del presunto</td></tr>
                <tr><td><strong>Competencia</strong></td><td>-/-</td><td>Árboles ↔ Luz</td><td>Exclusión competitiva</td></tr>
                <tr><td><strong>Amensalismo</strong></td><td>-/0</td><td>Penicilina ↔ Bacteria</td><td>Inhibición</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Mutualismo</strong>: Micorrizas (+ nutrientes al árbol, + azúcares al hongo).</p>
        </div>

        <div class="visual">
            <img src="assets/img/ecological-relationships-graphic_orig.png" alt="Relaciones ecológicas - Amoeba Sisters">
            <p><em>Diagrama completo de interacciones. Fuente: Amoeba Sisters.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Simbiosis: Vida en Común</h4>
        <ul>
            <li><strong>Endosimbiosis:</strong> Un organismo vive dentro del otro</li>
            <li><strong>Ectosimbiosis:</strong> En superficie</li>
            <li><strong>Obligatoria:</strong> Sin el otro, muere</li>
            <li><strong>Facultativa:</strong> Puede sobrevivir solo</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Clownfish ↔ Anémona</strong>: Pez protegido, anémona alimentada.</p>
        </div>

        <div class="visual">
            <img src="assets/img/relaciones.jpg" alt="Dibujo animado de relaciones">
            <p><em>Simbiosis, depredación, competencia. Fuente: YouTube.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Depredación y Cascadas Tróficas</h4>
        <p>Eliminación de un depredador → explosión de presas → colapso de plantas.</p>
        <p><strong>Ejemplo:</strong> Lobos en Yellowstone → menos ciervos → más sauces → más castores.</p>

        <div class="visual">
            <img src="assets/img/trofica-artico.png" alt="Red trófica ártica">
            <p><em>Cascada trófica en océano ártico. Fuente: Study.com.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Competencia: Lucha por Recursos</h4>
        <ul>
            <li><strong>Intraespecífica:</strong> Misma especie</li>
            <li><strong>Interespecífica:</strong> Diferentes especies</li>
            <li><strong>Principio de Exclusión (Gause):</strong> Dos especies no pueden ocupar el mismo nicho</li>
        </ul>

        <div class="visual">
            <img src="assets/img/gause.png" alt="Principio de Gause">
            <p><em>Competencia → exclusión. Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/competencia-arrecifes.png" alt="Competencia en arrecifes">
            <p><em>Competencia por espacio en corales. Fuente: Frontiers.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/interacciones-multiples.png" alt="Interacciones múltiples">
            <p><em>Red de interacciones bióticas. Fuente: Science of the Total Environment.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. Coevolución</h4>
        <p>Especies evolucionan juntas por presión mutua.</p>
        <p><strong>Ejemplo:</strong> Flores con tubo largo ↔ polillas con lengua larga.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>6. SVG Animado: Red de Interacciones</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Especies -->
                <circle cx="150" cy="200" r="50" fill="#90EE90" stroke="#228B22" stroke-width="3"/>
                <text x="150" y="205" fill="#000" font-size="14" text-anchor="middle">Planta</text>

                <circle cx="350" cy="100" r="50" fill="#FFD700" stroke="#DAA520" stroke-width="3"/>
                <text x="350" y="105" fill="#000" font-size="14" text-anchor="middle">Abeja</text>

                <circle cx="550" cy="200" r="50" fill="#87CEEB" stroke="#4682B4" stroke-width="3"/>
                <text x="550" y="205" fill="#000" font-size="14" text-anchor="middle">Pájaro</text>

                <circle cx="350" cy="300" r="50" fill="#FF6347" stroke="#DC143C" stroke-width="3"/>
                <text x="350" y="305" fill="#FFF" font-size="14" text-anchor="middle">Pulga</text>

                <circle cx="150" cy="350" r="50" fill="#DDA0DD" stroke="#8B008B" stroke-width="3"/>
                <text x="150" y="355" fill="#000" font-size="12" text-anchor="middle">Perro</text>

                <!-- Conexiones -->
                <defs>
                    <marker id="arrow-plus" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#00ff00"/>
                    </marker>
                    <marker id="arrow-minus" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#ff0000"/>
                    </marker>
                    <marker id="arrow-zero" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#888"/>
                    </marker>
                </defs>

                <!-- Mutualismo (+/+) -->
                <path d="M200 200 Q250 150 300 100" stroke="#00ff00" stroke-width="4" marker-end="url(#arrow-plus)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M300 100 Q250 150 200 200" stroke="#00ff00" stroke-width="4" marker-end="url(#arrow-plus)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2.2s" repeatCount="indefinite"/>
                </path>
                <text x="250" y="140" fill="#00ff00" font-size="12" text-anchor="middle">+/+</text>

                <!-- Comensalismo (+/0) -->
                <path d="M200 200 Q300 150 500 200" stroke="#888" stroke-width="3" marker-end="url(#arrow-zero)">
                    <animate attributeName="stroke-dashoffset" from="80" to="0" dur="2.5s" repeatCount="indefinite"/>
                </path>
                <text x="350" y="160" fill="#888" font-size="12" text-anchor="middle">+/0</text>

                <!-- Parasitismo (+/-) -->
                <path d="M200 350 Q250 325 300 300" stroke="#ff0000" stroke-width="4" marker-end="url(#arrow-minus)">
                    <animate attributeName="stroke-dashoffset" from="60" to="0" dur="1.8s" repeatCount="indefinite"/>
                </path>
                <text x="250" y="310" fill="#ff0000" font-size="12" text-anchor="middle">+/-</text>

                <!-- Depredación (+/-) -->
                <path d="M150 250 Q250 150 350 130" stroke="#ff0000" stroke-width="4" marker-end="url(#arrow-minus)">
                    <animate attributeName="stroke-dashoffset" from="90" to="0" dur="3s" repeatCount="indefinite"/>
                </path>

                <!-- Competencia (-/-) -->
                <path d="M150 250 Q250 280 350 300" stroke="#ff00ff" stroke-width="3" stroke-dasharray="5,5"/>
                <text x="250" y="270" fill="#ff00ff" font-size="12" text-anchor="middle">-/-</text>

                <!-- Título -->
                <text x="350" y="50" fill="#ffcc00" font-size="20" text-anchor="middle" font-family="Arial">Relaciones Ecológicas</text>
            </svg>
            <p><em>SVG Animado: Interacciones con efectos positivos, negativos y neutros.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Clasifica: Tiburón y rémora', 'respuesta' => 'Comensalismo (+/0)'],
        ['enunciado' => 'Clasifica: León y cebra', 'respuesta' => 'Depredación (+/-)'],
        ['enunciado' => 'Clasifica: Dos árboles por luz', 'respuesta' => 'Competencia (-/-)'],

        // === APLICADOS ===
        ['enunciado' => '¿Qué es mutualismo obligatorio?', 'respuesta' => 'Ambos mueren sin el otro'],
        ['enunciado' => 'Ejemplo de amensalismo', 'respuesta' => 'Árbol sombrea hierba'],
        ['enunciado' => '¿Qué dice Gause?', 'respuesta' => 'Dos especies no ocupan mismo nicho'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Qué pasa si eliminas lobos?', 'respuesta' => 'Explosión de ciervos, menos plantas'],
        ['enunciado' => '¿Qué es coevolución?', 'respuesta' => 'Especies evolucionan juntas'],
        ['enunciado' => '¿Qué es especie clave?', 'respuesta' => 'Impacto alto en comunidad'],

        // === AVANZADOS ===
        ['enunciado' => 'Dibuja: Mutualismo', 'respuesta' => 'A →(+) B, B →(+) A'],
        ['enunciado' => '¿Qué es facilitación?', 'respuesta' => 'Una especie ayuda a otra sin daño'],
        ['enunciado' => '¿Qué mide índice de interacción?', 'respuesta' => 'Fuerza de la relación']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Simbiosis incluye...', 'opciones' => ['Solo mutualismo', 'Mutualismo, comensalismo, parasitismo', 'Depredación', 'Competencia'], 'correcta' => 'Mutualismo, comensalismo, parasitismo'],
        ['pregunta' => 'Depredación es...', 'opciones' => ['+/+', '+/-', '-/-', '+/0'], 'correcta' => '+/-'],
        ['pregunta' => 'Comensalismo es...', 'opciones' => ['+/0', '-/0', '+/+', '-/-'], 'correcta' => '+/0'],
        ['pregunta' => 'Competencia afecta...', 'opciones' => ['Ambas negativamente', 'Una positivamente', 'Ninguna', 'Solo una'], 'correcta' => 'Ambas negativamente'],
        ['pregunta' => 'Mutualismo es...', 'opciones' => ['+/+', '+/-', '-/-', '+/0'], 'correcta' => '+/+'],
        ['pregunta' => 'Amensalismo es...', 'opciones' => ['-/0', '+/0', '-/-', '+/+'], 'correcta' => '-/0'],
        ['pregunta' => 'Autor de exclusión competitiva:', 'opciones' => ['Liebig', 'Gause', 'Shelford', 'Lotka'], 'correcta' => 'Gause'],
        ['pregunta' => 'Especie clave ejemplo:', 'opciones' => ['Conejo', 'Lobo', 'Planta', 'Bacteria'], 'correcta' => 'Lobo'],
        ['pregunta' => 'Rémora y tiburón:', 'opciones' => ['Mutualismo', 'Comensalismo', 'Parasitismo', 'Competencia'], 'correcta' => 'Comensalismo'],
        ['pregunta' => 'Abeja y flor:', 'opciones' => ['Comensalismo', 'Mutualismo', 'Parasitismo', 'Depredación'], 'correcta' => 'Mutualismo'],

        // === MEDIO (10) ===
        ['pregunta' => 'Cascada trófica es...', 'opciones' => ['Efecto dominó', 'Ciclo', 'Competencia', 'Simbiosis'], 'correcta' => 'Efecto dominó'],
        ['pregunta' => 'Sin lobos en Yellowstone:', 'opciones' => ['Más sauces', 'Menos sauces', 'Nada', 'Más lobos'], 'correcta' => 'Menos sauces'],
        ['pregunta' => 'Coevolución ejemplo:', 'opciones' => ['Flor y polilla', 'León y cebra', 'Árbol y suelo', 'Pez y agua'], 'correcta' => 'Flor y polilla'],
        ['pregunta' => 'Endosimbiosis:', 'opciones' => ['Fuera', 'Dentro', 'Encima', 'Debajo'], 'correct Wikidata' => 'Dentro'],
        ['pregunta' => 'Facultativo significa...', 'opciones' => ['Obligatorio', 'Opcional', 'Mortal', 'Temporal'], 'correcta' => 'Opcional'],
        ['pregunta' => 'Intraespecífica es...', 'opciones' => ['Entre especies', 'Dentro de especie', 'Con plantas', 'Con animales'], 'correcta' => 'Dentro de especie'],
        ['pregunta' => 'Principio de Gause:', 'opciones' => ['Dos nichos iguales', 'Un nicho por especie', 'Dos especies sin nicho', 'Ningún nicho'], 'correcta' => 'Un nicho por especie'],
        ['pregunta' => 'Facilitación es...', 'opciones' => ['Daño', 'Ayuda sin costo', 'Competencia', 'Depredación'], 'correcta' => 'Ayuda sin costo'],
        ['pregunta' => 'Pulga en perro:', 'opciones' => ['Mutualismo', 'Parasitismo', 'Comensalismo', 'Competencia'], 'correcta' => 'Parasitismo'],
        ['pregunta' => 'Árbol sombrea hierba:', 'opciones' => ['Amensalismo', 'Competencia', 'Mutualismo', 'Depredación'], 'correcta' => 'Amensalismo'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Modelo Lotka-Volterra es para...', 'opciones' => ['Depredación', 'Competencia', 'Simbiosis', 'Crecimiento'], 'correcta' => 'Depredación'],
        ['pregunta' => 'En cascada, eliminar nivel 3 causa...', 'opciones' => ['Menos nivel 1', 'Más nivel 2', 'Menos nivel 2', 'Nada'], 'correcta' => 'Más nivel 2'],
        ['pregunta' => 'Especie ingeniera ejemplo:', 'opciones' => ['Castor', 'Conejo', 'Pájaro', 'Pez'], 'correcta' => 'Castor'],
        ['pregunta' => 'Red de interacciones con más +/+ es...', 'opciones' => ['Inestable', 'Estable', 'Simple', 'Pequeña'], 'correcta' => 'Estable'],
        ['pregunta' => 'En arrecifes, competencia por...', 'opciones' => ['Luz', 'Espacio', 'Agua', 'O₂'], 'correcta' => 'Espacio'],
        ['pregunta' => 'Clownfish y anémona:', 'opciones' => ['Comensalismo', 'Mutualismo obligatorio', 'Parasitismo', 'Competencia'], 'correcta' => 'Mutualismo obligatorio'],
        ['pregunta' => 'Micorrizas son...', 'opciones' => ['Parásitos', 'Mutualistas', 'Competidores', 'Depredadores'], 'correcta' => 'Mutualistas'],
        ['pregunta' => 'Especie clave mantiene...', 'opciones' => ['Población', 'Diversidad', 'Energía', 'Materia'], 'correcta' => 'Diversidad'],
        ['pregunta' => 'En modelos, interacción se mide con...', 'opciones' => ['α (competencia)', 'β (simbiosis)', 'γ (depredación)', 'δ (crecimiento)'], 'correcta' => 'α (competencia)'],
        ['pregunta' => 'Red más resiliente tiene...', 'opciones' => ['Pocas interacciones', 'Muchas +/+', 'Solo -/-', 'Solo +/0'], 'correcta' => 'Muchas +/+']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Homeostasis (Organismos y Ecosistemas)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'homeostasis',
    'titulo' => 'Homeostasis: El Equilibrio Dinámico de la Vida',
    'contenido' => '
        <h3>¿Qué es la Homeostasis?</h3>
        <p>La <strong>homeostasis</strong> es el <strong>mantenimiento activo del equilibrio interno</strong> frente a cambios externos. Funciona mediante:</p>
        <ul>
            <li><strong>Retroalimentación negativa</strong>: Reduce desviaciones</li>
            <li><strong>Retroalimentación positiva</strong>: Amplifica (raro, inestable)</li>
            <li><strong>Sensores → Control → Efectores</strong></li>
        </ul>
        <p>Aplica a <strong>organismos</strong> y <strong>ecosistemas</strong>.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Homeostasis en Organismos</h4>
        <table class="table">
            <thead>
                <tr><th>Variable</th><th>Valor Óptimo</th><th>Mecanismo</th></tr>
            </thead>
            <tbody>
                <tr><td>Temperatura</td><td>37°C (humanos)</td><td>Sudor, escalofríos</td></tr>
                <tr><td>pH sanguíneo</td><td>7.35–7.45</td><td>Buffer, respiración</td></tr>
                <tr><td>Glucosa</td><td>70–110 mg/dL</td><td>Insulina, glucagón</td></tr>
                <tr><td>Osmolaridad</td><td>~300 mOsm/L</td><td>ADH, riñones</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> Sudas → enfrías → temperatura vuelve a 37°C.</p>
        </div>

        <div class="visual">
            <img src="assets/img/retroali_negativa.webp" alt="Homeostasis humana">
            <p><em>Ciclo de retroalimentación negativa. Fuente: GeeksforGeeks.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Homeostasis en Ecosistemas</h4>
        <p>Mantiene:</p>
        <ul>
            <li><strong>Concentración de nutrientes</strong></li>
            <li><strong>Poblaciones</strong></li>
            <li><strong>Flujo de energía</strong></li>
        </ul>

        <table class="table">
            <thead>
                <tr><th>Mecanismo</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td>Depredador-presa</td><td>Linces → liebres</td></tr>
                <tr><td>Ciclo de nutrientes</td><td>Descomponedores → N, P</td></tr>
                <tr><td>Competencia</td><td>Exclusión → nichos</td></tr>
                <tr><td>Sucesión</td><td>Restauración post-incendio</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> Aumento de algas → más peces → más garzas → algas disminuyen → equilibrio.</p>
        </div>

        <div class="visual">
            <img src="assets/img/retroali_eco.webp" alt="Homeostasis ecosistémica">
            <p><em>Retroalimentación en ecosistemas. Fuente: Quizlet.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Retroalimentación Negativa vs Positiva</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Efecto</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td>Negativa</td><td>Restaura</td><td>Depredación</td></tr>
                <tr><td>Positiva</td><td>Amplifica</td><td>Eutrofización</td></tr>
            </tbody>
        </table>

        <p>Modelo simple:</p>
        <p>\\[ \\frac{dP}{dt} = rP \\left(1 - \\frac{P}{K}\\right) - cDP \\]</p>

        <div class="visual">
            <img src="/assets/img/equilibrio_dinamico.png" alt="Homeostasis ecosistema">
            <p><em>Equilibrio dinámico. Fuente: Eco-intelligent.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Resiliencia y Umbral</h4>
        <ul>
            <li><strong>Resiliencia:</strong> Capacidad de volver al equilibrio</li>
            <li><strong>Umbral (tipping point):</strong> Punto sin retorno</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> Acidificación → corales mueren → no recuperación.</p>
        </div>

        <div class="visual">
            <img src="assets/img/Resiliencia_colapso.png" alt="Umbral ecosistémico">
            <p><em>Resiliencia vs colapso. Fuente: Science of the Total Environment.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/retroalimentacion-biosfera.png" alt="Retroalimentación global">
            <p><em>Retroalimentación en biosfera. Fuente: Nature.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/resiliencia-paisajes.png" alt="Resiliencia">
            <p><em>Resiliencia en paisajes. Fuente: Landscape Ecology.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: Ciclo de Homeostasis</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Centro: Equilibrio -->
                <circle cx="350" cy="250" r="80" fill="#87CEEB" stroke="#4682B4" stroke-width="4"/>
                <text x="350" y="245" fill="#000" font-size="18" text-anchor="middle">EQUILIBRIO</text>

                <!-- Perturbación -->
                <circle cx="150" cy="150" r="50" fill="#FF6347" opacity="0.7"/>
                <text x="150" y="155" fill="white" font-size="12" text-anchor="middle">+ Nutrientes</text>

                <!-- Respuesta -->
                <circle cx="550" cy="150" r="50" fill="#32CD32" opacity="0.7"/>
                <text x="550" y="155" fill="white" font-size="12" text-anchor="middle">- Algas</text>

                <!-- Flechas animadas -->
                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#00ff00"/>
                    </marker>
                </defs>

                <!-- Perturbación → Desequilibrio -->
                <path d="M200 150 Q250 200 300 220" stroke="#ff0000" stroke-width="5" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <text x="250" y="190" fill="#ff0000" font-size="12" text-anchor="middle">Aumento algas</text>

                <!-- Respuesta → Equilibrio -->
                <path d="M400 220 Q450 200 500 150" stroke="#00ff00" stroke-width="5" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2.5s" repeatCount="indefinite"/>
                </path>
                <text x="450" y="190" fill="#00ff00" font-size="12" text-anchor="middle">Peces comen</text>

                <!-- Ciclo completo -->
                <path d="M150 200 Q150 300 350 320 Q550 300 550 200" stroke="#888" stroke-width="3" stroke-dasharray="5,5"/>
                <text x="350" y="340" fill="#888" font-size="14" text-anchor="middle">Retroalimentación Negativa</text>

                <!-- Título -->
                <text x="350" y="50" fill="#ffcc00" font-size="20" text-anchor="middle" font-family="Arial">Homeostasis Ecosistémica</text>
            </svg>
            <p><em>SVG Animado: Perturbación → Desequilibrio → Respuesta → Equilibrio.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define homeostasis', 'respuesta' => 'Mantenimiento del equilibrio interno'],
        ['enunciado' => '¿Qué tipo de retroalimentación restaura?', 'respuesta' => 'Negativa'],
        ['enunciado' => 'Ejemplo en humanos', 'respuesta' => 'Temperatura corporal 37°C'],

        // === APLICADOS ===
        ['enunciado' => 'En un lago, ¿qué pasa si hay muchos nutrientes?', 'respuesta' => 'Eutrofización → retroalimentación positiva'],
        ['enunciado' => '¿Cómo actúa un depredador?', 'respuesta' => 'Controla población de presas'],
        ['enunciado' => '¿Qué es resiliencia?', 'respuesta' => 'Capacidad de volver al equilibrio'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Qué pasa tras un incendio?', 'respuesta' => 'Sucesión → restauración'],
        ['enunciado' => '¿Qué es un umbral?', 'respuesta' => 'Punto sin retorno'],
        ['enunciado' => '¿Cómo los descomponedores ayudan?', 'respuesta' => 'Reciclan nutrientes'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula básica de Lotka-Volterra (presa)', 'respuesta' => '\\( \\frac{dN}{dt} = rN - cNP \\)'],
        ['enunciado' => '¿Qué mide la resiliencia?', 'respuesta' => 'Tiempo de retorno al equilibrio'],
        ['enunciado' => '¿Qué es estado alternativo?', 'respuesta' => 'Equilibrio distinto tras perturbación']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Homeostasis es...', 'opciones' => ['Cambio constante', 'Equilibrio interno', 'Desequilibrio', 'Crecimiento'], 'correcta' => 'Equilibrio interno'],
        ['pregunta' => 'Retroalimentación negativa...', 'opciones' => ['Amplifica', 'Restaura equilibrio', 'Destruye', 'Ignora'], 'correcta' => 'Restaura equilibrio'],
        ['pregunta' => 'Ejemplo en ecosistema:', 'opciones' => ['Depredador-presa', 'Solo clima', 'Solo plantas', 'Nada'], 'correcta' => 'Depredador-presa'],
        ['pregunta' => 'En humanos, regula...', 'opciones' => ['Temperatura', 'Todo', 'Solo comida', 'Nada'], 'correcta' => 'Temperatura'],
        ['pregunta' => 'Sensor en homeostasis:', 'opciones' => ['Detecta cambio', 'Ejecuta', 'Ignora', 'Amplifica'], 'correcta' => 'Detecta cambio'],
        ['pregunta' => 'Efectores son...', 'opciones' => ['Músculos, glándulas', 'Sensores', 'Control', 'Nada'], 'correcta' => 'Músculos, glándulas'],
        ['pregunta' => 'Retroalimentación positiva...', 'opciones' => ['Estabiliza', 'Desestabiliza', 'Ignora', 'Equilibra'], 'correcta' => 'Desestabiliza'],
        ['pregunta' => 'En lago, muchos nutrientes →', 'opciones' => ['Equilibrio', 'Eutrofización', 'Sequía', 'Frío'], 'correcta' => 'Eutrofización'],
        ['pregunta' => 'Descomponedores ayudan a...', 'opciones' => ['Crecimiento', 'Reciclar nutrientes', 'Depredar', 'Competir'], 'correcta' => 'Reciclar nutrientes'],
        ['pregunta' => 'Homeostasis es...', 'opciones' => ['Estática', 'Dinámica', 'Fija', 'Mortal'], 'correcta' => 'Dinámica'],

        // === MEDIO (10) ===
        ['pregunta' => 'Resiliencia es...', 'opciones' => ['Capacidad de cambio', 'Capacidad de retorno', 'Fuerza', 'Tamaño'], 'correcta' => 'Capacidad de retorno'],
        ['pregunta' => 'Umbral (tipping point):', 'opciones' => ['Punto de equilibrio', 'Punto sin retorno', 'Punto de crecimiento', 'Punto de inicio'], 'correcta' => 'Punto sin retorno'],
        ['pregunta' => 'Modelo Lotka-Volterra es para...', 'opciones' => ['Crecimiento', 'Depredación', 'Competencia', 'Simbiosis'], 'correcta' => 'Depredación'],
        ['pregunta' => 'En Yellowstone, lobos controlan...', 'opciones' => ['Ciervos', 'Plantas', 'Ríos', 'Clima'], 'correcta' => 'Ciervos'],
        ['pregunta' => 'Sucesión restaura...', 'opciones' => ['Clima', 'Equilibrio', 'Población', 'Energía'], 'correcta' => 'Equilibrio'],
        ['pregunta' => 'Estado alternativo es...', 'opciones' => ['Mismo equilibrio', 'Otro equilibrio', 'Desequilibrio', 'Crecimiento'], 'correcta' => 'Otro equilibrio'],
        ['pregunta' => 'En humanos, ADH regula...', 'opciones' => ['Agua', 'Glucosa', 'pH', 'Temperatura'], 'correcta' => 'Agua'],
        ['pregunta' => 'En ecosistema, N se recicla por...', 'opciones' => ['Plantas', 'Descomponedores', 'Animales', 'Luz'], 'correcta' => 'Descomponedores'],
        ['pregunta' => 'Retroalimentación positiva en...', 'opciones' => ['Equilibrio', 'Crisis', 'Crecimiento', 'Estabilidad'], 'correcta' => 'Crisis'],
        ['pregunta' => 'Ecosistema resiliente vuelve en...', 'opciones' => ['Años', 'Siglos', 'Nunca', 'Días'], 'correcta' => 'Años'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula logística con depredación:', 'opciones' => ['dN/dt = rN', 'dN/dt = rN(1-N/K) - cNP', 'dN/dt = rN + cNP', 'dN/dt = K'], 'correcta' => 'dN/dt = rN(1-N/K) - cNP'],
        ['pregunta' => 'En modelo, K es...', 'opciones' => ['Capacidad de carga', 'Crecimiento', 'Depredación', 'Mortalidad'], 'correcta' => 'Capacidad de carga'],
        ['pregunta' => 'Ecosistema con alta resiliencia tiene...', 'opciones' => ['Pocas especies', 'Alta diversidad', 'Baja conectancia', 'Solo plantas'], 'correcta' => 'Alta diversidad'],
        ['pregunta' => 'Acidificación oceánica es...', 'opciones' => ['Retro negativa', 'Umbral', 'Equilibrio', 'Crecimiento'], 'correcta' => 'Umbral'],
        ['pregunta' => 'En Amazonía, deforestación →', 'opciones' => ['Más lluvia', 'Menos lluvia', 'Igual', 'Más CO₂'], 'correcta' => 'Menos lluvia'],
        ['pregunta' => 'Resiliencia se mide por...', 'opciones' => ['Tiempo de retorno', 'Tamaño', 'Especies', 'Energía'], 'correcta' => 'Tiempo de retorno'],
        ['pregunta' => 'Ecosistema más resiliente:', 'opciones' => ['Desierto', 'Selva tropical', 'Tundra', 'Lago pequeño'], 'correcta' => 'Selva tropical'],
        ['pregunta' => 'En modelo, c es...', 'opciones' => ['Tasa de encuentro', 'Crecimiento', 'Capacidad', 'Mortalidad'], 'correcta' => 'Tasa de encuentro'],
        ['pregunta' => 'Eutrofización es retroalimentación...', 'opciones' => ['Negativa', 'Positiva', 'Neutra', 'Cíclica'], 'correcta' => 'Positiva'],
        ['pregunta' => 'Homeostasis global es...', 'opciones' => ['Gaia', 'Liebig', 'Shelford', 'Lotka'], 'correcta' => 'Gaia']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Producción Primaria y Transferencia de Energía
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'produccion-primaria-transferencia-energia',
    'titulo' => 'Producción Primaria y Transferencia de Energía en Ecosistemas',
    'contenido' => '
        <h3>Producción Primaria: El Motor Energético</h3>
        <p>La <strong>producción primaria</strong> es la <strong>síntesis de materia orgánica</strong> por <strong>autótrofos</strong> usando energía solar (fotosíntesis) o química (quimiosíntesis).</p>
        <p><strong>Unidades:</strong> g C/m²/año, kJ/m²/año, o kcal/m²/día</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Tipos de Producción</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Definición</th><th>Fórmula</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>GPP</strong> (Gross Primary Production)</td><td>Energía total captada</td><td>\\(\\text{GPP} = \\text{Fotosíntesis bruta}\\)</td></tr>
                <tr><td><strong>NPP</strong> (Net Primary Production)</td><td>Energía disponible para consumidores</td><td>\\(\\text{NPP} = \\text{GPP} - R_a\\)</td></tr>
                <tr><td><strong>R_a</strong></td><td>Respiración autótrofa</td><td>~50% GPP</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> Selva: GPP = 3000 g C/m²/año → NPP = 1500 g C/m²/año</p>
        </div>

        <div class="visual">
            <img src="assets/img/flujo-energetico.png" alt="Flujo de energía - Khan Academy">
            <p><em>Diagrama de flujo energético. Fuente: Khan Academy.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Transferencia de Energía: Ley del 10%</h4>
        <p>Solo <strong>~10%</strong> de la energía se transfiere entre niveles tróficos. El 90% se pierde como:</p>
        <ul>
            <li><strong>Calor</strong> (2ª Ley Termodinámica)</li>
            <li><strong>Metabolismo</strong></li>
            <li><strong>Materia no digerida</strong></li>
        </ul>

        <p><strong>Eficiencia trófica:</strong> \\( E = \\frac{P_{n+1}}{P_n} \\approx 0.1 \\)</p>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> 10,000 kJ plantas → 1,000 kJ herbívoros → 100 kJ carnívoros → 10 kJ superpredador</p>
        </div>

        <div class="visual">
            <img src="assets/img/Ecological_Pyramid.png" alt="Pirámide ecológica">
            <p><em>Pirámide de energía. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Pirámides Ecológicas</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Forma</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td>Energía</td><td>Siempre decreciente</td><td>10,000 → 1,000 → 100</td></tr>
                <tr><td>Biomasa</td><td>Generalmente decreciente</td><td>Excepto océano invertida</td></tr>
                <tr><td>Números</td><td>Puede invertirse</td><td>1 árbol → 1000 insectos</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/energy-flow-in-an-ecosystem.jpg" alt="Flujo energía National Geographic">
            <p><em>Flujo de energía en ecosistema. Fuente: National Geographic.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. NPP por Bioma (g C/m²/año)</h4>
        <table class="table">
            <thead>
                <tr><th>Bioma</th><th>NPP</th></tr>
            </thead>
            <tbody>
                <tr><td>Selva tropical</td><td>1000–3500</td></tr>
                <tr><td>Bosque templado</td><td>600–2500</td></tr>
                <tr><td>Pradera</td><td>200–1500</td></tr>
                <tr><td>Desierto</td><td>&lt; 200</td></tr>
                <tr><td>Tundra</td><td>&lt; 140</td></tr>
                <tr><td>Océano abierto</td><td>100–400</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/npp-satelite.png" alt="NPP global NASA">
            <p><em>NPP global desde satélite. Fuente: NASA Earth Observatory.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/mapa-global-npp.png" alt="NPP satelital">
            <p><em>Mapa global de NPP. Fuente: MDPI.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/eficiencia-bioma.png" alt="Eficiencia energética">
            <p><em>Eficiencia trófica por bioma. Fuente: Science of the Total Environment.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: Transferencia de Energía</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Niveles -->
                <rect x="50" y="350" width="600" height="100" fill="#228B22" rx="20"/> <!-- Productores -->
                <text x="350" y="400" fill="white" font-size="18" text-anchor="middle">Productores (100%)</text>

                <rect x="150" y="230" width="400" height="80" fill="#FFD700" rx="15"/> <!-- Primarios -->
                <text x="350" y="270" fill="black" font-size="16" text-anchor="middle">Herbívoros (10%)</text>

                <rect x="250" y="130" width="200" height="60" fill="#FF6347" rx="10"/> <!-- Secundarios -->
                <text x="350" y="160" fill="white" font-size="14" text-anchor="middle">Carnívoros (1%)</text>

                <rect x="300" y="50" width="100" height="40" fill="#DC143C" rx="8"/> <!-- Terciarios -->
                <text x="350" y="75" fill="white" font-size="12" text-anchor="middle">0.1%</text>

                <!-- Flujo energético -->
                <defs>
                    <marker id="arrow" markerWidth="12" markerHeight="12" refX="10" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L10,3 z" fill="#00ff00"/>
                    </marker>
                </defs>

                <!-- 100% → 10% -->
                <path d="M350 350 L350 310" stroke="#00ff00" stroke-width="30" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <text x="320" y="330" fill="#00ff00" font-size="14">1000 kJ</text>

                <!-- 10% → 1% -->
                <path d="M350 230 L350 190" stroke="#ffcc00" stroke-width="20" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="80" to="0" dur="2.2s" repeatCount="indefinite"/>
                </path>
                <text x="320" y="210" fill="#ffcc00" font-size="12">100 kJ</text>

                <!-- 1% → 0.1% -->
                <path d="M350 130 L350 100" stroke="#ff4500" stroke-width="12" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="60" to="0" dur="2.5s" repeatCount="indefinite"/>
                </path>
                <text x="320" y="115" fill="#ff4500" font-size="10">10 kJ</text>

                <!-- Calor perdido -->
                <text x="100" y="300" fill="#ff0000" font-size="12">90% Calor</text>
                <text x="200" y="200" fill="#ff0000" font-size="12">90% Calor</text>
                <text x="300" y="100" fill="#ff0000" font-size="12">90% Calor</text>

                <!-- Título -->
                <text x="350" y="30" fill="#ffcc00" font-size="22" text-anchor="middle" font-family="Arial">Transferencia de Energía</text>
            </svg>
            <p><em>SVG Animado: Ley del 10% en acción.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => '¿Qué es GPP?', 'respuesta' => 'Producción primaria bruta'],
        ['enunciado' => '¿Qué es NPP?', 'respuesta' => 'GPP menos respiración'],
        ['enunciado' => 'Eficiencia trófica promedio', 'respuesta' => '~10%'],

        // === APLICADOS ===
        ['enunciado' => 'Si GPP = 2000 kJ/m², ¿cuánto NPP si R_a = 50%?', 'respuesta' => '1000 kJ/m²'],
        ['enunciado' => '¿Cuánta energía llega al nivel 4 si plantas tienen 10000 kJ?', 'respuesta' => '10 kJ'],
        ['enunciado' => '¿Por qué no hay nivel 6?', 'respuesta' => 'Energía insuficiente'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Qué bioma tiene mayor NPP?', 'respuesta' => 'Selva tropical'],
        ['enunciado' => '¿Por qué océano tiene NPP baja?', 'respuesta' => 'Nutrientes limitantes'],
        ['enunciado' => '¿Qué mide satélite MODIS?', 'respuesta' => 'NPP global'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula NPP', 'respuesta' => '\\(\\text{NPP} = \\text{GPP} - R_a\\)'],
        ['enunciado' => 'Eficiencia = ?', 'respuesta' => '\\( E = \\frac{P_{n+1}}{P_n} \\)'],
        ['enunciado' => '¿Qué es PAR?', 'respuesta' => 'Radiación fotosintéticamente activa']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Producción primaria es...', 'opciones' => ['Consumo', 'Síntesis orgánica', 'Descomposición', 'Transferencia'], 'correcta' => 'Síntesis orgánica'],
        ['pregunta' => 'Energía transferida entre niveles:', 'opciones' => ['100%', '10%', '50%', '1%'], 'correcta' => '10%'],
        ['pregunta' => 'Pérdida principal de energía:', 'opciones' => ['Calor', 'Luz', 'Agua', 'Carbono'], 'correcta' => 'Calor'],
        ['pregunta' => 'Base de la cadena:', 'opciones' => ['Carnívoros', 'Productores', 'Descomponedores', 'Herbívoros'], 'correcta' => 'Productores'],
        ['pregunta' => 'GPP significa...', 'opciones' => ['Gross Primary Production', 'Global Plant Production', 'Green Plant Power', 'Nada'], 'correcta' => 'Gross Primary Production'],
        ['pregunta' => 'NPP = GPP - ...', 'opciones' => ['R_a', 'P', 'C', 'Luz'], 'correcta' => 'R_a'],
        ['pregunta' => 'Pirámide de energía es...', 'opciones' => ['Invertida', 'Siempre decreciente', 'Constante', 'Creciente'], 'correcta' => 'Siempre decreciente'],
        ['pregunta' => 'Unidad común de NPP:', 'opciones' => ['g C/m²/año', 'kg/m', 'L/ha', '°C'], 'correcta' => 'g C/m²/año'],
        ['pregunta' => 'Quimiosíntesis ocurre en...', 'opciones' => ['Fotos', 'Fuentes hidrotermales', 'Suelo', 'Aire'], 'correcta' => 'Fuentes hidrotermales'],
        ['pregunta' => 'Autor de la ley del 10%:', 'opciones' => ['Liebig', 'Lindeman', 'Shelford', 'Elton'], 'correcta' => 'Lindeman'],

        // === MEDIO (10) ===
        ['pregunta' => 'Bioma con mayor NPP:', 'opciones' => ['Tundra', 'Selva tropical', 'Desierto', 'Océano'], 'correcta' => 'Selva tropical'],
        ['pregunta' => 'Bioma con menor NPP:', 'opciones' => ['Pradera', 'Tundra', 'Bosque', 'Sabana'], 'correcta' => 'Tundra'],
        ['pregunta' => 'En océano, NPP limitada por...', 'opciones' => ['Luz', 'Nutrientes', 'CO₂', 'O₂'], 'correcta' => 'Nutrientes'],
        ['pregunta' => 'Eficiencia trófica real varía entre...', 'opciones' => ['5–20%', '50–90%', '1–5%', '90–100%'], 'correcta' => '5–20%'],
        ['pregunta' => 'PAR es...', 'opciones' => ['Luz total', 'Luz fotosintéticamente activa', 'Presión', 'Agua'], 'correcta' => 'Luz fotosintéticamente activa'],
        ['pregunta' => 'En pirámide invertida de biomasa:', 'opciones' => ['Océano', 'Selva', 'Pradera', 'Tundra'], 'correcta' => 'Océano'],
        ['pregunta' => 'Satélite mide NPP con...', 'opciones' => ['NDVI', 'GPS', 'Radar', 'Sonar'], 'correcta' => 'NDVI'],
        ['pregunta' => 'En selva, NPP ≈ ... g C/m²/año', 'opciones' => ['100', '1000', '10000', '100000'], 'correcta' => '1000'],
        ['pregunta' => 'En desierto, NPP < ... g C/m²/año', 'opciones' => ['1000', '200', '5000', '100'], 'correcta' => '200'],
        ['pregunta' => 'Fórmula eficiencia:', 'opciones' => ['E = P_n / P_{n+1}', 'E = P_{n+1} / P_n', 'E = GPP / NPP', 'E = R_a / GPP'], 'correcta' => 'E = P_{n+1} / P_n'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'NPP global ≈ ... Gt C/año', 'opciones' => ['10', '60', '120', '1000'], 'correcta' => '60'],
        ['pregunta' => 'Océanos aportan ~...% NPP global', 'opciones' => ['1%', '50%', '90%', '10%'], 'correcta' => '50%'],
        ['pregunta' => 'En modelo, energía no transferida se pierde como...', 'opciones' => ['Entropía', 'Calor', 'Biomasa', 'Luz'], 'correcta' => 'Calor'],
        ['pregunta' => 'Máxima eficiencia trófica en...', 'opciones' => ['Peces', 'Insectos', 'Mamíferos', 'Aves'], 'correcta' => 'Insectos'],
        ['pregunta' => 'En acuicultura, se maximiza...', 'opciones' => ['GPP', 'NPP', 'Eficiencia', 'Biomasa'], 'correcta' => 'Eficiencia'],
        ['pregunta' => 'Pirámide de números invertida en...', 'opciones' => ['1 árbol → 1000 insectos', '1000 plantas → 1 ciervo', '10 peces → 1 águila', '100 algas → 1 pez'], 'correcta' => '1 árbol → 1000 insectos'],
        ['pregunta' => 'Fotosíntesis: 6CO₂ + 6H₂O →', 'opciones' => ['C₆H₁₂O₆ + 6O₂', 'C₆H₁₂O₆ + 6CO₂', '6C + 6O₂', 'H₂O + CO₂'], 'correcta' => 'C₆H₁₂O₆ + 6O₂'],
        ['pregunta' => 'En ecosistema, energía total entrada =', 'opciones' => ['GPP', 'NPP', 'Biomasa', 'Calor'], 'correcta' => 'GPP'],
        ['pregunta' => 'En modelo lineal, nivel n tiene energía...', 'opciones' => ['10^n', '10^{-n}', '0.1^n × P_0', 'P_0 / 10^n'], 'correcta' => '0.1^n × P_0'],
        ['pregunta' => 'Máximo nivel trófico sostenible:', 'opciones' => ['3', '5', '10', '20'], 'correcta' => '5']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Huella de Carbono (Cálculo, Impacto, Mitigación)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'huella-carbono',
    'titulo' => 'Huella de Carbono: El Impacto Invisible del Ser Humano',
    'contenido' => '
        <h3>¿Qué es la Huella de Carbono?</h3>
        <p>La <strong>huella de carbono</strong> es la <strong>cantidad total de gases de efecto invernadero (GEI)</strong> emitidos directa o indirectamente por una actividad humana, expresada en <strong>toneladas de CO₂ equivalente (t CO₂e)</strong>.</p>
        <p>Incluye: <strong>CO₂, CH₄, N₂O, HFCs, PFCs, SF₆</strong>.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Tipos de Huella</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Alcance</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Alcance 1</strong></td><td>Emisiones directas</td><td>Combustión de gasolina</td></tr>
                <tr><td><strong>Alcance 2</strong></td><td>Energía comprada</td><td>Electricidad</td></tr>
                <tr><td><strong>Alcance 3</strong></td><td>Indirectas</td><td>Transporte, alimentos, residuos</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> Un vuelo Madrid-NY: ~1.2 t CO₂e por pasajero.</p>
        </div>

        <div class="visual">
            <img src="assets/img/huella-carbono.png" alt="Diagrama huella de carbono">
            <p><em>Alcances 1, 2 y 3. Fuente: Carbon Footprint Ltd.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Cálculo: CO₂ Equivalente</h4>
        <p>Se usa el <strong>Potencial de Calentamiento Global (GWP)</strong>:</p>
        <p>\\[ \\text{CO}_2\\text{e} = \\text{masa GEI} \\times \\text{GWP} \\]</p>

        <table class="table">
            <thead>
                <tr><th>GEI</th><th>GWP (100 años)</th></tr>
            </thead>
            <tbody>
                <tr><td>CO₂</td><td>1</td></tr>
                <tr><td>CH₄</td><td>28–36</td></tr>
                <tr><td>N₂O</td><td>265–298</td></tr>
                <tr><td>SF₆</td><td>23,500</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> 1 kg CH₄ = 34 kg CO₂e</p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Fuentes Principales</h4>
        <ul>
            <li><strong>Energía:</strong> 73% (carbón, petróleo, gas)</li>
            <li><strong>Agricultura:</strong> 12% (CH₄ vacas, N₂O fertilizantes)</li>
            <li><strong>Transporte:</strong> 14%</li>
            <li><strong>Industria:</strong> 12%</li>
        </ul>

        <div class="visual">
            <img src="assets/img/emisiones-global-gas.webp" alt="Emisiones globales EPA">
            <p><em>Emisiones globales por gas. Fuente: EPA.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Huella Promedio por País (t CO₂e/persona/año)</h4>
        <table class="table">
            <thead>
                <tr><th>País</th><th>Huella</th></tr>
            </thead>
            <tbody>
                <tr><td>EE.UU.</td><td>15–16</td></tr>
                <tr><td>España</td><td>6–7</td></tr>
                <tr><td>China</td><td>7–8</td></tr>
                <tr><td>India</td><td>1.9</td></tr>
                <tr><td>Media global</td><td>4.7</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/emsiones-globales.png" alt="Emisiones por sector">
            <p><em>Emisiones globales por sector. Fuente: Our World in Data.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/tendencia_co2.webp" alt="Emisiones IEA">
            <p><em>Tendencia global CO₂. Fuente: IEA.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/dioxido-carbono-mauna.svg.png" alt="CO2 atmosférico NASA">
            <p><em>CO₂ atmosférico (Mauna Loa). Fuente: NASA.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. Mitigación y Secuestro</h4>
        <ul>
            <li><strong>Reducción:</strong> Eficiencia, renovables, transporte público</li>
            <li><strong>Secuestro:</strong> Reforestación, suelos, CCS</li>
            <li><strong>Neutralidad:</strong> Emisiones = Secuestro</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> 1 árbol maduro secuestra ~22 kg CO₂/año.</p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>6. SVG Animado: Ciclo de la Huella</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fábrica -->
                <rect x="50" y="200" width="100" height="150" fill="#555" rx="10"/>
                <rect x="90" y="150" width="20" height="50" fill="#333"/>
                <circle cx="100" cy="140" r="15" fill="#ff4500"/>
                <text x="100" y="380" fill="#fff" font-size="14" text-anchor="middle">Fábrica</text>

                <!-- Coche -->
                <rect x="200" y="320" width="120" height="50" fill="#3366cc" rx="10"/>
                <circle cx="230" cy="370" r="15" fill="#000"/>
                <circle cx="290" cy="370" r="15" fill="#000"/>
                <text x="260" y="400" fill="#fff" font-size="14" text-anchor="middle">Auto</text>

                <!-- Casa -->
                <rect x="400" y="250" width="150" height="120" fill="#8B4513" rx="10"/>
                <polygon points="400,250 475,200 550,250" fill="#654321"/>
                <text x="475" y="400" fill="#fff" font-size="14" text-anchor="middle">Hogar</text>

                <!-- Emisiones -->
                <path d="M100 140 Q150 100 200 140" stroke="#ff0000" stroke-width="4" fill="none">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M260 320 Q300 280 340 320" stroke="#ff0000" stroke-width="3" fill="none">
                    <animate attributeName="stroke-dashoffset" from="80" to="0" dur="2.5s" repeatCount="indefinite"/>
                </path>
                <path d="M475 250 Q475 200 475 150" stroke="#ff0000" stroke-width="5" fill="none">
                    <animate attributeName="stroke-dashoffset" from="60" to="0" dur="3s" repeatCount="indefinite"/>
                </path>

                <!-- Atmósfera -->
                <rect x="0" y="0" width="700" height="100" fill="#87CEEB" opacity="0.3"/>
                <text x="350" y="60" fill="#000" font-size="18" text-anchor="middle">CO₂ ↑</text>

                <!-- Secuestro -->
                <circle cx="600" cy="300" r="60" fill="#228B22"/>
                <text x="600" y="305" fill="white" font-size="14" text-anchor="middle">Árbol</text>
                <path d="M475 150 Q550 200 600 280" stroke="#00ff00" stroke-width="4" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="3s" repeatCount="indefinite"/>
                </path>
                <text x="540" y="190" fill="#00ff00" font-size="12" text-anchor="middle">Secuestro</text>

                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#00ff00"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="450" fill="#ffcc00" font-size="22" text-anchor="middle" font-family="Arial">Huella de Carbono: Emisión + Secuestro</text>
            </svg>
            <p><em>SVG Animado: Emisiones desde fuentes → atmósfera → secuestro natural.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define huella de carbono', 'respuesta' => 'Emisiones totales de GEI en CO₂e'],
        ['enunciado' => 'Unidad estándar', 'respuesta' => 't CO₂e'],
        ['enunciado' => 'Principal GEI', 'respuesta' => 'CO₂'],

        // === APLICADOS ===
        ['enunciado' => 'Calcula: 1 kg CH₄ (GWP=34)', 'respuesta' => '34 kg CO₂e'],
        ['enunciado' => 'Huella promedio España', 'respuesta' => '~6–7 t CO₂e/persona/año'],
        ['enunciado' => '¿Qué es Alcance 3?', 'respuesta' => 'Emisiones indirectas (cadena suministro)'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Cómo reduce la reforestación?', 'respuesta' => 'Secuestra CO₂'],
        ['enunciado' => '¿Qué emite más: vaca o auto?', 'respuesta' => 'Vaca (CH₄)'],
        ['enunciado' => '¿Qué es neutralidad de carbono?', 'respuesta' => 'Emisiones = Secuestro'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula CO₂e', 'respuesta' => '\\(\\text{CO}_2\\text{e} = m \\times \\text{GWP}\\)',],
        ['enunciado' => '¿Qué es CCS?', 'respuesta' => 'Captura y almacenamiento de carbono'],
        ['enunciado' => '¿Qué mide IPCC?', 'respuesta' => 'GWP y escenarios climáticos']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Huella de carbono mide...', 'opciones' => ['Agua', 'GEI en CO₂e', 'Basura', 'Ruido'], 'correcta' => 'GEI en CO₂e'],
        ['pregunta' => 'Principal GEI', 'opciones' => ['O₂', 'CO₂', 'N₂', 'H₂O'], 'correcta' => 'CO₂'],
        ['pregunta' => 'Unidad de huella', 'opciones' => ['kg', 't CO₂e', 'm³', 'kWh'], 'correcta' => 't CO₂e'],
        ['pregunta' => 'Alcance 1 es...', 'opciones' => ['Electricidad', 'Emisiones directas', 'Alimentos', 'Viajes'], 'correcta' => 'Emisiones directas'],
        ['pregunta' => 'GWP del CO₂', 'opciones' => ['1', '25', '298', '23500'], 'correcta' => '1'],
        ['pregunta' => 'CH₄ tiene GWP ≈', 'opciones' => ['1', '34', '100', '1000'], 'correcta' => '34'],
        ['pregunta' => 'Reducir con...', 'opciones' => ['Más aviones', 'Energía solar', 'Carbón', 'Plástico'], 'correcta' => 'Energía solar'],
        ['pregunta' => 'Secuestra CO₂', 'opciones' => ['Auto', 'Árbol', 'Fábrica', 'Avión'], 'correcta' => 'Árbol'],
        ['pregunta' => 'Huella promedio global', 'opciones' => ['1 t', '4.7 t', '10 t', '20 t'], 'correcta' => '4.7 t'],
        ['pregunta' => 'Neutralidad es...', 'opciones' => ['Cero emisiones', 'Emisiones = Secuestro', 'Solo renovables', 'Nada'], 'correcta' => 'Emisiones = Secuestro'],

        // === MEDIO (10) ===
        ['pregunta' => 'Alcance 3 incluye...', 'opciones' => ['Electricidad', 'Cadena de suministro', 'Combustión', 'Calefacción'], 'correcta' => 'Cadena de suministro'],
        ['pregunta' => 'Mayor fuente global', 'opciones' => ['Transporte', 'Energía', 'Agricultura', 'Residuos'], 'correcta' => 'Energía'],
        ['pregunta' => '1 ha de bosque secuestra ≈', 'opciones' => ['1 t', '5 t', '20 t', '100 t'], 'correcta' => '5 t'],
        ['pregunta' => 'IPCC define...', 'opciones' => ['GWP', 'PIB', 'IDH', 'GPS'], 'correcta' => 'GWP'],
        ['pregunta' => 'Huella de un vuelo transatlántico', 'opciones' => ['0.1 t', '1.2 t', '5 t', '10 t'], 'correcta' => '1.2 t'],
        ['pregunta' => 'CCS significa...', 'opciones' => ['Carbon Capture Storage', 'Clean Coal System', 'Climate Control', 'Nada'], 'correcta' => 'Carbon Capture Storage'],
        ['pregunta' => 'Vaca emite CH₄ por...', 'opciones' => ['Respiración', 'Digestión', 'Orina', 'Piel'], 'correcta' => 'Digestión'],
        ['pregunta' => 'Huella de carne vs vegetal', 'opciones' => ['Igual', 'Carne > vegetal', 'Vegetal > carne', 'Cero'], 'correcta' => 'Carne > vegetal'],
        ['pregunta' => 'Objetivo París 2050', 'opciones' => ['+2°C', 'Net Zero', '+1.5°C', 'Nada'], 'correcta' => 'Net Zero'],
        ['pregunta' => 'Huella de España ≈', 'opciones' => ['3 t', '6–7 t', '12 t', '20 t'], 'correcta' => '6–7 t'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula CO₂e', 'opciones' => ['m × GWP', 'm / GWP', 'GWP / m', 'm + GWP'], 'correcta' => 'm × GWP'],
        ['pregunta' => 'GWP SF₆ ≈', 'opciones' => ['1', '34', '298', '23500'], 'correcta' => '23500'],
        ['pregunta' => 'Mayor emisor per cápita', 'opciones' => ['China', 'EE.UU.', 'India', 'Brasil'], 'correcta' => 'EE.UU.'],
        ['pregunta' => 'Emisiones globales 2023 ≈', 'opciones' => ['10 Gt', '37 Gt', '50 Gt', '100 Gt'], 'correcta' => '37 Gt'],
        ['pregunta' => 'Presupuesto carbono +1.5°C ≈', 'opciones' => ['100 Gt', '420 Gt', '1000 Gt', '2000 Gt'], 'correcta' => '420 Gt'],
        ['pregunta' => 'Secuestro océano ≈', 'opciones' => ['1 Gt/año', '10 Gt/año', '20 Gt/año', '50 Gt/año'], 'correcta' => '10 Gt/año'],
        ['pregunta' => 'Huella de 1 kWh carbón ≈', 'opciones' => ['0.1 kg', '0.9 kg', '2 kg', '5 kg'], 'correcta' => '0.9 kg'],
        ['pregunta' => 'Huella de 1 kWh solar ≈', 'opciones' => ['0 kg', '0.05 kg', '0.5 kg', '1 kg'], 'correcta' => '0.05 kg'],
        ['pregunta' => 'Meta UE 2030', 'opciones' => ['-20%', '-55%', '-80%', 'Net Zero'], 'correcta' => '-55%'],
        ['pregunta' => 'Huella alimentaria promedio', 'opciones' => ['10%', '25%', '50%', '75%'], 'correcta' => '25%']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Cambio Climático (Causas, Impactos, Mitigación)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'cambio-climatico',
    'titulo' => 'Cambio Climático: La Mayor Amenaza a los Ecosistemas',
    'contenido' => '
        <h3>¿Qué es el Cambio Climático?</h3>
        <p>El <strong>cambio climático</strong> es la <strong>alteración sostenida</strong> de los patrones climáticos globales, <strong>principalmente antropogénica</strong>, causada por el aumento de gases de efecto invernadero (GEI) en la atmósfera.</p>
        <p><strong>CO₂ actual (2025):</strong> ~425 ppm (Mauna Loa)</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Evidencia Científica</h4>
        <table class="table">
            <thead>
                <tr><th>Indicador</th><th>Valor 2025</th><th>Preindustrial</th></tr>
            </thead>
            <tbody>
                <tr><td>Temperatura global</td><td>+1.2°C</td><td>—</td></tr>
                <tr><td>CO₂ atmosférico</td><td>425 ppm</td><td>280 ppm</td></tr>
                <tr><td>Nivel del mar</td><td>+25 cm</td><td>—</td></tr>
                <tr><td>Hielo Ártico</td><td>-13%/década</td><td>—</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/curva_keeling.png" alt="CO2 atmosférico NASA">
            <p><em>Curva de Keeling (CO₂). Fuente: NASA.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Causas Antropogénicas</h4>
        <ul>
            <li><strong>Combustibles fósiles:</strong> 75%</li>
            <li><strong>Deforestación:</strong> 12%</li>
            <li><strong>Agricultura:</strong> 12% (CH₄, N₂O)</li>
            <li><strong>Industria:</strong> 10%</li>
        </ul>

        <div class="visual">
            <img src="assets/img/forzamiento-radiativo-ipcc.png" alt="Forzamiento radiativo IPCC">
            <p><em>Forzamiento radiativo. Fuente: IPCC AR6.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Impactos en Ecosistemas</h4>
        <table class="table">
            <thead>
                <tr><th>Ecosistema</th><th>Impacto</th></tr>
            </thead>
            <tbody>
                <tr><td>Bosques</td><td>Incendios, plagas, migración especies</td></tr>
                <tr><td>Océanos</td><td>Acidificación (pH ↓0.1), blanqueo coral</td></tr>
                <tr><td>Polar</td><td>Derretimiento permafrost → CH₄</td></tr>
                <tr><td>Montañas</td><td>Glaciares desaparecen</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/impactos-multiples.png" alt="Impactos en ecosistemas">
            <p><em>Impactos múltiples. Fuente: IAN.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/efectos-ambiente.png" alt="Efectos globales">
            <p><em>Efectos en el ambiente. Fuente: ResearchGate.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/costas-presion.jpg" alt="Ecosistemas costeros">
            <p><em>Costas bajo presión. Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Tipping Points (Puntos Críticos)</h4>
        <ul>
            <li><strong>Permafrost:</strong> +1.5°C → 200 Gt CH₄</li>
            <li><strong>Amazonía:</strong> 40% deforestación → sabanización</li>
            <li><strong>Circulación AMOC:</strong> Debilitamiento → Europa fría</li>
        </ul>

        <div class="visual">
            <img src="assets/img/puntos-no-retorno.png" alt="Tipping points">
            <p><em>Puntos de no retorno. Fuente: Nature Climate Change.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. Mitigación y Adaptación</h4>
        <ul>
            <li><strong>Acuerdo de París:</strong> <1.5°C</li>
            <li><strong>Net Zero 2050</strong></li>
            <li><strong>Reforestación, CCS, renovables</strong></li>
        </ul>

        <hr style="border:1px dashed #00ff00;">

        <h4>6. SVG Animado: Efecto Invernadero</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Sol -->
                <circle cx="100" cy="100" r="50" fill="#FFD700" stroke="#FF8C00" stroke-width="5"/>
                <text x="100" y="170" fill="#FF8C00" font-size="16" text-anchor="middle">Sol</text>

                <!-- Rayos entrantes -->
                <path d="M150 100 L300 200" stroke="#FFFF00" stroke-width="4" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M130 120 L290 220" stroke="#FFFF00" stroke-width="4" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2.2s" repeatCount="indefinite"/>
                </path>

                <!-- Tierra -->
                <circle cx="350" cy="350" r="80" fill="#228B22" stroke="#006400" stroke-width="3"/>
                <text x="350" y="355" fill="white" font-size="16" text-anchor="middle">Tierra</text>

                <!-- Rayos reflejados -->
                <path d="M300 250 L250 180" stroke="#87CEEB" stroke-width="3" marker-end="url(#arrow-blue)">
                    <animate attributeName="stroke-dashoffset" from="80" to="0" dur="2.5s" repeatCount="indefinite"/>
                </path>

                <!-- GEI atrapando calor -->
                <ellipse cx="350" cy="220" rx="150" ry="60" fill="#FF450030" stroke="#FF4500" stroke-width="2" stroke-dasharray="5,5"/>
                <text x="350" y="220" fill="#FF0000" font-size="14" text-anchor="middle">GEI ↑</text>

                <!-- Calor atrapado -->
                <path d="M320 300 Q350 280 380 300" stroke="#FF0000" stroke-width="4" fill="none">
                    <animate attributeName="stroke-dashoffset" from="60" to="0" dur="3s" repeatCount="indefinite"/>
                </path>
                <text x="350" y="320" fill="#FF0000" font-size="14" text-anchor="middle">+1.2°C</text>

                <!-- Flechas -->
                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#FFFF00"/>
                    </marker>
                    <marker id="arrow-blue" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#87CEEB"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="50" fill="#ffcc00" font-size="20" text-anchor="middle" font-family="Arial">Efecto Invernadero Reforzado</text>
            </svg>
            <p><em>SVG Animado: Radiación solar → reflexión → atrapada por GEI.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Causa principal del cambio climático', 'respuesta' => 'Emisiones antropogénicas de GEI'],
        ['enunciado' => 'CO₂ actual (2025)', 'respuesta' => '~425 ppm'],
        ['enunciado' => 'Aumento temperatura global', 'respuesta' => '+1.2°C'],

        // === APLICADOS ===
        ['enunciado' => '¿Qué pasa si se derrite permafrost?', 'respuesta' => 'Liberación masiva de CH₄'],
        ['enunciado' => '¿Por qué se blanquean corales?', 'respuesta' => 'Estrés térmico'],
        ['enunciado' => '¿Qué es AMOC?', 'respuesta' => 'Circulación termohalina Atlántica'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Qué ecosistema pierde más biodiversidad?', 'respuesta' => 'Arrecifes de coral'],
        ['enunciado' => '¿Qué es migración asistida?', 'respuesta' => 'Trasladar especies a climas adecuados'],
        ['enunciado' => '¿Qué es adaptación basada en ecosistemas?', 'respuesta' => 'Usar naturaleza para mitigar'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula forzamiento radiativo', 'respuesta' => '\\( \\Delta F = 5.35 \\ln(\\frac{C}{C_0}) \\)'],
        ['enunciado' => 'Presupuesto carbono +1.5°C', 'respuesta' => '~420 Gt CO₂'],
        ['enunciado' => '¿Qué es IPCC?', 'respuesta' => 'Panel Interg 6to Informe']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Cambio climático causado por...', 'opciones' => ['Solo natural', 'Principalmente humano', 'Animales', 'Sol'], 'correcta' => 'Principalmente humano'],
        ['pregunta' => 'CO₂ actual ≈', 'opciones' => ['280 ppm', '425 ppm', '500 ppm', '1000 ppm'], 'correcta' => '425 ppm'],
        ['pregunta' => 'Aumento temperatura 2025', 'opciones' => ['+0.5°C', '+1.2°C', '+2°C', '+3°C'], 'correcta' => '+1.2°C'],
        ['pregunta' => 'Principal GEI', 'opciones' => ['O₂', 'CO₂', 'N₂', 'CH₄'], 'correcta' => 'CO₂'],
        ['pregunta' => 'Efecto en océanos', 'opciones' => ['Más fríos', 'Acidificación', 'Menos sal', 'Nada'], 'correcta' => 'Acidificación'],
        ['pregunta' => 'Blanqueo de coral por...', 'opciones' => ['Frío', 'Calor', 'Luz', 'Oscuridad'], 'correcta' => 'Calor'],
        ['pregunta' => 'Acuerdo de París busca...', 'opciones' => ['+2°C', '<2°C, ideal 1.5°C', '+1.5°C', 'Nada'], 'correcta' => '<2°C, ideal 1.5°C'],
        ['pregunta' => 'IPCC es...', 'opciones' => ['ONU clima', 'Panel científico', 'ONG', 'Empresa'], 'correcta' => 'Panel científico'],
        ['pregunta' => 'Permafrost libera...', 'opciones' => ['CO₂', 'CH₄', 'O₂', 'N₂'], 'correcta' => 'CH₄'],
        ['pregunta' => 'Nivel del mar subió...', 'opciones' => ['10 cm', '25 cm', '50 cm', '1 m'], 'correcta' => '25 cm'],

        // === MEDIO (10) ===
        ['pregunta' => 'Tipping point Amazonía:', 'opciones' => ['20% deforestación', '40%', '60%', '80%'], 'correcta' => '40%'],
        ['pregunta' => 'AMOC es...', 'opciones' => ['Corriente Pacífico', 'Circulación Atlántica', 'Viento', 'Lluvia'], 'correcta' => 'Circulación Atlántica'],
        ['pregunta' => 'Presupuesto carbono +1.5°C ≈', 'opciones' => ['100 Gt', '420 Gt', '1000 Gt', '2000 Gt'], 'correcta' => '420 Gt'],
        ['pregunta' => 'Emisiones globales 2023 ≈', 'opciones' => ['20 Gt', '37 Gt', '50 Gt', '100 Gt'], 'correcta' => '37 Gt'],
        ['pregunta' => 'Mitigación incluye...', 'opciones' => ['CCS', 'Más carbón', 'Deforestación', 'Aviones'], 'correcta' => 'CCS'],
        ['pregunta' => 'Adaptación es...', 'opciones' => ['Reducir emisiones', 'Vivir con cambio', 'Ignorar', 'Negar'], 'correcta' => 'Vivir con cambio'],
        ['pregunta' => 'Ecosistema más vulnerable:', 'opciones' => ['Desierto', 'Arrecife coral', 'Pradera', 'Tundra'], 'correcta' => 'Arrecife coral'],
        ['pregunta' => 'Forzamiento radiativo CO₂ duplicado:', 'opciones' => ['1 W/m²', '3.7 W/m²', '5.35 W/m²', '10 W/m²'], 'correcta' => '3.7 W/m²'],
        ['pregunta' => 'Meta Net Zero:', 'opciones' => ['2030', '2050', '2100', 'Nunca'], 'correcta' => '2050'],
        ['pregunta' => 'Hielo Ártico pierde...', 'opciones' => ['-5%/década', '-13%/década', '-20%/década', '+10%'], 'correcta' => '-13%/década'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula forzamiento CO₂:', 'opciones' => ['ΔF = 5.35 ln(C/C₀)', 'ΔF = C²', 'ΔF = 10 × C', 'ΔF = 1/C'], 'correcta' => 'ΔF = 5.35 ln(C/C₀)'],
        ['pregunta' => 'Sensibilidad climática ≈', 'opciones' => ['1°C', '3°C por duplicación CO₂', '5°C', '10°C'], 'correcta' => '3°C por duplicación CO₂'],
        ['pregunta' => 'Escenario RCP8.5 es...', 'opciones' => ['Bajo', 'Alto (sin acción)', 'Medio', 'Net Zero'], 'correcta' => 'Alto (sin acción)'],
        ['pregunta' => 'Escenario SSP1-1.9 logra...', 'opciones' => ['+1.5°C', '+2°C', '+3°C', '+4°C'], 'correcta' => '+1.5°C'],
        ['pregunta' => 'Feedback albedo Ártico:', 'opciones' => ['Negativo', 'Positivo', 'Neutra', 'Cero'], 'correcta' => 'Positivo'],
        ['pregunta' => 'Acidificación reduce...', 'opciones' => ['pH océano', 'Salinidad', 'Oxígeno', 'Luz'], 'correcta' => 'pH océano'],
        ['pregunta' => 'Corales mueren a...', 'opciones' => ['25°C', '30°C', '35°C', '40°C'], 'correcta' => '30°C'],
        ['pregunta' => 'Meta UE 2030:', 'opciones' => ['-40%', '-55%', '-80%', 'Net Zero'], 'correcta' => '-55%'],
        ['pregunta' => 'CH₄ liberado permafrost ≈', 'opciones' => ['10 Gt', '200 Gt', '1000 Gt', '1 Gt'], 'correcta' => '200 Gt'],
        ['pregunta' => 'IPCC AR6 (2021) dice...', 'opciones' => ['Cambio natural', 'Humano inequívoco', 'No hay cambio', 'Ciclo normal'], 'correcta' => 'Humano inequívoco']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Variabilidad Climática (ENSO, NAO, PDO, Impactos)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'variabilidad-climatica',
    'titulo' => 'Variabilidad Climática: El Ritmo Natural del Planeta',
    'contenido' => '
        <h3>¿Qué es la Variabilidad Climática?</h3>
        <p>La <strong>variabilidad climática</strong> son las <strong>fluctuaciones naturales</strong> del clima en escalas de <strong>meses a décadas</strong>, distintas del <strong>cambio climático antropogénico</strong> (siglos).</p>
        <p><strong>Escalas:</strong> Interanual (ENSO), decadal (PDO), multidecadal (AMO).</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Principales Modos de Variabilidad</h4>
        <table class="table">
            <thead>
                <tr><th>Modo</th><th>Índice</th><th>Período</th><th>Efecto</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>ENSO</strong> (El Niño/La Niña)</td><td>ONI</td><td>2–7 años</td><td>Sequías/inundaciones</td></tr>
                <tr><td><strong>NAO</strong> (Oscilación N. Atlántico)</td><td>NAOI</td><td>Invernal</td><td>Europa húmeda/fría</td></tr>
                <tr><td><strong>PDO</strong> (Oscilación Década Pacífico)</td><td>PDO Index</td><td>20–30 años</td><td>Pacífico N. pesquerías</td></tr>
                <tr><td><strong>AMO</strong> (Oscilación Multidecadal Atlántico)</td><td>AMO Index</td><td>60–80 años</td><td>Huracanes</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>El Niño 2023–2024</strong> → sequías en Amazonía, inundaciones en California.</p>
        </div>

        <div class="visual">
            <img src="assets/img/variabilidad-tendencia.avif" alt="Variabilidad vs cambio">
            <p><em>Variabilidad sobre tendencia. Fuente: UCAR.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. ENSO: El Motor del Clima Global</h4>
        <ul>
            <li><strong>El Niño:</strong> Calentamiento Pacífico E. → debilitamiento vientos alisios</li>
            <li><strong>La Niña:</strong> Enfriamiento → vientos fuertes</li>
            <li><strong>ONI:</strong> Anomalía TSM > ±0.5°C por 3 meses</li>
        </ul>

        <div class="visual">
            <img src="assets/img/inidice_oni.png" alt="ONI NOAA 2025">
            <p><em>Índice ONI actualizado. Fuente: NOAA CPC.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Impactos en Ecosistemas</h4>
        <table class="table">
            <thead>
                <tr><th>Fenómeno</th><th>Ecosistema</th><th>Impacto</th></tr>
            </thead>
            <tbody>
                <tr><td>El Niño</td><td>Amazonía</td><td>Sequías → incendios</td></tr>
                <tr><td>La Niña</td><td>Australia</td><td>Inundaciones → plagas</td></tr>
                <tr><td>NAO+</td><td>Europa N.</td><td>Inviernos suaves</td></tr>
                <tr><td>PDO+</td><td>Alaska</td><td>Menos salmón</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/variabilidad-extremos-cambio.png" alt="Gráfico conceptual">
            <p><em>Variabilidad, extremos y cambio. Fuente: ResearchGate.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/superposicion-escalas.png" alt="Relación variabilidad-cambio">
            <p><em>Superposición de escalas. Fuente: ResearchGate.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/pronostico-ENSO.png" alt="Pronóstico ENSO 2025">
            <p><em>Pronóstico ENSO. Fuente: NOAA Climate.gov.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Diferencia con Cambio Climático</h4>
        <table class="table">
            <thead>
                <tr><th>Característica</th><th>Variabilidad</th><th>Cambio Climático</th></tr>
            </thead>
            <tbody>
                <tr><td>Escala temporal</td><td>Años-décadas</td><td>Siglos</td></tr>
                <tr><td>Causa</td><td>Natural (océanos, Sol)</td><td>Antropogénica (GEI)</td></tr>
                <tr><td>Tendencia</td><td>Oscila alrededor media</td><td>Desplazamiento permanente</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: Ciclo ENSO</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Océano Pacífico -->
                <rect x="50" y="200" width="600" height="200" fill="#1E90FF" rx="20"/>
                <text x="350" y="300" fill="white" font-size="18" text-anchor="middle">Pacífico Ecuatorial</text>

                <!-- El Niño -->
                <rect x="100" y="220" width="200" height="160" fill="#FF4500" opacity="0.6"/>
                <text x="200" y="260" fill="white" font-size="16" text-anchor="middle">El Niño</text>
                <path d="M300 300 Q350 250 400 300" stroke="#FF0000" stroke-width="5" fill="none">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>

                <!-- La Niña -->
                <rect x="400" y="220" width="200" height="160" fill="#4169E1" opacity="0.6"/>
                <text x="500" y="260" fill="white" font-size="16" text-anchor="middle">La Niña</text>
                <path d="M300 300 Q350 350 400 300" stroke="#0000FF" stroke-width="5" fill="none">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2.5s" repeatCount="indefinite"/>
                </path>

                <!-- Vientos alisios -->
                <path d="M150 250 L250 250" stroke="#FFD700" stroke-width="4" marker-end="url(#arrow)">
                    <animate attributeName="opacity" values="1;0.3;1" dur="3s" repeatCount="indefinite"/>
                </path>
                <path d="M450 250 L550 250" stroke="#FFD700" stroke-width="4" marker-end="url(#arrow)">
                    <animate attributeName="opacity" values="0.3;1;0.3" dur="3s" repeatCount="indefinite"/>
                </path>

                <!-- Efectos globales -->
                <text x="100" y="150" fill="#FF0000" font-size="12">Sequías</text>
                <text x="600" y="150" fill="#0000FF" font-size="12">Inundaciones</text>

                <!-- Flecha -->
                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#FFD700"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="50" fill="#ffcc00" font-size="22" text-anchor="middle" font-family="Arial">Ciclo ENSO: El Niño ↔ La Niña</text>
            </svg>
            <p><em>SVG Animado: Oscilación de vientos y temperatura superficial del mar.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define variabilidad climática', 'respuesta' => 'Fluctuaciones naturales en escalas cortas'],
        ['enunciado' => 'Principal modo interanual', 'respuesta' => 'ENSO'],
        ['enunciado' => 'Diferencia con cambio climático', 'respuesta' => 'Natural vs antropogénico, corto vs largo plazo'],

        // === APLICADOS ===
        ['enunciado' => '¿Qué mide ONI?', 'respuesta' => 'Anomalía TSM Pacífico E.'],
        ['enunciado' => 'El Niño 2023–2024 causó...', 'respuesta' => 'Sequías en Amazonía'],
        ['enunciado' => 'NAO+ en invierno significa...', 'respuesta' => 'Europa más cálida y húmeda'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Cómo afecta PDO al salmón?', 'respuesta' => 'Altera productividad plancton'],
        ['enunciado' => '¿Qué es teleconexión?', 'respuesta' => 'Influencia climática a distancia'],
        ['enunciado' => '¿Qué pronostica IRI?', 'respuesta' => 'Probabilidad ENSO'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula ONI', 'respuesta' => '\\( \\text{ONI} = \\Delta \\text{TSM}_{3.4} \\) (3 meses)'],
        ['enunciado' => 'Período quasi-bienal (QBO)', 'respuesta' => '~28 meses'],
        ['enunciado' => 'Índice SOI mide...', 'respuesta' => 'Diferencia presión Tahití-Darwin']
    ],
    'quiz' => [
    // === FÁCIL (10) ===
    ['pregunta' => 'Variabilidad climática es...', 'opciones' => ['Largo plazo', 'Corto/medio plazo', 'Constante', 'Humana'], 'correcta' => 'Corto/medio plazo'],
    ['pregunta' => 'ENSO significa...', 'opciones' => ['El Niño Southern Oscillation', 'Eastern North Sea', 'Energy North South', 'Nada'], 'correcta' => 'El Niño Southern Oscillation'],
    ['pregunta' => 'El Niño causa...', 'opciones' => ['Enfriamiento global', 'Calentamiento Pacífico E.', 'Frío en Perú', 'Lluvia en Australia'], 'correcta' => 'Calentamiento Pacífico E.'],
    ['pregunta' => 'La Niña es...', 'opciones' => ['Calentamiento', 'Enfriamiento Pacífico', 'Neutral', 'Solar'], 'correcta' => 'Enfriamiento Pacífico'],
    ['pregunta' => 'NAO afecta...', 'opciones' => ['Pacífico', 'Atlántico Norte', 'Ártico', 'Antártida'], 'correcta' => 'Atlántico Norte'],
    ['pregunta' => 'PDO tiene ciclo de...', 'opciones' => ['2–7 años', '20–30 años', '60–80 años', '100 años'], 'correcta' => '20–30 años'],
    ['pregunta' => 'El Niño trae sequías a...', 'opciones' => ['Perú', 'Australia', 'California', 'Europa'], 'correcta' => 'Australia'],
    ['pregunta' => 'SOI mide...', 'opciones' => ['Temperatura', 'Presión atmosférica', 'Humedad', 'Viento'], 'correcta' => 'Presión atmosférica'],
    ['pregunta' => 'Variabilidad es...', 'opciones' => ['Antropogénica', 'Natural', 'Ambas', 'Ninguna'], 'correcta' => 'Natural'],
    ['pregunta' => 'Cambio climático es...', 'opciones' => ['Natural', 'Principalmente humano', 'Corto plazo', 'Oscilante'], 'correcta' => 'Principalmente humano'],

    // === MEDIO (10) ===
    ['pregunta' => 'ONI > +0.5°C indica...', 'opciones' => ['La Niña', 'El Niño', 'Neutral', 'PDO'], 'correcta' => 'El Niño'],
    ['pregunta' => 'NAO+ en invierno → Europa...', 'opciones' => ['Fría y seca', 'Cálida y húmeda', 'Igual', 'Tormentas'], 'correcta' => 'Cálida y húmeda'],
    ['pregunta' => 'PDO+ afecta...', 'opciones' => ['Salmón Alaska', 'Huracanes Caribe', 'Lluvia India', 'Niebla Londres'], 'correcta' => 'Salmón Alaska'],
    ['pregunta' => 'Teleconexión es...', 'opciones' => ['Conexión local', 'Influencia lejana', 'Ciclo solar', 'Viento'], 'correcta' => 'Influencia lejana'],
    ['pregunta' => 'IRI pronostica...', 'opciones' => ['Clima local', 'ENSO global', 'Volcanes', 'Terremotos'], 'correcta' => 'ENSO global'],
    ['pregunta' => 'QBO afecta...', 'opciones' => ['Estratosfera', 'Troposfera', 'Océano', 'Suelo'], 'correcta' => 'Estratosfera'],
    ['pregunta' => 'AMO+ aumenta...', 'opciones' => ['Huracanes Atlántico', 'Tormentas Pacífico', 'Sequías Europa', 'Frío Ártico'], 'correcta' => 'Huracanes Atlántico'],
    ['pregunta' => 'ENSO 2023–2024 fue...', 'opciones' => ['La Niña', 'El Niño fuerte', 'Neutral', 'PDO'], 'correcta' => 'El Niño fuerte'],
    ['pregunta' => 'Variabilidad sobre cambio es como...', 'opciones' => ['Tendencia', 'Ruido sobre señal', 'Señal sobre ruido', 'Ciclo'], 'correcta' => 'Ruido sobre señal'],
    ['pregunta' => 'SOI negativo indica...', 'opciones' => ['La Niña', 'El Niño', 'Neutral', 'NAO'], 'correcta' => 'El Niño'],

    // === DIFÍCIL (10) ===
    ['pregunta' => 'Fórmula ONI', 'opciones' => ['ΔTSM > ±0.5°C × 3 meses', 'ΔTSM > ±1°C', 'Presión', 'Viento'], 'correcta' => 'ΔTSM > ±0.5°C × 3 meses'],
    ['pregunta' => 'Región Niño 3.4 es...', 'opciones' => ['5°N-5°S, 120°-170°W', 'Ecuador', 'Perú', 'Australia'], 'correcta' => '5°N-5°S, 120°-170°W'],
    ['pregunta' => 'Ciclo PDO ≈', 'opciones' => ['7 años', '25 años', '60 años', '100 años'], 'correcta' => '25 años'],
    ['pregunta' => 'ENSO modula monzón...', 'opciones' => ['Africano', 'Indio', 'Australiano', 'Europeo'], 'correcta' => 'Indio'],
    ['pregunta' => 'NAO correlaciona con...', 'opciones' => ['Azores y Islandia', 'Tahití y Darwin', 'Alaska y Japón', 'Brasil y África'], 'correcta' => 'Azores y Islandia'],
    ['pregunta' => 'MJO es...', 'opciones' => ['Oscilación Madden-Julian', 'Monzón', 'Jet Stream', 'Corriente'], 'correcta' => 'Oscilación Madden-Julian'],
    ['pregunta' => 'ENSO afecta cosechas de...', 'opciones' => ['Trigo Australia', 'Arroz Europa', 'Maíz África', 'Café Brasil'], 'correcta' => 'Trigo Australia'],
    ['pregunta' => 'Pronóstico ENSO usa modelos...', 'opciones' => ['Estadísticos', 'Dinámicos', 'Ambos', 'Ninguno'], 'correcta' => 'Ambos'],
    ['pregunta' => 'ENSO 1997–1998 fue...', 'opciones' => ['El más fuerte registrado', 'La Niña', 'Neutral', 'PDO'], 'correcta' => 'El más fuerte registrado'],
    ['pregunta' => 'Variabilidad decadal explica...', 'opciones' => ['Pausa 2000–2013', 'Calentamiento total', 'CO₂', 'Sol'], 'correcta' => 'Pausa 2000–2013']
]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Huella Hídrica (Azul, Verde, Gris, Cálculo, Mitigación)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'huella-hidrica',
    'titulo' => 'Huella Hídrica: El Agua Oculta en Nuestros Productos',
    'contenido' => '
        <h3>¿Qué es la Huella Hídrica?</h3>
        <p>La <strong>huella hídrica</strong> mide el <strong>volumen total de agua dulce</strong> usada para producir bienes y servicios, expresada en <strong>litros</strong> o <strong>m³</strong>. Incluye tres componentes:</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Tipos de Huella Hídrica</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Color</th><th>Fuente</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Azul</strong></td><td>Azul</td><td>Superficial/subterránea</td><td>Riego, industria</td></tr>
                <tr><td><strong>Verde</strong></td><td>Verde</td><td>Lluvia (evapotranspirada)</td><td>Agricultura de secano</td></tr>
                <tr><td><strong>Gris</strong></td><td>Gris</td><td>Contaminada (dilución)</td><td>Fertilizantes, químicos</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> 1 kg carne bovina → ~15,400 L (94% verde, 4% azul, 2% gris)</p>
        </div>

        <div class="visual">
            <img src="assets/img/huella-hidrica-global.jpg" alt="Huella hídrica global por sector">
            <p><em>Huella hídrica global por sector. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Cálculo de la Huella Hídrica</h4>
        <p>\\[ \\text{HH}_{\\text{total}} = \\text{HH}_{\\text{azul}} + \\text{HH}_{\\text{verde}} + \\text{HH}_{\\text{gris}} \\]</p>
        <p><strong>HH gris:</strong> \\( \\text{HH}_{\\text{gris}} = \\frac{\\text{Carga contaminante}}{\\text{Concentración máxima permitida}} \\)</p>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> 1 kg N fertilizante → ~10,000 L gris</p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Huella Hídrica por Producto (litros)</h4>
        <table class="table">
            <thead>
                <tr><th>Producto</th><th>HH Total</th><th>% Verde</th></tr>
            </thead>
            <tbody>
                <tr><td>1 kg carne bovina</td><td>15,400</td><td>94%</td></tr>
                <tr><td>1 kg pollo</td><td>4,300</td><td>80%</td></tr>
                <tr><td>1 kg arroz</td><td>2,500</td><td>70%</td></tr>
                <tr><td>1 taza café (125 ml)</td><td>140</td><td>98%</td></tr>
                <tr><td>1 camiseta algodón</td><td>2,700</td><td>99%</td></tr>
                <tr><td>1 kg azúcar</td><td>1,500</td><td>90%</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/huella-productos.jpg" alt="Huella por producto">
            <p><em>Huella hídrica de productos comunes. Fuente: Water Footprint Network.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/huella_hidrica_global.png" alt="Huella hídrica global">
            <p><em>Distribución global. Fuente: MDPI.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Huella Hídrica por País (m³/persona/año)</h4>
        <table class="table">
            <thead>
                <tr><th>País</th><th>HH Total</th><th>% Agricultura</th></tr>
            </thead>
            <tbody>
                <tr><td>EE.UU.</td><td>2,842</td><td>80%</td></tr>
                <tr><td>China</td><td>1,071</td><td>90%</td></tr>
                <tr><td>India</td><td>1,089</td><td>92%</td></tr>
                <tr><td>España</td><td>2,325</td><td>75%</td></tr>
                <tr><td>Media global</td><td>1,385</td><td>92%</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/mapa-hidrica.jpg" alt="Mapa global huella hídrica">
            <p><em>Mapa global. Fuente: Water Footprint Network.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/estres-hidrico.jpg" alt="Estrés hídrico">
            <p><em>Estrés hídrico vs huella. Fuente: Science of the Total Environment.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. Impactos en Ecosistemas</h4>
        <ul>
            <li><strong>Estrés hídrico:</strong> Sobreexplotación acuíferos</li>
            <li><strong>Eutrofización:</strong> Exceso N/P → algas</li>
            <li><strong>Pérdida biodiversidad acuática</strong></li>
        </ul>

        <hr style="border:1px dashed #00ff00;">

        <h4>6. SVG Animado: Desglose de Huella Hídrica</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#87CEEB" opacity="0.1"/>

                <!-- Gotas animadas -->
                <circle cx="100" cy="100" r="15" fill="#1E90FF">
                    <animate attributeName="cy" values="100;80;100" dur="2s" repeatCount="indefinite"/>
                </circle>
                <circle cx="200" cy="120" r="12" fill="#228B22">
                    <animate attributeName="cy" values="120;100;120" dur="2.2s" repeatCount="indefinite"/>
                </circle>
                <circle cx="300" cy="110" r="10" fill="#808080">
                    <animate attributeName="cy" values="110;90;110" dur="2.5s" repeatCount="indefinite"/>
                </circle>

                <!-- Barras -->
                <rect x="400" y="300" width="60" height="150" fill="#1E90FF" rx="10"/>
                <text x="430" y="290" fill="#000" font-size="14" text-anchor="middle">Azul</text>
                <text x="430" y="320" fill="white" font-size="16" text-anchor="middle">10%</text>

                <rect x="480" y="200" width="60" height="250" fill="#228B22" rx="10"/>
                <text x="510" y="190" fill="#000" font-size="14" text-anchor="middle">Verde</text>
                <text x="510" y="230" fill="white" font-size="16" text-anchor="middle">85%</text>

                <rect x="560" y="400" width="60" height="50" fill="#808080" rx="10"/>
                <text x="590" y="390" fill="#000" font-size="14" text-anchor="middle">Gris</text>
                <text x="590" y="420" fill="white" font-size="12" text-anchor="middle">5%</text>

                <!-- Producto -->
                <rect x="150" y="350" width="120" height="80" fill="#8B4513" rx="15"/>
                <text x="210" y="390" fill="white" font-size="16" text-anchor="middle">Carne</text>
                <text x="210" y="410" fill="white" font-size="12" text-anchor="middle">15,400 L</text>

                <!-- Flujo -->
                <path d="M270 390 Q350 350 400 320" stroke="#1E90FF" stroke-width="8" fill="none" marker-end="url(#arrow-blue)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M270 390 Q350 280 480 230" stroke="#228B22" stroke-width="12" fill="none" marker-end="url(#arrow-green)">
                    <animate attributeName="stroke-dashoffset" from="120" to="0" dur="2.5s" repeatCount="indefinite"/>
                </path>
                <path d="M270 390 Q350 420 560 415" stroke="#808080" stroke-width="6" fill="none" marker-end="url(#arrow-gray)">
                    <animate attributeName="stroke-dashoffset" from="80" to="0" dur="3s" repeatCount="indefinite"/>
                </path>

                <!-- Flechas -->
                <defs>
                    <marker id="arrow-blue" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#1E90FF"/>
                    </marker>
                    <marker id="arrow-green" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#228B22"/>
                    </marker>
                    <marker id="arrow-gray" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#808080"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="50" fill="#ffcc00" font-size="22" text-anchor="middle" font-family="Arial">Huella Hídrica: Carne Bovina</text>
            </svg>
            <p><em>SVG Animado: Desglose azul, verde y gris en 1 kg de carne.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define huella hídrica', 'respuesta' => 'Volumen total de agua dulce usada'],
        ['enunciado' => 'Tipos de huella', 'respuesta' => 'Azul, verde, gris'],
        ['enunciado' => 'Unidad estándar', 'respuesta' => 'litros o m³'],

        // === APLICADOS ===
        ['enunciado' => 'HH de 1 kg carne bovina', 'respuesta' => '~15,400 L'],
        ['enunciado' => '¿Qué es agua gris?', 'respuesta' => 'Agua contaminada que requiere dilución'],
        ['enunciado' => 'Producto con mayor HH', 'respuesta' => 'Carne bovina'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Cómo reduce la dieta vegana la HH?', 'respuesta' => 'Elimina carne → ↓ 50–70%'],
        ['enunciado' => '¿Qué causa estrés hídrico?', 'respuesta' => 'HH alta en zonas áridas'],
        ['enunciado' => '¿Qué es huella hídrica virtual?', 'respuesta' => 'Agua usada en cadena de suministro'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula HH gris', 'respuesta' => '\\(\\text{HH}_{\\text{gris}} = \\frac{\\text{Carga}}{\\text{C}_{\\text{máx}}}\\)'],
        ['enunciado' => 'HH global promedio', 'respuesta' => '~1,385 m³/persona/año'],
        ['enunciado' => '¿Qué mide WFN?', 'respuesta' => 'Water Footprint Network']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Huella hídrica mide...', 'opciones' => ['Carbono', 'Uso de agua dulce', 'Basura', 'Energía'], 'correcta' => 'Uso de agua dulce'],
        ['pregunta' => 'Agua azul es...', 'opciones' => ['Lluvia', 'Ríos y acuíferos', 'Contaminada', 'Evaporada'], 'correcta' => 'Ríos y acuíferos'],
        ['pregunta' => 'Agua verde es...', 'opciones' => ['Riego', 'Lluvia en cultivos', 'Residuos', 'Industrial'], 'correcta' => 'Lluvia en cultivos'],
        ['pregunta' => 'Agua gris es...', 'opciones' => ['Limpia', 'Contaminada', 'Subterránea', 'Superficial'], 'correcta' => 'Contaminada'],
        ['pregunta' => 'Sector con mayor HH', 'opciones' => ['Industria', 'Agricultura', 'Doméstico', 'Transporte'], 'correcta' => 'Agricultura'],
        ['pregunta' => 'HH de 1 kg carne ≈', 'opciones' => ['1,000 L', '15,400 L', '100 L', '50,000 L'], 'correcta' => '15,400 L'],
        ['pregunta' => 'HH de 1 taza café ≈', 'opciones' => ['10 L', '140 L', '1,000 L', '5,000 L'], 'correcta' => '140 L'],
        ['pregunta' => 'Unidad HH', 'opciones' => ['kg', 'litros', 'kWh', 'm²'], 'correcta' => 'litros'],
        ['pregunta' => 'HH virtual es...', 'opciones' => ['Directa', 'En productos importados', 'Local', 'Nada'], 'correcta' => 'En productos importados'],
        ['pregunta' => 'Reducir HH con...', 'opciones' => ['Más carne', 'Dieta vegana', 'Más riego', 'Plástico'], 'correcta' => 'Dieta vegana'],

        // === MEDIO (10) ===
        ['pregunta' => 'HH España ≈', 'opciones' => ['1,000 m³', '2,325 m³', '5,000 m³', '500 m³'], 'correcta' => '2,325 m³'],
        ['pregunta' => '% HH global en agricultura', 'opciones' => ['50%', '92%', '20%', '70%'], 'correcta' => '92%'],
        ['pregunta' => 'HH de camiseta algodón ≈', 'opciones' => ['500 L', '2,700 L', '10,000 L', '100 L'], 'correcta' => '2,700 L'],
        ['pregunta' => 'HH gris por fertilizante N ≈', 'opciones' => ['1,000 L/kg', '10,000 L/kg', '100 L/kg', '50,000 L/kg'], 'correcta' => '10,000 L/kg'],
        ['pregunta' => 'País con mayor HH per cápita', 'opciones' => ['India', 'EE.UU.', 'China', 'Brasil'], 'correcta' => 'EE.UU.'],
        ['pregunta' => 'WFN es...', 'opciones' => ['Water Footprint Network', 'World Food Network', 'Water Force', 'Nada'], 'correcta' => 'Water Footprint Network'],
        ['pregunta' => 'Estrés hídrico ocurre cuando...', 'opciones' => ['HH baja', 'HH > disponibilidad', 'Lluvia alta', 'Nada'], 'correcta' => 'HH > disponibilidad'],
        ['pregunta' => 'HH de arroz vs trigo', 'opciones' => ['Arroz > trigo', 'Igual', 'Trigo > arroz', 'Cero'], 'correcta' => 'Arroz > trigo'],
        ['pregunta' => 'HH de café es alta por...', 'opciones' => ['Riego', 'Procesado', 'Cultivo en secano', 'Transporte'], 'correcta' => 'Cultivo en secano'],
        ['pregunta' => 'HH azul alta en...', 'opciones' => ['Secano', 'Riego intensivo', 'Lluvia', 'Residuos'], 'correcta' => 'Riego intensivo'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula HH gris', 'opciones' => ['Carga / C_máx', 'Carga × C_máx', 'Carga + C_máx', 'C_máx / Carga'], 'correcta' => 'Carga / C_máx'],
        ['pregunta' => 'HH global total ≈', 'opciones' => ['1 Tm³', '9.1 Tm³', '100 Tm³', '0.1 Tm³'], 'correcta' => '9.1 Tm³'],
        ['pregunta' => 'HH de 1 kg azúcar ≈', 'opciones' => ['500 L', '1,500 L', '10,000 L', '50,000 L'], 'correcta' => '1,500 L'],
        ['pregunta' => 'HH de 1 L leche ≈', 'opciones' => ['100 L', '1,000 L', '10,000 L', '50 L'], 'correcta' => '1,000 L'],
        ['pregunta' => 'HH de 1 kg pollo vs bovina', 'opciones' => ['Pollo > bovina', 'Pollo < bovina', 'Igual', 'Cero'], 'correcta' => 'Pollo < bovina'],
        ['pregunta' => 'HH de algodón por...', 'opciones' => ['Riego', 'Lluvia', 'Contaminación', 'Todo'], 'correcta' => 'Todo'],
        ['pregunta' => 'HH de España alta por...', 'opciones' => ['Exportación frutas', 'Industria', 'Turismo', 'Nada'], 'correcta' => 'Exportación frutas'],
        ['pregunta' => 'HH gris por P ≈', 'opciones' => ['100,000 L/kg', '1,000 L/kg', '10,000 L/kg', '50,000 L/kg'], 'correcta' => '100,000 L/kg'],
        ['pregunta' => 'HH sostenible cuando...', 'opciones' => ['HH < disponibilidad', 'HH = 0', 'HH alta', 'Nada'], 'correcta' => 'HH < disponibilidad'],
        ['pregunta' => 'Meta reducción HH UE', 'opciones' => ['-20% 2030', '-50% 2050', '-10% 2025', 'Nada'], 'correcta' => '-20% 2030']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Huella Ecológica (Biocapacidad, Overshoot, Cálculo, Mitigación)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'huella-ecologica',
    'titulo' => 'Huella Ecológica: ¿Cuántos Planetas Necesitamos?',
    'contenido' => '
        <h3>¿Qué es la Huella Ecológica?</h3>
        <p>La <strong>huella ecológica</strong> mide la <strong>área biológicamente productiva</strong> (en <strong>hectáreas globales, gha</strong>) necesaria para:</p>
        <ul>
            <li>Producir los recursos que consumimos</li>
            <li>Absorber los residuos (CO₂, basura)</li>
        </ul>
        <p><strong>Compara demanda humana vs biocapacidad de la Tierra.</strong></p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Componentes de la Huella Ecológica</h4>
        <table class="table">
            <thead>
                <tr><th>Componente</th><th>Qué mide</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Huella de carbono</strong></td><td>Área para absorber CO₂</td><td>Combustibles fósiles</td></tr>
                <tr><td><strong>Cultivos</strong></td><td>Tierra agrícola</td><td>Trigo, maíz</td></tr>
                <tr><td><strong>Pastizales</strong></td><td>Carne, lácteos</td><td>Ganado</td></tr>
                <tr><td><strong>Bosques</strong></td><td>Madera, papel</td><td>Tala</td></tr>
                <tr><td><strong>Pesca</strong></td><td>Zonas marinas</td><td>Atún, salmón</td></tr>
                <tr><td><strong>Construido</strong></td><td>Ciudades, carreteras</td><td>Urbanización</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>1 persona en EE.UU.</strong> → ~8 gha/año</p>
        </div>

        <div class="visual">
            <img src="assets/img/huella-eco.png" alt="Componentes huella ecológica">
            <p><em>Desglose por componentes. Fuente: Global Footprint Network.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Biocapacidad vs Huella Ecológica</h4>
        <p>\\[ \\text{Déficit ecológico} = \\text{Huella} - \\text{Biocapacidad} \\]</p>
        <p><strong>2025:</strong> Humanidad usa <strong>1.7 planetas</strong> al año.</p>

        <table class="table">
            <thead>
                <tr><th>Indicador</th><th>Valor 2025</th></tr>
            </thead>
            <tbody>
                <tr><td>Huella global</td><td>~2.8 gha/persona</td></tr>
                <tr><td>Biocapacidad global</td><td>~1.6 gha/persona</td></tr>
                <tr><td>Déficit</td><td>-1.2 gha/persona</td></tr>
                <tr><td>Overshoot Day</td><td>~28 de julio</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/Country-Overshoot-Days-2025.jpg" alt="Overshoot Day 2024">
            <p><em>Día del Sobregiro Ecológico. Fuente: Earth Overshoot Day.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Huella Ecológica por País (gha/persona)</h4>
        <table class="table">
            <thead>
                <tr><th>País</th><th>Huella</th><th>Biocapacidad</th><th>Déficit</th></tr>
            </thead>
            <tbody>
                <tr><td>EE.UU.</td><td>8.1</td><td>3.6</td><td>-4.5</td></tr>
                <tr><td>España</td><td>4.1</td><td>1.6</td><td>-2.5</td></tr>
                <tr><td>China</td><td>3.7</td><td>1.1</td><td>-2.6</td></tr>
                <tr><td>India</td><td>1.2</td><td>0.7</td><td>-0.5</td></tr>
                <tr><td>Media global</td><td>2.8</td><td>1.6</td><td>-1.2</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/huella_ecologica_por_pais_consumo_mundial_.jpeg" alt="Mapa global huella ecológica">
            <p><em>Mapa mundial 2023. Fuente: Global Footprint Network.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/elementos-indicadores-huella-ecologica.png" alt="Elementos huella">
            <p><em>Elementos clave. Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Overshoot Day: El Día del Sobregiro</h4>
        <ul>
            <li><strong>1970:</strong> 29 diciembre</li>
            <li><strong>2025:</strong> ~28 julio</li>
            <li>Si todos viviéramos como <strong>EE.UU.</strong> → 5 planetas</li>
            <li>Si como <strong>España</strong> → 2.5 planetas</li>
        </ul>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: Huella vs Biocapacidad</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Tierra -->
                <circle cx="350" cy="250" r="120" fill="#228B22" stroke="#006400" stroke-width="3"/>
                <text x="350" y="255" fill="white" font-size="20" text-anchor="middle">Tierra</text>
                <text x="350" y="275" fill="white" font-size="16" text-anchor="middle">1.6 gha</text>

                <!-- Huella (roja, creciendo) -->
                <circle cx="350" cy="250" r="80" fill="none" stroke="#FF0000" stroke-width="8">
                    <animate attributeName="r" from="80" to="180" dur="4s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="150" fill="#FF0000" font-size="18" text-anchor="middle">
                    <tspan x="350" dy="-10">Huella</tspan>
                    <tspan x="350" dy="20">2.8 gha</tspan>
                </text>

                <!-- Etiquetas animadas -->
                <text x="200" y="100" fill="#FF4500" font-size="14">
                    <animate attributeName="opacity" values="0;1;0" dur="3s" repeatCount="indefinite"/>
                    Déficit
                </text>
                <path d="M250 120 Q300 180 340 220" stroke="#FF4500" stroke-width="3" fill="none">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>

                <!-- Overshoot Day -->
                <rect x="50" y="380" width="180" height="80" fill="#8B0000" rx="15"/>
                <text x="140" y="415" fill="white" font-size="16" text-anchor="middle">Overshoot</text>
                <text x="140" y="435" fill="white" font-size="14" text-anchor="middle">~28 julio</text>

                <!-- Iconos -->
                <rect x="500" y="100" width="60" height="60" fill="#FF6347" rx="10"/>
                <text x="530" y="135" fill="white" font-size="12" text-anchor="middle">Carbón</text>
                <rect x="500" y="180" width="60" height="60" fill="#FFD700" rx="10"/>
                <text x="530" y="215" fill="#8B4513" font-size="12" text-anchor="middle">Comida</text>

                <!-- Título -->
                <text x="350" y="50" fill="#ffcc00" font-size="22" text-anchor="middle" font-family="Arial">Huella Ecológica > Biocapacidad</text>
            </svg>
            <p><em>SVG Animado: Crecimiento de la huella vs capacidad fija del planeta.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define huella ecológica', 'respuesta' => 'Área productiva para recursos y residuos'],
        ['enunciado' => 'Unidad estándar', 'respuesta' => 'hectáreas globales (gha)'],
        ['enunciado' => 'Overshoot Day es...', 'respuesta' => 'Día cuando agotamos recursos anuales'],

        // === APLICADOS ===
        ['enunciado' => 'Huella España 2025', 'respuesta' => '~4.1 gha/persona'],
        ['enunciado' => '¿Cuántos planetas usamos?', 'respuesta' => '~1.7'],
        ['enunciado' => 'Componente mayor en países ricos', 'respuesta' => 'Huella de carbono'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Cómo reducir huella?', 'respuesta' => 'Menos carne, transporte público, reciclaje'],
        ['enunciado' => '¿Qué es biocapacidad?', 'respuesta' => 'Capacidad de regeneración de ecosistemas'],
        ['enunciado' => '¿Qué es reserva ecológica?', 'respuesta' => 'Biocapacidad > huella'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula déficit ecológico', 'respuesta' => '\\(\\text{Déficit} = \\text{Huella} - \\text{Biocapacidad}\\)',],
        ['enunciado' => 'Huella global 2025', 'respuesta' => '~20.5 mil millones gha'],
        ['enunciado' => '¿Qué mide GFN?', 'respuesta' => 'Global Footprint Network']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Huella ecológica mide...', 'opciones' => ['Área productiva', 'Dinero', 'Agua', 'Energía'], 'correcta' => 'Área productiva'],
        ['pregunta' => 'Unidad de huella', 'opciones' => ['m²', 'gha', 'litros', 'kg'], 'correcta' => 'gha'],
        ['pregunta' => 'Overshoot Day 2025 ≈', 'opciones' => ['Diciembre', 'Julio', 'Marzo', 'Octubre'], 'correcta' => 'Julio'],
        ['pregunta' => 'Componente principal en ricos', 'opciones' => ['Pesca', 'Carbono', 'Bosque', 'Construido'], 'correcta' => 'Carbono'],
        ['pregunta' => 'Biocapacidad global ≈', 'opciones' => ['1.6 gha', '2.8 gha', '5 gha', '0.5 gha'], 'correcta' => '1.6 gha'],
        ['pregunta' => 'Huella global ≈', 'opciones' => ['1.6 gha', '2.8 gha', '5 gha', '0.5 gha'], 'correcta' => '2.8 gha'],
        ['pregunta' => 'Planetas que usamos', 'opciones' => ['0.5', '1', '1.7', '3'], 'correcta' => '1.7'],
        ['pregunta' => 'España necesita ≈', 'opciones' => ['1 planeta', '2.5 planetas', '0.5', '5'], 'correcta' => '2.5 planetas'],
        ['pregunta' => 'Reducir con...', 'opciones' => ['Más autos', 'Dieta vegana', 'Más plástico', 'Tala'], 'correcta' => 'Dieta vegana'],
        ['pregunta' => 'GFN es...', 'opciones' => ['Global Footprint Network', 'Green Food', 'Nada', 'ONU'], 'correcta' => 'Global Footprint Network'],

        // === MEDIO (10) ===
        ['pregunta' => 'Huella EE.UU. ≈', 'opciones' => ['2 gha', '8.1 gha', '1 gha', '15 gha'], 'correcta' => '8.1 gha'],
        ['pregunta' => 'País con reserva ecológica', 'opciones' => ['EE.UU.', 'Brasil', 'España', 'China'], 'correcta' => 'Brasil'],
        ['pregunta' => 'Huella de carbono es ≈', 'opciones' => ['20%', '60% de total', '10%', '90%'], 'correcta' => '60% de total'],
        ['pregunta' => 'Overshoot Day avanzó desde...', 'opciones' => ['1970', '2000', '1950', '2020'], 'correcta' => '1970'],
        ['pregunta' => 'Huella de 1 kg carne ≈', 'opciones' => ['0.5 gha', '2 gha', '10 gha', '0.1 gha'], 'correcta' => '2 gha'],
        ['pregunta' => 'Huella de 1 km en auto ≈', 'opciones' => ['0.0001 gha', '0.001 gha', '0.01 gha', '0.1 gha'], 'correcta' => '0.001 gha'],
        ['pregunta' => 'Huella de reciclaje', 'opciones' => ['Aumenta', 'Reduce', 'Igual', 'Nada'], 'correcta' => 'Reduce'],
        ['pregunta' => 'Huella de energía renovable', 'opciones' => ['Alta', 'Baja', 'Igual', 'Cero'], 'correcta' => 'Baja'],
        ['pregunta' => 'Huella de pesca en declive por...', 'opciones' => ['Sobreexplotación', 'Lluvia', 'Frío', 'Nada'], 'correcta' => 'Sobreexplotación'],
        ['pregunta' => 'Huella construida incluye...', 'opciones' => ['Carreteras', 'Bosques', 'Océanos', 'Aire'], 'correcta' => 'Carreteras'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula déficit', 'opciones' => ['Huella - Biocapacidad', 'Biocapacidad - Huella', 'Huella × Biocapacidad', 'Huella / Biocapacidad'], 'correcta' => 'Huella - Biocapacidad'],
        ['pregunta' => 'Huella total humanidad ≈', 'opciones' => ['10 mil millones gha', '20.5 mil millones gha', '5 mil millones', '50 mil millones'], 'correcta' => '20.5 mil millones gha'],
        ['pregunta' => 'Biocapacidad total ≈', 'opciones' => ['12 mil millones gha', '20 mil millones', '5 mil millones', '1 mil millones'], 'correcta' => '12 mil millones gha'],
        ['pregunta' => 'Equivalencia 1 gha ≈', 'opciones' => ['1 ha promedio Tierra', '1 ha bosque', '1 ha océano', '1 ha desierto'], 'correcta' => '1 ha promedio Tierra'],
        ['pregunta' => 'Huella de 1 ha bosque absorbe ≈', 'opciones' => ['1 t CO₂/año', '5 t CO₂/año', '10 t CO₂/año', '0.1 t'], 'correcta' => '5 t CO₂/año'],
        ['pregunta' => 'Huella de 1 L gasolina ≈', 'opciones' => ['0.001 gha', '0.01 gha', '0.1 gha', '1 gha'], 'correcta' => '0.01 gha'],
        ['pregunta' => 'Huella de dieta vegana vs promedio', 'opciones' => ['50% menor', 'Igual', 'Mayor', 'Doble'], 'correcta' => '50% menor'],
        ['pregunta' => 'Huella de transporte público vs auto', 'opciones' => ['Mayor', 'Menor', 'Igual', 'Cero'], 'correcta' => 'Menor'],
        ['pregunta' => 'Meta sostenible', 'opciones' => ['Huella ≤ 1.6 gha', 'Huella = 0', 'Huella > biocapacidad', 'Nada'], 'correcta' => 'Huella ≤ 1.6 gha'],
        ['pregunta' => 'GFN fundado en...', 'opciones' => ['1992', '2003', '1970', '2020'], 'correcta' => '2003']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Flecha Dorada (Transición hacia Economía Circular y Sostenibilidad)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'flecha-dorada',
    'titulo' => 'Flecha Dorada: La Dirección hacia la Sostenibilidad',
    'contenido' => '
        <h3>¿Qué es la Flecha Dorada?</h3>
        <p>La <strong>Flecha Dorada</strong> es un <strong>símbolo conceptual</strong> que representa la <strong>transición estratégica</strong> desde un modelo <strong>lineal (tomar-hacer-desechar)</strong> hacia una <strong>economía circular, regenerativa y sostenible</strong>.</p>
        <p><strong>Representa la dirección correcta</strong> en políticas, empresas y sociedad para alinear el desarrollo con los límites planetarios.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Modelo Lineal vs Circular</h4>
        <table class="table">
            <thead>
                <tr><th>Aspecto</th><th>Lineal</th><th>Circular (Flecha Dorada)</th></tr>
            </thead>
            <tbody>
                <tr><td>Estructura</td><td>Tomar → Hacer → Desechar</td><td>Cerrar ciclos → Regenerar</td></tr>
                <tr><td>Residuos</td><td>Alta generación</td><td>Diseñados como recursos</td></tr>
                <tr><td>Recursos</td><td>Finito, extracción</td><td>Renovable, reutilización</td></tr>
                <tr><td>Impacto</td><td>Degradación</td><td>Restauración</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Apple</strong> → usa aluminio 100% reciclado en iPhone (2025).</p>
        </div>

        <div class="visual">
            <img src="assets/img/barreras-ec.circ_.jpg" alt="Barreras economía circular">
            <p><em>Barreras y soluciones. Fuente: MDPI.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Principios de la Economía Circular (Ellen MacArthur)</h4>
        <ol>
            <li><strong>Eliminar residuos y contaminación</strong> desde el diseño</li>
            <li><strong>Mantener productos y materiales en uso</strong></li>
            <li><strong>Regenerar sistemas naturales</strong></li>
        </ol>

        <div class="visual">
            <img src="assets/img/economiaCircualr.png" alt="Modelo circular">
            <p><em>Diagrama de economía circular. Fuente: infoDiagram.</em></p>
        </div>

        <hr style="border Vitro:1px dashed #00ff00;">

        <h4>3. Flecha Dorada en Acción: Ejemplos 2025</h4>
        <table class="table">
            <thead>
                <tr><th>Iniciativa</th><th>Acción</th><th>Impacto</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>UE Circular Economy Package</strong></td><td>80% reciclaje 2030</td><td>↓ 700 Mt CO₂</td></tr>
                <tr><td><strong>China Zero Waste Cities</strong></td><td>100 ciudades piloto</td><td>↓ 50% residuos</td></tr>
                <tr><td><strong>Philips Light as a Service</strong></td><td>Alquiler de luz</td><td>↓ 60% energía</td></tr>
                <tr><td><strong>Interface Net-Works</strong></td><td>Redes pesca → alfombras</td><td>200,000 kg redes recicladas</td></tr>
            </tbody>
        </table>
        <hr style="border:1px dashed #00ff00;">

        <h4>4. Circularidad Global 2025</h4>
        <p><strong>Circularity Gap Report 2025:</strong></p>
        <ul>
            <li><strong>Solo 7.2% circular</strong> (↓ desde 9.1% en 2018)</li>
            <li><strong>92.8% lineal</strong></li>
            <li><strong>Meta:</strong> 17% para 2032</li>
        </ul>

        <div class="visual">
            <img src="assets/img/economia-circular-diplomado-1.webp" alt="Circularity Gap 2025">
            <p><em>Brecha de circularidad. Fuente: Circularity Gap Report.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/prisma-desarrollo-sostenible.png" alt="Modelo prisma">
            <p><em>Prisma de desarrollo sostenible. Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. La Flecha Dorada y los ODS</h4>
        <p>Apunta directamente a:</p>
        <ul>
            <li><strong>ODS 12:</strong> Producción y consumo responsables</li>
            <li><strong>ODS 13:</strong> Acción por el clima</li>
            <li><strong>ODS 15:</strong> Vida de ecosistemas terrestres</li>
        </ul>

        <hr style="border:1px dashed #00ff00;">

        <h4>6. SVG Animado: Flecha Dorada en Movimiento</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo degradado -->
                <defs>
                    <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" stop-color="#228B22"/>
                        <stop offset="100%" stop-color="#87CEEB"/>
                    </linearGradient>
                </defs>
                <rect x="0" y="0" width="700" height="500" fill="url(#grad)"/>

                <!-- Flecha dorada animada -->
                <path d="M100 250 Q200 200 350 250 T600 250" stroke="#FFD700" stroke-width="12" fill="none" marker-end="url(#arrowhead)">
                    <animate attributeName="stroke-dashoffset" from="1000" to="0" dur="4s" repeatCount="indefinite"/>
                    <animate attributeName="stroke-dasharray" values="0,1000;1000,0" dur="4s" repeatCount="indefinite"/>
                </path>

                <!-- Punta de flecha -->
                <defs>
                    <marker id="arrowhead" markerWidth="20" markerHeight="20" refX="18" refY="10" orient="auto">
                        <polygon points="0,0 20,10 0,20" fill="#FFD700"/>
                    </marker>
                </defs>

                <!-- Hitos en el camino -->
                <circle cx="150" cy="220" r="30" fill="#FF4500" opacity="0.8">
                    <animate attributeName="r" values="30;40;30" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="150" y="225" fill="white" font-size="12" text-anchor="middle">Lineal</text>

                <circle cx="350" cy="250" r="40" fill="#FFD700" opacity="0.9">
                    <animate attributeName="r" values="40;50;40" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="245" fill="#8B4513" font-size="14" text-anchor="middle">Transición</text>
                <text x="350" y="265" fill="#8B4513" font-size="12" text-anchor="middle">Circular</text>

                <circle cx="550" cy="230" r="35" fill="#228B22">
                    <animate attributeName="r" values="35;45;35" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="550" y="235" fill="white" font-size="14" text-anchor="middle">Regenerativa</text>

                <!-- Iconos -->
                <rect x="80" y="300" width="50" height="50" fill="#DC143C" rx="10"/>
                <text x="105" y="330" fill="white" font-size="12" text-anchor="middle">Desecho</text>

                <circle cx="620" cy="320" r="25" fill="#32CD32"/>
                <text x="620" y="325" fill="white" font-size="12" text-anchor="middle">Recurso</text>

                <!-- Título -->
                <text x="350" y="80" fill="#FFD700" font-size="26" text-anchor="middle" font-family="Arial" font-weight="bold">FLECHA DORADA</text>
                <text x="350" y="110" fill="#FFFFFF" font-size="18" text-anchor="middle">Hacia la Economía Circular</text>
            </svg>
            <p><em>SVG Animado: Camino desde lo lineal hacia lo regenerativo.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define Flecha Dorada', 'respuesta' => 'Dirección hacia economía circular y sostenible'],
        ['enunciado' => 'Modelo opuesto', 'respuesta' => 'Economía lineal'],
        ['enunciado' => '3 principios circular', 'respuesta' => 'Eliminar residuos, mantener en uso, regenerar naturaleza'],

        // === APLICADOS ===
        ['enunciado' => 'Ejemplo empresa circular', 'respuesta' => 'Philips Light as a Service'],
        ['enunciado' => '% circularidad global 2025', 'respuesta' => '7.2%'],
        ['enunciado' => 'Meta UE reciclaje 2030', 'respuesta' => '80%'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Cómo reduce huella ecológica?', 'respuesta' => 'Reutiliza recursos, ↓ extracción'],
        ['enunciado' => '¿Qué es upcycling?', 'respuesta' => 'Convertir residuo en producto de mayor valor'],
        ['enunciado' => '¿Qué es diseño regenerativo?', 'respuesta' => 'Diseñar para restaurar ecosistemas'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula circularidad', 'respuesta' => '\\(\\text{Circularidad} = \\frac{\\text{Material reciclado}}{\\text{Total entrada}} \\times 100\\)'],
        ['enunciado' => 'Circularity Gap 2018 vs 2025', 'respuesta' => '9.1% → 7.2%'],
        ['enunciado' => '¿Qué es EMF?', 'respuesta' => 'Ellen MacArthur Foundation']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Flecha Dorada apunta a...', 'opciones' => ['Economía circular', 'Caza', 'Oro', 'Lineal'], 'correcta' => 'Economía circular'],
        ['pregunta' => 'Modelo lineal es...', 'opciones' => ['Tomar-hacer-desechar', 'Cerrar ciclos', 'Regenerar', 'Reciclar'], 'correcta' => 'Tomar-hacer-desechar'],
        ['pregunta' => 'Circularidad global 2025', 'opciones' => ['50%', '7.2%', '90%', '0%'], 'correcta' => '7.2%'],
        ['pregunta' => 'Principio 1 circular', 'opciones' => ['Eliminar residuos', 'Más plástico', 'Quemar', 'Extraer'], 'correcta' => 'Eliminar residuos'],
        ['pregunta' => 'EMF es...', 'opciones' => ['Ellen MacArthur Foundation', 'Energy Market', 'Nada', 'ONU'], 'correcta' => 'Ellen MacArthur Foundation'],
        ['pregunta' => 'Ejemplo circular', 'opciones' => ['Alquiler luz', 'Basura', 'Plástico nuevo', 'Carbón'], 'correcta' => 'Alquiler luz'],
        ['pregunta' => 'Upcycling es...', 'opciones' => ['Valor ↑', 'Valor ↓', 'Reciclaje', 'Basura'], 'correcta' => 'Valor ↑'],
        ['pregunta' => 'Meta UE 2030', 'opciones' => ['50%', '80% reciclaje', '100%', '0%'], 'correcta' => '80% reciclaje'],
        ['pregunta' => 'Residuos en circular son...', 'opciones' => ['Recursos', 'Basura', 'Contaminación', 'Nada'], 'correcta' => 'Recursos'],
        ['pregunta' => 'Flecha Dorada reduce...', 'opciones' => ['Huella ecológica', 'Aumenta', 'Igual', 'Cero'], 'correcta' => 'Huella ecológica'],

        // === MEDIO (10) ===
        ['pregunta' => 'Circularity Gap Report dice...', 'opciones' => ['7.2% circular', '50%', '100%', '0%'], 'correcta' => '7.2% circular'],
        ['pregunta' => 'China tiene...', 'opciones' => ['100 ciudades zero waste', '1 ciudad', 'Ninguna', '1000'], 'correcta' => '100 ciudades zero waste'],
        ['pregunta' => 'Interface Net-Works recicla...', 'opciones' => ['Redes pesca', 'Plástico', 'Papel', 'Vidrio'], 'correcta' => 'Redes pesca'],
        ['pregunta' => 'Diseño para desmontaje permite...', 'opciones' => ['Reutilización', 'Basura', 'Quema', 'Nada'], 'correcta' => 'Reutilización'],
        ['pregunta' => 'Economía de funcionalidad es...', 'opciones' => ['Vender servicio', 'Vender producto', 'Ambos', 'Ninguno'], 'correcta' => 'Vender servicio'],
        ['pregunta' => 'Cradle to Cradle es...', 'opciones' => ['Diseño regenerativo', 'Lineal', 'Reciclaje', 'Basura'], 'correcta' => 'Diseño regenerativo'],
        ['pregunta' => 'ODS 12 es...', 'opciones' => ['Consumo responsable', 'Agua', 'Educación', 'Salud'], 'correcta' => 'Consumo responsable'],
        ['pregunta' => 'Biomimicry en diseño es...', 'opciones' => ['Imitar naturaleza', 'Ignorar', 'Destruir', 'Nada'], 'correcta' => 'Imitar naturaleza'],
        ['pregunta' => 'Producto como servicio reduce...', 'opciones' => ['Propiedad', 'Aumenta', 'Igual', 'Cero'], 'correcta' => 'Propiedad'],
        ['pregunta' => 'Circularidad ↓ desde 2018 por...', 'opciones' => ['Crecimiento población', 'Menos reciclaje', 'Más plástico', 'Todo'], 'correcta' => 'Todo'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula circularidad', 'opciones' => ['(Reciclado / Total) × 100', 'Total / Reciclado', 'Reciclado × Total', '100 - Reciclado'], 'correcta' => '(Reciclado / Total) × 100'],
        ['pregunta' => 'Meta circularidad 2032', 'opciones' => ['17%', '50%', '100%', '7.2%'], 'correcta' => '17%'],
        ['pregunta' => 'UE reduce CO₂ con circularidad en...', 'opciones' => ['700 Mt', '100 Mt', '1 Gt', '10 Mt'], 'correcta' => '700 Mt'],
        ['pregunta' => 'Net-Works recolectó...', 'opciones' => ['200,000 kg redes', '1 kg', '1 millón kg', '10 kg'], 'correcta' => '200,000 kg redes'],
        ['pregunta' => 'Light as a Service ↓ energía en...', 'opciones' => ['60%', '10%', '100%', '0%'], 'correcta' => '60%'],
        ['pregunta' => 'Principio 3 circular', 'opciones' => ['Regenerar naturaleza', 'Extraer', 'Contaminar', 'Desechar'], 'correcta' => 'Regenerar naturaleza'],
        ['pregunta' => 'C2C certificado por...', 'opciones' => ['McDonough & Braungart', 'ONU', 'UE', 'Nada'], 'correcta' => 'McDonough & Braungart'],
        ['pregunta' => 'Economía azul imita...', 'opciones' => ['Ecosistemas', 'Fábricas', 'Ciudades', 'Nada'], 'correcta' => 'Ecosistemas'],
        ['pregunta' => 'Circularidad requiere...', 'opciones' => ['Diseño sistémico', 'Solo reciclaje', 'Más plástico', 'Lineal'], 'correcta' => 'Diseño sistémico'],
        ['pregunta' => 'EMF fundada en...', 'opciones' => ['2010', '2000', '2020', '1990'], 'correcta' => '2010']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Obsolescencia Percibida (E-Waste, Fast Fashion, Diseño Anti-Reparación, Sostenibilidad)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'obsolescencia-percibida',
    'titulo' => 'Obsolescencia Percibida: El Engaño del "Nuevo es Mejor"',
    'contenido' => '
        <h3>¿Qué es la Obsolescencia Percibida?</h3>
        <p>La <strong>obsolescencia percibida</strong> es una <strong>estrategia de marketing</strong> que hace que un producto funcional parezca <strong>obsoleto</strong> por <strong>moda, diseño o presión social</strong>, no por falla técnica.</p>
        <p><strong>Consecuencia:</strong> ↑ Consumo, ↑ Residuos, ↑ Impacto ambiental.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Tipos de Obsolescencia</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Descripción</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Percibida</strong></td><td>Moda/marketing</td><td>iPhone "viejo"</td></tr>
                <tr><td><strong>Planificada</strong></td><td>Diseño para fallar</td><td>Bombilla Phoebus</td></tr>
                <tr><td><strong>Técnica</strong></td><td>Falla real</td><td>Batería agotada</td></tr>
                <tr><td><strong>Sistémica</strong></td><td>Incompatibilidad</td><td>Cargador nuevo</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Fast Fashion</strong> → 92 millones de toneladas de ropa al vertedero/año.</p>
        </div>

        <div class="visual">
            <img src="assets/img/dimensiones-obsolensencia.png" alt="Dimensiones obsolescencia">
            <p><em>Forma, Tiempo, Intención (FTI). Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Impacto Ambiental 2025</h4>
        <table class="table">
            <thead>
                <tr><th>Indicador</th><th>Valor Global</th></tr>
            </thead>
            <tbody>
                <tr><td>E-Waste generado</td><td>62 millones de toneladas</td></tr>
                <tr><td>Reciclado</td><td>Solo 22.3%</td></tr>
                <tr><td>Fast Fashion residuos</td><td>92 millones de toneladas</td></tr>
                <tr><td>CO₂ por ropa</td><td>10% emisiones globales</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/e-waste-2024.png" alt="E-Waste Monitor 2024">
            <p><em>Global E-Waste Monitor 2024. Fuente: UNU.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Ejemplos por Industria</h4>
        <table class="table">
            <thead>
                <tr><th>Industria</th><th>Estrategia</th><th>Consecuencia</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Smartphones</strong></td><td>Nuevos modelos anuales</td><td>1.5 mil millones unidades/año</td></tr>
                <tr><td><strong>Moda</strong></td><td>Tendencias rápidas</td><td>100 mil millones prendas/año</td></tr>
                <tr><td><strong>Electrodomésticos</strong></td><td>Diseño no reparable</td><td>50 millones toneladas e-waste</td></tr>
                <tr><td><strong>Cosméticos</strong></td><td>Packaging "nuevo"</td><td>120 mil millones envases/año</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/mediacion-grupo-tecnologia.png" alt="Mediación obsolescencia">
            <p><em>Mediación entre grupo y tecnología. Fuente: ResearchGate.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/grafico-obsolescencia.png" alt="Gráfico típico">
            <p><em>Gráfico de obsolescencia. Fuente: ResearchGate.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/crisis-e-waste.avif" alt="Greenpeace e-waste">
            <p><em>Greenpeace: Crisis del e-waste. Fuente: Greenpeace.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Cómo Combatirla: Alternativas Sostenibles</h4>
        <ul>
            <li><strong>Diseño modular</strong> (Fairphone)</li>
            <li><strong>Right to Repair</strong> (UE 2025)</li>
            <li><strong>Consumo consciente</strong></li>
            <li><strong>Second-hand & upcycling</strong></li>
        </ul>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: Ciclo de Obsolescencia Percibida</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#f0f0f0"/>

                <!-- Producto "nuevo" -->
                <rect x="50" y="100" width="120" height="180" fill="#32CD32" rx="15"/>
                <text x="110" y="180" fill="white" font-size="14" text-anchor="middle">NUEVO</text>
                <text x="110" y="200" fill="white" font-size="12" text-anchor="middle">iPhone 16</text>

                <!-- Flecha marketing -->
                <path d="M170 190 Q250 150 330 190" stroke="#FF4500" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="200" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <text x="250" y="140" fill="#FF4500" font-size="14" text-anchor="middle">Marketing</text>

                <!-- Producto "viejo" -->
                <rect x="380" y="100" width="120" height="180" fill="#808080" rx="15"/>
                <text x="440" y="180" fill="white" font-size="14" text-anchor="middle">"OBSOLETO"</text>
                <text x="440" y="200" fill="white" font-size="12" text-anchor="middle">iPhone 14</text>

                <!-- Basura -->
                <path d="M440 280 L380 350 L500 350 Z" fill="#8B4513"/>
                <text x="440" y="380" fill="#DC143C" font-size="16" text-anchor="middle">E-WASTE</text>
                <text x="440" y="400" fill="#DC143C" font-size="12" text-anchor="middle">62 Mt/año</text>

                <!-- Flecha basura -->
                <path d="M440 280 L440 340" stroke="#DC143C" stroke-width="8">
                    <animate attributeName="stroke-dashoffset" from="60" to="0" dur="1.5s" repeatCount="indefinite"/>
                </path>

                <!-- Alternativa sostenible -->
                <circle cx="200" cy="400" r="50" fill="#228B22" opacity="0.8">
                    <animate attributeName="r" values="50;60;50" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="200" y="395" fill="white" font-size="12" text-anchor="middle">REPARAR</text>
                <text x="200" y="410" fill="white" font-size="12" text-anchor="middle">REUSAR</text>

                <!-- Flecha -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#FF4500"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#FF4500" font-size="24" text-anchor="middle" font-family="Arial" font-weight="bold">OBSOLESCENCIA PERCIBIDA</text>
                <text x="350" y="85" fill="#333" font-size="16" text-anchor="middle">De "nuevo" a basura en 12 meses</text>
            </svg>
            <p><em>SVG Animado: Ciclo de obsolescencia percibida vs alternativa sostenible.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define obsolescencia percibida', 'respuesta' => 'Obsoleto por moda/marketing, no por falla'],
        ['enunciado' => 'Diferencia con planificada', 'respuesta' => 'Percibida: social; Planificada: técnica'],
        ['enunciado' => 'Ejemplo típico', 'respuesta' => 'Smartphone "viejo" por nuevo modelo'],

        // === APLICADOS ===
        ['enunciado' => 'E-Waste global 2025', 'respuesta' => '62 millones de toneladas'],
        ['enunciado' => '% reciclado e-waste', 'respuesta' => '22.3%'],
        ['enunciado' => 'Fast fashion genera...', 'respuesta' => '92 millones toneladas residuos/año'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Cómo combatirla?', 'respuesta' => 'Right to Repair, second-hand, diseño modular'],
        ['enunciado' => '¿Qué es upcycling?', 'respuesta' => 'Transformar residuo en producto de mayor valor'],
        ['enunciado' => '¿Qué es Fairphone?', 'respuesta' => 'Teléfono modular y reparable'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula impacto obsolescencia', 'respuesta' => '\\(\\text{Impacto} = \\text{Consumo} \\times \\text{Residuos} \\times \\text{Emisiones}\\)',],
        ['enunciado' => 'CO₂ de moda vs aviación', 'respuesta' => '10% vs 2.5% global'],
        ['enunciado' => '¿Qué es el Pacto Phoebus?', 'respuesta' => 'Cártel para limitar vida de bombillas']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Obsolescencia percibida es por...', 'opciones' => ['Falla', 'Moda', 'Calidad', 'Durabilidad'], 'correcta' => 'Moda'],
        ['pregunta' => 'Aumenta...', 'opciones' => ['Residuos', 'Reciclaje', 'Durabilidad', 'Nada'], 'correcta' => 'Residuos'],
        ['pregunta' => 'Ejemplo típico', 'opciones' => ['iPhone viejo', 'Auto eterno', 'Ropa duradera', 'Nada'], 'correcta' => 'iPhone viejo'],
        ['pregunta' => 'Fast fashion genera...', 'opciones' => ['92 Mt residuos', '0', '1 Mt', '1000 Mt'], 'correcta' => '92 Mt residuos'],
        ['pregunta' => 'E-Waste 2025 ≈', 'opciones' => ['62 Mt', '10 Mt', '100 Mt', '1 Mt'], 'correcta' => '62 Mt'],
        ['pregunta' => 'Reciclado e-waste', 'opciones' => ['80%', '22.3%', '50%', '100%'], 'correcta' => '22.3%'],
        ['pregunta' => 'Moda emite más CO₂ que...', 'opciones' => ['Aviación', 'Agricultura', 'Energía', 'Nada'], 'correcta' => 'Aviación'],
        ['pregunta' => 'Right to Repair es...', 'opciones' => ['Derecho a reparar', 'Derecho a desechar', 'Nada', 'Obligación'], 'correcta' => 'Derecho a reparar'],
        ['pregunta' => 'Fairphone es...', 'opciones' => ['Modular', 'Desechable', 'Caro', 'Nada'], 'correcta' => 'Modular'],
        ['pregunta' => 'Upcycling es...', 'opciones' => ['Valor ↑', 'Valor ↓', 'Reciclaje', 'Basura'], 'correcta' => 'Valor ↑'],

        // === MEDIO (10) ===
        ['pregunta' => 'Pacto Phoebus limitó bombillas a...', 'opciones' => ['1000 horas', '10000 horas', '100 horas', '1 hora'], 'correcta' => '1000 horas'],
        ['pregunta' => 'Obsolescencia sistémica es...', 'opciones' => ['Incompatibilidad', 'Falla', 'Moda', 'Calidad'], 'correcta' => 'Incompatibilidad'],
        ['pregunta' => 'Smartphones anuales generan...', 'opciones' => ['1.5 mil millones', '100 millones', '10 millones', '0'], 'correcta' => '1.5 mil millones'],
        ['pregunta' => 'Cosméticos generan...', 'opciones' => ['120 mil millones envases', '1 millón', '0', '1000'], 'correcta' => '120 mil millones envases'],
        ['pregunta' => 'UE obliga Right to Repair en...', 'opciones' => ['2025', '2030', '2020', '2050'], 'correcta' => '2025'],
        ['pregunta' => 'Second-hand reduce...', 'opciones' => ['Huella ecológica', 'Aumenta', 'Igual', 'Cero'], 'correcta' => 'Huella ecológica'],
        ['pregunta' => 'Diseño modular permite...', 'opciones' => ['Reparar fácil', 'Tirar', 'Quemar', 'Nada'], 'correcta' => 'Reparar fácil'],
        ['pregunta' => 'E-Waste contiene...', 'opciones' => ['Oro, plata', 'Solo plástico', 'Nada', 'Basura'], 'correcta' => 'Oro, plata'],
        ['pregunta' => 'Ropa al vertedero...', 'opciones' => ['92 Mt/año', '0', '1 Mt', '1000 Mt'], 'correcta' => '92 Mt/año'],
        ['pregunta' => 'Marketing crea...', 'opciones' => ['Necesidad falsa', 'Durabilidad', 'Calidad', 'Nada'], 'correcta' => 'Necesidad falsa'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula impacto obsolescencia', 'opciones' => ['C × R × E', 'C / R', 'R - E', 'E / C'], 'correcta' => 'C × R × E'],
        ['pregunta' => 'CO₂ moda vs global', 'opciones' => ['10%', '1%', '50%', '0%'], 'correcta' => '10%'],
        ['pregunta' => '1 smartphone contiene ≈', 'opciones' => ['0.034 g oro', '1 g', '10 g', '0 g'], 'correcta' => '0.034 g oro'],
        ['pregunta' => 'Pacto Phoebus fundado en...', 'opciones' => ['1924', '1950', '2000', '2020'], 'correcta' => '1924'],
        ['pregunta' => 'E-Waste crecerá a...', 'opciones' => ['82 Mt en 2030', '10 Mt', '1 Mt', '0'], 'correcta' => '82 Mt en 2030'],
        ['pregunta' => 'Fairphone vida útil ≈', 'opciones' => ['7 años', '1 año', '2 años', '0'], 'correcta' => '7 años'],
        ['pregunta' => 'Ropa segunda mano ↓ emisiones en...', 'opciones' => ['60%', '10%', '100%', '0%'], 'correcta' => '60%'],
        ['pregunta' => 'E-Waste valioso contiene...', 'opciones' => ['US$62.5 mil millones', '0', '1 millón', '1000'], 'correcta' => 'US$62.5 mil millones'],
        ['pregunta' => 'Ley UE 2025 obliga...', 'opciones' => ['Reparabilidad 7 años', '1 año', '0', '10 años'], 'correcta' => 'Reparabilidad 7 años'],
        ['pregunta' => 'Obsolescencia percibida es...', 'opciones' => ['Estrategia de mercado', 'Accidente', 'Falla', 'Calidad'], 'correcta' => 'Estrategia de mercado']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Obsolescencia Programada (Cártel Phoebus, E-Waste, Baterías, Leyes)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'obsolescencia-programada',
    'titulo' => 'Obsolescencia Programada: El Negocio de Romper las Cosas',
    'contenido' => '
        <h3>¿Qué es la Obsolescencia Programada?</h3>
        <p>La <strong>obsolescencia programada</strong> es el <strong>diseño intencional</strong> de un producto para que <strong>falle, se vuelva inutilizable o incompatible</strong> después de un tiempo predeterminado, <strong>forzando el reemplazo</strong>.</p>
        <p><strong>Objetivo:</strong> ↑ Ventas recurrentes. <strong>Consecuencia:</strong> ↑ Residuos, ↑ Contaminación, ↑ Agotamiento de recursos.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Tipos de Obsolescencia Programada</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Mecanismo</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Técnica</strong></td><td>Pieza frágil</td><td>Batería iPhone</td></tr>
                <tr><td><strong>Software</strong></td><td>Fin de soporte</td><td>Windows XP</td></tr>
                <tr><td><strong>Incompatibilidad</strong></td><td>Nuevo estándar</td><td>Cargador USB-C</td></tr>
                <tr><td><strong>Estética</strong></td><td>Diseño anticuado</td><td>TV "vieja"</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo Histórico:</strong> <strong>Cártel Phoebus (1924–1939)</strong> → Limitó vida de bombillas a <strong>1,000 horas</strong> (antes: 2,500 h).</p>
        </div>

        <div class="visual">
            <img src="assets/img/dimensiones-obsolensencia.png" alt="Dimensiones FTI">
            <p><em>Forma, Tiempo, Intención (FTI). Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Impacto Ambiental 2025</h4>
        <table class="table">
            <thead>
                <tr><th>Indicador</th><th>Valor</th></tr>
            </thead>
            <tbody>
                <tr><td>E-Waste por obsolescencia</td><td>~50 Mt/año</td></tr>
                <tr><td>Reciclaje global</td><td>22.3%</td></tr>
                <tr><td>Metales críticos perdidos</td><td>US$62.5 mil millones</td></tr>
                <tr><td>CO₂ por e-waste</td><td>~50 Mt/año</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/Planned-Obsolescence.jpg" alt="Diagrama obsolescencia">
            <p><em>Diagrama clásico. Fuente: WallStreetMojo.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Ejemplos Famosos</h4>
        <table class="table">
            <thead>
                <tr><th>Producto</th><th>Falla Programada</th><th>Duración</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Bombillas Phoebus</strong></td><td>Filamento débil</td><td>1,000 h</td></tr>
                <tr><td><strong>iPhone 6 (2014)</strong></td><td>Batería degradada</td><td>~500 ciclos</td></tr>
                <tr><td><strong>Impresoras Epson</strong></td><td>Contador interno</td><td>~18,000 páginas</td></tr>
                <tr><td><strong>Nylon DuPont</strong></td><td>Medias que se rompían</td><td>~1 uso</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/curva-vida-util.png" alt="Gráfico obsolescencia">
            <p><em>Curva de vida útil. Fuente: SIMCON Blog.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Leyes y Alternativas (2025)</h4>
        <ul>
            <li><strong>UE:</strong> Obliga <strong>reparabilidad 7 años</strong> (smartphones, lavadoras)</li>
            <li><strong>Francia:</strong> Delito penalizar obsolescencia programada</li>
            <li><strong>Fairphone:</strong> Módulos reemplazables → 7+ años</li>
            <li><strong>Right to Repair:</strong> Acceso a repuestos, manuales</li>
        </ul>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: Ciclo de Obsolescencia Programada</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#1a1a1a"/>

                <!-- Bombilla -->
                <circle cx="200" cy="200" r="60" fill="#FFD700" stroke="#FFA500" stroke-width="4"/>
                <path d="M170 240 L230 240 L215 280 L185 280 Z" fill="#333"/>
                <text x="200" y="190" fill="#8B4513" font-size="16" text-anchor="middle">1,000 h</text>
                <text x="200" y="210" fill="#8B4513" font-size="14" text-anchor="middle">Phoebus</text>

                <!-- Flecha falla -->
                <path d="M260 200 Q320 180 380 200" stroke="#DC143C" stroke-width="8" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <text x="320" y="170" fill="#DC143C" font-size="16" text-anchor="middle">FALLA</text>

                <!-- Basura -->
                <rect x="420" y="150" width="120" height="100" fill="#4B0082" rx="15"/>
                <text x="480" y="190" fill="white" font-size="14" text-anchor="middle">E-WASTE</text>
                <text x="480" y="210" fill="white" font-size="12" text-anchor="middle">62 Mt</text>

                <!-- Alternativa -->
                <circle cx="550" cy="350" r="50" fill="#228B22">
                    <animate attributeName="r" values="50;60;50" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="550" y="345" fill="white" font-size="12" text-anchor="middle">REPARAR</text>
                <text x="550" y="360" fill="white" font-size="12" text-anchor="middle">7 AÑOS</text>

                <!-- Flecha reparación -->
                <path d="M480 250 L520 320" stroke="#32CD32" stroke-width="6" marker-end="url(#arrow-green)">
                    <animate attributeName="stroke-dashoffset" from="60" to="0" dur="1.5s" repeatCount="indefinite"/>
                </path>

                <!-- Flechas -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#DC143C"/>
                    </marker>
                    <marker id="arrow-green" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#32CD32"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#FFD700" font-size="26" text-anchor="middle" font-family="Arial" font-weight="bold">OBSOLESCENCIA PROGRAMADA</text>
                <text x="350" y="90" fill="#FFFFFF" font-size="16" text-anchor="middle">Diseñada para fallar</text>
            </svg>
            <p><em>SVG Animado: De bombilla a basura vs reparación sostenible.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define obsolescencia programada', 'respuesta' => 'Diseño intencional para fallar en X tiempo'],
        ['enunciado' => 'Diferencia con percibida', 'respuesta' => 'Programada: técnica; Percibida: social'],
        ['enunciado' => 'Cártel Phoebus', 'respuesta' => '1924–1939, bombillas 1,000 h'],

        // === APLICADOS ===
        ['enunciado' => 'E-Waste por obsolescencia', 'respuesta' => '~50 Mt/año'],
        ['enunciado' => 'Batería iPhone ciclos', 'respuesta' => '~500 ciclos'],
        ['enunciado' => 'Impresora Epson límite', 'respuesta' => '~18,000 páginas'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Cómo combatirla?', 'respuesta' => 'Right to Repair, diseño modular, leyes'],
        ['enunciado' => '¿Qué es Fairphone?', 'respuesta' => 'Teléfono reparable 7+ años'],
        ['enunciado' => '¿Qué es el delito en Francia?', 'respuesta' => 'Obsolescencia programada'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula vida útil', 'respuesta' => '\\(\\text{Vida útil} = \\frac{\\text{Ciclos diseñados}}{\\text{Uso anual}}\\)'],
        ['enunciado' => 'Valor perdido en e-waste', 'respuesta' => 'US$62.5 mil millones'],
        ['enunciado' => '¿Qué es el contador de impresora?', 'respuesta' => 'Chip que bloquea tras X impresiones']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Obsolescencia programada es...', 'opciones' => ['Accidental', 'Intencional', 'Natural', 'Social'], 'correcta' => 'Intencional'],
        ['pregunta' => 'Cártel Phoebus limitó bombillas a...', 'opciones' => ['1,000 h', '10,000 h', '100 h', '1 h'], 'correcta' => '1,000 h'],
        ['pregunta' => 'Ejemplo típico', 'opciones' => ['Batería iPhone', 'Auto eterno', 'Ropa', 'Nada'], 'correcta' => 'Batería iPhone'],
        ['pregunta' => 'Aumenta...', 'opciones' => ['Residuos', 'Durabilidad', 'Reciclaje', 'Nada'], 'correcta' => 'Residuos'],
        ['pregunta' => 'E-Waste por obsolescencia ≈', 'opciones' => ['50 Mt', '1 Mt', '100 Mt', '0'], 'correcta' => '50 Mt'],
        ['pregunta' => 'Reciclaje global e-waste', 'opciones' => ['80%', '22.3%', '50%', '100%'], 'correcta' => '22.3%'],
        ['pregunta' => 'Impresoras fallan por...', 'opciones' => ['Contador', 'Tinta', 'Papel', 'Nada'], 'correcta' => 'Contador'],
        ['pregunta' => 'Right to Repair es...', 'opciones' => ['Derecho a reparar', 'Derecho a desechar', 'Nada', 'Obligación'], 'correcta' => 'Derecho a reparar'],
        ['pregunta' => 'Fairphone dura ≈', 'opciones' => ['7 años', '1 año', '2 años', '0'], 'correcta' => '7 años'],
        ['pregunta' => 'Francia penaliza...', 'opciones' => ['Obsolescencia programada', 'Reciclaje', 'Nada', 'Moda'], 'correcta' => 'Obsolescencia programada'],

        // === MEDIO (10) ===
        ['pregunta' => 'Cártel Phoebus fundado en...', 'opciones' => ['1924', '1950', '2000', '2020'], 'correcta' => '1924'],
        ['pregunta' => 'Batería iPhone ≈', 'opciones' => ['500 ciclos', '5000', '50', '0'], 'correcta' => '500 ciclos'],
        ['pregunta' => 'Impresora Epson límite ≈', 'opciones' => ['18,000 páginas', '100', '1 millón', '0'], 'correcta' => '18,000 páginas'],
        ['pregunta' => 'UE obliga reparabilidad...', 'opciones' => ['7 años', '1 año', '0', '10 años'], 'correcta' => '7 años'],
        ['pregunta' => 'Obsolescencia software es...', 'opciones' => ['Fin de soporte', 'Falla física', 'Moda', 'Nada'], 'correcta' => 'Fin de soporte'],
        ['pregunta' => 'Nylon DuPont se rompía en...', 'opciones' => ['1 uso', '100 usos', '0', '1000'], 'correcta' => '1 uso'],
        ['pregunta' => 'E-Waste contiene...', 'opciones' => ['Oro, litio', 'Solo plástico', 'Nada', 'Basura'], 'correcta' => 'Oro, litio'],
        ['pregunta' => 'CO₂ por e-waste ≈', 'opciones' => ['50 Mt/año', '1 Mt', '100 Mt', '0'], 'correcta' => '50 Mt/año'],
        ['pregunta' => 'Valor perdido en e-waste', 'opciones' => ['US$62.5 mil millones', '0', '1 millón', '1000'], 'correcta' => 'US$62.5 mil millones'],
        ['pregunta' => 'Diseño modular permite...', 'opciones' => ['Reparar fácil', 'Tirar', 'Quemar', 'Nada'], 'correcta' => 'Reparar fácil'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula vida útil', 'opciones' => ['Ciclos / Uso anual', 'Uso / Ciclos', 'Ciclos × Uso', '100 - Ciclos'], 'correcta' => 'Ciclos / Uso anual'],
        ['pregunta' => 'Bombilla antes de Phoebus duraba...', 'opciones' => ['2,500 h', '100 h', '10,000 h', '1 h'], 'correcta' => '2,500 h'],
        ['pregunta' => 'E-Waste crecerá a...', 'opciones' => ['82 Mt en 2030', '10 Mt', '1 Mt', '0'], 'correcta' => '82 Mt en 2030'],
        ['pregunta' => '1 smartphone contiene ≈', 'opciones' => ['0.034 g oro', '1 g', '10 g', '0 g'], 'correcta' => '0.034 g oro'],
        ['pregunta' => 'Contador de impresora es...', 'opciones' => ['Chip físico', 'Software', 'Mito', 'Nada'], 'correcta' => 'Chip físico'],
        ['pregunta' => 'Ley francesa desde...', 'opciones' => ['2015', '2000', '2020', '1990'], 'correcta' => '2015'],
        ['pregunta' => 'Fairphone módulos...', 'opciones' => ['10+', '1', '0', '5'], 'correcta' => '10+'],
        ['pregunta' => 'Obsolescencia programada es delito en...', 'opciones' => ['Francia', 'EE.UU.', 'China', 'Ninguno'], 'correcta' => 'Francia'],
        ['pregunta' => 'Meta UE e-waste reciclaje 2030', 'opciones' => ['65%', '100%', '0%', '22%'], 'correcta' => '65%'],
        ['pregunta' => 'Phoebus incluía a...', 'opciones' => ['Osram, Philips', 'Apple', 'Samsung', 'Tesla'], 'correcta' => 'Osram, Philips']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Fast Fashion (Huella Hídrica, Microplásticos, Emisiones, Trabajo Forzado, Alternativas)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'fast-fashion',
    'titulo' => 'Fast Fashion: La Moda que Está Matando al Planeta',
    'contenido' => '
        <h3>¿Qué es el Fast Fashion?</h3>
        <p>El <strong>fast fashion</strong> es la <strong>producción masiva, rápida y barata</strong> de ropa que sigue tendencias efímeras. <strong>52 micro-temporadas al año</strong> → <strong>100 mil millones de prendas</strong> producidas.</p>
        <p><strong>Impacto:</strong> 2ª industria más contaminante del mundo.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Impactos Ambientales Clave</h4>
        <table class="table">
            <thead>
                <tr><th>Impacto</th><th>Dato 2025</th><th>Fuente</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Emisiones GHG</strong></td><td>10% global</td><td>UNEP</td></tr>
                <tr><td><strong>Huella hídrica</strong></td><td>79 mil millones m³</td><td>WWF</td></tr>
                <tr><td><strong>Microplásticos</strong></td><td>35% océano</td><td>IUCN</td></tr>
                <tr><td><strong>Residuos textiles</strong></td><td>92 Mt/año</td><td>Ellen MacArthur</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>1 camiseta de algodón</strong> → <strong>2,700 L agua</strong> = 3 años de beber de una persona.</p>
        </div>

        <div class="visual">
            <img src="assets/img/impacto-ambiente.webp" alt="Impacto ambiental fast fashion">
            <p><em>Infografía completa. Fuente: SANVT.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Ciclo de Vida de una Prenda Fast Fashion</h4>
        <p>\\[ \\text{Producción} \\to \\text{Transporte} \\to \\text{Uso (7-10 lavados)} \\to \\text{Basura} \\]</p>

        <table class="table">
            <thead>
                <tr><th>Etapa</th><th>Impacto</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Algodón</strong></td><td>2,700 L agua, pesticidas</td></tr>
                <tr><td><strong>Poliéster</strong></td><td>Petróleo, microplásticos</td></tr>
                <tr><td><strong>Tinte</strong></td><td>Químicos tóxicos → ríos</td></tr>
                <tr><td><strong>Transporte</strong></td><td>Aviones → 1.2 Gt CO₂</td></tr>
                <tr><td><strong>Desecho</strong></td><td>92 Mt → vertederos/incineración</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/ventasvsuso.jpg" alt="Ventas vs uso">
            <p><em>Ventas ↑, uso ↓. Fuente: Earth.Org.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/gasto-anual-ropa.jpg" alt="Gasto por persona">
            <p><em>Gasto anual en ropa. Fuente: BBC.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Empresas Fast Fashion (2025)</h4>
        <table class="table">
            <thead>
                <tr><th>Marca</th><th>Prendas/año</th><th>Huella hídrica</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Shein</strong></td><td>~10,000/día</td><td>6,000 L/prenda</td></tr>
                <tr><td><strong>Zara</strong></td><td>~450 millones</td><td>2,700 L/camiseta</td></tr>
                <tr><td><strong>H&M</strong></td><td>~3,000 millones</td><td>Alta en poliéster</td></tr>
                <tr><td><strong>Primark</strong></td><td>~1,000 millones</td><td>Bajos salarios</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/economia-texti.jpg" alt="Ellen MacArthur textiles">
            <p><em>Economía textil circular. Fuente: Ellen MacArthur Foundation.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/polucion-textil.jpg" alt="Greenpeace textile waste">
            <p><em>Crisis de residuos textiles. Fuente: Greenpeace.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Alternativas Sostenibles</h4>
        <ul>
            <li><strong>Moda lenta:</strong> Patagonia, Everlane</li>
            <li><strong>Second-hand:</strong> ThredUp, Vinted</li>
            <li><strong>Alquiler:</strong> Rent the Runway</li>
            <li><strong>Upcycling:</strong> Ropa reciclada</li>
        </ul>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: Ciclo de Fast Fashion vs Sostenible</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#87CEEB" opacity="0.1"/>

                <!-- Fábrica -->
                <rect x="50" y="150" width="100" height="120" fill="#8B4513" rx="10"/>
                <text x="100" y="200" fill="white" font-size="14" text-anchor="middle">FÁBRICA</text>
                <text x="100" y="220" fill="white" font-size="12" text-anchor="middle">10,000/día</text>

                <!-- Avión -->
                <path d="M160 210 L250 190 L240 180 L250 170 L160 190 Z" fill="#4682B4"/>
                <text x="205" y="160" fill="#000" font-size="12">Avión</text>

                <!-- Tienda -->
                <rect x="280" y="140" width="100" height="140" fill="#FF6347" rx="10"/>
                <text x="330" y="190" fill="white" font-size="14" text-anchor="middle">TIENDA</text>
                <text x="330" y="210" fill="white" font-size="12" text-anchor="middle">7 lavados</text>

                <!-- Basura -->
                <path d="M420 200 L360 280 L480 280 Z" fill="#4B0082"/>
                <text x="420" y="240" fill="white" font-size="14" text-anchor="middle">VERTEDERO</text>
                <text x="420" y="260" fill="white" font-size="12" text-anchor="middle">92 Mt</text>

                <!-- Flechas rojas -->
                <path d="M150 210 Q200 180 280 190" stroke="#DC143C" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M380 210 Q400 240 420 260" stroke="#DC143C" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="80" to="0" dur="2s" repeatCount="indefinite"/>
                </path>

                <!-- Alternativa sostenible -->
                <circle cx="200" cy="380" r="50" fill="#228B22">
                    <animate attributeName="r" values="50;60;50" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="200" y="375" fill="white" font-size="12" text-anchor="middle">SECOND</text>
                <text x="200" y="390" fill="white" font-size="12" text-anchor="middle">HAND</text>

                <circle cx="500" cy="380" r="50" fill="#32CD32">
                    <animate attributeName="r" values="50;60;50" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="500" y="375" fill="white" font-size="12" text-anchor="middle">UPCYCLE</text>
                <text x="500" y="390" fill="white" font-size="12" text-anchor="middle">RENT</text>

                <!-- Flechas verdes -->
                <path d="M330 280 Q250 340 200 370" stroke="#32CD32" stroke-width="6" fill="none" marker-end="url(#arrow-green)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2.5s" repeatCount="indefinite"/>
                </path>
                <path d="M380 280 Q450 340 500 370" stroke="#32CD32" stroke-width="6" fill="none" marker-end="url(#arrow-green)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2.5s" repeatCount="indefinite"/>
                </path>

                <!-- Flechas -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#DC143C"/>
                    </marker>
                    <marker id="arrow-green" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#32CD32"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#FF1493" font-size="26" text-anchor="middle" font-family="Arial" font-weight="bold">FAST FASHION</text>
                <text x="350" y="90" fill="#333" font-size="16" text-anchor="middle">De fábrica a basura en 3 meses</text>
            </svg>
            <p><em>SVG Animado: Ciclo lineal vs alternativas circulares.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define fast fashion', 'respuesta' => 'Producción rápida y barata de ropa de moda'],
        ['enunciado' => 'Emisiones globales de moda', 'respuesta' => '10% GHG'],
        ['enunciado' => 'Huella hídrica de 1 camiseta', 'respuesta' => '2,700 L'],

        // === APLICADOS ===
        ['enunciado' => 'Residuos textiles/año', 'respuesta' => '92 millones toneladas'],
        ['enunciado' => 'Microplásticos de lavado', 'respuesta' => '35% del total oceánico'],
        ['enunciado' => 'Prendas producidas/año', 'respuesta' => '100 mil millones'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Cómo reducir impacto?', 'respuesta' => 'Comprar menos, second-hand, alquilar'],
        ['enunciado' => '¿Qué es upcycling?', 'respuesta' => 'Convertir ropa vieja en nueva de mayor valor'],
        ['enunciado' => '¿Qué es moda lenta?', 'respuesta' => 'Producción ética, duradera, sostenible'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula huella hídrica textil', 'respuesta' => '\\(\\text{HH} = \\sum (\\text{materia prima} \\times \\text{L/kg})\\)'],
        ['enunciado' => 'CO₂ por transporte moda', 'respuesta' => '1.2 Gt/año'],
        ['enunciado' => '¿Qué es el Greenwashing en moda?', 'respuesta' => 'Falsa sostenibilidad']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Fast fashion produce...', 'opciones' => ['100 mil millones prendas', '1 millón', '0', '10'], 'correcta' => '100 mil millones prendas'],
        ['pregunta' => 'Emisiones moda vs global', 'opciones' => ['10%', '1%', '50%', '0%'], 'correcta' => '10%'],
        ['pregunta' => '1 camiseta usa...', 'opciones' => ['2,700 L agua', '10 L', '100 L', '0'], 'correcta' => '2,700 L agua'],
        ['pregunta' => 'Residuos textiles/año', 'opciones' => ['92 Mt', '1 Mt', '1000 Mt', '0'], 'correcta' => '92 Mt'],
        ['pregunta' => 'Microplásticos de...', 'opciones' => ['Lavado sintéticos', 'Algodón', 'Lana', 'Nada'], 'correcta' => 'Lavado sintéticos'],
        ['pregunta' => 'Shein lanza...', 'opciones' => ['10,000/día', '10/año', '0', '1'], 'correcta' => '10,000/día'],
        ['pregunta' => 'Moda emite más CO₂ que...', 'opciones' => ['Aviación + marítimo', 'Agricultura', 'Energía', 'Nada'], 'correcta' => 'Aviación + marítimo'],
        ['pregunta' => 'Second-hand reduce...', 'opciones' => ['Huella', 'Aumenta', 'Igual', 'Cero'], 'correcta' => 'Huella'],
        ['pregunta' => 'Upcycling es...', 'respuesta' => 'Valor ↑'],
        ['pregunta' => 'Alternativa sostenible', 'opciones' => ['Alquiler ropa', 'Más compra', 'Basura', 'Nada'], 'correcta' => 'Alquiler ropa'],

        // === MEDIO (10) ===
        ['pregunta' => 'Huella hídrica moda ≈', 'opciones' => ['79 mil millones m³', '1 millón', '0', '1000'], 'correcta' => '79 mil millones m³'],
        ['pregunta' => 'Prendas usadas antes de tirar', 'opciones' => ['7-10 veces', '100 veces', '1 vez', '0'], 'correcta' => '7-10 veces'],
        ['pregunta' => 'Poliéster viene de...', 'opciones' => ['Petróleo', 'Algodón', 'Lana', 'Nada'], 'correcta' => 'Petróleo'],
        ['pregunta' => 'Tinte contamina...', 'opciones' => ['Ríos', 'Aire', 'Suelo', 'Nada'], 'correcta' => 'Ríos'],
        ['pregunta' => 'Zara produce...', 'opciones' => ['450 millones/año', '1 millón', '0', '10'], 'correcta' => '450 millones/año'],
        ['pregunta' => 'Patagonia es...', 'opciones' => ['Moda lenta', 'Fast fashion', 'Nada', 'Caro'], 'correcta' => 'Moda lenta'],
        ['pregunta' => 'ThredUp es...', 'opciones' => ['Second-hand', 'Nueva', 'Basura', 'Nada'], 'correcta' => 'Second-hand'],
        ['pregunta' => 'Greenwashing es...', 'opciones' => ['Falsa sostenibilidad', 'Real', 'Nada', 'Bueno'], 'correcta' => 'Falsa sostenibilidad'],
        ['pregunta' => 'Transporte moda emite...', 'opciones' => ['1.2 Gt CO₂', '0', '1 Mt', '1000'], 'correcta' => '1.2 Gt CO₂'],
        ['pregunta' => 'Meta UE reciclaje textil 2030', 'opciones' => ['35%', '100%', '0%', '10%'], 'correcta' => '35%'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula huella hídrica', 'opciones' => ['\\sum (materia × L/kg)', 'materia / L', 'L - materia', '100'], 'correcta' => '\\sum (materia × L/kg)'],
        ['pregunta' => '1 kg algodón usa...', 'opciones' => ['10,000 L', '100 L', '1 L', '0'], 'correcta' => '10,000 L'],
        ['pregunta' => 'Microplásticos por lavado...', 'opciones' => ['500,000/año', '0', '1', '1000'], 'correcta' => '500,000/año'],
        ['pregunta' => 'Residuos textiles crecen a...', 'opciones' => ['120 Mt en 2030', '0', '1 Mt', '92 Mt'], 'correcta' => '120 Mt en 2030'],
        ['pregunta' => 'Poliéster representa...', 'opciones' => ['60% fibras', '10%', '0%', '100%'], 'correcta' => '60% fibras'],
        ['pregunta' => 'Agua por jeans ≈', 'opciones' => ['8,000 L', '100 L', '0', '1 L'], 'correcta' => '8,000 L'],
        ['pregunta' => 'Second-hand ↓ emisiones en...', 'opciones' => ['60%', '10%', '0%', '100%'], 'correcta' => '60%'],
        ['pregunta' => 'Ellen MacArthur propone...', 'opciones' => ['Economía circular textil', 'Más fast', 'Nada', 'Lineal'], 'correcta' => 'Economía circular textil'],
        ['pregunta' => 'Meta global reciclaje textil', 'opciones' => ['<1%', '50%', '100%', '0%'], 'correcta' => '<1%'],
        ['pregunta' => 'Fast fashion emplea a...', 'opciones' => ['75 millones', '0', '1', '1000'], 'correcta' => '75 millones']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Esclavitud Moderna (Trabajo Forzado, Cadenas Suministro, Cobalto, Moda, Leyes)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'esclavitud-moderna',
    'titulo' => 'Esclavitud Moderna: El Costo Humano y Ambiental de Nuestros Productos',
    'contenido' => '
        <h3>¿Qué es la Esclavitud Moderna?</h3>
        <p>La <strong>esclavitud moderna</strong> incluye <strong>trabajo forzado, tráfico humano, servidumbre por deudas, matrimonio forzado y trabajo infantil</strong>. <strong>50 millones de personas</strong> en 2025 (Global Slavery Index).</p>
        <p><strong>Relación con ecosistemas:</strong> Prácticas extractivas insostenibles → deforestación, contaminación, pérdida de biodiversidad.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Formas de Esclavitud Moderna</h4>
        <table class="table">
            <thead>
                <tr><th>Forma</th><th>Personas (millones)</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Trabajo forzado</strong></td><td>28</td><td>Minería cobalto</td></tr>
                <tr><td><strong>Matrimonio forzado</strong></td><td>22</td><td>Asia del Sur</td></tr>
                <tr><td><strong>Tráfico sexual</strong></td><td>6.3</td><td>Turismo</td></tr>
                <tr><td><strong>Trabajo infantil</strong></td><td>160</td><td>Agricultura</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>70% del cobalto mundial</strong> (baterías EV) viene de <strong>República Democrática del Congo</strong>, con <strong>40,000 niños</strong> en minas artesanales.</p>
        </div>

        <div class="visual">
            <img src="assets/img/trabajo-forzoso-en-el-mundo.png.webp" alt="Mapa riesgo esclavitud">
            <p><em>Riesgo global. Fuente: Versed AI.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Industrias de Alto Riesgo (2025)</h4>
        <table class="table">
            <thead>
                <tr><th>Industria</th><th>Producto</th><th>Impacto Ambiental</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Moda</strong></td><td>Algodón, poliéster</td><td>Deforestación, microplásticos</td></tr>
                <tr><td><strong>Minería</strong></td><td>Cobalto, oro</td><td>Contaminación ríos, mercurio</td></tr>
                <tr><td><strong>Agricultura</strong></td><td>Cacao, café</td><td>Deforestación, pesticidas</td></tr>
                <tr><td><strong>Construcción</strong></td><td>Ladrillos, Qatar</td><td>Emisiones, erosión</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/productos-esclavitud.png" alt="Mapa productos esclavitud">
            <p><em>Productos de esclavitud. Fuente: RESPECT.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/modern-slavery.jpg" alt="Modern Slavery Act">
            <p><em>Impacto de la ley. Fuente: Norton Rose Fulbright.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Impacto Ambiental Directo</h4>
        <ul>
            <li><strong>Minería artesanal:</strong> 1,500 t mercurio/año → ríos</li>
            <li><strong>Deforestación:</strong> 20% por agricultura forzada</li>
            <li><strong>Contaminación:</strong> químicos en algodón → cáncer</li>
        </ul>

        <div class="visual">
            <img src="assets/img/indice-global-esclavitud.jpeg" alt="Global Slavery Index 2023">
            <p><em>Índice Global de Esclavitud. Fuente: Walk Free.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/esclavitud-infantil.png" alt="ILO trabajo infantil">
            <p><em>Trabajo infantil. Fuente: OIT.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Leyes y Soluciones (2025)</h4>
        <ul>
            <li><strong>UK Modern Slavery Act (2015):</strong> Empresas > £36M declaran riesgos</li>
            <li><strong>UE Due Diligence (2026):</strong> Obligatoria para grandes empresas</li>
            <li><strong>Blockchain:</strong> Trazabilidad (IBM Food Trust)</li>
            <li><strong>Certificaciones:</strong> Fair Trade, Rainforest Alliance</li>
        </ul>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: Cadena de Suministro con Esclavitud</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#2F4F4F"/>

                <!-- Mina -->
                <circle cx="100" cy="200" r="60" fill="#8B4513" stroke="#654321" stroke-width="4"/>
                <text x="100" y="190" fill="white" font-size="14" text-anchor="middle">MINA</text>
                <text x="100" y="210" fill="white" font-size="12" text-anchor="middle">Cobalto</text>

                <!-- Niño trabajador -->
                <circle cx="100" cy="280" r="25" fill="#DC143C"/>
                <text x="100" y="285" fill="white" font-size="10" text-anchor="middle">Niño</text>

                <!-- Fábrica -->
                <rect x="220" y="160" width="100" height="100" fill="#696969" rx="10"/>
                <text x="270" y="200" fill="white" font-size="14" text-anchor="middle">FÁBRICA</text>
                <text x="270" y="220" fill="white" font-size="12" text-anchor="middle">Batería</text>

                <!-- Tienda -->
                <rect x="400" y="140" width="120" height="140" fill="#228B22" rx="15"/>
                <text x="460" y="190" fill="white" font-size="14" text-anchor="middle">TIENDA</text>
                <text x="460" y="210" fill="white" font-size="12" text-anchor="middle">EV</text>

                <!-- Consumidor -->
                <circle cx="580" cy="210" r="40" fill="#FFD700"/>
                <text x="580" y="215" fill="#8B4513" font-size="12" text-anchor="middle">Tú</text>

                <!-- Flechas rojas -->
                <path d="M160 200 Q200 180 220 200" stroke="#DC143C" stroke-width="8" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="80" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M320 210 Q360 200 400 200" stroke="#DC143C" stroke-width="8" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="80" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M520 200 L560 210" stroke="#DC143C" stroke-width="8" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="40" to="0" dur="1.5s" repeatCount="indefinite"/>
                </path>

                <!-- Alternativa ética -->
                <circle cx="350" cy="380" r="60" fill="#32CD32">
                    <animate attributeName="r" values="60;70;60" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="370" fill="white" font-size="14" text-anchor="middle">FAIR</text>
                <text x="350" y="390" fill="white" font-size="12" text-anchor="middle">TRADE</text>

                <!-- Flecha verde -->
                <path d="M270 260 Q300 330 350 360" stroke="#32CD32" stroke-width="6" fill="none" marker-end="url(#arrow-green)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2.5s" repeatCount="indefinite"/>
                </path>

                <!-- Flechas -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#DC143C"/>
                    </marker>
                    <marker id="arrow-green" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#32CD32"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#DC143C" font-size="26" text-anchor="middle" font-family="Arial" font-weight="bold">ESCLAVITUD MODERNA</text>
                <text x="350" y="90" fill="#FFFFFF" font-size="16" text-anchor="middle">Oculta en tu batería</text>
            </svg>
            <p><em>SVG Animado: Cadena de suministro con trabajo infantil vs alternativa ética.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define esclavitud moderna', 'respuesta' => 'Trabajo forzado, tráfico, servidumbre por deudas'],
        ['enunciado' => 'Personas afectadas 2025', 'respuesta' => '50 millones'],
        ['enunciado' => 'Industria más riesgosa', 'respuesta' => 'Minería (cobalto)'],

        // === APLICADOS ===
        ['enunciado' => 'Niños en minas cobalto', 'respuesta' => '40,000'],
        ['enunciado' => '% cobalto de RDC', 'respuesta' => '70%'],
        ['enunciado' => 'Mercurio minería artesanal', 'respuesta' => '1,500 t/año'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Cómo combatirla?', 'respuesta' => 'Due diligence, blockchain, certificaciones'],
        ['enunciado' => '¿Qué es Fair Trade?', 'respuesta' => 'Comercio justo, sin explotación'],
        ['enunciado' => '¿Qué es due diligence?', 'respuesta' => 'Auditoría de riesgos en cadena suministro'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula riesgo esclavitud', 'respuesta' => '\\(\\text{Riesgo} = \\text{Industria} \\times \\text{País} \\times \\text{Opacidad}\\)',],
        ['enunciado' => 'Ley UK desde', 'respuesta' => '2015'],
        ['enunciado' => '¿Qué es el Global Slavery Index?', 'respuesta' => 'Informe anual de Walk Free']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Personas en esclavitud moderna', 'opciones' => ['50 millones', '1 millón', '0', '100'], 'correcta' => '50 millones'],
        ['pregunta' => 'Forma más común', 'opciones' => ['Trabajo forzado', 'Voluntario', 'Pagado', 'Nada'], 'correcta' => 'Trabajo forzado'],
        ['pregunta' => 'Cobalto para baterías viene de...', 'opciones' => ['RDC', 'EE.UU.', 'China', 'Europa'], 'correcta' => 'RDC'],
        ['pregunta' => 'Niños en minas cobalto', 'opciones' => ['40,000', '0', '1', '1000'], 'correcta' => '40,000'],
        ['pregunta' => 'Industria moda usa...', 'opciones' => ['Trabajo forzado', 'Solo robots', 'Nada', 'Pagado'], 'correcta' => 'Trabajo forzado'],
        ['pregunta' => 'Mercurio en minería...', 'opciones' => ['1,500 t/año', '0', '1 t', '1000 t'], 'correcta' => '1,500 t/año'],
        ['pregunta' => 'Fair Trade evita...', 'opciones' => ['Esclavitud', 'Todo', 'Nada', 'Lucro'], 'correcta' => 'Esclavitud'],
        ['pregunta' => 'Blockchain sirve para...', 'opciones' => ['Trazabilidad', 'Ocultar', 'Nada', 'Lucro'], 'correcta' => 'Trazabilidad'],
        ['pregunta' => 'Ley UK obliga a...', 'opciones' => ['Declarar riesgos', 'Ignorar', 'Nada', 'Lucro'], 'correcta' => 'Declarar riesgos'],
        ['pregunta' => 'Solución clave', 'opciones' => ['Transparencia', 'Opacidad', 'Nada', 'Silencio'], 'correcta' => 'Transparencia'],

        // === MEDIO (10) ===
        ['pregunta' => 'Global Slavery Index por...', 'opciones' => ['Walk Free', 'ONU', 'UE', 'EE.UU.'], 'correcta' => 'Walk Free'],
        ['pregunta' => '% cobalto mundial RDC', 'opciones' => ['70%', '10%', '0%', '100%'], 'correcta' => '70%'],
        ['pregunta' => 'Agricultura con esclavitud...', 'opciones' => ['Cacao, café', 'Solo trigo', 'Nada', 'Carne'], 'correcta' => 'Cacao, café'],
        ['pregunta' => 'Deforestación por esclavitud...', 'opciones' => ['20%', '0%', '1%', '100%'], 'correcta' => '20%'],
        ['pregunta' => 'UE due diligence desde...', 'opciones' => ['2026', '2020', '2030', '2010'], 'correcta' => '2026'],
        ['pregunta' => 'Ladrillos en Qatar...', 'opciones' => ['Trabajo forzado', 'Pagado', 'Nada', 'Voluntario'], 'correcta' => 'Trabajo forzado'],
        ['pregunta' => 'Certificación ética', 'opciones' => ['Rainforest Alliance', 'ISO 9001', 'Nada', 'CE'], 'correcta' => 'Rainforest Alliance'],
        ['pregunta' => 'Tráfico sexual afecta...', 'opciones' => ['6.3 millones', '0', '1', '1000'], 'correcta' => '6.3 millones'],
        ['pregunta' => 'Matrimonio forzado en...', 'opciones' => ['Asia del Sur', 'Europa', 'EE.UU.', 'África'], 'correcta' => 'Asia del Sur'],
        ['pregunta' => 'Trabajo infantil global', 'opciones' => ['160 millones', '1 millón', '0', '1000'], 'correcta' => '160 millones'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula riesgo esclavitud', 'opciones' => ['Industria × País × Opacidad', 'Suma', 'Resta', 'División'], 'correcta' => 'Industria × País × Opacidad'],
        ['pregunta' => 'Ley UK desde', 'opciones' => ['2015', '2000', '2020', '1990'], 'correcta' => '2015'],
        ['pregunta' => 'Umbral UK para declarar', 'opciones' => ['£36M', '£1M', '£100M', '£0'], 'correcta' => '£36M'],
        ['pregunta' => 'Blockchain en alimentos por...', 'opciones' => ['IBM', 'Apple', 'Amazon', 'Google'], 'correcta' => 'IBM'],
        ['pregunta' => 'Esclavitud moderna creció desde...', 'opciones' => ['2016 (+25%)', 'Disminuyó', 'Igual', '0'], 'correcta' => '2016 (+25%)'],
        ['pregunta' => 'País con más esclavitud absoluta', 'opciones' => ['India', 'EE.UU.', 'China', 'Brasil'], 'correcta' => 'India'],
        ['pregunta' => 'País con más por habitante', 'opciones' => ['Corea del Norte', 'EE.UU.', 'UE', 'Japón'], 'correcta' => 'Corea del Norte'],
        ['pregunta' => 'OIT estima trabajo forzado genera...', 'opciones' => ['US$236 mil millones/año', '0', '1 millón', '1000'], 'correcta' => 'US$236 mil millones/año'],
        ['pregunta' => 'Meta ODS 8.7', 'opciones' => ['Eliminar trabajo infantil 2025', '2030', '2050', 'Nunca'], 'correcta' => '2025'],
        ['pregunta' => 'Walk Free fundado por...', 'opciones' => ['Andrew Forrest', 'Bill Gates', 'Elon Musk', 'Jeff Bezos'], 'correcta' => 'Andrew Forrest']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Efecto Invernadero Natural (GHG, Balance Energético, Temperatura Habitable)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'efecto-invernadero-natural',
    'titulo' => 'Efecto Invernadero Natural: El Escudo Térmico de la Vida',
    'contenido' => '
        <h3>¿Qué es el Efecto Invernadero Natural?</h3>
        <p>El <strong>efecto invernadero natural</strong> es un <strong>proceso físico esencial</strong> donde los <strong>gases de efecto invernadero (GEI)</strong> en la atmósfera <strong>absorben y reemiten radiación infrarroja</strong>, atrapando calor y manteniendo la temperatura promedio de la Tierra en <strong>+15°C</strong>.</p>
        <p><strong>Sin él:</strong> <strong>-18°C</strong> → océanos congelados, sin vida.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Gases de Efecto Invernadero Naturales</h4>
        <table class="table">
            <thead>
                <tr><th>Gas</th><th>Concentración</th><th>Contribución</th><th>Fuente Natural</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Vapor de agua (H₂O)</strong></td><td>0.1–4%</td><td>~60%</td><td>Evaporación océanos</td></tr>
                <tr><td><strong>CO₂</strong></td><td>280 ppm (preindustrial)</td><td>~20%</td><td>Respiración, volcanes</td></tr>
                <tr><td><strong>Metano (CH₄)</strong></td><td>0.7 ppm</td><td>~15%</td><td>Pantanos, termitas</td></tr>
                <tr><td><strong>Óxido nitroso (N₂O)</strong></td><td>0.3 ppm</td><td>~5%</td><td>Suelos, océanos</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> El <strong>vapor de agua</strong> es el GEI más abundante y potente. Sin él, la Tierra perdería ~33°C.</p>
        </div>

        <div class="visual">
            <img src="assets/img/efecto-invernadero_natural_humano.png" alt="Efecto natural vs mejorado">
            <p><em>Natural vs antropogénico. Fuente: MrGeogWagg.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Balance Energético de la Tierra</h4>
        <p>Fórmula simplificada del efecto invernadero:</p>
        <p>\\[ \\Delta T = \\frac{S(1 - A)}{4\\sigma} \\times \\text{Forzante GEI} \\]</p>
        <p>Donde:</p>
        <ul>
            <li><strong>S</strong> = Constante solar (~1361 W/m²)</li>
            <li><strong>A</strong> = Albedo (~0.3)</li>
            <li><strong>σ</strong> = Constante de Stefan-Boltzmann</li>
        </ul>

        <table class="table">
            <thead>
                <tr><th>Parámetro</th><th>Valor</th></tr>
            </thead>
            <tbody>
                <tr><td>Temperatura sin atmósfera</td><td>-18°C</td></tr>
                <tr><td>Temperatura real</td><td>+15°C</td></tr>
                <tr><td><strong>ΔT natural</strong></td><td><strong>+33°C</strong></td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/esquema-GEI.png" alt="Esquema GEI">
            <p><em>Absorción y reemisión. Fuente: Smith College.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/flujo-energetico-efecto-invernadero.jpg" alt="Flujo energético">
            <p><em>Balance radiativo. Fuente: EPA/Energy Education.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Ciclo Natural del Carbono</h4>
        <p>El CO₂ natural se regula por:</p>
        <ul>
            <li><strong>Fotosíntesis</strong>: 120 GtC/año</li>
            <li><strong>Respiración</strong>: 60 GtC/año</li>
            <li><strong>Océanos</strong>: Absorben 90 GtC/año</li>
        </ul>

        <div class="visual">
            <img src="assets/img/ciclo-carbono-IPCC.png" alt="Ciclo del carbono IPCC">
            <p><em>Ciclo del carbono. Fuente: IPCC AR6.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/carbon_cycle.jpg" alt="Ciclo NASA">
            <p><em>Ciclo del carbono global. Fuente: NASA.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Diferencia con el Efecto Antropogénico</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>CO₂</th><th>ΔT</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Natural</strong></td><td>280 ppm</td><td>+33°C</td></tr>
                <tr><td><strong>Antropogénico (2025)</strong></td><td>425 ppm</td><td>+1.2°C</td></tr>
                <tr><td><strong>Total</strong></td><td>425 ppm</td><td><strong>+34.2°C</strong></td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: Efecto Invernadero Natural</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo espacio -->
                <rect x="0" y="0" width="700" height="500" fill="#000814"/>

                <!-- Sol -->
                <circle cx="100" cy="100" r="60" fill="#FFD700" stroke="#FFA500" stroke-width="8">
                    <animate attributeName="r" values="60;65;60" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="100" y="80" fill="#FFF" font-size="14" text-anchor="middle">Sol</text>

                <!-- Rayos solares -->
                <path d="M160 100 L300 200" stroke="#FFFF00" stroke-width="4">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M160 120 L310 220" stroke="#FFFF00" stroke-width="4">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>

                <!-- Tierra -->
                <circle cx="350" cy="250" r="80" fill="#228B22" stroke="#006400" stroke-width="4"/>
                <circle cx="330" cy="230" r="20" fill="#4169E1"/> <!-- océano
                <circle cx="370" cy="240" r="15" fill="#8B4513"/> <!-- continente
                <text x="350" y="255" fill="white" font-size="16" text-anchor="middle">+15°C</text>

                <!-- Atmósfera -->
                <ellipse cx="350" cy="250" rx="120" ry="40" fill="none" stroke="#87CEEB" stroke-width="60" opacity="0.3"/>
                <text x="350" y="180" fill="#87CEEB" font-size="14" text-anchor="middle">Atmósfera</text>

                <!-- GHG moléculas -->
                <circle cx="280" cy="200" r="12" fill="#DC143C" opacity="0.8">
                    <animate attributeName="cy" values="200;190;200" dur="1.5s" repeatCount="indefinite"/>
                </circle>
                <text x="280" y="205" fill="white" font-size="10" text-anchor="middle">CO₂</text>

                <circle cx="400" cy="210" r="10" fill="#FF4500" opacity="0.8">
                    <animate attributeName="cy" values="210;200;210" dur="1.8s" repeatCount="indefinite"/>
                </circle>
                <text x="400" y="215" fill="white" font-size="9" text-anchor="middle">CH₄</text>

                <!-- Rayos IR atrapados -->
                <path d="M350 330 L350 300" stroke="#FF1493" stroke-width="4" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="30" to="0" dur="1s" repeatCount="indefinite"/>
                </path>
                <text x="360" y="315" fill="#FF1493" font-size="12">IR atrapado</text>

                <!-- Sin GEI (fantasma) -->
                <circle cx="550" cy="250" r="80" fill="#87CEEB" stroke="#4682B4" stroke-width="4" opacity="0.4"/>
                <text x="550" y="255" fill="#00008B" font-size="14" text-anchor="middle">-18°C</text>
                <text x="550" y="280" fill="#00008B" font-size="10" text-anchor="middle">Sin GEI</text>

                <!-- Flecha -->
                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="5" orient="auto">
                        <path d="M0,0 L0,10 L10,5 z" fill="#FF1493"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#FFD700" font-size="26" text-anchor="middle" font-family="Arial" font-weight="bold">EFECTO INVERNADERO NATURAL</text>
                <text x="350" y="90" fill="#FFFFFF" font-size="16" text-anchor="middle">+33°C de diferencia = Vida posible</text>
            </svg>
            <p><em>SVG Animado: Sol → Tierra → GEI atrapan calor → +15°C vs -18°C sin atmósfera.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define efecto invernadero natural', 'respuesta' => 'GEI atrapan calor → +15°C'],
        ['enunciado' => 'Temperatura sin GEI', 'respuesta' => '-18°C'],
        ['enunciado' => 'GEI más abundante', 'respuesta' => 'Vapor de agua'],

        // === APLICADOS ===
        ['enunciado' => 'ΔT natural', 'respuesta' => '+33°C'],
        ['enunciado' => 'CO₂ preindustrial', 'respuesta' => '280 ppm'],
        ['enunciado' => 'Contribución vapor agua', 'respuesta' => '~60%'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Por qué es necesario?', 'respuesta' => 'Océanos líquidos, vida posible'],
        ['enunciado' => '¿Qué pasa sin CO₂?', 'respuesta' => 'Congelación total'],
        ['enunciado' => '¿Qué regula CO₂ natural?', 'respuesta' => 'Fotosíntesis, océanos'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula balance energético', 'respuesta' => '\\(\\Delta T = \\frac{S(1-A)}{4\\sigma} \\times F\\)'],
        ['enunciado' => 'Constante solar S', 'respuesta' => '1361 W/m²'],
        ['enunciado' => 'Albedo Tierra A', 'respuesta' => '0.3']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Efecto invernadero natural mantiene...', 'opciones' => ['+15°C', '-18°C', '0°C', '+50°C'], 'correcta' => '+15°C'],
        ['pregunta' => 'Sin él, temperatura sería...', 'opciones' => ['-18°C', '+15°C', '+30°C', '0°C'], 'correcta' => '-18°C'],
        ['pregunta' => 'GEI principal', 'opciones' => ['Vapor agua', 'Oxígeno', 'Nitrógeno', 'Argón'], 'correcta' => 'Vapor agua'],
        ['pregunta' => 'CO₂ natural provenía de...', 'opciones' => ['Volcanes', 'Fábricas', 'Autos', 'Aviones'], 'correcta' => 'Volcanes'],
        ['pregunta' => 'ΔT por efecto invernadero', 'opciones' => ['+33°C', '+1°C', '-33°C', '0°C'], 'correcta' => '+33°C'],
        ['pregunta' => 'Metano natural de...', 'opciones' => ['Pantanos', 'Fábricas', 'Aviones', 'Plásticos'], 'correcta' => 'Pantanos'],
        ['pregunta' => 'Sin GEI, océanos...', 'opciones' => ['Congelados', 'Líquidos', 'Evaporados', 'Igual'], 'correcta' => 'Congelados'],
        ['pregunta' => 'Contribución CO₂', 'opciones' => ['~20%', '60%', '100%', '0%'], 'correcta' => '~20%'],
        ['pregunta' => 'Fotosíntesis absorbe...', 'opciones' => ['120 GtC/año', '1 Gt', '0', '1000 Gt'], 'correcta' => '120 GtC/año'],
        ['pregunta' => 'Albedo Tierra ≈', 'opciones' => ['0.3', '0.1', '0.7', '1.0'], 'correcta' => '0.3'],

        // === MEDIO (10) ===
        ['pregunta' => 'CO₂ preindustrial', 'opciones' => ['280 ppm', '400 ppm', '100 ppm', '0 ppm'], 'correcta' => '280 ppm'],
        ['pregunta' => 'Constante solar S', 'opciones' => ['1361 W/m²', '100 W/m²', '1000 W/m²', '0'], 'correcta' => '1361 W/m²'],
        ['pregunta' => 'Vapor agua contribuye...', 'opciones' => ['~60%', '20%', '5%', '0%'], 'correcta' => '~60%'],
        ['pregunta' => 'Océanos absorben CO₂...', 'opciones' => ['90 GtC/año', '1 Gt', '0', '1000 Gt'], 'correcta' => '90 GtC/año'],
        ['pregunta' => 'Efecto invernadero es...', 'opciones' => ['Natural y necesario', 'Solo humano', 'Malo', 'Falso'], 'correcta' => 'Natural y necesario'],
        ['pregunta' => 'Sin atmósfera, T =', 'opciones' => ['-18°C', '+15°C', '+33°C', '0°C'], 'correcta' => '-18°C'],
        ['pregunta' => 'Forzante GEI natural ≈', 'opciones' => ['+33°C', '+1.2°C', '0°C', '-33°C'], 'correcta' => '+33°C'],
        ['pregunta' => 'IPCC AR6 confirma...', 'opciones' => ['Efecto natural vital', 'No existe', 'Solo humano', 'Falso'], 'correcta' => 'Efecto natural vital'],
        ['pregunta' => 'Stefan-Boltzmann σ ≈', 'opciones' => ['5.67×10⁻⁸', '1', '0', '100'], 'correcta' => '5.67×10⁻⁸'],
        ['pregunta' => 'Balance radiativo entrada =', 'opciones' => ['340 W/m²', '100 W/m²', '0', '1000'], 'correcta' => '340 W/m²'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula ΔT simplificada', 'opciones' => ['S(1-A)/4σ × F', 'S×A', 'σ/F', 'A/S'], 'correcta' => 'S(1-A)/4σ × F'],
        ['pregunta' => 'Entrada solar promedio', 'opciones' => ['340 W/m²', '1361 W/m²', '240 W/m²', '0'], 'correcta' => '340 W/m²'],
        ['pregunta' => 'Salida IR promedio', 'opciones' => ['240 W/m²', '340 W/m²', '0', '1000'], 'correcta' => '240 W/m²'],
        ['pregunta' => 'Diferencia entrada-salida =', 'opciones' => ['100 W/m² atrapados', '0', '340', '240'], 'correcta' => '100 W/m² atrapados'],
        ['pregunta' => 'CH₄ natural ≈', 'opciones' => ['0.7 ppm', '280 ppm', '400 ppm', '0'], 'correcta' => '0.7 ppm'],
        ['pregunta' => 'N₂O natural ≈', 'opciones' => ['0.3 ppm', '1 ppm', '0', '10 ppm'], 'correcta' => '0.3 ppm'],
        ['pregunta' => 'Respiración libera...', 'opciones' => ['60 GtC/año', '120 GtC', '0', '1 Gt'], 'correcta' => '60 GtC/año'],
        ['pregunta' => 'Efecto invernadero en Venus...', 'opciones' => ['+460°C', '+33°C', '0°C', '-18°C'], 'correcta' => '+460°C'],
        ['pregunta' => 'Marte tiene efecto...', 'opciones' => ['Débil (~5°C)', 'Fuerte', 'Ninguno', '+33°C'], 'correcta' => 'Débil (~5°C)'],
        ['pregunta' => 'NASA confirma océanos líquidos por...', 'opciones' => ['GEI natural', 'Sol', 'Luna', 'Magnetismo'], 'correcta' => 'GEI natural']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Relación Efecto Invernadero ↔ Huella Ecológica (Carbono, Overshoot, Mitigación)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'relacion-efecto-invernadero-huella-ecologica',
    'titulo' => 'Efecto Invernadero y Huella Ecológica: Dos Caras del Mismo Desastre',
    'contenido' => '
        <h3>Relación entre Efecto Invernadero y Huella Ecológica</h3>
        <p>La <strong>huella ecológica</strong> mide la <strong>demanda humana sobre la biocapacidad</strong> del planeta. Su componente más grande: <strong>huella de carbono (60%)</strong>, que <strong>alimenta el efecto invernadero antropogénico</strong>.</p>
        <p><strong>Relación directa:</strong> ↑ Huella ecológica → ↑ Emisiones GHG → ↑ Efecto invernadero → ↑ Calentamiento → ↓ Biocapacidad → ↑ Huella ecológica</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Componentes de la Huella Ecológica</h4>
        <table class="table">
            <thead>
                <tr><th>Componente</th><th>% Total</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Huella de carbono</strong></td><td>60%</td><td>Combustibles fósiles</td></tr>
                <tr><td><strong>Tierras de cultivo</strong></td><td>20%</td><td>Alimentos</td></tr>
                <tr><td><strong>Pesca</strong></td><td>5%</td><td>Sobrepesca</td></tr>
                <tr><td><strong>Bosques</strong></td><td>10%</td><td>Deforestación</td></tr>
                <tr><td><strong>Áreas construidas</strong></td><td>5%</td><td>Ciudades</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> Un estadounidense promedio tiene una <strong>huella de 8.1 hectáreas globales (gha)</strong>, pero solo hay <strong>1.6 gha por persona</strong> disponibles → <strong>5 planetas necesarios</strong>.</p>
        </div>

        <div class="visual">
            <img src="assets/img/ciclo-carbono.jpg" alt="Ciclo del carbono global">
            <p><em>Ciclo del carbono. Fuente: EIA.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Earth Overshoot Day (2025)</h4>
        <table class="table">
            <thead>
                <tr><th>País</th><th>Overshoot Day</th><th>Planetas necesarios</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Qatar</strong></td><td>10 feb</td><td>8.0</td></tr>
                <tr><td><strong>EE.UU.</strong></td><td>13 mar</td><td>5.0</td></tr>
                <tr><td><strong>España</strong></td><td>12 may</td><td>2.6</td></tr>
                <tr><td><strong>Mundo</strong></td><td><strong>2 ago</strong></td><td><strong>1.7</strong></td></tr>
                <tr><td><strong>India</strong></td><td>31 dic</td><td>0.8</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/infografia-huella-carbono.webp" alt="Acciones personales">
            <p><em>Acciones para reducir huella. Fuente: Earth.Org.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/actividades-humanas-ghg.png" alt="Actividades humanas y GHG">
            <p><em>Emisores principales. Fuente: NRDC.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Fórmula de la Huella Ecológica</h4>
        <p>\\[ \\text{Huella Ecológica} = \\frac{\\text{Consumo total}}{\\text{Biocapacidad}} \\]</p>
        <p>\\[ \\text{Huella de Carbono} = \\text{Emisiones CO₂} \\times \\text{Factor bosque} \\]</p>

        <table class="table">
            <thead>
                <tr><th>Indicador</th><th>Valor 2025</th></tr>
            </thead>
            <tbody>
                <tr><td>Biocapacidad global</td><td>12 mil millones gha</td></tr>
                <tr><td>Población</td><td>8.2 mil millones</td></tr>
                <tr><td><strong>Biocapacidad per cápita</strong></td><td><strong>1.6 gha</strong></td></tr>
                <tr><td>Huella media global</td><td>2.7 gha</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Cómo Reducir Ambos</h4>
        <ul>
            <li><strong>Energía:</strong> Renovables ↓ 70% huella carbono</li>
            <li><strong>Alimentación:</strong> Dieta basada en plantas ↓ 50%</li>
            <li><strong>Transporte:</strong> Eléctrico + público ↓ 30%</li>
            <li><strong>Consumo:</strong> Minimalismo ↓ 40%</li>
        </ul>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: Bucle Vicioso Huella ↔ Efecto Invernadero</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#0F1620"/>

                <!-- Huella Ecológica -->
                <circle cx="200" cy="250" r="80" fill="#32CD32" stroke="#228B22" stroke-width="4">
                    <animate attributeName="r" values="80;90;80" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="200" y="240" fill="white" font-size="14" text-anchor="middle">HUELLA</text>
                <text x="200" y="260" fill="white" font-size="12" text-anchor="middle">ECOLÓGICA</text>
                <text x="200" y="280" fill="white" font-size="10" text-anchor="middle">2.7 gha</text>

                <!-- Efecto Invernadero -->
                <circle cx="500" cy="250" r="80" fill="#DC143C" stroke="#B22222" stroke-width="4">
                    <animate attributeName="r" values="80;90;80" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="500" y="240" fill="white" font-size="14" text-anchor="middle">EFECTO</text>
                <text x="500" y="260" fill="white" font-size="12" text-anchor="middle">INVERNADERO</text>
                <text x="500" y="280" fill="white" font-size="10" text-anchor="middle">+1.2°C</text>

                <!-- Flechas bucle -->
                <path d="M280 250 Q350 180 420 250" stroke="#FFD700" stroke-width="8" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <text x="350" y="170" fill="#FFD700" font-size="14" text-anchor="middle">↑ Emisiones</text>

                <path d="M420 250 Q350 320 280 250" stroke="#FF4500" stroke-width="8" fill="none" marker-end="url(#arrow-red)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <text x="350" y="340" fill="#FF4500" font-size="14" text-anchor="middle">↓ Biocapacidad</text>

                <!-- Solución -->
                <circle cx="350" cy="100" r="50" fill="#00CED1">
                    <animate attributeName="r" values="50;60;50" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="95" fill="white" font-size="12" text-anchor="middle">REDUCIR</text>
                <text x="350" y="110" fill="white" font-size="10" text-anchor="middle">CONSUMO</text>

                <!-- Flechas solución -->
                <path d="M200 170 L300 120" stroke="#00CED1" stroke-width="6" marker-end="url(#arrow-cyan)">
                    <animate attributeName="stroke-dashoffset" from="80" to="0" dur="1.5s" repeatCount="indefinite"/>
                </path>
                <path d="M500 170 L400 120" stroke="#00CED1" stroke-width="6" marker-end="url(#arrow-cyan)">
                    <animate attributeName="stroke-dashoffset" from="80" to="0" dur="1.5s" repeatCount="indefinite"/>
                </path>

                <!-- Flechas -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#FFD700"/>
                    </marker>
                    <marker id="arrow-red" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#FF4500"/>
                    </marker>
                    <marker id="arrow-cyan" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#00CED1"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#FFD700" font-size="26" text-anchor="middle" font-family="Arial" font-weight="bold">BUCLE VICIOSO</text>
                <text x="350" y="90" fill="#FFFFFF" font-size="16" text-anchor="middle">Huella ↑ → Calentamiento ↑ → Huella ↑</text>
            </svg>
            <p><em>SVG Animado: Bucle vicioso y cómo romperlo con reducción de consumo.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Relación entre huella y efecto invernadero', 'respuesta' => 'Directa: más huella → más GHG'],
        ['enunciado' => '% de huella por carbono', 'respuesta' => '60%'],
        ['enunciado' => 'Huella media global', 'respuesta' => '2.7 gha'],

        // === APLICADOS ===
        ['enunciado' => 'Biocapacidad per cápita', 'respuesta' => '1.6 gha'],
        ['enunciado' => 'Overshoot Day mundial 2025', 'respuesta' => '2 de agosto'],
        ['enunciado' => 'Planetas necesarios global', 'respuesta' => '1.7'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Cómo reducir ambos?', 'respuesta' => 'Energía limpia, dieta vegetal, transporte público'],
        ['enunciado' => '¿Qué es biocapacidad?', 'respuesta' => 'Capacidad de la Tierra para regenerar recursos'],
        ['enunciado' => '¿Qué es Overshoot Day?', 'respuesta' => 'Día en que agotamos recursos anuales'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula huella ecológica', 'respuesta' => '\\(\\text{HE} = \\frac{\\text{Consumo}}{\\text{Biocapacidad}}\\)'],
        ['enunciado' => 'EE.UU. necesita X planetas', 'respuesta' => '5.0'],
        ['enunciado' => 'Acción más efectiva', 'respuesta' => 'Energía renovable (-70%)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Huella de carbono es...', 'opciones' => ['60% de huella total', '10%', '100%', '0%'], 'correcta' => '60% de huella total'],
        ['pregunta' => 'Relación huella-efecto invernadero', 'opciones' => ['Directa', 'Inversa', 'Ninguna', 'Aleatoria'], 'correcta' => 'Directa'],
        ['pregunta' => 'Huella media global', 'opciones' => ['2.7 gha', '1.6 gha', '8 gha', '0'], 'correcta' => '2.7 gha'],
        ['pregunta' => 'Biocapacidad per cápita', 'opciones' => ['1.6 gha', '2.7 gha', '5 gha', '10 gha'], 'correcta' => '1.6 gha'],
        ['pregunta' => 'Overshoot Day mundial 2025', 'opciones' => ['2 ago', '1 ene', '31 dic', 'Nunca'], 'correcta' => '2 ago'],
        ['pregunta' => 'EE.UU. necesita...', 'opciones' => ['5 planetas', '1', '0.5', '10'], 'correcta' => '5 planetas'],
        ['pregunta' => 'Reducir consumo ↓...', 'opciones' => ['Ambos', 'Solo huella', 'Solo GHG', 'Nada'], 'correcta' => 'Ambos'],
        ['pregunta' => 'Energía renovable ↓ huella carbono en...', 'opciones' => ['70%', '10%', '0%', '100%'], 'correcta' => '70%'],
        ['pregunta' => 'Dieta vegetal ↓ huella en...', 'opciones' => ['50%', '5%', '0%', '100%'], 'correcta' => '50%'],
        ['pregunta' => 'Deforestación ↑...', 'opciones' => ['Huella y GHG', 'Solo huella', 'Nada', 'Reduce'], 'correcta' => 'Huella y GHG'],

        // === MEDIO (10) ===
        ['pregunta' => 'Planetas necesarios global', 'opciones' => ['1.7', '1.0', '0.5', '3.0'], 'correcta' => '1.7'],
        ['pregunta' => 'Qatar Overshoot Day', 'opciones' => ['10 feb', '31 dic', '1 jul', 'Nunca'], 'correcta' => '10 feb'],
        ['pregunta' => 'España necesita...', 'opciones' => ['2.6 planetas', '1.0', '5.0', '0.5'], 'correcta' => '2.6 planetas'],
        ['pregunta' => 'India Overshoot Day', 'opciones' => ['31 dic', '1 ene', '1 jul', '10 feb'], 'correcta' => '31 dic'],
        ['pregunta' => 'Biocapacidad total', 'opciones' => ['12 mil millones gha', '1 millón', '0', '1000'], 'correcta' => '12 mil millones gha'],
        ['pregunta' => 'Población 2025', 'opciones' => ['8.2 mil millones', '7 mil millones', '10 mil millones', '1 mil millones'], 'correcta' => '8.2 mil millones'],
        ['pregunta' => 'Transporte público ↓ huella en...', 'opciones' => ['30%', '5%', '0%', '100%'], 'correcta' => '30%'],
        ['pregunta' => 'Minimalismo ↓ huella en...', 'opciones' => ['40%', '5%', '0%', '100%'], 'correcta' => '40%'],
        ['pregunta' => 'IPCC recomienda...', 'opciones' => ['Reducir consumo', 'Más consumo', 'Nada', 'Ignorar'], 'correcta' => 'Reducir consumo'],
        ['pregunta' => 'Global Footprint Network mide...', 'opciones' => ['Overshoot Day', 'PIB', 'Nada', 'Población'], 'correcta' => 'Overshoot Day'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula huella ecológica', 'opciones' => ['Consumo / Biocapacidad', 'Biocapacidad / Consumo', 'Consumo × Biocapacidad', '0'], 'correcta' => 'Consumo / Biocapacidad'],
        ['pregunta' => 'Huella de carbono =', 'opciones' => ['Emisiones × Factor bosque', 'Emisiones / Bosque', 'Bosque - Emisiones', '0'], 'correcta' => 'Emisiones × Factor bosque'],
        ['pregunta' => '1 gha equivale a...', 'opciones' => ['1 hectárea productiva', '1 m²', '1 km²', '0'], 'correcta' => '1 hectárea productiva'],
        ['pregunta' => 'Acción más efectiva', 'opciones' => ['Energía renovable', 'Reciclaje', 'Nada', 'Comprar más'], 'correcta' => 'Energía renovable'],
        ['pregunta' => 'Meta IPCC 1.5°C requiere ↓ emisiones...', 'opciones' => ['45% para 2030', '10%', '0%', '100%'], 'correcta' => '45% para 2030'],
        ['pregunta' => 'Overshoot Day retrocede...', 'opciones' => ['5 días/año', '0', '1 día', '10 días'], 'correcta' => '5 días/año'],
        ['pregunta' => 'País con menor huella', 'opciones' => ['Eritrea (0.4 gha)', 'EE.UU.', 'Qatar', 'China'], 'correcta' => 'Eritrea (0.4 gha)'],
        ['pregunta' => 'Si todos viviéramos como EE.UU., necesitaríamos...', 'opciones' => ['5 Tierras', '1', '0.5', '10'], 'correcta' => '5 Tierras'],
        ['pregunta' => 'Huella de carbono incluye...', 'opciones' => ['CO₂, CH₄, N₂O', 'Solo CO₂', 'O₂', 'Nada'], 'correcta' => 'CO₂, CH₄, N₂O'],
        ['pregunta' => 'Reducción dieta vegetal ↓ emisiones...', 'opciones' => ['2.1 Gt/año', '0', '1 Mt', '1000'], 'correcta' => '2.1 Gt/año']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Desertificación (Causas, Efectos, Sahel, Gran Muralla Verde, Prevención)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'desertificacion',
    'titulo' => 'Desertificación: Cuando la Tierra se Convierte en Polvo',
    'contenido' => '
        <h3>¿Qué es la Desertificación?</h3>
        <p>La <strong>desertificación</strong> es la <strong>degradación de tierras en zonas áridas, semiáridas y subhúmedas secas</strong> debido a <strong>actividades humanas + cambio climático</strong>, resultando en <strong>pérdida de productividad biológica</strong>.</p>
        <p><strong>NO es expansión natural del desierto</strong> → Es <strong>degradación humana</strong>.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Causas Principales</h4>
        <table class="table">
            <thead>
                <tr><th>Causa</th><th>Impacto</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Sobrepastoreo</strong></td><td>Compactación suelo</td><td>Sahel</td></tr>
                <tr><td><strong>Deforestación</strong></td><td>Erosión eólica</td><td>Amazonia seca</td></tr>
                <tr><td><strong>Agricultura intensiva</strong></td><td>Salinización</td><td>Irán</td></tr>
                <tr><td><strong>Cambio climático</strong></td><td>Sequías prolongadas</td><td>Mediterráneo</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Sahel (África)</strong> → <strong>250 millones de personas</strong> afectadas. Desde 1970, <strong>650,000 km²</strong> perdidos.</p>
        </div>

        <div class="visual">
            <img src="assets/img/diagrama-flujo_desertificacion.png" alt="Flujograma desertificación">
            <p><em>Flujograma. Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Efectos en Ecosistemas y Humanos</h4>
        <table class="table">
            <thead>
                <tr><th>Efecto</th><th>Dato 2025</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Tierras degradadas</strong></td><td>1,000 millones ha</td></tr>
                <tr><td><strong>Personas afectadas</strong></td><td>1,500 millones</td></tr>
                <tr><td><strong>Pérdida económica</strong></td><td>US$42 mil millones/año</td></tr>
                <tr><td><strong>Migraciones</strong></td><td>135 millones desplazados (2050)</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/infografia-desertificacion.jpg" alt="Infografía desertificación">
            <p><em>Proceso visual. Fuente: SuperStock.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Regiones Más Afectadas (2025)</h4>
        <table class="table">
            <thead>
                <tr><th>Región</th><th>% Degradado</th><th>País Líder</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Sahel</strong></td><td>65%</td><td>Níger</td></tr>
                <tr><td><strong>Mediterráneo</strong></td><td>30%</td><td>España</td></tr>
                <tr><td><strong>Asia Central</strong></td><td>40%</td><td>Mongolia</td></tr>
                <tr><td><strong>Australia</strong></td><td>75%</td><td>Outback</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/mapa-UNCCD.jpg" alt="Mapa UNCCD">
            <p><em>Mapa global. Fuente: UNCCD.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/gran-muralla-verde.jpg" alt="Gran Muralla Verde">
            <p><em>Gran Muralla Verde. Fuente: Green Belt Movement.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Prevención y Restauración</h4>
        <ul>
            <li><strong>Gran Muralla Verde (África):</strong> 8,000 km → 100 millones ha restauradas (meta 2030)</li>
            <li><strong>Rotación de cultivos + agroforestería</strong></li>
            <li><strong>Barreras cortavientos</strong></li>
            <li><strong>Manejo sostenible del pastoreo</strong></li>
        </ul>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: Proceso de Desertificación</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#87CEEB" opacity="0.2"/>

                <!-- Tierra fértil -->
                <rect x="50" y="200" width="120" height="100" fill="#228B22" rx="10"/>
                <text x="110" y="250" fill="white" font-size="14" text-anchor="middle">TIERRA FÉRTIL</text>

                <!-- Ganado -->
                <circle cx="110" cy="170" r="20" fill="#8B4513"/>
                <text x="110" y="165" fill="white" font-size="10" text-anchor="middle">Ganado</text>
                <text x="110" y="320" fill="#DC143C" font-size="12" text-anchor="middle">Sobrepastoreo</text>

                <!-- Deforestación -->
                <rect x="220" y="180" width="100" height="140" fill="#654321" rx="10"/>
                <text x="270" y="230" fill="white" font-size="12" text-anchor="middle">ÁRBOLES</text>
                <path d="M270 250 L260 280 M270 250 L280 280" stroke="#DC143C" stroke-width="4"/>
                <text x="270" y="320" fill="#DC143C" font-size="12" text-anchor="middle">Deforestación</text>

                <!-- Erosión -->
                <path d="M350 250 Q400 220 450 250" stroke="#D2691E" stroke-width="60" fill="none" opacity="0.6">
                    <animate attributeName="stroke-dashoffset" from="200" to="0" dur="3s" repeatCount="indefinite"/>
                </path>
                <text x="400" y="200" fill="#8B4513" font-size="14" text-anchor="middle">EROSIÓN</text>

                <!-- Desierto -->
                <rect x="500" y="200" width="150" height="100" fill="#F4A460" rx="15"/>
                <text x="575" y="250" fill="#8B4513" font-size="16" text-anchor="middle">DESIERTO</text>
                <text x="575" y="280" fill="#8B4513" font-size="12" text-anchor="middle">0% fertilidad</text>

                <!-- Flechas -->
                <path d="M170 250 L210 250" stroke="#DC143C" stroke-width="6" marker-end="url(#arrow)"/>
                <path d="M320 250 L350 250" stroke="#DC143C" stroke-width="6" marker-end="url(#arrow)"/>
                <path d="M450 250 L500 250" stroke="#DC143C" stroke-width="6" marker-end="url(#arrow)"/>

                <!-- Solución -->
                <circle cx="350" cy="100" r="60" fill="#32CD32">
                    <animate attributeName="r" values="60;70;60" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="90" fill="white" font-size="14" text-anchor="middle">RESTAURAR</text>
                <text x="350" y="110" fill="white" font-size="12" text-anchor="middle">Manejo sostenible</text>

                <!-- Flecha solución -->
                <path d="M350 160 Q300 200 200 240" stroke="#32CD32" stroke-width="8" marker-end="url(#arrow-green)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2.5s" repeatCount="indefinite"/>
                </path>

                <!-- Flechas -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#DC143C"/>
                    </marker>
                    <marker id="arrow-green" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#32CD32"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#FFD700" font-size="26" text-anchor="middle" font-weight="bold">DESERTIFICACIÓN</text>
                <text x="350" y="90" fill="#333" font-size="16" text-anchor="middle">De verde a polvo en décadas</text>
            </svg>
            <p><em>SVG Animado: Sobreexplotación → erosión → desierto vs restauración sostenible.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define desertificación', 'respuesta' => 'Degradación de tierras áridas por humanos + clima'],
        ['enunciado' => 'Causa principal humana', 'respuesta' => 'Sobrepastoreo'],
        ['enunciado' => 'Región más afectada', 'respuesta' => 'Sahel'],

        // === APLICADOS ===
        ['enunciado' => 'Tierras degradadas global', 'respuesta' => '1,000 millones ha'],
        ['enunciado' => 'Personas afectadas', 'respuesta' => '1,500 millones'],
        ['enunciado' => 'Pérdida económica/año', 'respuesta' => 'US$42 mil millones'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Cómo prevenir?', 'respuesta' => 'Reforestación, rotación cultivos, manejo pastoreo'],
        ['enunciado' => '¿Qué es Gran Muralla Verde?', 'respuesta' => '8,000 km de árboles en África'],
        ['enunciado' => '¿Cómo cambio climático la agrava?', 'respuesta' => 'Sequías más largas'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula erosión eólica', 'respuesta' => '\\(E = f(I, K, C, L, V)\\)'],
        ['enunciado' => 'Meta UNCCD 2030', 'respuesta' => 'Neutralidad en degradación de tierras'],
        ['enunciado' => 'País con 75% degradado', 'respuesta' => 'Australia']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Desertificación afecta zonas...', 'opciones' => ['Áridas', 'Húmedas', 'Frías', 'Marinas'], 'correcta' => 'Áridas'],
        ['pregunta' => 'Causa principal', 'opciones' => ['Sobrepastoreo', 'Lluvia', 'Nieve', 'Viento'], 'correcta' => 'Sobrepastoreo'],
        ['pregunta' => 'Sahel pierde...', 'opciones' => ['650,000 km²', '1 km²', '0', '1 millón km²'], 'correcta' => '650,000 km²'],
        ['pregunta' => 'Tierras degradadas global', 'opciones' => ['1,000 millones ha', '1 ha', '0', '100 ha'], 'correcta' => '1,000 millones ha'],
        ['pregunta' => 'Personas afectadas', 'opciones' => ['1,500 millones', '1 millón', '0', '1000'], 'correcta' => '1,500 millones'],
        ['pregunta' => 'Pérdida económica/año', 'opciones' => ['US$42 mil millones', '0', '1 dólar', '1000'], 'correcta' => 'US$42 mil millones'],
        ['pregunta' => 'Gran Muralla Verde mide...', 'opciones' => ['8,000 km', '1 km', '0', '100 km'], 'correcta' => '8,000 km'],
        ['pregunta' => 'Prevención clave', 'respuesta' => 'Manejo sostenible'],
        ['pregunta' => 'Erosión es...', 'opciones' => ['Pérdida suelo', 'Ganancia', 'Nada', 'Agua'], 'correcta' => 'Pérdida suelo'],
        ['pregunta' => 'UNCCD es...', 'opciones' => ['Convención contra desertificación', 'ONU', 'NASA', 'Nada'], 'correcta' => 'Convención contra desertificación'],

        // === MEDIO (10) ===
        ['pregunta' => 'Níger % degradado', 'opciones' => ['65%', '10%', '0%', '100%'], 'correcta' => '65%'],
        ['pregunta' => 'España % degradado', 'opciones' => ['30%', '0%', '100%', '5%'], 'correcta' => '30%'],
        ['pregunta' => 'Mongolia % degradado', 'opciones' => ['40%', '0%', '100%', '10%'], 'correcta' => '40%'],
        ['pregunta' => 'Australia % degradado', 'opciones' => ['75%', '0%', '10%', '100%'], 'correcta' => '75%'],
        ['pregunta' => 'Migraciones por desertificación 2050', 'opciones' => ['135 millones', '0', '1', '1000'], 'correcta' => '135 millones'],
        ['pregunta' => 'Salinización por...', 'opciones' => ['Riego intensivo', 'Lluvia', 'Nieve', 'Nada'], 'correcta' => 'Riego intensivo'],
        ['pregunta' => 'Agroforestería combina...', 'opciones' => ['Árboles + cultivos', 'Solo árboles', 'Solo cultivos', 'Nada'], 'correcta' => 'Árboles + cultivos'],
        ['pregunta' => 'Rotación cultivos ↓...', 'opciones' => ['Erosión', 'Aumenta', 'Nada', 'Salinización'], 'correcta' => 'Erosión'],
        ['pregunta' => 'Meta Gran Muralla Verde', 'opciones' => ['100 millones ha', '1 ha', '0', '1 millón ha'], 'correcta' => '100 millones ha'],
        ['pregunta' => 'Cambio climático ↑...', 'opciones' => ['Sequías', 'Lluvias', 'Frío', 'Nada'], 'correcta' => 'Sequías'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula erosión eólica (USLE)', 'opciones' => ['E = f(I,K,C,L,V)', 'E = I + K', 'E = 0', 'E = V'], 'correcta' => 'E = f(I,K,C,L,V)'],
        ['pregunta' => 'UNCCD meta 2030', 'opciones' => ['Neutralidad degradación', 'Más degradación', 'Nada', 'Duplicar'], 'correcta' => 'Neutralidad degradación'],
        ['pregunta' => 'Desertificación ≠', 'opciones' => ['Expansión natural desierto', 'Degradación humana', 'Ambas', 'Ninguna'], 'correcta' => 'Expansión natural desierto'],
        ['pregunta' => 'Sahel desde 1970 perdió...', 'opciones' => ['650,000 km²', '1 km²', '0', '1 millón km²'], 'correcta' => '650,000 km²'],
        ['pregunta' => 'Compactación suelo por...', 'opciones' => ['Ganado pesado', 'Lluvia', 'Viento', 'Nada'], 'correcta' => 'Ganado pesado'],
        ['pregunta' => 'Barreras cortavientos ↓...', 'opciones' => ['Erosión eólica', 'Aumenta', 'Nada', 'Agua'], 'correcta' => 'Erosión eólica'],
        ['pregunta' => 'Restauración 1 ha cuesta ≈', 'opciones' => ['US$500', 'US$1', 'US$1M', 'US$0'], 'correcta' => 'US$500'],
        ['pregunta' => 'Gran Muralla Verde incluye...', 'opciones' => ['11 países', '1', '0', '100'], 'correcta' => '11 países'],
        ['pregunta' => 'Desertificación causa...', 'opciones' => ['24% emisiones globales', '0%', '100%', '1%'], 'correcta' => '24% emisiones globales'],
        ['pregunta' => 'País con mayor éxito restauración', 'opciones' => ['China (Loess)', 'EE.UU.', 'Brasil', 'India'], 'correcta' => 'China (Loess)']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Deforestación (Amazonía, Soja, Ganado, Secuestro CO₂, Tipping Point, REDD+)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'deforestacion',
    'titulo' => 'Deforestación: El Pulmón del Planeta Bajo Ataque',
    'contenido' => '
        <h3>¿Qué es la Deforestación?</h3>
        <p>La <strong>deforestación</strong> es la <strong>remoción permanente de bosques</strong> para <strong>agricultura, ganadería, minería, urbanización o infraestructura</strong>. <strong>13 millones de hectáreas/año</strong> perdidas (FAO 2025).</p>
        <p><strong>Impacto:</strong> <strong>12–18% de emisiones globales de CO₂</strong> + pérdida de biodiversidad + alteración del ciclo del agua.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Causas Principales (2025)</h4>
        <table class="table">
            <thead>
                <tr><th>Causa</th><th>% Global</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Ganadería</strong></td><td>70%</td><td>Brasil, Paraguay</td></tr>
                <tr><td><strong>Agricultura (soja, palma)</strong></td><td>20%</td><td>Indonesia, Brasil</td></tr>
                <tr><td><strong>Minería</strong></td><td>7%</td><td>Perú, Ghana</td></tr>
                <tr><td><strong>Infraestructura</strong></td><td>3%</td><td>Carreteras, represas</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Amazonía Brasil</strong> → <strong>1.1 millones ha/año</strong> (INPE 2025). <strong>80% para ganado</strong>.</p>
        </div>

        <div class="visual">
            <img src="assets/img/causas_deforestacion.jpg" alt="Modelo causas">
            <p><em>Modelo de causas. Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Efectos en Ecosistemas</h4>
        <table class="table">
            <thead>
                <tr><th>Efecto</th><th>Dato 2025</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Emisiones CO₂</strong></td><td>5.5 Gt/año</td></tr>
                <tr><td><strong>Pérdida biodiversidad</strong></td><td>50,000 especies/año</td></tr>
                <tr><td><strong>Erosión suelo</strong></td><td>24 mil millones t/año</td></tr>
                <tr><td><strong>Reducción lluvia</strong></td><td>–10% en Amazonía</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/sumidero-carbono.png" alt="Secuestro carbono">
            <p><em>Bosque = sumidero. Fuente: FU Berlin.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Amazonía: Punto de Inflexión (Tipping Point)</h4>
        <p>Si se pierde <strong>>20–25% del bosque</strong> → <strong>sabanización irreversible</strong>.</p>
        <p>Actual: <strong>18% deforestado</strong> (2025).</p>

        <div class="visual">
            <img src="assets/img/tipping-point-amazonia.jpg" alt="Tipping point Amazonía">
            <p><em>Tipping point. Fuente: PNAS.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/FAO-deforestacion-global.jpg" alt="FAO deforestación global">
            <p><em>Tendencia global. Fuente: FAO 2025.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Soluciones: REDD+ y Más</h4>
        <ul>
            <li><strong>REDD+:</strong> Pago por no deforestar → US$40 mil millones comprometidos</li>
            <li><strong>Certificación:</strong> FSC, RSPO</li>
            <li><strong>Reforestación:</strong> 1 billón árboles (Trillion Trees)</li>
            <li><strong>Leyes:</strong> Moratoria soja Brasil (2006–2025)</li>
        </ul>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: De Bosque a Pastizal</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#87CEEB" opacity="0.3"/>

                <!-- Bosque -->
                <rect x="50" y="180" width="150" height="150" fill="#228B22" rx="15"/>
                <circle cx="100" cy="150" r="30" fill="#006400"/>
                <circle cx="150" cy="160" r="35" fill="#006400"/>
                <circle cx="125" cy="130" r="25" fill="#006400"/>
                <text x="125" y="250" fill="white" font-size="16" text-anchor="middle">BOSQUE</text>
                <text x="125" y="280" fill="#228B22" font-size="12" text-anchor="middle">1.5 GtC/año</text>

                <!-- Motosierra -->
                <rect x="220" y="220" width="80" height="40" fill="#696969" rx="10"/>
                <path d="M300 240 L340 240 L330 220 L340 200 L300 200 Z" fill="#DC143C"/>
                <text x="260" y="210" fill="#DC143C" font-size="12" text-anchor="middle">CORTE</text>
                <animateTransform attributeName="transform" type="translate" from="0,0" to="100,0" dur="3s" repeatCount="indefinite"/>

                <!-- Pastizal -->
                <rect x="400" y="200" width="180" height="130" fill="#DAA520" rx="15"/>
                <circle cx="450" cy="250" r="8" fill="#8B7355"/>
                <circle cx="490" cy="240" r="6" fill="#8B7355"/>
                <circle cx="530" cy="255" r="7" fill="#8B7355"/>
                <text x="490" y="250" fill="#8B4513" font-size="16" text-anchor="middle">GANADO</text>
                <text x="490" y="280" fill="#8B4513" font-size="12" text-anchor="middle">0.1 GtC/año</text>

                <!-- CO₂ liberado -->
                <circle cx="300" cy="100" r="40" fill="#FF4500" opacity="0.7">
                    <animate attributeName="r" values="40;60;40" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="300" y="105" fill="white" font-size="14" text-anchor="middle">+CO₂</text>

                <!-- Flechas -->
                <path d="M200 255 L230 255" stroke="#DC143C" stroke-width="8" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="50" to="0" dur="1.5s" repeatCount="indefinite"/>
                </path>
                <path d="M300 240 L380 240" stroke="#DC143C" stroke-width="8" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="80" to="0" dur="2s" repeatCount="indefinite"/>
                </path>

                <!-- Solución -->
                <circle cx="350" cy="100" r="60" fill="#32CD32">
                    <animate attributeName="r" values="60;70;60" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="90" fill="white" font-size="14" text-anchor="middle">REDD+</text>
                <text x="350" y="110" fill="white" font-size="12" text-anchor="middle">Pago por conservar</text>

                <!-- Flecha solución -->
                <path d="M125 180 Q200 120 350 110" stroke="#32CD32" stroke-width="8" marker-end="url(#arrow-green)">
                    <animate attributeName="stroke-dashoffset" from="150" to="0" dur="3s" repeatCount="indefinite"/>
                </path>

                <!-- Flechas -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#DC143C"/>
                    </marker>
                    <marker id="arrow-green" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#32CD32"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#FFD700" font-size="26" text-anchor="middle" font-weight="bold">DEFORESTACIÓN</text>
                <text x="350" y="90" fill="#333" font-size="16" text-anchor="middle">De sumidero a fuente de CO₂</text>
            </svg>
            <p><em>SVG Animado: Bosque → Corte → Pastizal + CO₂ vs REDD+.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define deforestación', 'respuesta' => 'Remoción permanente de bosques'],
        ['enunciado' => 'Principal causa global', 'respuesta' => 'Ganadería (70%)'],
        ['enunciado' => 'Emisiones por deforestación', 'respuesta' => '5.5 Gt CO₂/año'],

        // === APLICADOS ===
        ['enunciado' => 'Amazonía deforestada 2025', 'respuesta' => '18%'],
        ['enunciado' => 'Tipping point Amazonía', 'respuesta' => '20–25% pérdida'],
        ['enunciado' => 'Pérdida bosque/año', 'respuesta' => '13 millones ha'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Cómo afecta ciclo agua?', 'respuesta' => 'Menos evapotranspiración → menos lluvia'],
        ['enunciado' => '¿Qué es REDD+?', 'respuesta' => 'Pago por no deforestar'],
        ['enunciado' => '¿Qué es FSC?', 'respuesta' => 'Certificación madera sostenible'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula secuestro carbono', 'respuesta' => '\\(C = A \\times D 150 tC/ha\\)'],
        ['enunciado' => 'Moratoria soja Brasil desde', 'respuesta' => '2006'],
        ['enunciado' => 'Meta Trillion Trees', 'respuesta' => '1 billón árboles 2030']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Principal causa deforestación', 'opciones' => ['Ganadería', 'Turismo', 'Nada', 'Lluvia'], 'correcta' => 'Ganadería'],
        ['pregunta' => 'Emite CO₂ por...', 'opciones' => ['Deforestación', 'Reforestación', 'Nada', 'Frío'], 'correcta' => 'Deforestación'],
        ['pregunta' => 'Amazonía pierde...', 'opciones' => ['1.1 millones ha/año', '1 ha', '0', '100 ha'], 'correcta' => '1.1 millones ha/año'],
        ['pregunta' => 'Pérdida global/año', 'opciones' => ['13 millones ha', '1 ha', '0', '1000 ha'], 'correcta' => '13 millones ha'],
        ['pregunta' => 'Emisiones por deforestación', 'opciones' => ['5.5 Gt CO₂/año', '0', '1 t', '1000 t'], 'correcta' => '5.5 Gt CO₂/año'],
        ['pregunta' => 'REDD+ es...', 'opciones' => ['Pago por conservar', 'Más corte', 'Nada', 'Turismo'], 'correcta' => 'Pago por conservar'],
        ['pregunta' => 'FSC certifica...', 'opciones' => ['Madera sostenible', 'Carne', 'Plástico', 'Nada'], 'correcta' => 'Madera sostenible'],
        ['pregunta' => 'Deforestación ↓ lluvia en...', 'opciones' => ['10%', 'Aumenta', '0%', '100%'], 'correcta' => '10%'],
        ['pregunta' => 'Tipping point Amazonía', 'opciones' => ['20–25%', '0%', '100%', '1%'], 'correcta' => '20–25%'],
        ['pregunta' => 'Soja es causa en...', 'opciones' => ['Brasil, Indonesia', 'EE.UU.', 'Europa', 'África'], 'correcta' => 'Brasil, Indonesia'],

        // === MEDIO (10) ===
        ['pregunta' => 'Amazonía deforestada 2025', 'opciones' => ['18%', '0%', '50%', '100%'], 'correcta' => '18%'],
        ['pregunta' => 'Ganadería causa...', 'opciones' => ['70%', '10%', '0%', '100%'], 'correcta' => '70%'],
        ['pregunta' => 'Agricultura (soja, palma)...', 'opciones' => ['20%', '70%', '0%', '100%'], 'correcta' => '20%'],
        ['pregunta' => 'Minería causa...', 'opciones' => ['7%', '70%', '0%', '100%'], 'correcta' => '7%'],
        ['pregunta' => 'Moratoria soja Brasil desde', 'opciones' => ['2006', '2025', '1900', 'Nunca'], 'correcta' => '2006'],
        ['pregunta' => 'Trillion Trees meta', 'opciones' => ['1 billón 2030', '1 árbol', '0', '1000'], 'correcta' => '1 billón 2030'],
        ['pregunta' => 'RSPO certifica...', 'opciones' => ['Aceite palma sostenible', 'Soja', 'Carne', 'Nada'], 'correcta' => 'Aceite palma sostenible'],
        ['pregunta' => 'Erosión por deforestación', 'opciones' => ['24 mil millones t/año', '0', '1 t', '1000 t'], 'correcta' => '24 mil millones t/año'],
        ['pregunta' => 'Pérdida especies/año', 'opciones' => ['50,000', '1', '0', '1000'], 'correcta' => '50,000'],
        ['pregunta' => 'REDD+ comprometió...', 'opciones' => ['US$40 mil millones', '0', '1 dólar', '1000'], 'correcta' => 'US$40 mil millones'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula secuestro carbono', 'opciones' => ['C = A × 150 tC/ha', 'C = A / 150', 'C = 0', 'C = A²'], 'correcta' => 'C = A × 150 tC/ha'],
        ['pregunta' => '1 ha bosque tropical almacena ≈', 'opciones' => ['150 tC', '1 tC', '0', '1000 tC'], 'correcta' => '150 tC'],
        ['pregunta' => 'Deforestación = X% emisiones globales', 'opciones' => ['12–18%', '1%', '0%', '100%'], 'correcta' => '12–18%'],
        ['pregunta' => 'INPE mide Amazonía con...', 'opciones' => ['Satélites', 'Aviones', 'Nada', 'Barcos'], 'correcta' => 'Satélites'],
        ['pregunta' => 'Sabanización ocurre si...', 'opciones' => ['>20–25% pérdida', '<1%', '0%', '100%'], 'correcta' => '>20–25% pérdida'],
        ['pregunta' => 'FAO 2025 reporta...', 'opciones' => ['13 millones ha/año', '0', '1 ha', '1000 ha'], 'correcta' => '13 millones ha/año'],
        ['pregunta' => 'País con mayor deforestación absoluta', 'opciones' => ['Brasil', 'EE.UU.', 'China', 'España'], 'correcta' => 'Brasil'],
        ['pregunta' => 'País con mayor % deforestado', 'opciones' => ['Indonesia', 'Brasil', 'Congo', 'Australia'], 'correcta' => 'Indonesia'],
        ['pregunta' => 'Reforestar 1 ha cuesta ≈', 'opciones' => ['US$2,000', 'US$1', 'US$1M', 'US$0'], 'correcta' => 'US$2,000'],
        ['pregunta' => 'Meta global deforestación neta cero', 'opciones' => ['2030', '2050', '2100', 'Nunca'], 'correcta' => '2030']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Sucesión Primaria (Líquenes, Suelo, Clímax, Volcán, Glaciar, Clements)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'sucesion-primaria',
    'titulo' => 'Sucesión Primaria: De Roca Desnuda a Bosque Clímax',
    'contenido' => '
        <h3>¿Qué es la Sucesión Primaria?</h3>
        <p>La <strong>sucesión primaria</strong> es el <strong>proceso ecológico</strong> por el cual <strong>comunidades biológicas colonizan un área sin suelo</strong> (roca desnuda, lava, arena glacial) hasta formar un <strong>ecosistema clímax estable</strong>.</p>
        <p><strong>Tiempo:</strong> <strong>100–1,000 años</strong>. <strong>Clave:</strong> Formación de suelo.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Etapas de la Sucesión Primaria</h4>
        <table class="table">
            <thead>
                <tr><th>Etapa</th><th>Organismos</th><th>Suelo</th><th>Tiempo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>1. Roca desnuda</strong></td><td>Ninguno</td><td>0 cm</td><td>0 años</td></tr>
                <tr><td><strong>2. Líquenes/Musgos</strong></td><td>Pioneros</td><td>0.1–1 cm</td><td>10–50 años</td></tr>
                <tr><td><strong>3. Hierbas</strong></td><td>Plantas anuales</td><td>1–5 cm</td><td>50–100 años</td></tr>
                <tr><td><strong>4. Arbustos</strong></td><td>Perennes</td><td>5–20 cm</td><td>100–200 años</td></tr>
                <tr><td><strong>5. Bosque joven</strong></td><td>Árboles pioneros</td><td>20–50 cm</td><td>200–500 años</td></tr>
                <tr><td><strong>6. Bosque clímax</strong></td><td>Estable</td><td>>50 cm</td><td>500–1,000+ años</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Hawaii (Kilauea)</strong> → Lava 1959 → <strong>líquenes en 1 año</strong>, <strong>bosque en 300 años</strong>.</p>
        </div>

        <div class="visual">
            <img src="assets/img/diagrama-sucecion-primaria.jpeg" alt="Diagrama sucesión primaria">
            <p><em>Etapas visuales. Fuente: UChicago News.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Especies Pioneras: Los Héroes del Suelo</h4>
        <ul>
            <li><strong>Líquenes:</strong> Simbiosis hongo + alga → <strong>ácidos disuelven roca</strong></li>
            <li><strong>Musgos:</strong> Retienen agua → <strong>acumulan materia orgánica</strong></li>
            <li><strong>Primera planta vascular:</strong> <em>Dryopteris</em> (helecho)</li>
        </ul>

        <div class="visual">
            <img src="assets/img/Primary-Succession.webp" alt="Etapas detalladas">
            <p><em>Secuencia completa. Fuente: Microbe Notes.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/Primary-Succession-Definition.png" alt="Definición gráfica">
            <p><em>Definición visual. Fuente: Science Notes.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Ejemplos Naturales (2025)</h4>
        <table class="table">
            <thead>
                <tr><th>Lugar</th><th>Evento</th><th>Tiempo Clímax</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Kilauea (Hawaii)</strong></td><td>Lava 1959</td><td>~300 años</td></tr>
                <tr><td><strong>Surtsey (Islandia)</strong></td><td>Volcán 1963</td><td>~500 años</td></tr>
                <tr><td><strong>Glaciar Columbia (Alaska)</strong></td><td>Retiro 1980</td><td>~200 años</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/kilauea-1959.jpg" alt="Kilauea 1959">
            <p><em>Lava fresca. Fuente: USGS.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/glacier-bay.webp" alt="Glacier Bay">
            <p><em>Retiro glacial. Fuente: NPS.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Teoría Clásica vs Moderna</h4>
        <table class="table">
            <thead>
                <tr><th>Teoría</th><th>Autor</th><th>Idea</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Clásica</strong></td><td>Clements (1916)</td><td>Clímax predeterminado</td></tr>
                <tr><td><strong>Moderna</strong></td><td>Odum (1969)</td><td>Múltiples estados estables</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: De Roca a Bosque</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#87CEEB" opacity="0.2"/>

                <!-- 1. Roca desnuda -->
                <rect x="50" y="200" width="100" height="100" fill="#696969" rx="10"/>
                <text x="100" y="250" fill="#333" font-size="14" text-anchor="middle">ROCA</text>
                <text x="100" y="280" fill="#555" font-size="10" text-anchor="middle">0 años</text>

                <!-- 2. Líquenes -->
                <circle cx="200" cy="250" r="30" fill="#32CD32" opacity="0.6">
                    <animate attributeName="r" values="0;30" begin="1s" dur="1s" fill="freeze"/>
                </circle>
                <text x="200" y="245" fill="white" font-size="10" text-anchor="middle">LÍQUENES</text>
                <text x="200" y="280" fill="#228B22" font-size="10" text-anchor="middle">10–50 años</text>

                <!-- 3. Hierbas -->
                <path d="M300 280 L290 240 L300 220 L310 240 Z" fill="#90EE90">
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="1s" fill="freeze"/>
                </path>
                <path d="M320 280 L310 240 L320 220 L330 240 Z" fill="#90EE90">
                    <animate attributeName="opacity" values="0;1" begin="2.2s" dur="1s" fill="freeze"/>
                </path>
                <text x="315" y="250" fill="#006400" font-size="12" text-anchor="middle">HIERBAS</text>
                <text x="315" y="280" fill="#006400" font-size="10" text-anchor="middle">50–100 años</text>

                <!-- 4. Arbustos -->
                <ellipse cx="450" cy="260" rx="40" ry="25" fill="#228B22">
                    <animate attributeName="rx" values="0;40" begin="3s" dur="1s" fill="freeze"/>
                </ellipse>
                <text x="450" y="255" fill="white" font-size="12" text-anchor="middle">ARBUSTOS</text>
                <text x="450" y="280" fill="#006400" font-size="10" text-anchor="middle">100–200 años</text>

                <!-- 5. Bosque clímax -->
                <rect x="550" y="180" width="100" height="120" fill="#006400" rx="15">
                    <animate attributeName="width" values="0;100" begin="4s" dur="1.5s" fill="freeze"/>
                </rect>
                <circle cx="580" cy="160" r="25" fill="#004d00"/>
                <circle cx="620" cy="155" r="30" fill="#004d00"/>
                <text x="600" y="240" fill="white" font-size="14" text-anchor="middle">BOSQUE</text>
                <text x="600" y="260" fill="#90EE90" font-size="12" text-anchor="middle">CLÍMAX</text>
                <text x="600" y="280" fill="#90EE90" font-size="10" text-anchor="middle">500+ años</text>

                <!-- Flechas -->
                <path d="M150 250 L180 250" stroke="#32CD32" stroke-width="6" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="30" to="0" begin="1s" dur="1s" repeatCount="indefinite"/>
                </path>
                <path d="M230 250 L280 250" stroke="#32CD32" stroke-width="6" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="50" to="0" begin="2s" dur="1s" repeatCount="indefinite"/>
                </path>
                <path d="M355 250 L410 250" stroke="#32CD32" stroke-width="6" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="55" to="0" begin="3s" dur="1s" repeatCount="indefinite"/>
                </path>
                <path d="M490 250 L540 250" stroke="#32CD32" stroke-width="6" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="50" to="0" begin="4s" dur="1s" repeatCount="indefinite"/>
                </path>

                <!-- Flecha -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#32CD32"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#228B22" font-size="26" text-anchor="middle" font-weight="bold">SUCESIÓN PRIMARIA</text>
                <text x="350" y="90" fill="#333" font-size="16" text-anchor="middle">De roca a bosque en siglos</text>
            </svg>
            <p><em>SVG Animado: Etapas cronológicas con animación progresiva.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define sucesión primaria', 'respuesta' => 'Colonización de área sin suelo'],
        ['enunciado' => 'Especies pioneras', 'respuesta' => 'Líquenes y musgos'],
        ['enunciado' => 'Tiempo promedio clímax', 'respuesta' => '500–1,000 años'],

        // === APLICADOS ===
        ['enunciado' => 'Primera etapa', 'respuesta' => 'Roca desnuda'],
        ['enunciado' => 'Suelo en etapa líquenes', 'respuesta' => '0.1–1 cm'],
        ['enunciado' => 'Planta vascular inicial', 'respuesta' => 'Helecho'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Qué hacen los líquenes?', 'respuesta' => 'Disuelven roca con ácidos'],
        ['enunciado' => '¿Diferencia con secundaria?', 'respuesta' => 'Sin suelo vs con suelo'],
        ['enunciado' => '¿Qué es comunidad clímax?', 'respuesta' => 'Ecosistema estable a largo plazo'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula formación suelo', 'respuesta' => '\\(S = f(W, O, R, P, T)\\)'],
        ['enunciado' => 'Autor teoría clásica', 'respuesta' => 'Clements (1916)'],
        ['enunciado' => 'Ejemplo volcánico famoso', 'respuesta' => 'Surtsey (1963)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Sucesión primaria inicia en...', 'opciones' => ['Roca desnuda', 'Bosque', 'Pradera', 'Agua'], 'correcta' => 'Roca desnuda'],
        ['pregunta' => 'Especies pioneras', 'opciones' => ['Líquenes', 'Árboles', 'Peces', 'Humanos'], 'correcta' => 'Líquenes'],
        ['pregunta' => 'Lleva a...', 'opciones' => ['Bosque clímax', 'Desierto', 'Inicio', 'Nada'], 'correcta' => 'Bosque clímax'],
        ['pregunta' => 'Tiempo típico', 'opciones' => ['Siglos', 'Días', 'Horas', 'Minutos'], 'correcta' => 'Siglos'],
        ['pregunta' => 'Ejemplo natural', 'opciones' => ['Volcán', 'Incendio', 'Corte', 'Lluvia'], 'correcta' => 'Volcán'],
        ['pregunta' => 'Líquenes forman...', 'opciones' => ['Suelo', 'Agua', 'Aire', 'Fuego'], 'correcta' => 'Suelo'],
        ['pregunta' => 'Musgos retienen...', 'opciones' => ['Agua', 'Fuego', 'Aire', 'Nada'], 'correcta' => 'Agua'],
        ['pregunta' => 'Etapa final', 'opciones' => ['Clímax', 'Inicio', 'Medio', 'Nada'], 'correcta' => 'Clímax'],
        ['pregunta' => 'Diferencia secundaria', 'opciones' => ['Sin suelo', 'Con suelo', 'Igual', 'Rápida'], 'correcta' => 'Sin suelo'],
        ['pregunta' => 'Kilauea lava desde', 'opciones' => ['1959', '2025', '1900', 'Nunca'], 'correcta' => '1959'],

        // === MEDIO (10) ===
        ['pregunta' => 'Surtsey nació en...', 'opciones' => ['1963', '1959', '2025', '1900'], 'correcta' => '1963'],
        ['pregunta' => 'Glaciar Columbia retiro...', 'opciones' => ['1980', '2025', '1900', 'Nunca'], 'correcta' => '1980'],
        ['pregunta' => 'Suelo en líquenes', 'opciones' => ['0.1–1 cm', '0 cm', '10 cm', '100 cm'], 'correcta' => '0.1–1 cm'],
        ['pregunta' => 'Hierbas aparecen en...', 'opciones' => ['50–100 años', '1 año', '0 años', '1000 años'], 'correcta' => '50–100 años'],
        ['pregunta' => 'Arbustos en...', 'opciones' => ['100–200 años', '1 año', '0 años', '1000 años'], 'correcta' => '100–200 años'],
        ['pregunta' => 'Bosque clímax en...', 'opciones' => ['500+ años', '1 año', '10 años', '100 años'], 'correcta' => '500+ años'],
        ['pregunta' => 'Primera planta vascular', 'opciones' => ['Helecho', 'Árbol', 'Flor', 'Algas'], 'correcta' => 'Helecho'],
        ['pregunta' => 'Clements dijo...', 'opciones' => ['Clímax predeterminado', 'Aleatorio', 'Rápido', 'Lento'], 'correcta' => 'Clímax predeterminado'],
        ['pregunta' => 'Odum propuso...', 'opciones' => ['Múltiples clímax', 'Uno solo', 'Ninguno', 'Rápido'], 'correcta' => 'Múltiples clímax'],
        ['pregunta' => 'Líquenes usan ácidos para...', 'opciones' => ['Disolver roca', 'Crecimiento', 'Agua', 'Nada'], 'correcta' => 'Disolver roca'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula formación suelo (Jenny)', 'opciones' => ['S = f(W,O,R,P,T)', 'S = W + O', 'S = 0', 'S = T'], 'correcta' => 'S = f(W,O,R,P,T)'],
        ['pregunta' => 'W en fórmula =', 'opciones' => ['Clima', 'Organismos', 'Roca', 'Tiempo'], 'correcta' => 'Clima'],
        ['pregunta' => 'O en fórmula =', 'opciones' => ['Organismos', 'Clima', 'Roca', 'Tiempo'], 'correcta' => 'Organismos'],
        ['pregunta' => 'R en fórmula =', 'opciones' => ['Roca madre', 'Clima', 'Organismos', 'Tiempo'], 'correcta' => 'Roca madre'],
        ['pregunta' => 'P en fórmula =', 'opciones' => ['Topografía', 'Clima', 'Organismos', 'Tiempo'], 'correcta' => 'Topografía'],
        ['pregunta' => 'T en fórmula =', 'opciones' => ['Tiempo', 'Clima', 'Organismos', 'Roca'], 'correcta' => 'Tiempo'],
        ['pregunta' => 'Surtsey es isla...', 'opciones' => ['Volcánica', 'Glacial', 'Coral', 'Artificial'], 'correcta' => 'Volcánica'],
        ['pregunta' => 'Hawaii clímax en...', 'opciones' => ['~300 años', '1 año', '1000 años', '10 años'], 'correcta' => '~300 años'],
        ['pregunta' => 'Teoría clásica por...', 'opciones' => ['Clements 1916', 'Odum 1969', 'Darwin', 'Linneo'], 'correcta' => 'Clements 1916'],
        ['pregunta' => 'Estado final según Odum', 'opciones' => ['Múltiples estables', 'Uno solo', 'Ninguno', 'Rápido'], 'correcta' => 'Múltiples estables']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Servicios Ecosistémicos (Soporte, Provisión, Regulación, Cultural) – MEA, TEEB, IPBES
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'servicios-ambientales',
    'titulo' => 'Servicios Ecosistémicos: Los Beneficios Silenciosos de la Naturaleza',
    'contenido' => '
        <h3>¿Qué son los Servicios Ecosistémicos?</h3>
        <p>Los <strong>servicios ecosistémicos</strong> son los <strong>beneficios directos e indirectos</strong> que los seres humanos obtienen de los ecosistemas. Clasificados por el <strong>Millennium Ecosystem Assessment (MEA, 2005)</strong> en 4 categorías:</p>
        <ul>
            <li><strong>Soporte:</strong> Base para otros servicios</li>
            <li><strong>Provisión:</strong> Productos materiales</li>
            <li><strong>Regulación:</strong> Control de procesos</li>
            <li><strong>Cultural:</strong> Beneficios no materiales</li>
        </ul>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Clasificación Completa (MEA 2005)</h4>
        <table class="table">
            <thead>
                <tr><th>Categoría</th><th>Ejemplos</th><th>Valor Económico Global (2025)</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Soporte</strong></td><td>Formación suelo, fotosíntesis, ciclos N/P</td><td><strong>US$33 billones/año</strong></td></tr>
                <tr><td><strong>Provisión</strong></td><td>Alimentos, agua dulce, madera, fibras</td><td><strong>US$16 billones/año</strong></td></tr>
                <tr><td><strong>Regulación</strong></td><td>Clima, polinización, control inundaciones</td><td><strong>US$68 billones/año</strong></td></tr>
                <tr><td><strong>Cultural</strong></td><td>Recreación, turismo, inspiración, espiritual</td><td><strong>US$10 billones/año</strong></td></tr>
            </tbody>
            <tfoot>
                <tr><td colspan="2"><strong>TOTAL</strong></td><td><strong>US$127 billones/año</strong></td></tr>
            </tfoot>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Bosque amazónico</strong> → <strong>Provisión:</strong> madera, <strong>Regulación:</strong> secuestra 2 Gt CO₂/año, <strong>Cultural:</strong> turismo indígena.</p>
        </div>

        <div class="visual">
            <img src="assets/img/clasificacion_MEA.png" alt="Categorías MEA">
            <p><em>Clasificación MEA. Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Valoración Económica (TEEB 2010)</h4>
        <p>Fórmula simplificada:</p>
        <p>\\[ V_{total} = V_{provisión} + V_{regulación} + V_{cultural} + V_{soporte} \\]</p>
        <p>Donde:</p>
        <ul>
            <li><strong>V_{regulación}</strong> = mayor valor (54% del total)</li>
            <li><strong>1 ha bosque tropical</strong> = <strong>US$5,000–15,000/año</strong></li>
        </ul>

        <div class="visual">
            <img src="assets/img/servicios-ecosistemicos.png" alt="Ejemplos por categoría">
            <p><em>Ejemplos concretos. Fuente: ResearchGate.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/diagrama_esquematico_servicios_ecosistemicos.jpg" alt="Diagrama outline">
            <p><em>Diagrama esquemático. Fuente: VectorMine.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Ejemplos Globales (IPBES 2025)</h4>
        <table class="table">
            <thead>
                <tr><th>Servicio</th><th>Ejemplo</th><th>Valor</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Polinización</strong></td><td>Abejas</td><td>US$577 mil millones/año</td></tr>
                <tr><td><strong>Secuestro carbono</strong></td><td>Bosques</td><td>US$3.7 billones/año</td></tr>
                <tr><td><strong>Turismo natural</strong></td><td>Parques</td><td>US$900 mil millones/año</td></tr>
                <tr><td><strong>Control erosión</strong></td><td>Manglares</td><td>US$1.8 mil millones/año</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/ipbes-servicios.png" alt="IPBES servicios">
            <p><em>Valor global. Fuente: IPBES.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/marco-TEEB.png" alt="Marco TEEB">
            <p><em>Marco conceptual. Fuente: TEEB.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Pagos por Servicios Ambientales (PSA)</h4>
        <ul>
            <li><strong>Costa Rica:</strong> US$500 millones pagados desde 1997</li>
            <li><strong>China:</strong> Programa Grain for Green → 30 millones ha</li>
            <li><strong>México:</strong> PSA por agua → US$40/ha/año</li>
        </ul>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: Los 4 Pilares de la Naturaleza</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#E8F5E9"/>

                <!-- Centro: Ecosistema -->
                <circle cx="350" cy="250" r="80" fill="#4CAF50" stroke="#2E7D32" stroke-width="4">
                    <animate attributeName="r" values="80;90;80" dur="3s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="240" fill="white" font-size="16" text-anchor="middle" font-weight="bold">ECOSISTEMA</text>
                <text x="350" y="260" fill="white" font-size="12" text-anchor="middle">US$127B/año</text>

                <!-- Soporte -->
                <rect x="50" y="100" width="120" height="80" fill="#8D6E63" rx="15">
                    <animate attributeName="opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="110" y="130" fill="white" font-size="12" text-anchor="middle">SOPORTE</text>
                <text x="110" y="150" fill="#FFEB3B" font-size="10" text-anchor="middle">Ciclos N/P</text>
                <text x="110" y="165" fill="#FFEB3B" font-size="9" text-anchor="middle">US$33B</text>

                <!-- Provisión -->
                <rect x="530" y="100" width="120" height="80" fill="#FFB300" rx="15">
                    <animate attributeName="opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="590" y="130" fill="white" font-size="12" text-anchor="middle">PROVISIÓN</text>
                <text x="590" y="150" fill="#1B5E20" font-size="10" text-anchor="middle">Alimentos</text>
                <text x="590" y="165" fill="#1B5E20" font-size="9" text-anchor="middle">US$16B</text>

                <!-- Regulación -->
                <rect x="50" y="320" width="120" height="80" fill="#D32F2F" rx="15">
                    <animate attributeName="opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="110" y="350" fill="white" font-size="12" text-anchor="middle">REGULACIÓN</text>
                <text x="110" y="370" fill="#E8F5E9" font-size="10" text-anchor="middle">Clima</text>
                <text x="110" y="385" fill="#E8F5E9" font-size="9" text-anchor="middle">US$68B</text>

                <!-- Cultural -->
                <rect x="530" y="320" width="120" height="80" fill="#7B1FA2" rx="15">
                    <animate attributeName="opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="590" y="350" fill="white" font-size="12" text-anchor="middle">CULTURAL</text>
                <text x="590" y="370" fill="#E8F5E9" font-size="10" text-anchor="middle">Turismo</text>
                <text x="590" y="385" fill="#E8F5E9" font-size="9" text-anchor="middle">US$10B</text>

                <!-- Conexiones -->
                <path d="M350 170 L110 180" stroke="#4CAF50" stroke-width="6" marker-end="url(#arrow)"/>
                <path d="M350 170 L590 180" stroke="#4CAF50" stroke-width="6" marker-end="url(#arrow)"/>
                <path d="M350 330 L110 320" stroke="#4CAF50" stroke-width="6" marker-end="url(#arrow)"/>
                <path d="M350 330 L590 320" stroke="#4CAF50" stroke-width="6" marker-end="url(#arrow)"/>

                <!-- Flechas -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#4CAF50"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#2E7D32" font-size="28" text-anchor="middle" font-weight="bold">SERVICIOS ECOSISTÉMICOS</text>
                <text x="350" y="90" fill="#1B5E20" font-size="16" text-anchor="middle">Valor total: 2× PIB mundial</text>
            </svg>
            <p><em>SVG Animado: 4 categorías con valores económicos y conexiones dinámicas.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define servicios ecosistémicos', 'respuesta' => 'Beneficios que humanos obtienen de ecosistemas'],
        ['enunciado' => 'Categoría con mayor valor', 'respuesta' => 'Regulación (US$68B)'],
        ['enunciado' => 'Valor total global', 'respuesta' => 'US$127 billones/año'],

        // === APLICADOS ===
        ['enunciado' => 'Polinización vale...', 'respuesta' => 'US$577 mil millones/año'],
        ['enunciado' => '1 ha bosque tropical vale...', 'respuesta' => 'US$5,000–15,000/año'],
        ['enunciado' => 'PSA en Costa Rica desde', 'respuesta' => '1997'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Qué es soporte?', 'respuesta' => 'Base para otros servicios (suelo, nutrientes)'],
        ['enunciado' => '¿Ejemplo regulación?', 'respuesta' => 'Control inundaciones, clima'],
        ['enunciado' => '¿Ejemplo cultural?', 'respuesta' => 'Turismo, recreación, inspiración'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula valoración', 'respuesta' => '\\(V_{total} = \\sum V_i\\)'],
        ['enunciado' => 'TEEB significa...', 'respuesta' => 'The Economics of Ecosystems and Biodiversity'],
        ['enunciado' => 'IPBES es...', 'respuesta' => 'Plataforma Intergubernamental de Biodiversidad']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Servicios ecosistémicos son...', 'opciones' => ['Beneficios de la naturaleza', 'Solo comida', 'Solo dinero', 'Nada'], 'correcta' => 'Beneficios de la naturaleza'],
        ['pregunta' => 'Categoría más valiosa', 'opciones' => ['Regulación', 'Provisión', 'Soporte', 'Cultural'], 'correcta' => 'Regulación'],
        ['pregunta' => 'Valor total global', 'opciones' => ['US$127 billones', 'US$1 billón', '0', 'US$1000'], 'correcta' => 'US$127 billones'],
        ['pregunta' => 'Provisión incluye...', 'opciones' => ['Alimentos', 'Recreación', 'Clima', 'Suelo'], 'correcta' => 'Alimentos'],
        ['pregunta' => 'Regulación incluye...', 'opciones' => ['Clima', 'Comida', 'Turismo', 'Nutrientes'], 'correcta' => 'Clima'],
        ['pregunta' => 'Cultural incluye...', 'opciones' => ['Turismo', 'Agua', 'Madera', 'Polen'], 'correcta' => 'Turismo'],
        ['pregunta' => 'Soporte incluye...', 'opciones' => ['Ciclos nutrientes', 'Comida', 'Turismo', 'Clima'], 'correcta' => 'Ciclos nutrientes'],
        ['pregunta' => 'MEA clasificó en...', 'opciones' => ['4 categorías', '1', '2', '10'], 'correcta' => '4 categorías'],
        ['pregunta' => 'Polinización vale...', 'opciones' => ['US$577 mil millones', 'US$1', '0', 'US$1000'], 'correcta' => 'US$577 mil millones'],
        ['pregunta' => 'TEEB es sobre...', 'opciones' => ['Economía de ecosistemas', 'Tecnología', 'Nada', 'Turismo'], 'correcta' => 'Economía de ecosistemas'],

        // === MEDIO (10) ===
        ['pregunta' => 'Valor regulación', 'opciones' => ['US$68 billones', 'US$1 billón', '0', 'US$1000'], 'correcta' => 'US$68 billones'],
        ['pregunta' => 'Valor provisión', 'opciones' => ['US$16 billones', 'US$68 billones', '0', 'US$1000'], 'correcta' => 'US$16 billones'],
        ['pregunta' => 'Valor cultural', 'opciones' => ['US$10 billones', 'US$68 billones', '0', 'US$1000'], 'correcta' => 'US$10 billones'],
        ['pregunta' => 'Valor soporte', 'opciones' => ['US$33 billones', 'US$1 billón', '0', 'US$1000'], 'correcta' => 'US$33 billones'],
        ['pregunta' => '1 ha bosque vale...', 'opciones' => ['US$5,000–15,000/año', 'US$1', '0', 'US$1M'], 'correcta' => 'US$5,000–15,000/año'],
        ['pregunta' => 'PSA Costa Rica desde', 'opciones' => ['1997', '2025', '1900', 'Nunca'], 'correcta' => '1997'],
        ['pregunta' => 'China Grain for Green restauró...', 'opciones' => ['30 millones ha', '1 ha', '0', '1 millón ha'], 'correcta' => '30 millones ha'],
        ['pregunta' => 'México paga por agua...', 'opciones' => ['US$40/ha/año', 'US$1', '0', 'US$1000'], 'correcta' => 'US$40/ha/año'],
        ['pregunta' => 'IPBES es como IPCC pero para...', 'opciones' => ['Biodiversidad', 'Clima', 'Agua', 'Aire'], 'correcta' => 'Biodiversidad'],
        ['pregunta' => 'Secuestro carbono vale...', 'opciones' => ['US$3.7 billones/año', 'US$1', '0', 'US$1000'], 'correcta' => 'US$3.7 billones/año'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula valoración total', 'opciones' => ['V_total = Σ V_i', 'V_total = V_max', 'V_total = 0', 'V_total = 1'], 'correcta' => 'V_total = Σ V_i'],
        ['pregunta' => 'MEA fue en...', 'opciones' => ['2005', '2025', '1900', 'Nunca'], 'correcta' => '2005'],
        ['pregunta' => 'TEEB iniciado por...', 'opciones' => ['ONU y Alemania', 'EE.UU.', 'China', 'Brasil'], 'correcta' => 'ONU y Alemania'],
        ['pregunta' => 'Manglares previenen erosión por...', 'opciones' => ['US$1.8 mil millones/año', 'US$1', '0', 'US$1000'], 'correcta' => 'US$1.8 mil millones/año'],
        ['pregunta' => 'Turismo natural genera...', 'opciones' => ['US$900 mil millones/año', 'US$1', '0', 'US$1000'], 'correcta' => 'US$900 mil millones/año'],
        ['pregunta' => 'Servicio más subvalorado', 'opciones' => ['Soporte', 'Provisión', 'Cultural', 'Regulación'], 'correcta' => 'Soporte'],
        ['pregunta' => 'PSA significa...', 'opciones' => ['Pagos por Servicios Ambientales', 'Protección Sin Acción', 'Nada', 'Turismo'], 'correcta' => 'Pagos por Servicios Ambientales'],
        ['pregunta' => 'Valor servicios > PIB mundial por...', 'opciones' => ['2 veces', '0.5 veces', 'Igual', '10 veces'], 'correcta' => '2 veces'],
        ['pregunta' => 'IPBES reporta pérdida de servicios en...', 'opciones' => ['75% desde 1970', '0%', '100%', '10%'], 'correcta' => '75% desde 1970'],
        ['pregunta' => 'Meta Aichi 14 (CBD) busca...', 'opciones' => ['Valorar servicios', 'Ignorarlos', 'Eliminarlos', 'Duplicarlos'], 'correcta' => 'Valorar servicios']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Hábitos Sustentables (3R, Economía Circular, Carbono Activado, Compostaje, ODS 12)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'habitos-sustentabilidad',
    'titulo' => 'Hábitos de Sustentabilidad: Pequeños Cambios, Gran Impacto',
    'contenido' => '
        <h3>¿Qué son los Hábitos Sustentables?</h3>
        <p>Los <strong>hábitos sustentables</strong> son <strong>acciones diarias</strong> que <strong>reducen el impacto ambiental</strong>, promueven la <strong>economía circular</strong> y conservan recursos. Incluyen: <strong>3R (Reducir, Reutilizar, Reciclar)</strong>, compostaje, uso de carbono activado, energía renovable y consumo responsable.</p>
        <p><strong>Meta ONU:</strong> <strong>ODS 12 – Consumo y Producción Responsables</strong>.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Los 3R: Base de la Sustentabilidad</h4>
        <table class="table">
            <thead>
                <tr><th>R</th><th>Acción</th><th>Impacto 2025</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Reducir</strong></td><td>Menos consumo</td><td>–40% residuos</td></tr>
                <tr><td><strong>Reutilizar</strong></td><td>Bolsas, botellas</td><td>–60% plásticos</td></tr>
                <tr><td><strong>Reciclar</strong></td><td>Papel, vidrio</td><td>70% energía ahorrada</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>1 botella PET reciclada</strong> → <strong>ahorra 0.5 kWh</strong> (luz 3h).</p>
        </div>

        <div class="visual">
            <img src="assets/img/economiaCircualr.png" alt="Economía circular">
            <p><em>Economía circular. Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Carbono Activado: El Filtro Natural</h4>
        <p><strong>Proceso:</strong> Biomasa (cáscara coco) → <strong>carbonización 600°C</strong> → <strong>activación química (KOH)</strong> → <strong>superficie 1,000 m²/g</strong>.</p>
        <p><strong>Usos:</strong> Filtración agua, aire, medicina.</p>

        <div class="visual">
            <img src="assets/img/concepto-sustentabilidad.jpg" alt="Concepto sustentabilidad">
            <p><em>Concepto integrado. Fuente: MDPI.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/carbonizacion-activacion.png" alt="Carbonización y activación">
            <p><em>Proceso técnico. Fuente: Nature.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Métodos Clave de Sustentabilidad</h4>
        <table class="table">
            <thead>
                <tr><th>Método</th><th>Descripción</th><th>Beneficio</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Compostaje</strong></td><td>Residuos orgánicos → abono</td><td>–50% metano vertedero</td></tr>
                <tr><td><strong>Economía Circular</strong></td><td>Ciclo cerrado</td><td>US$4.5 billones oportunidad</td></tr>
                <tr><td><strong>Energía Renovable</strong></td><td>Solar, eólica</td><td>–70% emisiones</td></tr>
                <tr><td><strong>Zero Waste</strong></td><td>90% desvío vertedero</td><td>San Francisco 80%</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/ciclo-ONU.jpg" alt="Ciclo ONU">
            <p><em>Ciclo circular. Fuente: UNEP.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Impacto Global (2025)</h4>
        <ul>
            <li><strong>Residuos globales:</strong> 2.24 mil millones t/año</li>
            <li><strong>Reciclaje global:</strong> 13.5%</li>
            <li><strong>Plásticos en océano:</strong> 14 millones t/año</li>
            <li><strong>Meta ODS 12.5:</strong> Reducir 50% desperdicio 2030</li>
        </ul>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: Ciclo de la Sustentabilidad</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#E8F5E9"/>

                <!-- Centro: Sustentabilidad -->
                <circle cx="350" cy="250" r="70" fill="#4CAF50" stroke="#2E7D32" stroke-width="4">
                    <animate attributeName="r" values="70;80;70" dur="3s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="240" fill="white" font-size="16" text-anchor="middle" font-weight="bold">SUSTENTABILIDAD</text>
                <text x="350" y="260" fill="white" font-size="12" text-anchor="middle">ODS 12</text>

                <!-- Reducir -->
                <rect x="100" y="100" width="100" height="70" fill="#2196F3" rx="15">
                    <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="150" y="130" fill="white" font-size="14" text-anchor="middle">REDUCIR</text>
                <text x="150" y="150" fill="#FFF" font-size="10" text-anchor="middle">–40% residuos</text>

                <!-- Reutilizar -->
                <rect x="500" y="100" width="100" height="70" fill="#FF9800" rx="15">
                    <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="550" y="130" fill="white" font-size="14" text-anchor="middle">REUTILIZAR</text>
                <text x="550" y="150" fill="#FFF" font-size="10" text-anchor="middle">–60% plásticos</text>

                <!-- Reciclar -->
                <rect x="100" y="330" width="100" height="70" fill="#4CAF50" rx="15">
                    <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="150" y="360" fill="white" font-size="14" text-anchor="middle">RECICLAR</text>
                <text x="150" y="380" fill="#FFF" font-size="10" text-anchor="middle">70% energía</text>

                <!-- Compostar -->
                <rect x="500" y="330" width="100" height="70" fill="#795548" rx="15">
                    <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="550" y="360" fill="white" font-size="14" text-anchor="middle">COMPOSTAR</text>
                <text x="550" y="380" fill="#FFF" font-size="10" text-anchor="middle">–50% metano</text>

                <!-- Flechas circulares -->
                <path d="M350 180 Q400 100 500 120" stroke="#4CAF50" stroke-width="8" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="3s" repeatCount="indefinite"/>
                </path>
                <path d="M350 180 Q300 100 200 120" stroke="#4CAF50" stroke-width="8" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="3s" repeatCount="indefinite"/>
                </path>
                <path d="M350 320 Q400 400 500 330" stroke="#4CAF50" stroke-width="8" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="3s" repeatCount="indefinite"/>
                </path>
                <path d="M350 320 Q300 400 200 330" stroke="#4CAF50" stroke-width="8" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="3s" repeatCount="indefinite"/>
                </path>

                <!-- Flechas -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#4CAF50"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#2E7D32" font-size="26" text-anchor="middle" font-weight="bold">HÁBITOS SUSTENTABLES</text>
                <text x="350" y="90" fill="#1B5E20" font-size="16" text-anchor="middle">Ciclo virtuoso: 3R + Compostaje</text>
            </svg>
            <p><em>SVG Animado: Ciclo de los 3R + compostaje con impacto real.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define 3R', 'respuesta' => 'Reducir, Reutilizar, Reciclar'],
        ['enunciado' => 'Carbono activado se hace de...', 'respuesta' => 'Biomasa (cáscara coco)'],
        ['enunciado' => 'ODS relacionado', 'respuesta' => 'ODS 12'],

        // === APLICADOS ===
        ['enunciado' => 'Reciclar 1 t papel ahorra...', 'respuesta' => '17 árboles'],
        ['enunciado' => 'Compostaje reduce metano en...', 'respuesta' => '50%'],
        ['enunciado' => 'Superficie carbono activado', 'respuesta' => '1,000 m²/g'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Qué es economía circular?', 'respuesta' => 'Ciclo cerrado sin desperdicio'],
        ['enunciado' => '¿Para qué sirve carbono activado?', 'respuesta' => 'Filtrar agua, aire, toxinas'],
        ['enunciado' => '¿Qué es Zero Waste?', 'respuesta' => '90% desvío de vertedero'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula economía circular', 'respuesta' => '\\(Eficiencia = \\frac{Valor}{Residuos}\\rightarrow \\infty\\)'],
        ['enunciado' => 'Meta ODS 12.5', 'respuesta' => 'Reducir 50% desperdicio 2030'],
        ['enunciado' => 'Ciudad Zero Waste líder', 'respuesta' => 'San Francisco (80%)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => '3R significa...', 'opciones' => ['Reducir, Reutilizar, Reciclar', 'Comer, Dormir, Jugar', 'Nada', 'Todo'], 'correcta' => 'Reducir, Reutilizar, Reciclar'],
        ['pregunta' => 'Reciclar ahorra...', 'opciones' => ['Energía', 'Tiempo', 'Nada', 'Dinero'], 'correcta' => 'Energía'],
        ['pregunta' => 'Carbono activado filtra...', 'opciones' => ['Agua', 'Fuego', 'Aire', 'Tierra'], 'correcta' => 'Agua'],
        ['pregunta' => 'Compostaje convierte...', 'opciones' => ['Residuos en abono', 'Abono en residuos', 'Nada', 'Fuego'], 'correcta' => 'Residuos en abono'],
        ['pregunta' => 'ODS 12 es sobre...', 'opciones' => ['Consumo responsable', 'Educación', 'Salud', 'Paz'], 'correcta' => 'Consumo responsable'],
        ['pregunta' => 'Reutilizar ↓ plásticos en...', 'opciones' => ['60%', '0%', '100%', '10%'], 'correcta' => '60%'],
        ['pregunta' => 'Reciclar papel ahorra...', 'opciones' => ['Árboles', 'Agua', 'Aire', 'Fuego'], 'correcta' => 'Árboles'],
        ['pregunta' => 'Economía circular es...', 'opciones' => ['Ciclo cerrado', 'Lineal', 'Nada', 'Cuadrado'], 'correcta' => 'Ciclo cerrado'],
        ['pregunta' => 'Zero Waste desvía...', 'opciones' => ['90% vertedero', '0%', '100%', '10%'], 'correcta' => '90% vertedero'],
        ['pregunta' => '1 botella PET reciclada = luz...', 'opciones' => ['3 horas', '1 min', '0', '1 año'], 'correcta' => '3 horas'],

        // === MEDIO (10) ===
        ['pregunta' => 'Residuos globales 2025', 'opciones' => ['2.24 mil millones t', '1 t', '0', '1000 t'], 'correcta' => '2.24 mil millones t'],
        ['pregunta' => 'Reciclaje global', 'opciones' => ['13.5%', '100%', '0%', '50%'], 'correcta' => '13.5%'],
        ['pregunta' => 'Plásticos en océano/año', 'opciones' => ['14 millones t', '1 t', '0', '1000 t'], 'correcta' => '14 millones t'],
        ['pregunta' => 'Meta ODS 12.5', 'opciones' => ['50% reducción 2030', '100% 2025', '0%', 'Aumento'], 'correcta' => '50% reducción 2030'],
        ['pregunta' => 'Carbonización a...', 'opciones' => ['600°C', '0°C', '100°C', '1000°C'], 'correcta' => '600°C'],
        ['pregunta' => 'Activación con...', 'opciones' => ['KOH', 'Agua', 'Aire', 'Fuego'], 'correcta' => 'KOH'],
        ['pregunta' => 'Superficie carbono activado', 'opciones' => ['1,000 m²/g', '1 m²', '0', '100 m²'], 'correcta' => '1,000 m²/g'],
        ['pregunta' => 'San Francisco Zero Waste', 'opciones' => ['80%', '0%', '100%', '10%'], 'correcta' => '80%'],
        ['pregunta' => 'Ellen MacArthur promueve...', 'opciones' => ['Economía circular', 'Lineal', 'Nada', 'Quema'], 'correcta' => 'Economía circular'],
        ['pregunta' => '1 t papel reciclado ahorra...', 'opciones' => ['17 árboles', '1', '0', '100'], 'correcta' => '17 árboles'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula eficiencia circular', 'opciones' => ['Eficiencia → ∞', 'Eficiencia = 0', 'Eficiencia = 1', 'Eficiencia = -1'], 'correcta' => 'Eficiencia → ∞'],
        ['pregunta' => 'Oportunidad economía circular', 'opciones' => ['US$4.5 billones', 'US$1', '0', 'US$1000'], 'correcta' => 'US$4.5 billones'],
        ['pregunta' => 'Energía renovable ↓ emisiones...', 'opciones' => ['70%', '0%', '100%', '10%'], 'correcta' => '70%'],
        ['pregunta' => 'UNEP promueve...', 'opciones' => ['Ciclo circular', 'Lineal', 'Nada', 'Quema'], 'correcta' => 'Ciclo circular'],
        ['pregunta' => 'Carbono activado adsorbe por...', 'opciones' => ['Poros', 'Fuego', 'Agua', 'Aire'], 'correcta' => 'Poros'],
        ['pregunta' => 'Compostaje evita metano por...', 'opciones' => ['Descomposición aeróbica', 'Anaeróbica', 'Quema', 'Nada'], 'correcta' => 'Descomposición aeróbica'],
        ['pregunta' => 'Meta global reciclaje 2030', 'opciones' => ['30%', '100%', '0%', '10%'], 'correcta' => '30%'],
        ['pregunta' => 'Ciudad con 90% desvío', 'opciones' => ['Kamikatsu (Japón)', 'Madrid', 'Nueva York', 'Lima'], 'correcta' => 'Kamikatsu (Japón)'],
        ['pregunta' => 'Residuos orgánicos son X% total', 'opciones' => ['40–50%', '1%', '0%', '100%'], 'correcta' => '40–50%'],
        ['pregunta' => '1 kg compost = X kg CO₂ evitado', 'opciones' => ['0.5 kg', '0 kg', '1 kg', '10 kg'], 'correcta' => '0.5 kg']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Comunidad Sustentable (3 Pilares, Copenhague, Freiburg, Masdar, ODS 11)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'comunidad-sustentable',
    'titulo' => 'Comunidad Sustentable: El Futuro Donde Todos Ganan',
    'contenido' => '
        <h3>¿Qué es una Comunidad Sustentable?</h3>
        <p>Una <strong>comunidad sustentable</strong> es un <strong>sistema humano integrado</strong> que equilibra <strong>3 pilares</strong>: <strong>ecológico, social y económico</strong>, minimizando el impacto ambiental, promoviendo equidad y garantizando resiliencia a largo plazo.</p>
        <p><strong>ODS 11:</strong> <strong>Ciudades y Comunidades Sostenibles</strong> (ONU).</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Los 3 Pilares de la Sustentabilidad</h4>
        <table class="table">
            <thead>
                <tr><th>Pilar</th><th>Meta</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Ecológico</strong></td><td>0 emisiones netas</td><td>Energía 100% renovable</td></tr>
                <tr><td><strong>Social</strong></td><td>Equidad, acceso</td><td>Vivienda asequible</td></tr>
                <tr><td><strong>Económico</strong></td><td>Prosperidad circular</td><td>Empleos verdes</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Copenhague (Dinamarca)</strong> → <strong>50% en bici</strong>, <strong>100% renovable 2025</strong>, <strong>carbono neutral 2025</strong>.</p>
        </div>

        <div class="visual">
            <img src="assets/img/infraestructura_verde.jpg" alt="Infraestructura verde">
            <p><em>Infraestructura verde. Fuente: EPA.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Ciudades Modelo (2025)</h4>
        <table class="table">
            <thead>
                <tr><th>Ciudad</th><th>Logro</th><th>Indicador</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Copenhague</strong></td><td>Movilidad verde</td><td>62% viajes en bici</td></tr>
                <tr><td><strong>Freiburg (Alemania)</strong></td><td>Energía solar</td><td>600 MW instalados</td></tr>
                <tr><td><strong>Masdar (EAU)</strong></td><td>Cero carbono</td><td>0 emisiones</td></tr>
                <tr><td><strong>Singapur</strong></td><td>Ciudad jardín</td><td>50% cobertura verde</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/mapa-conceptual_desarrollo_sustentable.png" alt="Mapa conceptual">
            <p><em>Mapa conceptual. Fuente: ResearchGate.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/elementos_ciudad-sustentable.png" alt="Componentes ciudad">
            <p><em>Componentes integrados. Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Prácticas Clave</h4>
        <ul>
            <li><strong>Energía:</strong> Paneles solares, eólica urbana</li>
            <li><strong>Movilidad:</strong> Bici, transporte público eléctrico</li>
            <li><strong>Residuos:</strong> Zero Waste, compostaje</li>
            <li><strong>Alimentos:</strong> Huertos urbanos, mercados locales</li>
            <li><strong>Agua:</strong> Captación lluvia, reciclaje gris</li>
        </ul>

        <div class="visual">
            <img src="assets/img/ODS11-ONU.jpg" alt="ODS 11 ONU">
            <p><em>ODS 11. Fuente: ONU.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/freiburg_solar.jpg" alt="Freiburg solar">
            <p><em>Freiburg solar. Fuente: ICLEI.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Indicadores de Éxito (ICLEI 2025)</h4>
        <table class="table">
            <thead>
                <tr><th>Indicador</th><th>Meta</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Emisiones per cápita</strong></td><td><2 t CO₂</td><td>Copenhague: 1.9 t</td></tr>
                <tr><td><strong>Verde urbano</strong></td><td>>30 m²/hab</td><td>Singapur: 66 m²</td></tr>
                <tr><td><strong>Desvío residuos</strong></td><td>>80%</td><td>San Francisco: 80%</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: Los 3 Pilares en Equilibrio</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#E8F5E9"/>

                <!-- Centro: Comunidad -->
                <circle cx="350" cy="250" r="80" fill="#4CAF50" stroke="#2E7D32" stroke-width="5">
                    <animate attributeName="r" values="80;90;80" dur="3s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="240" fill="white" font-size="14" text-anchor="middle" font-weight="bold">COMUNIDAD</text>
                <text x="350" y="260" fill="white" font-size="12" text-anchor="middle">SUSTENTABLE</text>

                <!-- Pilar Ecológico -->
                <rect x="100" y="150" width="120" height="200" fill="#66BB6A" rx="20">
                    <animate attributeName="height" values="200;220;200" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="160" y="200" fill="white" font-size="14" text-anchor="middle">ECOLÓGICO</text>
                <text x="160" y="250" fill="#E8F5E9" font-size="11" text-anchor="middle">0 emisiones</text>
                <text x="160" y="270" fill="#E8F5E9" font-size="10" text-anchor="middle">Energía limpia</text>
                <text x="160" y="320" fill="#E8F5E9" font-size="9" text-anchor="middle">Copenhague 2025</text>

                <!-- Pilar Social -->
                <rect x="480" y="150" width="120" height="200" fill="#42A5F5" rx="20">
                    <animate attributeName="height" values="200;220;200" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="540" y="200" fill="white" font-size="14" text-anchor="middle">SOCIAL</text>
                <text x="540" y="250" fill="#E3F2FD" font-size="11" text-anchor="middle">Equidad</text>
                <text x="540" y="270" fill="#E3F2FD" font-size="10" text-anchor="middle">Acceso</text>
                <text x="540" y="320" fill="#E3F2FD" font-size="9" text-anchor="middle">Vivienda digna</text>

                <!-- Pilar Económico -->
                <path d="M220 350 L350 300 L480 350 L350 400 Z" fill="#FFB300">
                    <animate attributeName="opacity" values="0.8;1;0.8" dur="2s" repeatCount="indefinite"/>
                </path>
                <text x="350" y="340" fill="white" font-size="14" text-anchor="middle">ECONÓMICO</text>
                <text x="350" y="360" fill="#FFF3E0" font-size="11" text-anchor="middle">Empleos verdes</text>
                <text x="350" y="380" fill="#FFF3E0" font-size="10" text-anchor="middle">Circular</text>

                <!-- Conexiones -->
                <path d="M230 250 L270 250" stroke="#4CAF50" stroke-width="8" marker-end="url(#arrow)"/>
                <path d="M430 250 L470 250" stroke="#4CAF50" stroke-width="8" marker-end="url(#arrow)"/>
                <path d="M300 300 L350 320" stroke="#4CAF50" stroke-width="8" marker-end="url(#arrow)"/>
                <path d="M400 300 L350 320" stroke="#4CAF50" stroke-width="8" marker-end="url(#arrow)"/>

                <!-- Flechas -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#4CAF50"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#2E7D32" font-size="28" text-anchor="middle" font-weight="bold">3 PILARES</text>
                <text x="350" y="90" fill="#1B5E20" font-size="16" text-anchor="middle">Equilibrio = Sustentabilidad</text>
            </svg>
            <p><em>SVG Animado: 3 pilares en equilibrio dinámico con ejemplos reales.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define comunidad sustentable', 'respuesta' => 'Sistema que equilibra 3 pilares'],
        ['enunciado' => '3 pilares', 'respuesta' => 'Ecológico, social, económico'],
        ['enunciado' => 'ODS relacionado', 'respuesta' => 'ODS 11'],

        // === APLICADOS ===
        ['enunciado' => 'Copenhague % en bici', 'respuesta' => '62%'],
        ['enunciado' => 'Freiburg MW solares', 'respuesta' => '600 MW'],
        ['enunciado' => 'Meta Copenhague 2025', 'respuesta' => 'Carbono neutral'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Qué es movilidad verde?', 'respuesta' => 'Bici, transporte público eléctrico'],
        ['enunciado' => '¿Qué es huerto urbano?', 'respuesta' => 'Producción local de alimentos'],
        ['enunciado' => '¿Qué es resiliencia?', 'respuesta' => 'Capacidad de adaptarse a cambios'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula sustentabilidad', 'respuesta' => '\\(S = E \\times So \\times Ec\\)'],
        ['enunciado' => 'Indicador verde urbano', 'respuesta' => '>30 m²/habitante'],
        ['enunciado' => 'Ciudad con 0 emisiones', 'respuesta' => 'Masdar City']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => '3 pilares sustentabilidad', 'opciones' => ['Ecológico, social, económico', 'Solo dinero', 'Nada', 'Solo verde'], 'correcta' => 'Ecológico, social, económico'],
        ['pregunta' => 'ODS 11 es sobre...', 'opciones' => ['Ciudades sostenibles', 'Educación', 'Salud', 'Paz'], 'correcta' => 'Ciudades sostenibles'],
        ['pregunta' => 'Copenhague usa bici en...', 'opciones' => ['62%', '0%', '100%', '10%'], 'correcta' => '62%'],
        ['pregunta' => 'Freiburg es líder en...', 'opciones' => ['Energía solar', 'Carbón', 'Petróleo', 'Nada'], 'correcta' => 'Energía solar'],
        ['pregunta' => 'Masdar es...', 'opciones' => ['Cero carbono', 'Alta contaminación', 'Nada', 'Desierto'], 'correcta' => 'Cero carbono'],
        ['pregunta' => 'Singapur tiene...', 'opciones' => ['50% verde', '0%', '100%', '10%'], 'correcta' => '50% verde'],
        ['pregunta' => 'Movilidad verde incluye...', 'opciones' => ['Bicicleta', 'Avión', 'Coche gasolina', 'Nada'], 'correcta' => 'Bicicleta'],
        ['pregunta' => 'Huertos urbanos producen...', 'opciones' => ['Alimentos locales', 'Plástico', 'Basura', 'Nada'], 'correcta' => 'Alimentos locales'],
        ['pregunta' => 'Resiliencia es...', 'opciones' => ['Adaptación', 'Destrucción', 'Nada', 'Rígido'], 'correcta' => 'Adaptación'],
        ['pregunta' => 'ICLEI promueve...', 'opciones' => ['Ciudades sostenibles', 'Contaminación', 'Nada', 'Quema'], 'correcta' => 'Ciudades sostenibles'],

        // === MEDIO (10) ===
        ['pregunta' => 'Copenhague meta 2025', 'opciones' => ['Carbono neutral', 'Más emisiones', 'Nada', '2020'], 'correcta' => 'Carbono neutral'],
        ['pregunta' => 'Emisiones per cápita meta', 'opciones' => ['<2 t CO₂', '10 t', '0 t', '100 t'], 'correcta' => '<2 t CO₂'],
        ['pregunta' => 'Verde urbano meta', 'opciones' => ['>30 m²/hab', '1 m²', '0', '1000 m²'], 'correcta' => '>30 m²/hab'],
        ['pregunta' => 'San Francisco desvía...', 'opciones' => ['80% residuos', '0%', '100%', '10%'], 'correcta' => '80% residuos'],
        ['pregunta' => 'Singapur m² verde/hab', 'opciones' => ['66 m²', '1 m²', '0', '1000 m²'], 'correcta' => '66 m²'],
        ['pregunta' => 'Freiburg MW solares', 'opciones' => ['600 MW', '1 MW', '0', '1000 MW'], 'correcta' => '600 MW'],
        ['pregunta' => 'Copenhague emisiones', 'opciones' => ['1.9 t/hab', '10 t', '0 t', '100 t'], 'correcta' => '1.9 t/hab'],
        ['pregunta' => 'Masdar usa...', 'opciones' => ['Energía solar', 'Carbón', 'Petróleo', 'Nada'], 'correcta' => 'Energía solar'],
        ['pregunta' => 'Transporte público eléctrico ↓...', 'opciones' => ['Emisiones', 'Aumenta', 'Nada', 'Ruido'], 'correcta' => 'Emisiones'],
        ['pregunta' => 'Huerto urbano ↓ huella de...', 'opciones' => ['Carbono', 'Aumenta', 'Nada', 'Agua'], 'correcta' => 'Carbono'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula sustentabilidad', 'opciones' => ['S = E × So × Ec', 'S = E + So', 'S = 0', 'S = E²'], 'correcta' => 'S = E × So × Ec'],
        ['pregunta' => 'Ciudad con 0 emisiones operativas', 'opciones' => ['Masdar', 'Nueva York', 'Pekín', 'Moscú'], 'correcta' => 'Masdar'],
        ['pregunta' => 'Copenhague % renovable 2025', 'opciones' => ['100%', '0%', '50%', '10%'], 'correcta' => '100%'],
        ['pregunta' => 'Indicador ICLEI clave', 'opciones' => ['Emisiones per cápita', 'Dinero', 'Nada', 'Turismo'], 'correcta' => 'Emisiones per cápita'],
        ['pregunta' => 'País con más ciudades sustentables', 'opciones' => ['Dinamarca', 'EE.UU.', 'China', 'Brasil'], 'correcta' => 'Dinamarca'],
        ['pregunta' => 'Meta global ODS 11.3', 'opciones' => ['Urbanización inclusiva', 'Solo crecimiento', 'Nada', 'Reducción'], 'correcta' => 'Urbanización inclusiva'],
        ['pregunta' => '1 ha huerto urbano alimenta ≈', 'opciones' => ['100 personas', '1', '0', '1000'], 'correcta' => '100 personas'],
        ['pregunta' => 'Costo construir Masdar', 'opciones' => ['US$22 mil millones', 'US$1', '0', 'US$1000'], 'correcta' => 'US$22 mil millones'],
        ['pregunta' => 'Freiburg es conocida como...', 'opciones' => ['Ciudad solar', 'Ciudad del carbón', 'Nada', 'Ciudad del petróleo'], 'correcta' => 'Ciudad solar'],
        ['pregunta' => 'Meta global verde urbano 2030', 'opciones' => ['50% cobertura', '0%', '100%', '10%'], 'correcta' => '50% cobertura']
    ]
];
// ========================================
// MATERIA: ECOSISTEMAS
// SUBTEMA: Método Científico (Observación, Hipótesis, Experimento, Análisis, Conclusión)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Ecosistemas',
    'slug' => 'metodo-cientifico',
    'titulo' => 'Método Científico: La Brújula del Conocimiento',
    'contenido' => '
        <h3>¿Qué es el Método Científico?</h3>
        <p>El <strong>método científico</strong> es un <strong>proceso sistemático, iterativo y falsable</strong> para investigar fenómenos naturales. Sus pasos son:</p>
        <ol>
            <li><strong>Observación</strong></li>
            <li><strong>Pregunta</strong></li>
            <li><strong>Hipótesis</strong> (explicación testable)</li>
            <li><strong>Predicción</strong></li>
            <li><strong>Experimento</strong> (control + variables)</li>
            <li><strong>Análisis</strong> (estadística)</li>
            <li><strong>Conclusión</strong> (aceptar/rechazar hipótesis)</li>
            <li><strong>Comunicación</strong> (publicación, replicación)</li>
        </ol>
        <p><strong>En ecología:</strong> Se usa para estudiar <strong>deforestación, contaminación, cambio climático</strong>.</p>

        <hr style="border:1px dashed #00ff00;">

        <h4>1. Pasos Detallados</h4>
        <table class="table">
            <thead>
                <tr><th>Paso</th><th>Descripción</th><th>Ejemplo en Ecología</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>1. Observación</strong></td><td>Datos sensoriales o instrumentos</td><td>Peces muertos en río</td></tr>
                <tr><td><strong>2. Pregunta</strong></td><td>¿Por qué?</td><td>¿Qué causa la mortandad?</td></tr>
                <tr><td><strong>3. Hipótesis</strong></td><td>Explicación falsable</td><td>Contaminantes agrícolas</td></tr>
                <tr><td><strong>4. Predicción</strong></td><td>Si… entonces…</td><td>Si hay pesticidas, peces mueren</td></tr>
                <tr><td><strong>5. Experimento</strong></td><td>Control vs tratamiento</td><td>Muestras río vs control</td></tr>
                <tr><td><strong>6. Análisis</strong></td><td>Estadística (p<0.05)</td><td>t-test: diferencia significativa</td></tr>
                <tr><td><strong>7. Conclusión</strong></td><td>Aceptar o rechazar H₀</td><td>Rechazar: pesticidas culpables</td></tr>
                <tr><td><strong>8. Comunicación</strong></td><td>Publicación, revisión pares</td><td>Artículo en <em>Science</em></td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo Real:</strong> <strong>IPBES 2025</strong> → Observación: pérdida biodiversidad → Hipótesis: cambio uso suelo → Experimento: modelos GIS → Conclusión: 1 millón especies amenazadas.</p>
        </div>

        <div class="visual">
            <img src="assets/img/ciclo-continuo.png" alt="Ciclo continuo">
            <p><em>Ciclo iterativo. Fuente: Mrgscience.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>2. Aplicación en Ecología: ELOHA Framework</h4>
        <p><strong>ELOHA</strong> (Ecological Limits of Hydrologic Alteration):</p>
        <ul>
            <li>Observación: caudales alterados</li>
            <li>Hipótesis: afecta peces</li>
            <li>Experimento: modelado hidrológico + biológico</li>
            <li>Conclusión: caudales ecológicos mínimos</li>
        </ul>

        <div class="visual">
            <img src="assets/img/ciclo-clasico.jpeg" alt="Ciclo científico">
            <p><em>Ciclo clásico. Fuente: Open Washington.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/proceso-eloha.jpg" alt="ELOHA">
            <p><em>Proceso ELOHA. Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #00ff00;">

        <h4>3. Principios Filosóficos</h4>
        <table class="table">
            <thead>
                <tr><th>Autor</th><th>Idea Clave</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Popper (1934)</strong></td><td>Falsabilidad</td></tr>
                <tr><td><strong>Kuhn (1962)</strong></td><td>Paradigmas y revoluciones</td></tr>
                <tr><td><strong>Feyerabend</strong></td><td>Contra el método rígido</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #00ff00;">

        <h4>4. Herramientas Modernas (2025)</h4>
        <ul>
            <li><strong>Sensores IoT:</strong> Monitoreo real-time</li>
            <li><strong>Big Data:</strong> NASA Earthdata</li>
            <li><strong>IA:</strong> Modelos predictivos</li>
            <li><strong>GIS:</strong> ArcGIS, QGIS</li>
        </ul>

        <hr style="border:1px dashed #00ff00;">

        <h4>5. SVG Animado: El Ciclo del Conocimiento</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#E3F2FD"/>

                <!-- Círculo central -->
                <circle cx="350" cy="250" r="60" fill="#1E88E5" stroke="#1565C0" stroke-width="4">
                    <animate attributeName="r" values="60;70;60" dur="3s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="245" fill="white" font-size="14" text-anchor="middle" font-weight="bold">MÉTODO</text>
                <text x="350" y="265" fill="white" font-size="12" text-anchor="middle">CIENTÍFICO</text>

                <!-- 1. Observación -->
                <circle cx="150" cy="100" r="45" fill="#43A047">
                    <animate attributeName="r" values="45;55;45" begin="0s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="150" y="95" fill="white" font-size="12" text-anchor="middle">1. OBSERVACIÓN</text>
                <text x="150" y="115" fill="#E8F5E9" font-size="9" text-anchor="middle">Peces muertos</text>

                <!-- 2. Pregunta -->
                <circle cx="350" cy="80" r="40" fill="#FB8C00">
                    <animate attributeName="r" values="40;50;40" begin="0.5s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="75" fill="white" font-size="11" text-anchor="middle">2. PREGUNTA</text>
                <text x="350" y="95" fill="#FFF3E0" font-size="9" text-anchor="middle">¿Por qué?</text>

                <!-- 3. Hipótesis -->
                <circle cx="550" cy="100" r="45" fill="#D81B60">
                    <animate attributeName="r" values="45;55;45" begin="1s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="550" y="95" fill="white" font-size="12" text-anchor="middle">3. HIPÓTESIS</text>
                <text x="550" y="115" fill="#FCE4EC" font-size="9" text-anchor="middle">Pesticidas</text>

                <!-- 4. Experimento -->
                <circle cx="580" cy="250" r="45" fill="#8E24AA">
                    <animate attributeName="r" values="45;55;45" begin="1.5s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="580" y="245" fill="white" font-size="11" text-anchor="middle">4. EXPERIMENTO</text>
                <text x="580" y="265" fill="#F3E5F5" font-size="9" text-anchor="middle">Muestras</text>

                <!-- 5. Análisis -->
                <circle cx="550" cy="400" r="45" fill="#00897B">
                    <animate attributeName="r" values="45;55;45" begin="2s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="550" y="395" fill="white" font-size="12" text-anchor="middle">5. ANÁLISIS</text>
                <text x="550" y="415" fill="#E0F2F1" font-size="9" text-anchor="middle">p<0.05</text>

                <!-- 6. Conclusión -->
                <circle cx="350" cy="420" r="40" fill="#FDD835">
                    <animate attributeName="r" values="40;50;40" begin="2.5s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="415" fill="#212121" font-size="11" text-anchor="middle">6. CONCLUSIÓN</text>
                <text x="350" y="435" fill="#212121" font-size="9" text-anchor="middle">Rechazar H₀</text>

                <!-- 7. Comunicación -->
                <circle cx="150" cy="400" r="45" fill="#3949AB">
                    <animate attributeName="r" values="45;55;45" begin="3s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="150" y="395" fill="white" font-size="11" text-anchor="middle">7. COMUNICACIÓN</text>
                <text x="150" y="415" fill="#E8EAF6" font-size="9" text-anchor="middle">Publicar</text>

                <!-- Flechas curvas -->
                <path d="M150 145 Q200 180 300 180" stroke="#1E88E5" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M390 100 Q450 120 520 145" stroke="#1E88E5" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M580 295 Q600 320 580 375" stroke="#1E88E5" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M520 400 Q470 410 390 420" stroke="#1E88E5" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M310 420 Q250 410 180 400" stroke="#1E88E5" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M150 355 Q130 320 150 295" stroke="#1E88E5" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M180 180 Q220 160 300 160" stroke="#1E88E5" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>

                <!-- Flecha -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#1E88E5"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#1565C0" font-size="28" text-anchor="middle" font-weight="bold">MÉTODO CIENTÍFICO</text>
                <text x="350" y="90" fill="#0D47A1" font-size="16" text-anchor="middle">Ciclo iterativo y falsable</text>
            </svg>
            <p><em>SVG Animado: Ciclo completo con ejemplos ecológicos y animación secuencial.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define método científico', 'respuesta' => 'Proceso sistemático para investigar'],
        ['enunciado' => 'Primer paso', 'respuesta' => 'Observación'],
        ['enunciado' => 'Hipótesis debe ser...', 'respuesta' => 'Falsable'],

        // === APLICADOS ===
        ['enunciado' => 'En ELOHA, observa...', 'respuesta' => 'Caudales alterados'],
        ['enunciado' => 'Análisis usa...', 'respuesta' => 'Estadística (p<0.05)'],
        ['enunciado' => 'IPBES usó método para...', 'respuesta' => '1 millón especies amenazadas'],

        // === ECOLÓGICOS ===
        ['enunciado' => '¿Qué es variable independiente?', 'respuesta' => 'La que se manipula'],
        ['enunciado' => '¿Qué es control?', 'respuesta' => 'Grupo sin tratamiento'],
        ['enunciado' => '¿Qué es replicación?', 'respuesta' => 'Repetir experimento'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula hipótesis nula', 'respuesta' => '\\(H_0: \\mu_1 = \\mu_2\\)'],
        ['enunciado' => 'Popper dijo...', 'respuesta' => 'Falsabilidad'],
        ['enunciado' => 'Kuhn habló de...', 'respuesta' => 'Paradigmas']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Primer paso método', 'opciones' => ['Observación', 'Conclusión', 'Experimento', 'Hipótesis'], 'correcta' => 'Observación'],
        ['pregunta' => 'Hipótesis es...', 'opciones' => ['Falsable', 'Verdad absoluta', 'Opinión', 'Nada'], 'correcta' => 'Falsable'],
        ['pregunta' => 'En ecología estudia...', 'opciones' => ['Impactos ambientales', 'Rocas', 'Estrellas', 'Historia'], 'correcta' => 'Impactos ambientales'],
        ['pregunta' => 'Análisis usa...', 'opciones' => ['Estadística', 'Adivinación', 'Nada', 'Suerte'], 'correcta' => 'Estadística'],
        ['pregunta' => 'Conclusión puede...', 'opciones' => ['Rechazar hipótesis', 'Ignorarla', 'Cambiarla', 'Nada'], 'correcta' => 'Rechazar hipótesis'],
        ['pregunta' => 'ELOHA es para...', 'opciones' => ['Ríos', 'Montañas', 'Cielo', 'Mar'], 'correcta' => 'Ríos'],
        ['pregunta' => 'IPBES reportó...', 'opciones' => ['1 millón especies', '1 especie', '0', '1000'], 'correcta' => '1 millón especies'],
        ['pregunta' => 'NASA usa método para...', 'opciones' => ['Tierra', 'Luna', 'Marte', 'Nada'], 'correcta' => 'Tierra'],
        ['pregunta' => 'Variable dependiente es...', 'opciones' => ['La que se mide', 'La que se cambia', 'Nada', 'Ambas'], 'correcta' => 'La que se mide'],
        ['pregunta' => 'Control es...', 'opciones' => ['Sin tratamiento', 'Con tratamiento', 'Nada', 'Doble'], 'correcta' => 'Sin tratamiento'],

        // === MEDIO (10) ===
        ['pregunta' => 'Popper enfatizó...', 'opciones' => ['Falsabilidad', 'Verdad', 'Belleza', 'Nada'], 'correcta' => 'Falsabilidad'],
        ['pregunta' => 'Kuhn habló de...', 'opciones' => ['Paradigmas', 'Átomos', 'Nada', 'Dinosaurios'], 'correcta' => 'Paradigmas'],
        ['pregunta' => 'p<0.05 significa...', 'opciones' => ['Significativo', 'No significativo', 'Nada', 'Error'], 'correcta' => 'Significativo'],
        ['pregunta' => 'H₀ es hipótesis...', 'opciones' => ['Nula', 'Alternativa', 'Nada', 'Final'], 'correcta' => 'Nula'],
        ['pregunta' => 'Replicación es...', 'opciones' => ['Repetir experimento', 'Copiar resultados', 'Nada', 'Publicar'], 'correcta' => 'Repetir experimento'],
        ['pregunta' => 'GIS se usa en ecología para...', 'opciones' => ['Mapas', 'Música', 'Nada', 'Cocina'], 'correcta' => 'Mapas'],
        ['pregunta' => 'IoT en ciencia mide...', 'opciones' => ['Real-time', 'Ayer', 'Mañana', 'Nunca'], 'correcta' => 'Real-time'],
        ['pregunta' => 'Science Buddies enseña...', 'opciones' => ['Pasos método', 'Juegos', 'Nada', 'Cocina'], 'correcta' => 'Pasos método'],
        ['pregunta' => 'ELOHA significa...', 'opciones' => ['Ecological Limits...', 'Nada', 'Todo', 'Rápido'], 'correcta' => 'Ecological Limits...'],
        ['pregunta' => 'Comunicación científica incluye...', 'opciones' => ['Publicación', 'Silencio', 'Nada', 'Secreto'], 'correcta' => 'Publicación'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula H₀ típica', 'opciones' => ['H₀: μ₁ = μ₂', 'H₀: μ₁ > μ₂', 'H₀: μ₁ < μ₂', 'H₀: μ₁ ≠ μ₂'], 'correcta' => 'H₀: μ₁ = μ₂'],
        ['pregunta' => 'Feyerabend dijo...', 'opciones' => ['Contra método', 'A favor método', 'Nada', 'Por método'], 'correcta' => 'Contra método'],
        ['pregunta' => 'Paradigma según Kuhn es...', 'opciones' => ['Modelo aceptado', 'Error', 'Nada', 'Juego'], 'correcta' => 'Modelo aceptado'],
        ['pregunta' => 'Error tipo I es...', 'opciones' => ['Falso positivo', 'Falso negativo', 'Nada', 'Verdadero'], 'correcta' => 'Falso positivo'],
        ['pregunta' => 't-test compara...', 'opciones' => ['Medias', 'Medianas', 'Modas', 'Nada'], 'correcta' => 'Medias'],
        ['pregunta' => 'ANOVA compara...', 'opciones' => ['>2 grupos', '2 grupos', '1 grupo', '0 grupos'], 'correcta' => '>2 grupos'],
        ['pregunta' => 'Correlación mide...', 'opciones' => ['Relación', 'Causa', 'Nada', 'Efecto'], 'correcta' => 'Relación'],
        ['pregunta' => 'Regresión predice...', 'opciones' => ['Y desde X', 'X desde Y', 'Nada', 'Ambos'], 'correcta' => 'Y desde X'],
        ['pregunta' => 'Meta-análisis combina...', 'opciones' => ['Estudios', 'Opiniones', 'Nada', 'Errores'], 'correcta' => 'Estudios'],
        ['pregunta' => 'IPBES es como IPCC pero para...', 'opciones' => ['Biodiversidad', 'Clima', 'Agua', 'Aire'], 'correcta' => 'Biodiversidad']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Anti Nutrientes (Fitatos, Oxalatos, Taninos, Lectinas, Saponinas)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'anti-nutrientes',
    'titulo' => 'Los Anti Nutrientes: Guardianes Naturales con Doble Filo',
    'contenido' => '
        <h3>¿Qué son los Anti Nutrientes?</h3>
        <p>Los <strong>anti nutrientes</strong> son <strong>compuestos bioactivos</strong> producidos por plantas para <strong>defenderse de predadores</strong>. <strong>Interfieren con la absorción de nutrientes</strong> en el intestino humano, pero en dosis moderadas pueden tener <strong>efectos antioxidantes, anticancerígenos o prebióticos</strong>.</p>
        <p><strong>Clave:</strong> No son "tóxicos", sino <strong>condicionalmente problemáticos</strong>. <strong>Procesos culinarios</strong> (remojo, cocción, fermentación) los reducen hasta <strong>90%</strong>.</p>

        <hr style="border:1px dashed #ff6b6b;">

        <h4>1. Principales Anti Nutrientes</h4>
        <table class="table">
            <thead>
                <tr><th>Anti Nutriente</th><th>Alimentos</th><th>Bloquea</th><th>Reducción</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Fitatos</strong></td><td>Cereales, legumbres, nueces</td><td>Fe, Zn, Ca, Mg</td><td>Remojo + fitasa (90%)</td></tr>
                <tr><td><strong>Oxalatos</strong></td><td>Espinaca, remolacha, cacao</td><td>Ca, Mg</td><td>Cocción (50–80%)</td></tr>
                <tr><td><strong>Taninos</strong></td><td>Té, vino, sorgo</td><td>Proteínas, Fe</td><td>Fermentación (70%)</td></tr>
                <tr><td><strong>Lectinas</strong></td><td>Frijoles crudos, lentejas</td><td>Digestión</td><td>Cocción 100°C (99%)</td></tr>
                <tr><td><strong>Inhibidores tripsina</strong></td><td>Soja, garbanzos</td><td>Proteínas</td><td>Calor (95%)</td></tr>
                <tr><td><strong>Saponinas</strong></td><td>Quinoa, frijoles</td><td>Colesterol (↓ absorción)</td><td>Lavado (60%)</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>100 g espinaca cruda</strong> → <strong>970 mg oxalatos</strong> → bloquea <strong>90% del calcio</strong>. <strong>Cocida:</strong> 600 mg → <strong>50% bloqueo</strong>.</p>
        </div>

        <div class="visual">
            <img src="assets/img/estructura-quimica.png" alt="Diagrama anti nutrientes">
            <p><em>Estructuras químicas. Fuente: Frontiers.</em></p>
        </div>

        <hr style="border:1px dashed #ff6b6b;">

        <h4>2. Mecanismos de Acción</h4>
        <ul>
            <li><strong>Quelación:</strong> Fitatos forman complejos insolubles con Fe³⁺</li>
            <li><strong>Precipitación:</strong> Oxalatos + Ca²⁺ → CaC₂O₄ (cálculos)</li>
            <li><strong>Unión proteica:</strong> Taninos se unen a enzimas</li>
            <li><strong>Alteración membrana:</strong> Lectinas aglutinan eritrocitos</li>
        </ul>

        <div class="visual">
            <img src="assets/img/antinutricional.webp" alt="Factores antinutricionales">
            <p><em>Interacciones moleculares. Fuente: Springer.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/fermentacion-reduce-fitatos.jpg" alt="Degradación bacteriana">
            <p><em>Fermentación reduce fitatos. Fuente: MDPI.</em></p>
        </div>

        <hr style="border:1px dashed #ff6b6b;">

        <h4>3. Procesos para Reducir Anti Nutrientes</h4>
        <table class="table">
            <thead>
                <tr><th>Método</th><th>Efecto</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Remojo (12h)</strong></td><td>↓ Fitatos 30–50%</td><td>Frijoles en agua + limón</td></tr>
                <tr><td><strong>Fermentación</strong></td><td>↓ Fitatos 80–90%</td><td>Yogur, tempeh, miso</td></tr>
                <tr><td><strong>Cocción (100°C)</strong></td><td>↓ Lectinas 99%</td><td>Frijoles rojos cocidos</td></tr>
                <tr><td><strong>Germinación</strong></td><td>↓ Taninos 60%</td><td>Lentejas germinadas</td></tr>
                <tr><td><strong>Extrusión</strong></td><td>↓ Inhibidores 95%</td><td>Cereales desayuno</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/FAO-antinutrientes.jpg" alt="FAO anti nutrientes">
            <p><em>Reducción por procesamiento. Fuente: FAO.</em></p>
        </div>

        <hr style="border:1px dashed #ff6b6b;">

        <h4>4. Beneficios Potenciales (2025)</h4>
        <ul>
            <li><strong>Fitatos:</strong> ↓ riesgo cáncer colorrectal (meta-análisis NIH)</li>
            <li><strong>Taninos:</strong> Antioxidantes (ORAC 10x vitamina C)</li>
            <li><strong>Lectinas:</strong> Inmunomoduladoras (baja dosis)</li>
            <li><strong>Saponinas:</strong> ↓ colesterol LDL 15%</li>
        </ul>

        <hr style="border:1px dashed #ff6b6b;">

        <h4>5. SVG Animado: Del Bloqueo a la Absorción</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#FFF3E0"/>

                <!-- Alimento -->
                <rect x="50" y="150" width="150" height="200" fill="#FF9800" rx="20">
                    <animate attributeName="opacity" values="1;0.8;1" dur="3s" repeatCount="indefinite"/>
                </rect>
                <text x="125" y="200" fill="white" font-size="14" text-anchor="middle" font-weight="bold">ALIMENTO</text>
                <text x="125" y="230" fill="white" font-size="12" text-anchor="middle">Fitatos</text>
                <text x="125" y="260" fill="white" font-size="12" text-anchor="middle">Oxalatos</text>
                <text x="125" y="290" fill="white" font-size="12" text-anchor="middle">Taninos</text>

                <!-- Intestino -->
                <ellipse cx="500" cy="250" rx="120" ry="80" fill="#81C784" stroke="#4CAF50" stroke-width="4"/>
                <text x="500" y="240" fill="#1B5E20" font-size="16" text-anchor="middle" font-weight="bold">INTESTINO</text>
                <text x="500" y="270" fill="#2E7D32" font-size="12" text-anchor="middle">Absorción ↓</text>

                <!-- Bloqueo -->
                <path d="M200 250 L380 250" stroke="#F44336" stroke-width="8" marker-mid="url(#block)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <text x="290" y="230" fill="#D32F2F" font-size="14" text-anchor="middle">BLOQUEO</text>

                <!-- Procesamiento -->
                <rect x="250" y="50" width="200" height="80" fill="#2196F3" rx="15">
                    <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="350" y="80" fill="white" font-size="14" text-anchor="middle">PROCESAMIENTO</text>
                <text x="350" y="105" fill="#BBDEFB" font-size="11" text-anchor="middle">Remojo | Cocción | Fermentación</text>

                <!-- Absorción libre -->
                <path d="M200 300 L380 300" stroke="#4CAF50" stroke-width="8" marker-end="url(#arrow)" marker-mid="url(#ok)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" begin="2s" dur="2s" repeatCount="indefinite"/>
                </path>
                <text x="290" y="330" fill="#2E7D32" font-size="14" text-anchor="middle">ABSORCIÓN ↑</text>

                <!-- Nutrientes -->
                <circle cx="430" cy="220" r="15" fill="#FFD700">
                    <animate attributeName="opacity" values="0;1;0" begin="2s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="430" y="225" fill="#212121" font-size="10" text-anchor="middle">Fe</text>
                <circle cx="460" cy="250" r="15" fill="#00BCD4">
                    <animate attributeName="opacity" values="0;1;0" begin="2.2s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="460" y="255" fill="white" font-size="10" text-anchor="middle">Ca</text>
                <circle cx="430" cy="280" r="15" fill="#9C27B0">
                    <animate attributeName="opacity" values="0;1;0" begin="2.4s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="430" y="285" fill="white" font-size="10" text-anchor="middle">Zn</text>

                <!-- Marcadores -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#4CAF50"/>
                    </marker>
                    <marker id="block" markerWidth="20" markerHeight="20" refX="10" refY="10" orient="auto">
                        <circle cx="10" cy="10" r="8" fill="#F44336"/>
                        <line x1="5" y1="5" x2="15" y2="15" stroke="white" stroke-width="2"/>
                        <line x1="15" y1="5" x2="5" y2="15" stroke="white" stroke-width="2"/>
                    </marker>
                    <marker id="ok" markerWidth="20" markerHeight="20" refX="10" refY="10" orient="auto">
                        <circle cx="10" cy="10" r="8" fill="#4CAF50"/>
                        <path d="M6,10 L8,12 L14,8" stroke="white" stroke-width="2" fill="none"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="40" fill="#E65100" font-size="28" text-anchor="middle" font-weight="bold">ANTI NUTRIENTES</text>
                <text x="350" y="70" fill="#BF360C" font-size="16" text-anchor="middle">Bloquean → Procesan → Absorben</text>
            </svg>
            <p><em>SVG Animado: De bloqueo a biodisponibilidad con procesamiento.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define anti nutriente', 'respuesta' => 'Compuesto que reduce absorción de nutrientes'],
        ['enunciado' => 'Fitatos bloquean...', 'respuesta' => 'Fe, Zn, Ca, Mg'],
        ['enunciado' => 'Oxalatos en...', 'respuesta' => 'Espinaca, cacao'],

        // === APLICADOS ===
        ['enunciado' => 'Espinaca cruda: oxalatos', 'respuesta' => '970 mg/100g'],
        ['enunci sapo reduce fitatos 90%', 'respuesta' => 'Fermentación'],
        ['enunciado' => 'Cocción elimina lectinas al...', 'respuesta' => '99%'],

        // === BIOQUÍMICOS ===
        ['enunciado' => 'Mecanismo fitatos', 'respuesta' => 'Quelación de cationes'],
        ['enunciado' => 'Taninos se unen a...', 'respuesta' => 'Proteínas'],
        ['enunciado' => 'Saponinas ↓...', 'respuesta' => 'Colesterol LDL'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula quelación', 'respuesta' => '\\([\\text{Fe}^{3+}] + [\\text{Fitato}] \\rightarrow [\\text{Fe-Fitato}]_{\\text{insoluble}}\\)'],
        ['enunciado' => 'FAO recomienda...', 'respuesta' => 'Procesar legumbres'],
        ['enunciado' => 'Meta-análisis NIH: fitatos ↓...', 'respuesta' => 'Cáncer colorrectal']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Anti nutrientes...', 'opciones' => ['Bloquean absorción', 'Aumentan', 'Nada', 'Destruyen'], 'correcta' => 'Bloquean absorción'],
        ['pregunta' => 'Fitatos en...', 'opciones' => ['Cereales', 'Carne', 'Leche', 'Agua'], 'correcta' => 'Cereales'],
        ['pregunta' => 'Oxalatos bloquean...', 'opciones' => ['Calcio', 'Proteínas', 'Grasas', 'Vitaminas'], 'correcta' => 'Calcio'],
        ['pregunta' => 'Taninos en...', 'opciones' => ['Té', 'Leche', 'Agua', 'Pan'], 'correcta' => 'Té'],
        ['pregunta' => 'Lectinas en...', 'opciones' => ['Frijoles crudos', 'Frijoles cocidos', 'Arroz', 'Nada'], 'correcta' => 'Frijoles crudos'],
        ['pregunta' => 'Remojo reduce...', 'opciones' => ['Fitatos', 'Proteínas', 'Grasas', 'Agua'], 'correcta' => 'Fitatos'],
        ['pregunta' => 'Cocción elimina...', 'opciones' => ['Lectinas', 'Vitaminas', 'Nada', 'Agua'], 'correcta' => 'Lectinas'],
        ['pregunta' => 'Fermentación ↓...', 'opciones' => ['Fitatos 90%', '0%', '100%', '10%'], 'correcta' => 'Fitatos 90%'],
        ['pregunta' => 'Espinaca cruda bloquea...', 'opciones' => ['90% Ca', '0%', '100%', '10%'], 'correcta' => '90% Ca'],
        ['pregunta' => 'Saponinas ↓...', 'opciones' => ['Colesterol', 'Azúcar', 'Agua', 'Nada'], 'correcta' => 'Colesterol'],

        // === MEDIO (10) ===
        ['pregunta' => 'Fitatos quelan...', 'opciones' => ['Fe³⁺', 'Na⁺', 'Cl⁻', 'H⁺'], 'correcta' => 'Fe³⁺'],
        ['pregunta' => 'Oxalato + Ca →...', 'opciones' => ['CaC₂O₄', 'CaCl₂', 'Na₂O', 'H₂O'], 'correcta' => 'CaC₂O₄'],
        ['pregunta' => 'Taninos ORAC...', 'opciones' => ['10x vit C', '1x', '0x', '0.1x'], 'correcta' => '10x vit C'],
        ['pregunta' => 'Germinación ↓ taninos...', 'opciones' => ['60%', '0%', '100%', '10%'], 'correcta' => '60%'],
        ['pregunta' => 'Frijol rojo crudo tóxico por...', 'opciones' => ['Lectinas', 'Grasa', 'Azúcar', 'Sal'], 'correcta' => 'Lectinas'],
        ['pregunta' => 'Tempeh es soja...', 'opciones' => ['Fermentada', 'Cruda', 'Frita', 'Hervida'], 'correcta' => 'Fermentada'],
        ['pregunta' => 'Quinoa necesita...', 'opciones' => ['Lavar saponinas', 'Freír', 'Hornear', 'Nada'], 'correcta' => 'Lavar saponinas'],
        ['pregunta' => 'FAO dice procesar...', 'opciones' => ['Legumbres', 'Carne', 'Leche', 'Agua'], 'correcta' => 'Legumbres'],
        ['pregunta' => 'NIH: fitatos ↓ riesgo...', 'opciones' => ['Cáncer colorrectal', 'Diabetes', 'Obesidad', 'Gripe'], 'correcta' => 'Cáncer colorrectal'],
        ['pregunta' => 'Inhibidores tripsina en...', 'opciones' => ['Soja', 'Maíz', 'Arroz', 'Trigo'], 'correcta' => 'Soja'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula quelación', 'opciones' => ['[Fe³⁺] + [Fitato] → [Fe-Fitato]', '[Fe] + [O] → [FeO]', '[Ca] + [Cl] → [CaCl]', '[H] + [O] → [H₂O]'], 'correcta' => '[Fe³⁺] + [Fitato] → [Fe-Fitato]'],
        ['pregunta' => 'CaC₂O₄ causa...', 'opciones' => ['Cálculos renales', 'Diarrea', 'Estreñimiento', 'Nada'], 'correcta' => 'Cálculos renales'],
        ['pregunta' => 'Lectina aglutina...', 'opciones' => ['Eritrocitos', 'Leucocitos', 'Plaquetas', 'Neuronas'], 'correcta' => 'Eritrocitos'],
        ['pregunta' => 'Fitasa es enzima que...', 'opciones' => ['Degrada fitatos', 'Degrada proteínas', 'Degrada grasas', 'Degrada agua'], 'correcta' => 'Degrada fitatos'],
        ['pregunta' => 'Biodisponibilidad Fe en espinaca...', 'opciones' => ['<5%', '50%', '100%', '20%'], 'correcta' => '<5%'],
        ['pregunta' => 'Saponinas forman espuma por...', 'opciones' => ['Tensioactivos', 'Gases', 'Calor', 'Luz'], 'correcta' => 'Tensioactivos'],
        ['pregunta' => 'Meta-análisis: taninos ↓...', 'opciones' => ['Absorción Fe', 'Aumentan Fe', 'Nada', 'Absorción Ca'], 'correcta' => 'Absorción Fe'],
        ['pregunta' => 'Extrusión reduce inhibidores...', 'opciones' => ['95%', '50%', '0%', '100%'], 'correcta' => '95%'],
        ['pregunta' => 'Harvard: anti nutrientes en dieta...', 'opciones' => ['Beneficiosos en moderación', 'Tóxicos siempre', 'Inútiles', 'Veneno'], 'correcta' => 'Beneficiosos en moderación'],
        ['pregunta' => 'Proceso más efectivo vs fitatos', 'opciones' => ['Fermentación', 'Cocción', 'Remojo', 'Congelación'], 'correcta' => 'Fermentación']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Biodisponibilidad (Bioaccesibilidad, Absorción, Utilización, Modelos Caco-2)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'biodisponibilidad',
    'titulo' => 'Biodisponibilidad: Del Plato al Torrente Sanguíneo',
    'contenido' => '
        <h3>¿Qué es la Biodisponibilidad?</h3>
        <p>La <strong>biodisponibilidad</strong> es la <strong>fracción de un nutriente ingerido</strong> que se <strong>absorbe en el intestino</strong> y llega al <strong>torrente sanguíneo en forma activa</strong> para ser utilizada por las células.</p>
        <p>Fórmula:</p>
        <p>\\[ F = \\frac{\\text{Nutriente absorbido y utilizado}}{\\text{Nutriente ingerido}} \\times 100\\% \\]</p>
        <p><strong>Distingue:</strong> <strong>Bioaccesibilidad</strong> (liberado en intestino) ≠ <strong>Biodisponibilidad</strong> (absorbido y activo).</p>

        <hr style="border:1px dashed #4CAF50;">

        <h4>1. Biodisponibilidad de Nutrientes Clave (FAO 2025)</h4>
        <table class="table">
            <thead>
                <tr><th>Nutriente</th><th>Fuente</th><th>Biodisponibilidad (%)</th><th>Factor +</th><th>Factor -</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Hierro</strong></td><td>Hemo (carne)</td><td><strong>15–35%</strong></td><td>Vit C, carne</td><td>Fitatos, taninos</td></tr>
                <tr><td><strong>Hierro</strong></td><td>No hemo (plantas)</td><td><strong>2–20%</strong></td><td>Vit C (+300%)</td><td>Fitatos, Ca</td></tr>
                <tr><td><strong>Calcio</strong></td><td>Lácteos</td><td><strong>30–40%</strong></td><td>Vit D</td><td>Oxalatos, fitatos</td></tr>
                <tr><td><strong>Zinc</strong></td><td>Carne</td><td><strong>30–40%</strong></td><td>Proteína</td><td>Fitatos</td></tr>
                <tr><td><strong>Vitamina A</strong></td><td>Retinol (hígado)</td><td><strong>70–90%</strong></td><td>Grasa</td><td>Fibra</td></tr>
                <tr><td><strong>β-caroteno</strong></td><td>Zanahoria</td><td><strong>5–15%</strong></td><td>Grasa, cocción</td><td>Fibra cruda</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>100 mg hierro en espinaca</strong> → <strong>5% biodisponible</strong> → <strong>5 mg absorbidos</strong>. <strong>Con jugo naranja:</strong> ↑ a <strong>15 mg</strong> (+200%).</p>
        </div>

        <div class="visual">
            <img src="assets/img/invitro-invivo.jpg" alt="Métodos evaluación">
            <p><em>Métodos in vivo/in vitro. Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #4CAF50;">

        <h4>2. Factores que Modulan la Biodisponibilidad</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Ejemplos</th><th>Efecto</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Mejoradores</strong></td><td>Vit C, carne, grasa, cocción</td><td>↑ Absorción</td></tr>
                <tr><td><strong>Inhibidores</strong></td><td>Fitatos, oxalatos, taninos, Ca</td><td>↓ Absorción</td></tr>
                <tr><td><strong>Matriz alimentaria</strong></td><td>Fibra, proteína</td><td>Variable</td></tr>
                <tr><td><strong>Estado fisiológico</strong></td><td>Embarazo, anemia</td><td>↑ Necesidad</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/instito-torrente.jpg" alt="Bioaccesibilidad vs biodisponibilidad">
            <p><em>Del intestino al torrente. Fuente: ScienceDirect.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/mecanismos-bioaccesibilidad.png" alt="Mecanismos bioaccesibilidad">
            <p><em>Mecanismos moleculares. Fuente: ScienceDirect.</em></p>
        </div>

        <hr style="border:1px dashed #4CAF50;">

        <h4>3. Modelos de Evaluación (2025)</h4>
        <ul>
            <li><strong>In vivo:</strong> Balance metabólico, isótopos estables</li>
            <li><strong>In vitro:</strong> Caco-2, SHIME (intestino simulado)</li>
            <li><strong>INFOGEST:</strong> Digestión estandarizada</li>
        </ul>

        <div class="visual">
            <img src="assets/img/celular-caco2.jpg" alt="Modelo Caco-2">
            <p><em>Modelo celular Caco-2. Fuente: Frontiers.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/factores-dieteticos.png" alt="FAO biodisponibilidad">
            <p><em>Factores dietéticos. Fuente: FAO.</em></p>
        </div>

        <hr style="border:1px dashed #4CAF50;">

        <h4>4. Estrategias para Mejorar Biodisponibilidad</h4>
        <table class="table">
            <thead>
                <tr><th>Estrategia</th><th>Ejemplo</th><th>Aumento</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Combinar alimentos</strong></td><td>Lentejas + pimiento</td><td>Hierro ↑ 300%</td></tr>
                <tr><td><strong>Cocción</strong></td><td>Zanahoria hervida</td><td>β-caroteno ↑ 600%</td></tr>
                <tr><td><strong>Fermentación</strong></td><td>Yogur</td><td>Calcio ↑ 20%</td></tr>
                <tr><td><strong>Suplementos</strong></td><td>Fe + Vit C</td><td>Absorción ↑ 400%</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #4CAF50;">

        <h4>5. SVG Animado: Camino del Hierro en el Cuerpo</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#E8F5E9"/>

                <!-- Plato -->
                <circle cx="100" cy="250" r="60" fill="#FF9800" stroke="#F57C00" stroke-width="4"/>
                <text x="100" y="245" fill="white" font-size="12" text-anchor="middle">PLATO</text>
                <text x="100" y="265" fill="white" font-size="10" text-anchor="middle">100 mg Fe</text>

                <!-- Estómago -->
                <path d="M200 200 Q250 150 300 200 L290 300 Q250 350 210 300 Z" fill="#EF5350"/>
                <text x="250" y="250" fill="white" font-size="14" text-anchor="middle">ESTÓMAGO</text>
                <text x="250" y="280" fill="#FFEBEE" font-size="10" text-anchor="middle">pH 2</text>

                <!-- Intestino -->
                <rect x="350" y="150" width="200" height="200" fill="#81C784" rx="30"/>
                <text x="450" y="200" fill="#1B5E20" font-size="14" text-anchor="middle">INTESTINO</text>
                <text x="450" y="230" fill="#2E7D32" font-size="11" text-anchor="middle">Absorción</text>

                <!-- Torrente -->
                <ellipse cx="650" cy="250" rx="80" ry="60" fill="#42A5F5"/>
                <text x="650" y="245" fill="white" font-size="12" text-anchor="middle">SANGRE</text>
                <text x="650" y="265" fill="#BBDEFB" font-size="10" text-anchor="middle">15 mg</text>

                <!-- Flechas animadas -->
                <path d="M160 250 L190 250" stroke="#FF9800" stroke-width="6" marker-end="url(#arrow1)">
                    <animate attributeName="stroke-dashoffset" from="50" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M300 250 L350 250" stroke="#EF5350" stroke-width="6" marker-end="url(#arrow2)">
                    <animate attributeName="stroke-dashoffset" from="50" to="0" dur="2s" begin="0.5s" repeatCount="indefinite"/>
                </path>
                <path d="M550 250 L570 250" stroke="#81C784" stroke-width="6" marker-end="url(#arrow3)">
                    <animate attributeName="stroke-dashoffset" from="50" to="0" dur="2s" begin="1s" repeatCount="indefinite"/>
                </path>

                <!-- Moléculas Fe -->
                <circle cx="400" cy="220" r="12" fill="#D32F2F">
                    <animate attributeName="opacity" values="0;1;0" begin="1s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="400" y="225" fill="white" font-size="9" text-anchor="middle">Fe</text>
                <circle cx="420" cy="260" r="12" fill="#D32F2F">
                    <animate attributeName="opacity" values="0;1;0" begin="1.2s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="420" y="265" fill="white" font-size="9" text-anchor="middle">Fe</text>
                <circle cx="600" cy="240" r="12" fill="#D32F2F">
                    <animate attributeName="opacity" values="0;1;0" begin="1.5s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="600" y="245" fill="white" font-size="9" text-anchor="middle">Fe</text>

                <!-- Inhibidores -->
                <text x="450" y="300" fill="#B71C1C" font-size="10" text-anchor="middle">Fitatos ↓</text>
                <text x="450" y="320" fill="#B71C1C" font-size="10" text-anchor="middle">Oxalatos ↓</text>

                <!-- Mejoradores -->
                <text x="450" y="180" fill="#1B5E20" font-size="10" text-anchor="middle">Vit C ↑</text>
                <text x="450" y="160" fill="#1B5E20" font-size="10" text-anchor="middle">Carne ↑</text>

                <!-- Marcadores -->
                <defs>
                    <marker id="arrow1" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#FF9800"/>
                    </marker>
                    <marker id="arrow2" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#EF5350"/>
                    </marker>
                    <marker id="arrow3" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#81C784"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#2E7D32" font-size="28" text-anchor="middle" font-weight="bold">BIODISPONIBILIDAD</text>
                <text x="350" y="90" fill="#1B5E20" font-size="16" text-anchor="middle">Del 100 mg → Solo 15 mg llegan</text>
            </svg>
            <p><em>SVG Animado: Viaje del hierro con moduladores (+/-).</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define biodisponibilidad', 'respuesta' => 'Fracción absorbida y utilizada'],
        ['enunciado' => 'Hierro hemo %', 'respuesta' => '15–35%'],
        ['enunciado' => 'Hierro no hemo %', 'respuesta' => '2–20%'],

        // === APLICADOS ===
        ['enunciado' => '100 mg Fe espinaca + Vit C → absorbido', 'respuesta' => '15 mg'],
        ['enunciado' => 'Zanahoria cruda vs cocida β-caroteno', 'respuesta' => 'Cocida ↑ 600%'],
        ['enunciado' => 'Modelo in vitro', 'respuesta' => 'Caco-2'],

        // === BIOQUÍMICOS ===
        ['enunciado' => 'Vit C reduce Fe³⁺ a...', 'respuesta' => 'Fe²⁺ (más absorbible)'],
        ['enunciado' => 'Fitatos forman complejos con...', 'respuesta' => 'Fe, Zn, Ca'],
        ['enunciado' => 'DMT1 transporta...', 'respuesta' => 'Fe²⁺ en enterocito'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula biodisponibilidad', 'respuesta' => '\\(F = \\frac{\\text{absorbido}}{\\text{ingerido}} \\times 100\\%\\)'],
        ['enunciado' => 'INFOGEST es protocolo de...', 'respuesta' => 'Digestión estandarizada'],
        ['enunciado' => 'FAO recomienda combinar...', 'respuesta' => 'Legumbres + Vit C']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Biodisponibilidad mide...', 'opciones' => ['Absorción', 'Cantidad ingerida', 'Excreción', 'Peso'], 'correcta' => 'Absorción'],
        ['pregunta' => 'Hierro hemo está en...', 'opciones' => ['Carne', 'Espinaca', 'Leche', 'Agua'], 'correcta' => 'Carne'],
        ['pregunta' => 'Hierro no hemo %', 'opciones' => ['2–20%', '50–70%', '100%', '0%'], 'correcta' => '2–20%'],
        ['pregunta' => 'Vit C ↑ hierro...', 'opciones' => ['300%', '0%', '100%', '10%'], 'correcta' => '300%'],
        ['pregunta' => 'Fitatos ↓...', 'opciones' => ['Hierro', 'Proteínas', 'Grasas', 'Vitaminas'], 'correcta' => 'Hierro'],
        ['pregunta' => 'Cocción ↑ β-caroteno...', 'opciones' => ['600%', '0%', '100%', '10%'], 'correcta' => '600%'],
        ['pregunta' => 'Calcio biodisponible en...', 'opciones' => ['Lácteos', 'Espinaca', 'Nueces', 'Té'], 'correcta' => 'Lácteos'],
        ['pregunta' => 'Bioaccesibilidad es...', 'opciones' => ['Liberado en intestino', 'Absorbido', 'Excretado', 'Nada'], 'correcta' => 'Liberado en intestino'],
        ['pregunta' => 'Caco-2 simula...', 'opciones' => ['Enterocitos', 'Estómago', 'Hígado', 'Riñón'], 'correcta' => 'Enterocitos'],
        ['pregunta' => 'FAO promueve...', 'opciones' => ['Lentejas + limón', 'Solo carne', 'Solo suplementos', 'Nada'], 'correcta' => 'Lentejas + limón'],

        // === MEDIO (10) ===
        ['pregunta' => 'Hierro hemo %', 'opciones' => ['15–35%', '2–20%', '50–70%', '0%'], 'correcta' => '15–35%'],
        ['pregunta' => 'Zinc biodisponible en...', 'opciones' => ['Carne', 'Frijoles', 'Té', 'Agua'], 'correcta' => 'Carne'],
        ['pregunta' => 'Vit A retinol %', 'opciones' => ['70–90%', '5–15%', '30–40%', '0%'], 'correcta' => '70–90%'],
        ['pregunta' => 'β-caroteno %', 'opciones' => ['5–15%', '70–90%', '100%', '0%'], 'correcta' => '5–15%'],
        ['pregunta' => 'Fermentación ↑ calcio...', 'opciones' => ['20%', '0%', '100%', '10%'], 'correcta' => '20%'],
        ['pregunta' => 'DMT1 transporta...', 'opciones' => ['Fe²⁺', 'Fe³⁺', 'Ca²⁺', 'Zn²⁺'], 'correcta' => 'Fe²⁺'],
        ['pregunta' => 'Vit C reduce Fe a...', 'opciones' => ['Fe²⁺', 'Fe³⁺', 'Fe⁰', 'Fe⁴⁺'], 'correcta' => 'Fe²⁺'],
        ['pregunta' => 'INFOGEST estandariza...', 'opciones' => ['Digestión', 'Absorción', 'Excreción', 'Peso'], 'correcta' => 'Digestión'],
        ['pregunta' => 'Modelo in vivo usa...', 'opciones' => ['Isótopos', 'Colorantes', 'Nada', 'Agua'], 'correcta' => 'Isótopos'],
        ['pregunta' => 'SHIME simula...', 'opciones' => ['Microbiota', 'Estómago', 'Hígado', 'Riñón'], 'correcta' => 'Microbiota'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula F', 'opciones' => ['F = (abs/ing)×100', 'F = ing/abs', 'F = 100', 'F = 0'], 'correcta' => 'F = (abs/ing)×100'],
        ['pregunta' => '100 mg Fe espinaca + Vit C →', 'opciones' => ['15 mg absorbidos', '100 mg', '0 mg', '5 mg'], 'correcta' => '15 mg absorbidos'],
        ['pregunta' => 'Zanahoria cocida ↑ β-caroteno...', 'opciones' => ['600%', '100%', '0%', '10%'], 'correcta' => '600%'],
        ['pregunta' => 'Ferroportina exporta Fe desde...', 'opciones' => ['Enterocito a sangre', 'Sangre a célula', 'Célula a sangre', 'Nada'], 'correcta' => 'Enterocito a sangre'],
        ['pregunta' => 'Hepcidina ↓ absorción de...', 'opciones' => ['Hierro', 'Calcio', 'Zinc', 'Vitamina'], 'correcta' => 'Hierro'],
        ['pregunta' => 'Anemia ferropénica ↑ absorción...', 'opciones' => ['Hierro', 'Calcio', 'Zinc', 'Nada'], 'correcta' => 'Hierro'],
        ['pregunta' => 'Meta FAO 2030: biodisponibilidad Fe ↑...', 'opciones' => ['30% en dietas vegetales', '100%', '0%', '10%'], 'correcta' => '30% en dietas vegetales'],
        ['pregunta' => 'Caco-2 mide transporte vía...', 'opciones' => ['Monocapa celular', 'Tubo digestivo', 'Sangre', 'Orina'], 'correcta' => 'Monocapa celular'],
        ['pregunta' => 'Mejor combinacion Fe vegetal', 'opciones' => ['Legumbres + cítricos', 'Legumbres + té', 'Legumbres + leche', 'Legumbres + agua'], 'correcta' => 'Legumbres + cítricos'],
        ['pregunta' => 'NIH: Vit C ↑ Fe no hemo hasta...', 'opciones' => ['400% con suplemento', '100%', '0%', '10%'], 'correcta' => '400% con suplemento']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Método Científico (Falsabilidad, Control, Variables, Replicabilidad)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'metodo-cientifico',
    'titulo' => 'Método Científico: La Receta del Descubrimiento Químico',
    'contenido' => '
        <h3>¿Qué es el Método Científico?</h3>
        <p>El <strong>método científico</strong> es un <strong>proceso lógico, sistemático y falsable</strong> para investigar fenómenos naturales. En química, permite <strong>descubrir leyes, validar reacciones y desarrollar materiales</strong> con <strong>replicabilidad y objetividad</strong>.</p>
        <p><strong>Principio clave (Popper):</strong> Una hipótesis es científica si puede ser <strong>falsada</strong>.</p>

        <hr style="border:1px dashed #2196F3;">

        <h4>1. Pasos del Método Científico</h4>
        <table class="table">
            <thead>
                <tr><th>Paso</th><th>Descripción</th><th>Ejemplo Químico</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>1. Observación</strong></td><td>Detectar fenómeno</td><td>Reacción produce gas</td></tr>
                <tr><td><strong>2. Pregunta</strong></td><td>¿Por qué ocurre?</td><td>¿Qué gas se forma?</td></tr>
                <tr><td><strong>3. Hipótesis</strong></td><td>Explicación testable</td><td>Es CO₂ por NaHCO₃ + HCl</td></tr>
                <tr><td><strong>4. Predicción</strong></td><td>Si… entonces…</td><td>Si agrego indicador, cambia color</td></tr>
                <tr><td><strong>5. Experimento</strong></td><td>Control + variable</td><td>Grupo A: HCl | Grupo B: H₂O</td></tr>
                <tr><td><strong>6. Análisis</strong></td><td>Estadística, error</td><td>t-test: p<0.05</td></tr>
                <tr><td><strong>7. Conclusión</strong></td><td>Aceptar/rechazar H₀</td><td>Hipótesis confirmada</td></tr>
                <tr><td><strong>8. Comunicación</strong></td><td>Publicación (IUPAC)</td><td>Artículo en <em>JACS</em></td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo Clásico:</strong> <strong>Lavoisier (1789)</strong> → Observación: masa conservada → Hipótesis: ley conservación → Experimento: combustión en recipiente cerrado → Conclusión: <strong>materia no se crea ni destruye</strong>.</p>
        </div>

        <div class="visual">
            <img src="assets/img/ciclo-continuo-paso.png" alt="Pasos método">
            <p><em>Pasos interactivos. Fuente: Science Buddies.</em></p>
        </div>

        <hr style="border:1px dashed #2196F3;">

        <h4>2. Variables en Experimentos Químicos</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Definición</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Independiente</strong></td><td>Se manipula</td><td>Concentración HCl</td></tr>
                <tr><td><strong>Dependiente</strong></td><td>Se mide</td><td>Volumen CO₂</td></tr>
                <tr><td><strong>Controladas</strong></td><td>Constantes</td><td>Temperatura, presión</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/ciclo-clasico.jpeg" alt="Diagrama ciclo">
            <p><em>Ciclo continuo. Fuente: Quizlet.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/proceso-eloha.jpg" alt="Proceso iterativo">
            <p><em>Proceso iterativo. Fuente: Mrgscience.</em></p>
        </div>

        <hr style="border:1px dashed #2196F3;">

        <h4>3. Experimentos Químicos Icónicos</h4>
        <ul>
            <li><strong>Priestley (1774):</strong> Aislamiento O₂</li>
            <li><strong>Curie (1898):</strong> Descubrimiento radio</li>
            <li><strong>Pauling (1930):</strong> Hibridación orbital</li>
            <li><strong>Watson & Crick (1953):</strong> ADN (con datos de Franklin)</li>
        </ul>

        <div class="visual">
            <img src="https://www.acs.org/content/dam/acsorg/education/resources/highschool/chemmatters/articlesbytopic/historyofchemistry/scientific-method-lavoisier.jpg" alt="Lavoisier">
            <p><em>Ley conservación. Fuente: ACS.</em></p>
        </div>

        <div class="visual">
            <img src="https://www.iupac.org/wp-content/uploads/2019/08/IUPAC-100-Scientific-Method.png" alt="IUPAC método">
            <p><em>Método en química. Fuente: IUPAC.</em></p>
        </div>

        <hr style="border:1px dashed #2196F3;">

        <h4>4. Herramientas Modernas (2025)</h4>
        <ul>
            <li><strong>Espectroscopía:</strong> FTIR, NMR, MS</li>
            <li><strong>Cromatografía:</strong> GC-MS, HPLC</li>
            <li><strong>Modelado:</strong> DFT, QM/MM</li>
            <li><strong>IA:</strong> Predicción reacciones (ChemAI)</li>
        </ul>

        <hr style="border:1px dashed #2196F3;">

        <h4>5. SVG Animado: Ciclo del Método en Química</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#E8EAF6"/>

                <!-- Centro -->
                <circle cx="350" cy="250" r="60" fill="#1976D2" stroke="#0D47A1" stroke-width="4">
                    <animate attributeName="r" values="60;70;60" dur="3s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="245" fill="white" font-size="14" text-anchor="middle" font-weight="bold">MÉTODO</text>
                <text x="350" y="265" fill="white" font-size="12" text-anchor="middle">CIENTÍFICO</text>

                <!-- 1. Observación -->
                <circle cx="150" cy="100" r="45" fill="#43A047">
                    <animate attributeName="r" values="45;55;45" begin="0s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="150" y="95" fill="white" font-size="11" text-anchor="middle">1. OBSERVACIÓN</text>
                <text x="150" y="115" fill="#E8F5E9" font-size="9" text-anchor="middle">Gas en reacción</text>

                <!-- 2. Pregunta -->
                <circle cx="350" cy="80" r="40" fill="#FB8C00">
                    <animate attributeName="r" values="40;50;40" begin="0.5s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="75" fill="white" font-size="11" text-anchor="middle">2. PREGUNTA</text>
                <text x="350" y="95" fill="#FFF3E0" font-size="9" text-anchor="middle">¿Qué gas?</text>

                <!-- 3. Hipótesis -->
                <circle cx="550" cy="100" r="45" fill="#D81B60">
                    <animate attributeName="r" values="45;55;45" begin="1s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="550" y="95" fill="white" font-size="11" text-anchor="middle">3. HIPÓTESIS</text>
                <text x="550" y="115" fill="#FCE4EC" font-size="9" text-anchor="middle">CO₂</text>

                <!-- 4. Experimento -->
                <circle cx="580" cy="250" r="45" fill="#8E24AA">
                    <animate attributeName="r" values="45;55;45" begin="1.5s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="580" y="245" fill="white" font-size="11" text-anchor="middle">4. EXPERIMENTO</text>
                <text x="580" y="265" fill="#F3E5F5" font-size="9" text-anchor="middle">HCl + NaHCO₃</text>

                <!-- 5. Análisis -->
                <circle cx="550" cy="400" r="45" fill="#00897B">
                    <animate attributeName="r" values="45;55;45" begin="2s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="550" y="395" fill="white" font-size="11" text-anchor="middle">5. ANÁLISIS</text>
                <text x="550" y="415" fill="#E0F2F1" font-size="9" text-anchor="middle">p<0.05</text>

                <!-- 6. Conclusión -->
                <circle cx="350" cy="420" r="40" fill="#FDD835">
                    <animate attributeName="r" values="40;50;40" begin="2.5s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="415" fill="#212121" font-size="11" text-anchor="middle">6. CONCLUSIÓN</text>
                <text x="350" y="435" fill="#212121" font-size="9" text-anchor="middle">CO₂ confirmado</text>

                <!-- 7. Comunicación -->
                <circle cx="150" cy="400" r="45" fill="#3949AB">
                    <animate attributeName="r" values="45;55;45" begin="3s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="150" y="395" fill="white" font-size="11" text-anchor="middle">7. COMUNICACIÓN</text>
                <text x="150" y="415" fill="#E8EAF6" font-size="9" text-anchor="middle">JACS</text>

                <!-- Flechas curvas -->
                <path d="M150 145 Q200 180 300 180" stroke="#1976D2" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M390 100 Q450 120 520 145" stroke="#1976D2" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M580 295 Q600 320 580 375" stroke="#1976D2" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M520 400 Q470 410 390 420" stroke="#1976D2" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M310 420 Q250 410 180 400" stroke="#1976D2" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M150 355 Q130 320 150 295" stroke="#1976D2" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>
                <path d="M180 180 Q220 160 300 160" stroke="#1976D2" stroke-width="6" fill="none" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" from="100" to="0" dur="2s" repeatCount="indefinite"/>
                </path>

                <!-- Flecha -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#1976D2"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">MÉTODO CIENTÍFICO</text>
                <text x="350" y="90" fill="#1565C0" font-size="16" text-anchor="middle">Química: del gas al paper</text>
            </svg>
            <p><em>SVG Animado: Ciclo completo con ejemplo de reacción química.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define método científico', 'respuesta' => 'Proceso sistemático para investigar'],
        ['enunciado' => 'Primer paso', 'respuesta' => 'Observación'],
        ['enunciado' => 'Hipótesis debe ser...', 'respuesta' => 'Falsable'],

        // === APLICADOS ===
        ['enunciado' => 'Lavoisier observó...', 'respuesta' => 'Masa conservada'],
        ['enunciado' => 'Variable independiente en titulación', 'respuesta' => 'Volumen titulante'],
        ['enunciado' => 'p<0.05 significa...', 'respuesta' => 'Diferencia significativa'],

        // === QUÍMICOS ===
        ['enunciado' => 'Experimento Priestley aisló...', 'respuesta' => 'Oxígeno'],
        ['enunciado' => 'NMR mide...', 'respuesta' => 'Estructura molecular'],
        ['enunciado' => 'Control en reacción es...', 'respuesta' => 'Sin reactivo'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula hipótesis nula', 'respuesta' => '\\(H_0: \\mu_1 = \\mu_2\\)'],
        ['enunciado' => 'Popper dijo...', 'respuesta' => 'Falsabilidad'],
        ['enunciado' => 'IUPAC regula...', 'respuesta' => 'Nomenclatura y publicación']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Método empieza con...', 'opciones' => ['Observación', 'Conclusión', 'Experimento', 'Hipótesis'], 'correcta' => 'Observación'],
        ['pregunta' => 'Hipótesis debe ser...', 'opciones' => ['Falsable', 'Verdadera', 'Falsa', 'Aleatoria'], 'correcta' => 'Falsable'],
        ['pregunta' => 'Lavoisier descubrió...', 'opciones' => ['Conservación masa', 'Átomos', 'Electrones', 'Nada'], 'correcta' => 'Conservación masa'],
        ['pregunta' => 'Variable independiente...', 'opciones' => ['Se manipula', 'Se mide', 'Es constante', 'Nada'], 'correcta' => 'Se manipula'],
        ['pregunta' => 'Control es...', 'opciones' => ['Sin variable', 'Con variable', 'Doble', 'Nada'], 'correcta' => 'Sin variable'],
        ['pregunta' => 'p<0.05 significa...', 'opciones' => ['Significativo', 'No significativo', 'Error', 'Nada'], 'correcta' => 'Significativo'],
        ['pregunta' => 'Priestley aisló...', 'opciones' => ['Oxígeno', 'Hidrógeno', 'Nitrógeno', 'CO₂'], 'correcta' => 'Oxígeno'],
        ['pregunta' => 'NMR es para...', 'opciones' => ['Estructura', 'Masa', 'Volumen', 'Color'], 'correcta' => 'Estructura'],
        ['pregunta' => 'IUPAC publica en...', 'opciones' => ['JACS', 'Nature', 'Time', 'Nada'], 'correcta' => 'JACS'],
        ['pregunta' => 'Popper enfatizó...', 'opciones' => ['Falsabilidad', 'Verdad', 'Belleza', 'Nada'], 'correcta' => 'Falsabilidad'],

        // === MEDIO (10) ===
        ['pregunta' => 'H₀ es hipótesis...', 'opciones' => ['Nula', 'Alternativa', 'Final', 'Nada'], 'correcta' => 'Nula'],
        ['pregunta' => 'Replicabilidad significa...', 'opciones' => ['Repetir experimento', 'Copiar resultados', 'Publicar', 'Nada'], 'correcta' => 'Repetir experimento'],
        ['pregunta' => 'Variable dependiente...', 'opciones' => ['Se mide', 'Se manipula', 'Es constante', 'Nada'], 'correcta' => 'Se mide'],
        ['pregunta' => 'Titulación mide...', 'opciones' => ['Concentración', 'Masa', 'Volumen', 'Color'], 'correcta' => 'Concentración'],
        ['pregunta' => 'Curie descubrió...', 'opciones' => ['Radio', 'Uranio', 'Plutonio', 'Nada'], 'correcta' => 'Radio'],
        ['pregunta' => 'Pauling explicó...', 'opciones' => ['Hibridación', 'Fisión', 'Fusión', 'Nada'], 'correcta' => 'Hibridación'],
        ['pregunta' => 'ACS es sociedad de...', 'opciones' => ['Química', 'Física', 'Biología', 'Matemáticas'], 'correcta' => 'Química'],
        ['pregunta' => 'HPLC separa por...', 'opciones' => ['Interacción fase', 'Masa', 'Color', 'Olor'], 'correcta' => 'Interacción fase'],
        ['pregunta' => 'DFT es teoría de...', 'opciones' => ['Funcional densidad', 'Átomos', 'Moléculas', 'Nada'], 'correcta' => 'Funcional densidad'],
        ['pregunta' => 'Comunicación incluye...', 'opciones' => ['Publicación', 'Silencio', 'Secreto', 'Nada'], 'correcta' => 'Publicación'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula H₀', 'opciones' => ['H₀: μ₁ = μ₂', 'H₀: μ₁ > μ₂', 'H₀: μ₁ ≠ μ₂', 'H₀: μ₁ < μ₂'], 'correcta' => 'H₀: μ₁ = μ₂'],
        ['pregunta' => 'Error tipo I es...', 'opciones' => ['Falso positivo', 'Falso negativo', 'Verdadero', 'Nada'], 'correcta' => 'Falso positivo'],
        ['pregunta' => 't-test compara...', 'opciones' => ['2 medias', '3 medias', 'Medianas', 'Modas'], 'correcta' => '2 medias'],
        ['pregunta' => 'ANOVA compara...', 'opciones' => ['>2 grupos', '2 grupos', '1 grupo', '0 grupos'], 'correcta' => '>2 grupos'],
        ['pregunta' => 'ChemAI predice...', 'opciones' => ['Reacciones', 'Clima', 'Economía', 'Nada'], 'correcta' => 'Reacciones'],
        ['pregunta' => 'IUPAC nombra compuestos como...', 'opciones' => ['Sistemáticamente', 'Aleatoriamente', 'Por color', 'Por olor'], 'correcta' => 'Sistemáticamente'],
        ['pregunta' => 'Lavoisier refutó teoría...', 'opciones' => ['Flogisto', 'Átomos', 'Electrones', 'Nada'], 'correcta' => 'Flogisto'],
        ['pregunta' => 'Modelo Caco-2 es para...', 'opciones' => ['Biodisponibilidad', 'Reacciones', 'Estructura', 'Masa'], 'correcta' => 'Biodisponibilidad'],
        ['pregunta' => 'QM/MM combina...', 'opciones' => ['Cuántica y clásica', 'Solo cuántica', 'Solo clásica', 'Nada'], 'correcta' => 'Cuántica y clásica'],
        ['pregunta' => 'Meta IUPAC 2030: estandarizar...', 'opciones' => ['Datos químicos', 'Colores', 'Olores', 'Sabores'], 'correcta' => 'Datos químicos']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Teoría Atómica (Evolución, Modelos, Números Cuánticos, Orbitales, Espectroscopia)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'teoria-atomica',
    'titulo' => 'Teoría Atómica: Del Átomo Indivisible al Orbital Cuántico',
    'contenido' => '
        <h3>¿Qué es la Teoría Atómica?</h3>
        <p>La <strong>teoría atómica</strong> describe la <strong>estructura, composición y comportamiento</strong> de los átomos, unidades fundamentales de la materia. Evolucionó durante 2500 años desde ideas filosóficas hasta el <strong>modelo mecánico-cuántico actual</strong> (Schrödinger, Heisenberg).</p>

        <hr style="border:1px dashed #9C27B0;">

        <h4>1. Evolución Histórica de los Modelos Atómicos</h4>
        <table class="table">
            <thead>
                <tr><th>Año</th><th>Científico</th><th>Modelo</th><th>Clave</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>400 a.C.</strong></td><td>Demócrito</td><td>Átomo (indivisible)</td><td>Filosófico</td></tr>
                <tr><td><strong>1808</strong></td><td>Dalton</td><td>Esferas sólidas</td><td>Ley proporciones</td></tr>
                <tr><td><strong>1897</strong></td><td>Thomson</td><td>Pudín de pasas</td><td>Electrón (-)</td></tr>
                <tr><td><strong>1911</strong></td><td>Rutherford</td><td>Núcleo planetario</td><td>Protones (+)</td></tr>
                <tr><td><strong>1913</strong></td><td>Bohr</td><td>Órbitas cuantizadas</td><td>Espectro H</td></tr>
                <tr><td><strong>1926</strong></td><td>Schrödinger</td><td>Modelo cuántico</td><td>Ondas, orbitales</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Rutherford (1911):</strong> Lámina oro → partículas α desviadas → <strong>99.9% vacío, núcleo denso</strong>.</p>
        </div>

        <div class="visual">
            <img src="assets/img/history-atom.webp" alt="Historia modelos">
            <p><em>Evolución visual. Fuente: Compound Interest.</em></p>
        </div>

        <hr style="border:1px dashed #9C27B0;">

        <h4>2. Modelo Atómico Actual (2025)</h4>
        <ul>
            <li><strong>Núcleo:</strong> Protones (Z), neutrones (N) → 99.94% masa</li>
            <li><strong>Electrones:</strong> Nubes probabilísticas (orbitales)</li>
            <li><strong>Números cuánticos:</strong>
                <ul>
                    <li><strong>n</strong>: nivel energía (1, 2, 3...)</li>
                    <li><strong>l</strong>: subnivel (0=s, 1=p, 2=d, 3=f)</li>
                    <li><strong>mₗ</strong>: orientación (-l a +l)</li>
                    <li><strong>mₛ</strong>: espín (±½)</li>
                </ul>
            </li>
        </ul>

        <div class="visual">
            <img src="assets/img/time-line.webp" alt="Línea temporal">
            <p><em>Línea del tiempo. Fuente: Knowunity.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/modelos-didacticos.jpg" alt="Recursos educativos">
            <p><em>Modelos didácticos. Fuente: Pinterest.</em></p>
        </div>

        <hr style="border:1px dashed #9C27B0;">

        <h4>3. Experimentos Clave</h4>
        <table class="table">
            <thead>
                <tr><th>Experimento</th><th>Descubrimiento</th><th>Año</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Tubo rayos catódicos</strong></td><td>Electrón</td><td>1897</td></tr>
                <tr><td><strong>Lámina oro</strong></td><td>Núcleo</td><td>1911</td></tr>
                <tr><td><strong>Espectro H</strong></td><td>Niveles energía</td><td>1885</td></tr>
                <tr><td><strong>Difracción electrones</strong></td><td>Naturaleza ondulatoria</td><td>1927</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #9C27B0;">

        <h4>4. Orbitales y Configuración Electrónica</h4>
        <p>Ejemplo: <strong>Carbono (Z=6)</strong> → 1s² 2s² 2p²</p>
        <p>Fórmula energía (Bohr):</p>
        <p>\\[ E_n = -\\frac{13.6}{n^2} \\text{ eV} \\]</p>

        <hr style="border:1px dashed #9C27B0;">

        <h4>5. SVG Animado: Evolución del Modelo Atómico</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#F3E5F5"/>

                <!-- Título -->
                <text x="400" y="50" fill="#4A148C" font-size="32" text-anchor="middle" font-weight="bold">EVOLUCIÓN DEL ÁTOMO</text>

                <!-- Demócrito -->
                <circle cx="100" cy="200" r="40" fill="#B71C1C">
                    <animate attributeName="r" values="40;50;40" dur="3s" repeatCount="indefinite"/>
                </circle>
                <text x="100" y="195" fill="white" font-size="12" text-anchor="middle">DEMÓCRITO</text>
                <text x="100" y="215" fill="#FFEBEE" font-size="10" text-anchor="middle">Átomo indivisible</text>

                <!-- Dalton -->
                <circle cx="200" cy="200" r="45" fill="#FF6F00">
                    <animate attributeName="r" values="45;55;45" begin="0.5s" dur="3s" repeatCount="indefinite"/>
                </circle>
                <text x="200" y="195" fill="white" font-size="12" text-anchor="middle">DALTON</text>
                <text x="200" y="215" fill="#FFF3E0" font-size="9" text-anchor="middle">Esferas sólidas</text>

                <!-- Thomson -->
                <circle cx="320" cy="200" r="50" fill="#2E7D32">
                    <animate attributeName="r" values="50;60;50" begin="1s" dur="3s" repeatCount="indefinite"/>
                </circle>
                <text x="320" y="195" fill="white" font-size="12" text-anchor="middle">THOMSON</text>
                <text x="320" y="215" fill="#E8F5E9" font-size="9" text-anchor="middle">Pudín + e⁻</text>
                <!-- Electrones -->
                <circle cx="300" cy="180" r="5" fill="#D32F2F">
                    <animate attributeName="opacity" values="0;1;0" begin="1s" dur="1s" repeatCount="indefinite"/>
                </circle>
                <circle cx="340" cy="220" r="5" fill="#D32F2F">
                    <animate attributeName="opacity" values="0;1;0" begin="1.3s" dur="1s" repeatCount="indefinite"/>
                </circle>

                <!-- Rutherford -->
                <circle cx="460" cy="200" r="25" fill="#FDD835" stroke="#F57F17" stroke-width="4">
                    <animate attributeName="r" values="25;35;25" begin="1.5s" dur="3s" repeatCount="indefinite"/>
                </circle>
                <text x="460" y="195" fill="#212121" font-size="11" text-anchor="middle">RUTHERFORD</text>
                <text x="460" y="215" fill="#212121" font-size="9" text-anchor="middle">Núcleo +</text>
                <!-- Electrón orbitando -->
                <circle cx="460" cy="200" r="80" fill="none" stroke="#1565C0" stroke-width="2" stroke-dasharray="5,5"/>
                <circle r="6" fill="#1565C0">
                    <animateMotion path="M460,120 A80,80 0 1,1 460,280 A80,80 0 1,1 460,120" dur="3s" repeatCount="indefinite"/>
                </circle>

                <!-- Bohr -->
                <g transform="translate(580,200)">
                    <circle cx="0" cy="0" r="30" fill="#FDD835" stroke="#F57F17" stroke-width="3"/>
                    <text x="0" y="-5" fill="#212121" font-size="10" text-anchor="middle">BOHR</text>
                    <!-- Órbitas cuantizadas -->
                    <circle cx="0" cy="0" r="50" fill="none" stroke="#43A047" stroke-width="2"/>
                    <circle cx="0" cy="0" r="80" fill="none" stroke="#43A047" stroke-width="2"/>
                    <circle cx="0" cy="0" r="110" fill="none" stroke="#43A047" stroke-width="2"/>
                    <!-- Electrón saltando -->
                    <circle r="5" fill="#1976D2">
                        <animate attributeName="r" values="5;8;5" dur="1s" repeatCount="indefinite"/>
                        <animateMotion path="M0,-50 A50,50 0 1,1 0,-80 A80,80 0 1,1 0,-50" dur="2s" repeatCount="indefinite"/>
                    </circle>
                </g>
                <text x="580" y="215" fill="#212121" font-size="9" text-anchor="middle">Órbitas n</text>

                <!-- Cuántico -->
                <g transform="translate(700,200)">
                    <circle cx="0" cy="0" r="35" fill="#7B1FA2" opacity="0.7"/>
                    <text x="0" y="-5" fill="white" font-size="10" text-anchor="middle">CUÁNTICO</text>
                    <!-- Nube 1s -->
                    <circle cx="0" cy="0" r="40" fill="#7B1FA2" opacity="0.3"/>
                    <circle cx="0" cy="0" r="60" fill="#7B1FA2" opacity="0.2"/>
                    <circle cx="0" cy="0" r="80" fill="#7B1FA2" opacity="0.1"/>
                    <!-- Orbital p -->
                    <ellipse cx="0" cy="0" rx="100" ry="30" fill="#7B1FA2" opacity="0.3" transform="rotate(45)"/>
                    <ellipse cx="0" cy="0" rx="100" ry="30" fill="#7B1FA2" opacity="0.3" transform="rotate(-45)"/>
                    <!-- Electrón probabilístico -->
                    <circle r="4" fill="#E040FB">
                        <animate attributeName="opacity" values="0;1;0" dur="1.5s" repeatCount="indefinite"/>
                        <animate attributeName="cx" values="-60;60;-60" dur="2s" repeatCount="indefinite"/>
                        <animate attributeName="cy" values="0;40;-40;0" dur="2s" repeatCount="indefinite"/>
                    </circle>
                </g>
                <text x="700" y="215" fill="#212121" font-size="9" text-anchor="middle">Orbitales ψ</text>

                <!-- Flechas evolutivas -->
                <path d="M140 200 L160 200" stroke="#4A148C" stroke-width="6" marker-end="url(#arrow)"/>
                <path d="M245 200 L275 200" stroke="#4A148C" stroke-width="6" marker-end="url(#arrow)"/>
                <path d="M370 clicked 200 L410 200" stroke="#4A148C" stroke-width="6" marker-end="url(#arrow)"/>
                <path d="M485 200 L535 200" stroke="#4A148C" stroke-width="6" marker-end="url(#arrow)"/>
                <path d="M615 200 L660 200" stroke="#4A148C" stroke-width="6" marker-end="url(#arrow)"/>

                <!-- Marcador -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#4A148C"/>
                    </marker>
                </defs>

                <!-- Leyenda -->
                <text x="400" y="380" fill="#4A148C" font-size="16" text-anchor="middle">De la filosofía a la mecánica cuántica</text>
                <text x="400" y="410" fill="#6A1B9A" font-size="14" text-anchor="middle">IUPAC 2025: Modelo estándar</text>
            </svg>
            <p><em>SVG Animado: Evolución interactiva con orbitales y saltos cuánticos.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Modelo Dalton', 'respuesta' => 'Esferas sólidas indivisibles'],
        ['enunciado' => 'Descubrió núcleo', 'respuesta' => 'Rutherford'],
        ['enunciado' => 'Órbitas cuantizadas', 'respuesta' => 'Bohr'],

        // === APLICADOS ===
        ['enunciado' => 'Electrón descubierto por', 'respuesta' => 'Thomson (1897)'],
        ['enunciado' => 'Configuración C (Z=6)', 'respuesta' => '1s² 2s² 2p²'],
        ['enunciado' => 'Energía n=2 (eV)', 'respuesta' => '-3.4 eV'],

        // === CUÁNTICOS ===
        ['enunciado' => 'Número cuántico l para p', 'respuesta' => '1'],
        ['enunciado' => 'Orbital 3p tiene mₗ', 'respuesta' => '-1, 0, +1'],
        ['enunciado' => 'Principio exclusión Pauli', 'respuesta' => 'No 2 e⁻ mismos 4 números'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula energía Bohr', 'respuesta' => '\\(E_n = -\\frac{13.6}{n^2}\\) eV'],
        ['enunciado' => 'Espectro H línea Balmer', 'respuesta' => 'n₂=2 → visible'],
        ['enunciado' => 'NIST define átomo como', 'respuesta' => 'Sistema cuántico estable']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Demócrito dijo átomos...', 'opciones' => ['Indivisibles', 'Divisibles', 'Huecos', 'Nada'], 'correcta' => 'Indivisibles'],
        ['pregunta' => 'Dalton propuso...', 'opciones' => ['Esferas sólidas', 'Núcleo', 'Órbitas', 'Orbitales'], 'correcta' => 'Esferas sólidas'],
        ['pregunta' => 'Thomson descubrió...', 'opciones' => ['Electrón', 'Protón', 'Neutrón', 'Nada'], 'correcta' => 'Electrón'],
        ['pregunta' => 'Rutherford halló...', 'opciones' => ['Núcleo', 'Electrón', 'Órbita', 'Nada'], 'correcta' => 'Núcleo'],
        ['pregunta' => 'Bohr explicó...', 'opciones' => ['Espectro H', 'Masa', 'Volumen', 'Color'], 'correcta' => 'Espectro H'],
        ['pregunta' => 'Modelo actual es...', 'opciones' => ['Cuántico', 'Planetario', 'Sólido', 'Pudín'], 'correcta' => 'Cuántico'],
        ['pregunta' => 'Número atómico Z es...', 'opciones' => ['Protones', 'Neutrones', 'Electrones', 'Masa'], 'correcta' => 'Protones'],
        ['pregunta' => 'n=1 es nivel...', 'opciones' => ['K', 'L', 'M', 'N'], 'correcta' => 'K'],
        ['pregunta' => 'l=0 es subnivel...', 'opciones' => ['s', 'p', 'd', 'f'], 'correcta' => 's'],
        ['pregunta' => 'IUPAC define átomo como...', 'opciones' => ['Unidad fundamental', 'Molécula', 'Ión', 'Nada'], 'correcta' => 'Unidad fundamental'],

        // === MEDIO (10) ===
        ['pregunta' => 'Configuración Na (Z=11)', 'opciones' => ['1s²2s²2p⁶3s¹', '1s²2s²2p⁶', '1s²2s²', '1s²'], 'correcta' => '1s²2s²2p⁶3s¹'],
        ['pregunta' => 'Energía n=3 (eV)', 'opciones' => ['-1.51', '-13.6', '-3.4', '0'], 'correcta' => '-1.51'],
        ['pregunta' => 'Orbital 2p tiene electrones máx.', 'opciones' => ['6', '2', '10', '14'], 'correcta' => '6'],
        ['pregunta' => 'Principio Aufbau', 'opciones' => ['Llenado orden energía', 'Aleatorio', 'Por masa', 'Por color'], 'correcta' => 'Llenado orden energía'],
        ['pregunta' => 'Regla Hund', 'opciones' => ['Espines paralelos', 'Opuestos', 'Ninguno', 'Aleatorio'], 'correcta' => 'Espines paralelos'],
        ['pregunta' => 'Pauli dice no 2 e⁻ con...', 'opciones' => ['Mismos 4 números', 'Mismo n', 'Mismo l', 'Mismo mₗ'], 'correcta' => 'Mismos 4 números'],
        ['pregunta' => 'Espectro H serie Lyman', 'opciones' => ['UV', 'Visible', 'IR', 'Radio'], 'correcta' => 'UV'],
        ['pregunta' => 'Lámina oro mostró...', 'opciones' => ['99.9% vacío', '100% lleno', '50%', '0%'], 'correcta' => '99.9% vacío'],
        ['pregunta' => 'Davisson-Germer probaron...', 'opciones' => ['Dualidad onda-partícula', 'Solo partícula', 'Solo onda', 'Nada'], 'correcta' => 'Dualidad onda-partícula'],
        ['pregunta' => 'NIST 2025 usa modelo...', 'opciones' => ['Schrödinger', 'Bohr', 'Dalton', 'Thomson'], 'correcta' => 'Schrödinger'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula energía Bohr', 'opciones' => ['Eₙ = -13.6/n²', 'Eₙ = 13.6/n²', 'Eₙ = n²/13.6', 'Eₙ = 0'], 'correcta' => 'Eₙ = -13.6/n²'],
        ['pregunta' => 'Transición n=3→2 emite...', 'opciones' => ['Luz visible', 'UV', 'IR', 'Microondas'], 'correcta' => 'Luz visible'],
        ['pregunta' => 'Átomo H estado base', 'opciones' => ['n=1', 'n=2', 'n=3', 'n=∞'], 'correcta' => 'n=1'],
        ['pregunta' => 'Función onda ψ² da...', 'opciones' => ['Probabilidad', 'Energía', 'Masa', 'Carga'], 'correcta' => 'Probabilidad'],
        ['pregunta' => 'Orbital d tiene l=', 'opciones' => ['2', '0', '1', '3'], 'correcta' => '2'],
        ['pregunta' => 'mₗ para 3p', 'opciones' => ['-1,0,+1', '0,1,2', '-2,-1,0', '0'], 'correcta' => '-1,0,+1'],
        ['pregunta' => 'Heisenberg incertidumbre', 'opciones' => ['Δx·Δp ≥ h/4π', 'Δx·Δp = 0', 'Δx·Δp < h', 'Δx·Δp = ∞'], 'correcta' => 'Δx·Δp ≥ h/4π'],
        ['pregunta' => 'Ecuación Schrödinger', 'opciones' => ['Ĥψ = Eψ', 'E = mc²', 'F = ma', 'PV = nRT'], 'correcta' => 'Ĥψ = Eψ'],
        ['pregunta' => 'IUPAC 2025 estandariza...', 'opciones' => ['Datos atómicos', 'Colores', 'Olores', 'Sabores'], 'correcta' => 'Datos atómicos'],
        ['pregunta' => 'Átomo más abundante universo', 'opciones' => ['H (75%)', 'He', 'O', 'C'], 'correcta' => 'H (75%)']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Átomo (Estructura, Partículas, Números Cuánticos, Isótopos, Orbitales, Configuración)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'atomo',
    'titulo' => 'El Átomo: Unidad Fundamental de la Materia',
    'contenido' => '
        <h3>¿Qué es un Átomo?</h3>
        <p>El <strong>átomo</strong> es la <strong>partícula más pequeña</strong> de un elemento que conserva sus propiedades químicas. Consta de:</p>
        <ul>
            <li><strong>Núcleo:</strong> Protones (+), neutrones (0) → 99.94% masa</li>
            <li><strong>Corteza:</strong> Electrones (-) en orbitales (nubes de probabilidad)</li>
        </ul>
        <p><strong>Tamaño:</strong> ~10⁻¹⁰ m | <strong>Núcleo:</strong> ~10⁻¹⁵ m → <strong>100,000 veces más pequeño</strong>.</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Partículas Subatómicas (NIST 2025)</h4>
        <table class="table">
            <thead>
                <tr><th>Partícula</th><th>Símbolo</th><th>Carga (e)</th><th>Masa (u)</th><th>Ubicación</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Protón</strong></td><td>p⁺</td><td><strong>+1</strong></td><td><strong>1.007276</strong></td><td>Núcleo</td></tr>
                <tr><td><strong>Neutrón</strong></td><td>n⁰</td><td><strong>0</strong></td><td><strong>1.008665</strong></td><td>Núcleo</td></tr>
                <tr><td><strong>Electrón</strong></td><td>e⁻</td><td><strong>-1</strong></td><td><strong>0.00054858</strong></td><td>Orbitales</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Carbono-12</strong>: 6p⁺, 6n⁰, 6e⁻ → <strong>Z=6</strong>, <strong>A=12</strong>, <strong>neutro</strong>.</p>
        </div>

        <div class="visual">
            <img src="assets/img/diagrama_atomico.gif" alt="Diagrama átomo">
            <p><em>Modelo dinámico. Fuente: Universe Today.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Números Atómicos y Másicos</h4>
        <ul>
            <li><strong>Número atómico (Z):</strong> Protones → define elemento</li>
            <li><strong>Número másico (A):</strong> Protones + neutrones</li>
            <li><strong>Isótopos:</strong> Mismo Z, distinto A</li>
            <li><strong>Iones:</strong> Carga ≠ 0</li>
        </ul>
        <p>Notación: <sup>A</sup>X<sup>q</sup> → Ej: <sup>12</sup>C, <sup>14</sup>C, <sup>12</sup>C⁶⁺</p>

        <div class="visual">
            <img src="assets/img/capas-atom.webp" alt="Capas electrónicas">
            <p><em>Capas K, L, M. Fuente: Britannica.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/estructurada-detallada.png" alt="Estructura básica">
            <p><em>Estructura detallada. Fuente: Vedantu.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Números Cuánticos</h4>
        <table class="table">
            <thead>
                <tr><th>Número</th><th>Nombre</th><th>Valores</th><th>Define</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>n</strong></td><td>Principal</td><td>1, 2, 3...</td><td>Tamaño, energía</td></tr>
                <tr><td><strong>l</strong></td><td>Azimutal</td><td>0 a n-1</td><td>Forma (s, p, d, f)</td></tr>
                <tr><td><strong>mₗ</strong></td><td>Magnético</td><td>-l a +l</td><td>Orientación</td></tr>
                <tr><td><strong>mₛ</strong></td><td>Espín</td><td>±½</td><td>Espín</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/formas-orbitales.webp" alt="Orbitales s, p, d">
            <p><em>Formas orbitales. Fuente: LibreTexts.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. Configuración Electrónica (IUPAC)</h4>
        <p><strong>Orden de llenado:</strong> 1s → 2s → 2p → 3s → 3p → 4s → 3d → 4p...</p>
        <p>Ejemplos:</p>
        <ul>
            <li><strong>H:</strong> 1s¹</li>
            <li><strong>He:</strong> 1s²</li>
            <li><strong>Li:</strong> 1s² 2s¹</li>
            <li><strong>C:</strong> 1s² 2s² 2p²</li>
            <li><strong>Fe:</strong> 1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d⁶</li>
        </ul>

        <hr style="border:1px dashed #1976D2;">

        <h4>5. SVG Animado: Estructura del Átomo de Carbono</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#E3F2FD"/>

                <!-- Núcleo -->
                <circle cx="350" cy="250" r="40" fill="#D32F2F" stroke="#B71C1C" stroke-width="4">
                    <animate attributeName="r" values="40;45;40" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="240" fill="white" font-size="14" text-anchor="middle" font-weight="bold">NÚCLEO</text>
                <text x="350" y="260" fill="#FFEBEE" font-size="12" text-anchor="middle">6p⁺ 6n⁰</text>

                <!-- Protones -->
                <g>
                    <circle cx="335" cy="235" r="8" fill="#FF5252">
                        <animate attributeName="opacity" values="0.5;1;0.5" dur="1.5s" repeatCount="indefinite"/>
                    </circle>
                    <text x="335" y="240" fill="white" font-size="8" text-anchor="middle">p⁺</text>
                    <circle cx="365" cy="235" r="8" fill="#FF5252">
                        <animate attributeName="opacity" values="0.5;1;0.5" begin="0.3s" dur="1.5s" repeatCount="indefinite"/>
                    </circle>
                    <text x="365" y="240" fill="white" font-size="8" text-anchor="middle">p⁺</text>
                    <circle cx="335" cy="265" r="8" fill="#FF5252">
                        <animate attributeName="opacity" values="0.5;1;0.5" begin="0.6s" dur="1.5s" repeatCount="indefinite"/>
                    </circle>
                    <text x="335" y="270" fill="white" font-size="8" text-anchor="middle">p⁺</text>
                </g>

                <!-- Neutrones -->
                <g>
                    <circle cx="365" cy="265" r="8" fill="#9E9E9E">
                        <animate attributeName="opacity" values="0.5;1;0.5" begin="0.9s" dur="1.5s" repeatCount="indefinite"/>
                    </circle>
                    <text x="365" y="270" fill="white" font-size="8" text-anchor="middle">n⁰</text>
                    <circle cx="350" cy="250" r="8" fill="#9E9E9E">
                        <animate attributeName="opacity" values="0.5;1;0.5" begin="1.2s" dur="1.5s" repeatCount="indefinite"/>
                    </circle>
                    <text x="350" y="255" fill="white" font-size="8" text-anchor="middle">n⁰</text>
                </g>

                <!-- Capa K (1s) -->
                <ellipse cx="350" cy="250" rx="80" ry="80" fill="none" stroke="#1976D2" stroke-width="3" stroke-dasharray="5,5">
                    <animate attributeName="stroke-dashoffset" from="0" to="10" dur="2s" repeatCount="indefinite"/>
                </ellipse>
                <text x="350" y="160" fill="#0D47A1" font-size="14" text-anchor="middle">Capa K (n=1)</text>

                <!-- Capa L (2s, 2p) -->
                <ellipse cx="350" cy="250" rx="160" ry="160" fill="none" stroke="#43A047" stroke-width="3" stroke-dasharray="8,8">
                    <animate attributeName="stroke-dashoffset" from="0" to="16" dur="3s" repeatCount="indefinite"/>
                </ellipse>
                <text x="350" y="80" fill="#1B5E20" font-size="14" text-anchor="middle">Capa L (n=2)</text>

                <!-- Electrones 1s -->
                <g>
                    <circle r="6" fill="#1565C0">
                        <animateMotion path="M350,170 A80,80 0 1,1 350,330 A80,80 0 1,1 350,170" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <circle r="6" fill="#1565C0">
                        <animateMotion path="M350,170 A80,80 0 1,0 350,330 A80,80 0 1,0 350,170" dur="2s" begin="1s" repeatCount="indefinite"/>
                    </circle>
                </g>

                <!-- Electrones 2s -->
                <g>
                    <circle r="5" fill="#43A047">
                        <animateMotion path="M350,90 A160,160 0 1,1 350,410 A160,160 0 1,1 350,90" dur="3s" repeatCount="indefinite"/>
                    </circle>
                    <circle r="5" fill="#43A047">
                        <animateMotion path="M350,90 A160,160 0 1,0 350,410 A160,160 0 1,0 350,90" dur="3s" begin="1.5s" repeatCount="indefinite"/>
                    </circle>
                </g>

                <!-- Electrones 2p (orbitales p) -->
                <g>
                    <circle r="5" fill="#7B1FA2">
                        <animate attributeName="cx" values="190;510;190" dur="2.5s" repeatCount="indefinite"/>
                        <animate attributeName="cy" values="250;250;250" dur="2.5s" repeatCount="indefinite"/>
                    </circle>
                    <circle r="5" fill="#7B1FA2">
                        <animate attributeName="cx" values="190;510;190" dur="2.5s" begin="0.8s" repeatCount="indefinite"/>
                        <animate attributeName="cy" values="250;250;250" dur="2.5s" begin="0.8s" repeatCount="indefinite"/>
                    </circle>
                </g>

                <!-- Etiquetas -->
                <text x="350" y="450" fill="#0D47A1" font-size="16" text-anchor="middle">Átomo de Carbono (Z=6, A=12)</text>
                <text x="350" y="470" fill="#1565C0" font-size="14" text-anchor="middle">1s² 2s² 2p²</text>

                <!-- Escala -->
                <text x="50" y="470" fill="#424242" font-size="12">Núcleo: 10⁻¹⁵ m | Átomo: 10⁻¹⁰ m</text>
            </svg>
            <p><em>SVG Animado: Estructura del átomo de carbono con orbitales y movimiento electrónico.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Partes del átomo', 'respuesta' => 'Núcleo (p⁺, n⁰), electrones'],
        ['enunciado' => 'Número atómico Z', 'respuesta' => 'Número de protones'],
        ['enunciado' => 'Carga electrón', 'respuesta' => '-1'],

        // === APLICADOS ===
        ['enunciado' => 'Átomo neutro: e⁻ =', 'respuesta' => 'Protones'],
        ['enunciado' => 'Isótopo: mismo Z, distinto', 'respuesta' => 'A (neutrones)'],
        ['enunciado' => 'Configuración O (Z=8)', 'respuesta' => '1s² 2s² 2p⁴'],

        // === CUÁNTICOS ===
        ['enunciado' => 'Número cuántico n para capa M', 'respuesta' => '3'],
        ['enunciado' => 'Subnivel d: l =', 'respuesta' => '2'],
        ['enunciado' => 'mₗ para orbital pₓ', 'respuesta' => '+1 o -1'],

        // === AVANZADOS ===
        ['enunciado' => 'Masa electrón (u)', 'respuesta' => '0.00054858'],
        ['enunciado' => 'Fórmula número másico', 'respuesta' => '\\(A = p^+ + n^0\\)'],
        ['enunciado' => 'NIST 2025 define protón masa', 'respuesta' => '1.007276 u']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Átomo tiene...', 'opciones' => ['p⁺, n⁰, e⁻', 'Solo p⁺', 'Solo e⁻', 'Nada'], 'correcta' => 'p⁺, n⁰, e⁻'],
        ['pregunta' => 'Núcleo contiene...', 'opciones' => ['Protones y neutrones', 'Electrones', 'Nada', 'Moléculas'], 'correcta' => 'Protones y neutrones'],
        ['pregunta' => 'Carga protón', 'opciones' => ['+1', '-1', '0', 'Variable'], 'correcta' => '+1'],
        ['pregunta' => 'Número atómico Z =', 'opciones' => ['Protones', 'Neutrones', 'Electrones', 'Masa'], 'correcta' => 'Protones'],
        ['pregunta' => 'Electrones están en...', 'opciones' => ['Orbitales', 'Núcleo', 'Fuera', 'Nada'], 'correcta' => 'Orbitales'],
        ['pregunta' => 'Átomo neutro: e⁻ =', 'opciones' => ['p⁺', 'n⁰', 'A', 'Z'], 'correcta' => 'p⁺'],
        ['preegunta' => 'Isótopos tienen mismo...', 'opciones' => ['Z', 'A', 'Masa', 'Carga'], 'correcta' => 'Z'],
        ['pregunta' => 'Capa K es n=', 'opciones' => ['1', '2', '3', '4'], 'correcta' => '1'],
        ['pregunta' => 'Subnivel s: l =', 'opciones' => ['0', '1', '2', '3'], 'correcta' => '0'],
        ['pregunta' => 'IUPAC define átomo como...', 'opciones' => ['Unidad química', 'Molécula', 'Ión', 'Nada'], 'correcta' => 'Unidad química'],

        // === MEDIO (10) ===
        ['pregunta' => 'Configuración Ne (Z=10)', 'opciones' => ['1s²2s²2p⁶', '1s²2s²', '1s¹0', '2p⁶'], 'correcta' => '1s²2s²2p⁶'],
        ['pregunta' => 'Número másico A =', 'opciones' => ['p⁺ + n⁰', 'p⁺ + e⁻', 'n⁰ + e⁻', 'Solo p⁺'], 'correcta' => 'p⁺ + n⁰'],
        ['pregunta' => 'Masa electrón ≈', 'opciones' => ['1/1836 u', '1 u', '0 u', '2 u'], 'correcta' => '1/1836 u'],
        ['pregunta' => 'Capa L: n =', 'opciones' => ['2', '1', '3', '4'], 'correcta' => '2'],
        ['pregunta' => 'Subnivel p máx. electrones', 'opciones' => ['6', '2', '10', '14'], 'correcta' => '6'],
        ['pregunta' => 'mₗ para 2p', 'opciones' => ['-1,0,+1', '0,1', '-2 a +2', '±½'], 'correcta' => '-1,0,+1'],
        ['pregunta' => 'Principio Pauli', 'opciones' => ['No 2 e⁻ mismos 4 números', 'Mismo espín', 'Mismo n', 'Nada'], 'correcta' => 'No 2 e⁻ mismos 4 números'],
        ['pregunta' => 'NIST mide masa protón', 'opciones' => ['1.007276 u', '1.000000 u', '0.000548 u', '1.008665 u'], 'correcta' => '1.007276 u'],
        ['pregunta' => 'Átomo H tiene...', 'opciones' => ['1p⁺, 1e⁻', '1n⁰', '2e⁻', '0p⁺'], 'correcta' => '1p⁺, 1e⁻'],
        ['pregunta' => 'C⁶⁺ tiene...', 'opciones' => ['0 e⁻', '6 e⁻', '12 e⁻', '1 e⁻'], 'correcta' => '0 e⁻'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula A', 'opciones' => ['A = p⁺ + n⁰', 'A = Z + e⁻', 'A = Z', 'A = 0'], 'correcta' => 'A = p⁺ + n⁰'],
        ['pregunta' => 'Átomo más pequeño', 'opciones' => ['H', 'He', 'Li', 'C'], 'correcta' => 'H'],
        ['pregunta' => 'Radio atómico aumenta...', 'opciones' => ['↓ grupo, → periodo', '↑ grupo, → periodo', '↓ grupo, ← periodo', 'Nada'], 'correcta' => '↓ grupo, → periodo'],
        ['pregunta' => 'Carga nuclear efectiva', 'opciones' => ['Z - σ', 'Z', 'A', 'n'], 'correcta' => 'Z - σ'],
        ['pregunta' => 'Configuración Fe', 'opciones' => ['[Ar]4s²3d⁶', '[Ar]4s¹3d⁷', '[Ar]3d⁸', '[Ne]3s²3p⁶'], 'correcta' => '[Ar]4s²3d⁶'],
        ['pregunta' => 'Excepción Cr', 'opciones' => ['4s¹3d⁵', '4s²3d⁴', '4s⁰3d⁶', '4s³3d³'], 'correcta' => '4s¹3d⁵'],
        ['pregunta' => 'IUPAC 2025 usa...', 'opciones' => ['Configuración noble', 'Aufbau', 'Hund', 'Pauli'], 'correcta' => 'Configuración noble'],
        ['pregunta' => 'Átomo con más isótopos estables', 'opciones' => ['Sn (10)', 'H (2)', 'He (1)', 'O (3)'], 'correcta' => 'Sn (10)'],
        ['pregunta' => 'Masa molar C-12 exacta', 'opciones' => ['12.000 u', '12.011 u', '13.000 u', '11.999 u'], 'correcta' => '12.000 u'],
        ['pregunta' => 'NIST define electrón como...', 'opciones' => ['Partícula elemental', 'Compuesta', 'Onda', 'Nada'], 'correcta' => 'Partícula elemental']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Radiación (Electromagnética, Ionizante vs No Ionizante, Espectro, Energía, Aplicaciones)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'radiacion',
    'titulo' => 'La Radiación: Ondas de Energía que lo Cambian Todo',
    'contenido' => '
        <h3>¿Qué es la Radiación?</h3>
        <p>La <strong>radiación</strong> es la <strong>emisión o propagación de energía</strong> en forma de <strong>ondas electromagnéticas</strong> o <strong>partículas subatómicas</strong>. En química, nos enfocamos en la <strong>radiación electromagnética (EM)</strong>: ondas que viajan a la <strong>velocidad de la luz</strong> (\(c = 3.00 \times 10^8 \, \text{m/s}\)) en el vacío.</p>

        <hr style="border:1px dashed #FF5722;">

        <h4>1. El Espectro Electromagnético (NIST 2025)</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>λ (m)</th><th>ν (Hz)</th><th>E (eV)</th><th>Ioniza</th><th>Uso</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Ondas Radio</strong></td><td>10³ – 10⁻³</td><td>3×10⁵ – 3×10⁸</td><td><strong>10⁻⁹ – 10⁻⁶</strong></td><td>No</td><td>TV, radio</td></tr>
                <tr><td><strong>Microondas</strong></td><td>10⁻¹ – 10⁻³</td><td>3×10⁹ – 3×10¹¹</td><td><strong>10⁻⁵ – 10⁻³</strong></td><td>No</td><td>WiFi, horno</td></tr>
                <tr><td><strong>Infrarrojo (IR)</strong></td><td>7×10⁻⁷ – 10⁻³</td><td>3×10¹¹ – 4×10¹⁴</td><td><strong>0.001 – 1.7</strong></td><td>No</td><td>Calor, IR</td></tr>
                <tr><td><strong>Visible</strong></td><td><strong>400–700 nm</strong></td><td>4.3–7.5×10¹⁴</td><td><strong>1.8 – 3.1</strong></td><td>No</td><td>Visión</td></tr>
                <tr><td><strong>Ultravioleta (UV)</strong></td><td>10⁻⁸ – 4×10⁻⁷</td><td>7.5×10¹⁴ – 3×10¹⁶</td><td><strong>3.1 – 124</strong></td><td>Sí (UV-C)</td><td>Esterilización</td></tr>
                <tr><td><strong>Rayos X</strong></td><td>10⁻¹¹ – 10⁻⁸</td><td>3×10¹⁶ – 3×10¹⁹</td><td><strong>124 – 124,000</strong></td><td>Sí</td><td>Diagnóstico</td></tr>
                <tr><td><strong>Rayos Gamma</strong></td><td>< 10⁻¹¹</td><td>> 3×10¹⁹</td><td><strong>> 124,000</strong></td><td>Sí</td><td>Cáncer, nuclear</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Luz roja</strong>: λ = 650 nm → ν = \( \frac{c}{\lambda} \) → E = \( h\nu \) ≈ <strong>1.9 eV</strong> (no ioniza). <strong>Rayos X</strong>: E ≈ 10 keV → rompe ADN.</p>
        </div>

        <div class="visual">
            <img src="assets/img/espectro-electromagnetico.png" alt="Espectro completo">
            <p><em>Espectro detallado. Fuente: MyNASAData.</em></p>
        </div>

        <hr style="border:1px dashed #FF5722;">

        <h4>2. Relaciones Fundamentales</h4>
        <p>\[
            c = \lambda \cdot \nu \quad \text{(velocidad = longitud × frecuencia)}
        \]</p>
        <p>\[
            E = h \cdot \nu = \frac{h c}{\lambda} \quad \text{(energía del fotón)}
        \]</p>
        <p>\[
            E(\text{eV}) = \frac{1240}{\lambda (\text{nm})} \quad \text{(fórmula práctica)}
        \]</p>

        <div class="visual">
            <img src="assets/img/espectro-electromagnetico.jpg" alt="CDC espectro">
            <p><em>Impacto en salud. Fuente: CDC.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/estandar-nist.png" alt="NIST gráfico">
            <p><em>Estándar NIST 2025. Fuente: NIST.</em></p>
        </div>

        <hr style="border:1px dashed #FF5722;">

        <h4>3. Ionizante vs No Ionizante</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Energía</th><th>Efecto Biológico</th><th>Ejemplos</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>No Ionizante</strong></td><td>< 10 eV</td><td>Calor, excitación</td><td>Radio, IR, visible</td></tr>
                <tr><td><strong>Ionizante</strong></td><td>> 10 eV</td><td>Rompe enlaces, ADN</td><td>UV-C, X, gamma</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/ionizacion-molecular.gif" alt="EPA ionización">
            <p><em>Ionización molecular. Fuente: EPA.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/clasificacion-uv.gif" alt="WHO UV">
            <p><em>Clasificación UV. Fuente: WHO.</em></p>
        </div>

        <hr style="border:1px dashed #FF5722;">

        <h4>4. Aplicaciones en Química</h4>
        <ul>
            <li><strong>IR:</strong> Espectroscopía vibracional</li>
            <li><strong>UV-Vis:</strong> Transiciones electrónicas</li>
            <li><strong>XRD:</strong> Estructura cristalina</li>
            <li><strong>NMR:</strong> Radiofrecuencia + campo magnético</li>
        </ul>

        <hr style="border:1px dashed #FF5722;">

        <h4>5. SVG Animado: Espectro Electromagnético Interactivo</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#FFF3E0"/>

                <!-- Título -->
                <text x="400" y="50" fill="#E65100" font-size="32" text-anchor="middle" font-weight="bold">ESPECTRO ELECTROMAGNÉTICO</text>

                <!-- Gradiente espectral -->
                <defs>
                    <linearGradient id="spectrum" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" stop-color="#8B00FF"/> <!-- Gamma -->
                        <stop offset="15%" stop-color="#4B0082"/> <!-- Rayos X -->
                        <stop offset="30%" stop-color="#0000FF"/> <!-- UV -->
                        <stop offset="45%" stop-color="#00FF00"/> <!-- Verde -->
                        <stop offset="55%" stop-color="#FFFF00"/> <!-- Amarillo -->
                        <stop offset="65%" stop-color="#FFA500"/> <!-- Naranja -->
                        <stop offset="75%" stop-color="#FF0000"/> <!-- Rojo -->
                        <stop offset="85%" stop-color="#8B4513"/> <!-- IR -->
                        <stop offset="95%" stop-color="#000000"/> <!-- Microondas -->
                        <stop offset="100%" stop-color="#808080"/> <!-- Radio -->
                    </linearGradient>
                </defs>
                <rect x="50" y="100" width="700" height="80" fill="url(#spectrum)" rx="15"/>

                <!-- Etiquetas -->
                <text x="60" y="90" fill="white" font-size="12" font-weight="bold">Gamma</text>
                <text x="160" y="90" fill="white" font-size="12">Rayos X</text>
                <text x="250" y="90" fill="white" font-size="12">UV</text>
                <text x="350" y="90" fill="white" font-size="12">Visible</text>
                <text x="480" y="90" fill="white" font-size="12">IR</text>
                <text x="580" y="90" fill="white" font-size="12">Microondas</text>
                <text x="680" y="90" fill="white" font-size="12">Radio</text>

                <!-- Onda animada -->
                <path d="M50,250 Q100,220 150,250 T250,250 T350,250 T450,250 T550,250 T650,250 T750,250" 
                      stroke="#E65100" stroke-width="4" fill="none">
                    <animate attributeName="d" 
                             values="M50,250 Q100,220 150,250 T250,250 T350,250 T450,250 T550,250 T650,250 T750,250;
                                     M50,250 Q100,280 150,250 T250,250 T350,250 T450,250 T550,250 T650,250 T750,250;
                                     M50,250 Q100,220 150,250 T250,250 T350,250 T450,250 T550,250 T650,250 T750,250" 
                             dur="3s" repeatCount="indefinite"/>
                </path>
                <text x="400" y="300" fill="#E65100" font-size="20" text-anchor="middle">λ ↓ → ν ↑ → E ↑</text>

                <!-- Fotón ejemplo -->
                <circle cx="400" cy="350" r="15" fill="#FFD600" stroke="#F57F17" stroke-width="3">
                    <animate attributeName="r" values="15;20;15" dur="1s" repeatCount="indefinite"/>
                </circle>
                <text x="400" y="355" fill="#212121" font-size="10" text-anchor="middle">Fotón</text>
                <text x="400" y="375" fill="#212121" font-size="10" text-anchor="middle">E = hν</text>

                <!-- Fórmulas -->
                <text x="100" y="420" fill="#E65100" font-size="16">c = λν</text>
                <text x="300" y="420" fill="#E65100" font-size="16">E = 1240 / λ(nm) eV</text>
                <text x="550" y="420" fill="#E65100" font-size="16">h = 4.1357×10⁻¹⁵ eV·s</text>

                <!-- Ionización -->
                <rect x="50" y="190" width="200" height="30" fill="#B71C1C" rx="10" opacity="0.8"/>
                <text x="150" y="210" fill="white" font-size="14" text-anchor="middle">IONIZANTE (>10 eV)</text>
            </svg>
            <p><em>SVG Animado: Espectro con onda, fotón y fórmulas clave.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Tipos de radiación EM', 'respuesta' => 'Radio, microondas, IR, visible, UV, X, gamma'],
        ['enunciado' => 'Ionizante ejemplo', 'respuesta' => 'Rayos gamma'],
        ['enunciado' => 'Velocidad EM en vacío', 'respuesta' => '3.00×10⁸ m/s'],

        // === APLICADOS ===
        ['enunciado' => 'λ = 500 nm → E (eV)', 'respuesta' => '2.48 eV'],
        ['enunciado' => 'Microondas ν = 2.45 GHz → λ', 'respuesta' => '0.122 m'],
        ['enunciado' => 'Rayos X típicos E', 'respuesta' => '10–100 keV'],

        // === FÍSICO-QUÍMICOS ===
        ['enunciado' => 'Constante h (eV·s)', 'respuesta' => '4.1357×10⁻¹⁵'],
        ['enunciado' => 'Fórmula E en eV', 'respuesta' => '\\(E = \\frac{1240}{\\lambda (\\text{nm})}\\)',],
        ['enunciado' => 'Límite ionización', 'respuesta' => '≈10 eV'],

        // === AVANZADOS ===
        ['enunciado' => 'UV-C λ rango', 'respuesta' => '100–280 nm'],
        ['enunciado' => 'NMR usa frecuencia', 'respuesta' => 'Radiofrecuencia (MHz)'],
        ['enunciado' => 'NIST 2025 define c como', 'respuesta' => '299792458 m/s exacto']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Radiación EM viaja a...', 'opciones' => ['c = 3×10⁸ m/s', 'Velocidad sonido', 'Lento', 'Nada'], 'correcta' => 'c = 3×10⁸ m/s'],
        ['pregunta' => 'No ionizante ejemplo', 'opciones' => ['Microondas', 'Gamma', 'Alfa', 'Beta'], 'correcta' => 'Microondas'],
        ['pregunta' => 'Ionizante rompe...', 'opciones' => ['Enlaces químicos', 'Solo calor', 'Nada', 'Color'], 'correcta' => 'Enlaces químicos'],
        ['pregunta' => 'Luz visible λ', 'opciones' => ['400–700 nm', '100–400 nm', '700–1000 nm', '1 mm'], 'correcta' => '400–700 nm'],
        ['pregunta' => 'Energía aumenta con...', 'opciones' => ['Frecuencia ↑', 'Frecuencia ↓', 'λ ↑', 'Nada'], 'correcta' => 'Frecuencia ↑'],
        ['pregunta' => 'Rayos X usados en...', 'opciones' => ['Diagnóstico médico', 'Cocina', 'TV', 'Radio'], 'correcta' => 'Diagnóstico médico'],
        ['pregunta' => 'IR detecta...', 'opciones' => ['Vibraciones moleculares', 'Electrones', 'Núcleo', 'Nada'], 'correcta' => 'Vibraciones moleculares'],
        ['pregunta' => 'UV-C es...', 'opciones' => ['Ionizante', 'No ionizante', 'Visible', 'Radio'], 'correcta' => 'Ionizante'],
        ['pregunta' => 'h es constante de...', 'opciones' => ['Planck', 'Boltzmann', 'Avogadro', 'Faraday'], 'correcta' => 'Planck'],
        ['pregunta' => 'c = λν significa...', 'opciones' => ['Velocidad = λ × ν', 'λ = c/ν', 'E = hλ', 'Nada'], 'correcta' => 'Velocidad = λ × ν'],

        // === MEDIO (10) ===
        ['pregunta' => 'E = 1240 / λ(nm) da E en...', 'opciones' => ['eV', 'J', 'kcal', 'Hz'], 'correcta' => 'eV'],
        ['pregunta' => 'λ = 600 nm → E =', 'opciones' => ['2.07 eV', '1.24 eV', '3.10 eV', '0.01 eV'], 'correcta' => '2.07 eV'],
        ['pregunta' => 'Microondas horno: ν ≈', 'opciones' => ['2.45 GHz', '2.45 MHz', '2.45 THz', '2.45 kHz'], 'correcta' => '2.45 GHz'],
        ['pregunta' => 'Rayos gamma E típica', 'opciones' => ['>100 keV', '<1 eV', '1–10 eV', '10–100 eV'], 'correcta' => '>100 keV'],
        ['pregunta' => 'UV-A penetra...', 'opciones' => ['Piel profunda', 'Solo superficie', 'No penetra', 'Ojo'], 'correcta' => 'Piel profunda'],
        ['pregunta' => 'NMR usa...', 'opciones' => ['Radiofrecuencia', 'Rayos X', 'Gamma', 'IR'], 'correcta' => 'Radiofrecuencia'],
        ['pregunta' => 'Espectroscopía IR mide...', 'opciones' => ['Enlaces', 'Electrones', 'Núcleo', 'Masa'], 'correcta' => 'Enlaces'],
        ['pregunta' => 'Fotón es...', 'opciones' => ['Paquete de energía EM', 'Partícula cargada', 'Molécula', 'Nada'], 'correcta' => 'Paquete de energía EM'],
        ['pregunta' => 'c es constante en...', 'opciones' => ['Vacío', 'Agua', 'Aire', 'Vidrio'], 'correcta' => 'Vacío'],
        ['pregunta' => 'WHO clasifica UV en...', 'opciones' => ['A, B, C', '1, 2, 3', 'X, Y, Z', 'Alpha, Beta'], 'correcta' => 'A, B, C'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula E en eV', 'opciones' => ['E = 1240 / λ(nm)', 'E = λ / 1240', 'E = hλ', 'E = c/λ'], 'correcta' => 'E = 1240 / λ(nm)'],
        ['pregunta' => 'λ = 100 nm → E =', 'opciones' => ['12.4 eV', '1.24 eV', '124 eV', '0.1 eV'], 'correcta' => '12.4 eV'],
        ['pregunta' => 'h en J·s', 'opciones' => ['6.626×10⁻³⁴', '4.135×10⁻¹⁵', '3×10⁸', '1.38×10⁻²³'], 'correcta' => '6.626×10⁻³⁴'],
        ['pregunta' => 'Límite ionización ≈', 'opciones' => ['10 eV', '1 eV', '100 eV', '1000 eV'], 'correcta' => '10 eV'],
        ['pregunta' => 'Rayos X blandos E', 'opciones' => ['<10 keV', '>100 keV', '1–10 eV', '10–100 eV'], 'correcta' => '<10 keV'],
        ['pregunta' => 'Efecto Compton ocurre con...', 'opciones' => ['Rayos X', 'IR', 'Radio', 'Visible'], 'correcta' => 'Rayos X'],
        ['pregunta' => 'NIST define c como...', 'opciones' => ['299792458 m/s exacto', 'Aproximado', 'Variable', 'Desconocido'], 'correcta' => '299792458 m/s exacto'],
        ['pregunta' => 'Radiación más penetrante', 'opciones' => ['Gamma', 'Alfa', 'Beta', 'UV'], 'correcta' => 'Gamma'],
        ['pregunta' => 'UV-B causa...', 'opciones' => ['Quemaduras solares', 'Calor', 'Visión', 'Sonido'], 'correcta' => 'Quemaduras solares'],
        ['pregunta' => 'Meta CDC 2030: reducir exposición...', 'opciones' => ['UV innecesaria 50%', '100%', '0%', '10%'], 'correcta' => 'UV innecesaria 50%']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Gases Tóxicos (CO, SO₂, NOₓ, H₂S, Cl₂, NH₃, VOCs, Efectos, PEL, Prevención)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'gases-toxicos',
    'titulo' => 'Gases Tóxicos: Enemigos Invisibles del Aire que Respiramos',
    'contenido' => '
        <h3>¿Qué son los Gases Tóxicos?</h3>
        <p>Los <strong>gases tóxicos</strong> son <strong>sustancias gaseosas</strong> que, al inhalarse, causan <strong>daño agudo o crónico</strong> a la salud humana, animal o al medio ambiente. Pueden ser <strong>asfixiantes, irritantes, corrosivos o cancerígenos</strong>. Según la <strong>OMS (2025)</strong>, causan <strong>7 millones de muertes/año</strong> por contaminación.</p>

        <hr style="border:1px dashed #D32F2F;">

        <h4>1. Principales Gases Tóxicos</h4>
        <table class="table">
            <thead>
                <tr><th>Gas</th><th>Fórmula</th><th>Fuente</th><th>Efecto</th><th>PEL (OSHA)</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Monóxido de Carbono</strong></td><td>CO</td><td>Combustión incompleta</td><td>Asfixia (une Hb)</td><td><strong>50 ppm</strong></td></tr>
                <tr><td><strong>Dióxido de Azufre</strong></td><td>SO₂</td><td>Volcanes, carbón</td><td>Irritación, lluvia ácida</td><td><strong>5 ppm</strong></td></tr>
                <tr><td><strong>Óxidos de Nitrógeno</strong></td><td>NOₓ</td><td>Vehículos, industria</td><td>Smog, edema pulmonar</td><td><strong>NO₂: 5 ppm</strong></td></tr>
                <tr><td><strong>Sulfhídrico</strong></td><td>H₂S</td><td>Petróleo, alcantarillas</td><td>"Huevo podrido", letal</td><td><strong>20 ppm</strong></td></tr>
                <tr><td><strong>Cloro</strong></td><td>Cl₂</td><td>Desinfección</td><td>Irritante, pulmones</td><td><strong>1 ppm</strong></td></tr>
                <tr><td><strong>Amoníaco</strong></td><td>NH₃</td><td>Fertilizantes</td><td>Irritante, ojos</td><td><strong>50 ppm</strong></td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>CO</strong> → se une a hemoglobina <strong>250 veces más que O₂</strong> → forma <strong>carboxihemoglobina</strong> → <strong>hipoxia cerebral</strong> → muerte.</p>
        </div>

        <div class="visual">
            <img src="assets/img/efectos-organos.png" alt="Impacto salud">
            <p><em>Efectos en órganos. Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #D32F2F;">

        <h4>2. Efectos Agudos vs Crónicos</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Ejemplo</th><th>Síntomas</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Agudo</strong></td><td>H₂S > 500 ppm</td><td>Paro respiratorio inmediato</td></tr>
                <tr><td><strong>Crónico</strong></td><td>SO₂ bajo nivel</td><td>Asma, bronquitis</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/health_risks_diagram.gif" alt="Riesgos">
            <p><em>Diagrama de riesgos. Fuente: IDEM.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/agudo-cronico.jpg" alt="Efectos agudos/cronicos">
            <p><em>Agudo vs crónico. Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #D32F2F;">

        <h4>3. Límites Permisibles (PEL – OSHA 2025)</h4>
        <ul>
            <li><strong>PEL:</strong> Concentración máxima permitida (8h/día)</li>
            <li><strong>STEL:</strong> Exposición corta (15 min)</li>
            <li><strong>IDLH:</strong> Inmediatamente peligrosa</li>
        </ul>

        <div class="visual">
            <img src="assets/img/osha.jpg" alt="OSHA tabla">
            <p><em>Tabla oficial OSHA. Fuente: OSHA.gov.</em></p>
        </div>

        <hr style="border:1px dashed #D32F2F;">

        <h4>4. Prevención y Control</h4>
        <ul>
            <li><strong>Monitores de gas</strong> (CO, H₂S)</li>
            <li><strong>Ventilación forzada</strong></li>
            <li><strong>Catalizadores</strong> (vehículos)</li>
            <li><strong>Desulfuración</strong> (SO₂)</li>
            <li><strong>SCR</strong> (NOₓ)</li>
        </ul>

        <hr style="border:1px dashed #D32F2F;">

        <h4>5. SVG Animado: Efecto del CO en la Sangre</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#FFEBEE"/>

                <!-- Título -->
                <text x="350" y="50" fill="#B71C1C" font-size="28" text-anchor="middle" font-weight="bold">CO: ASESINO SILENCIOSO</text>

                <!-- Pulmón -->
                <ellipse cx="150" cy="200" rx="80" ry="100" fill="#E57373" stroke="#B71C1C" stroke-width="3"/>
                <text x="150" y="180" fill="#B71C1C" font-size="16" text-anchor="middle">Pulmón</text>
                <text x="150" y="220" fill="#212121" font-size="12" text-anchor="middle">Inhala CO</text>

                <!-- Sangre -->
                <rect x="250" y="150" width="200" height="200" fill="#90CAF9" rx="20"/>
                <text x="350" y="140" fill="#0D47A1" font-size="16" text-anchor="middle">Sangre</text>

                <!-- Hemoglobina normal -->
                <circle cx="300" cy="220" r="25" fill="#4CAF50">
                    <animate attributeName="r" values="25;30;25" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="300" y="225" fill="white" font-size="10" text-anchor="middle">Hb + O₂</text>

                <!-- CO entra -->
                <circle cx="200" cy="250" r="15" fill="#B71C1C">
                    <animateMotion path="M200,250 L300,250" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="200" y="240" fill="white" font-size="8" text-anchor="middle">CO</text>

                <!-- Hb + CO -->
                <circle cx="400" cy="280" r="30" fill="#B71C1C">
                    <animate attributeName="r" values="30;35;30" begin="2s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="400" y="285" fill="white" font-size="10" text-anchor="middle">HbCO</text>

                <!-- Cerebro sin O₂ -->
                <path d="M500,200 Q550,180 600,200 Q550,220 500,200" fill="#B71C1C" opacity="0.3"/>
                <text x="550" y="200" fill="#B71C1C" font-size="16" text-anchor="middle">Cerebro</text>
                <text x="550" y="230" fill="#B71C1C" font-size="12" text-anchor="middle">¡Falta O₂!</text>

                <!-- Flechas -->
                <path d="M230 200 L250 200" stroke="#B71C1C" stroke-width="4" marker-end="url(#arrow)"/>
                <path d="M450 250 L480 230" stroke="#B71C1C" stroke-width="4" marker-end="url(#arrow)"/>

                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="5" orient="auto">
                        <path d="M0,0 L0,10 L10,5 z" fill="#B71C1C"/>
                    </marker>
                </defs>

                <!-- Leyenda -->
                <text x="350" y="400" fill="#B71C1C" font-size="14" text-anchor="middle">CO une Hb 250× más que O₂</text>
                <text x="350" y="430" fill="#212121" font-size="12" text-anchor="middle">PEL OSHA: 50 ppm (8h)</text>
            </svg>
            <p><em>SVG Animado: Mecanismo de intoxicación por CO.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Ejemplo gas tóxico', 'respuesta' => 'CO, SO₂, NOₓ'],
        ['enunciado' => 'Efecto CO', 'respuesta' => 'Asfixia, une hemoglobina'],
        ['enunciado' => 'Fuentes comunes', 'respuesta' => 'Vehículos, industria, quema'],

        // === APLICADOS ===
        ['enunciado' => 'PEL OSHA para CO', 'respuesta' => '50 ppm'],
        ['enunciado' => 'H₂S huele a', 'respuesta' => 'Huevo podrido'],
        ['enunciado' => 'NOₓ causa', 'respuesta' => 'Smog fotoquímico'],

        // === QUÍMICOS ===
        ['enunciado' => 'Reacción CO + Hb', 'respuesta' => 'HbCO (carboxihemoglobina)'],
        ['enunciado' => 'SO₂ + H₂O →', 'respuesta' => 'H₂SO₃ (ácido sulfuroso)'],
        ['enunciado' => 'Cl₂ en agua →', 'respuesta' => 'HCl + HOCl'],

        // === AVANZADOS ===
        ['enunciado' => 'IDLH para H₂S', 'respuesta' => '100 ppm'],
        ['enunciado' => 'OMS 2025: muertes/año por aire', 'respuesta' => '7 millones'],
        ['enunciado' => 'SCR elimina', 'respuesta' => 'NOₓ (reducción catalítica selectiva)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'CO es...', 'opciones' => ['Inodoro, letal', 'Oloroso', 'Seguro', 'Líquido'], 'correcta' => 'Inodoro, letal'],
        ['pregunta' => 'SO₂ causa...', 'opciones' => ['Lluvia ácida', 'Calor', 'Luz', 'Sonido'], 'correcta' => 'Lluvia ácida'],
        ['pregunta' => 'NOₓ forma...', 'opciones' => ['Smog', 'Ozono bueno', 'Agua', 'Nada'], 'correcta' => 'Smog'],
        ['pregunta' => 'H₂S huele a...', 'opciones' => ['Huevo podrido', 'Flor', 'Dulce', 'Nada'], 'correcta' => 'Huevo podrido'],
        ['pregunta' => 'Cl₂ es...', 'opciones' => ['Gas verde amarillento', 'Líquido', 'Sólido', 'Blanco'], 'correcta' => 'Gas verde amarillento'],
        ['pregunta' => 'PEL significa...', 'opciones' => ['Límite permisible', 'Peligro extremo', 'Nada', 'Todo'], 'correcta' => 'Límite permisible'],
        ['pregunta' => 'CO une Hb...', 'opciones' => ['250× más que O₂', 'Igual', 'Menos', 'Nada'], 'correcta' => '250× más que O₂'],
        ['pregunta' => 'Prevención clave', 'opciones' => ['Ventilación', 'Cerrar ventanas', 'Ignorar', 'Calor'], 'correcta' => 'Ventilación'],
        ['pregunta' => 'Monitores detectan...', 'opciones' => ['CO, H₂S', 'Solo O₂', 'Nada', 'Luz'], 'correcta' => 'CO, H₂S'],
        ['pregunta' => 'OMS dice causa...', 'opciones' => ['7M muertes/año', '0', '1M', '100M'], 'correcta' => '7M muertes/año'],

        // === MEDIO (10) ===
        ['pregunta' => 'PEL CO (OSHA)', 'opciones' => ['50 ppm', '500 ppm', '5 ppm', '0 ppm'], 'correcta' => '50 ppm'],
        ['pregunta' => 'IDLH H₂S', 'opciones' => ['100 ppm', '10 ppm', '1000 ppm', '1 ppm'], 'correcta' => '100 ppm'],
        ['pregunta' => 'SO₂ + H₂O →', 'opciones' => ['H₂SO₃', 'H₂SO₄', 'SO₃', 'H₂S'], 'correcta' => 'H₂SO₃'],
        ['pregunta' => 'Catalizador autos reduce...', 'opciones' => ['CO, NOₓ', 'Solo O₂', 'CO₂', 'H₂O'], 'correcta' => 'CO, NOₓ'],
        ['pregunta' => 'NH₃ irrita...', 'opciones' => ['Ojos, vías respiratorias', 'Piel solo', 'Oídos', 'Nada'], 'correcta' => 'Ojos, vías respiratorias'],
        ['pregunta' => 'SCR es para...', 'opciones' => ['NOₓ', 'SO₂', 'CO', 'H₂S'], 'correcta' => 'NOₓ'],
        ['pregunta' => 'Desulfuración elimina...', 'opciones' => ['SO₂', 'NO₂', 'CO', 'CH₄'], 'correcta' => 'SO₂'],
        ['pregunta' => 'VOCs son...', 'opciones' => ['Compuestos orgánicos volátiles', 'Gases nobles', 'Metales', 'Ácidos'], 'correcta' => 'Compuestos orgánicos volátiles'],
        ['pregunta' => 'Efecto crónico SO₂', 'opciones' => ['Asma', 'Dolor cabeza', 'Sueño', 'Hambre'], 'correcta' => 'Asma'],
        ['pregunta' => 'EPA regula...', 'opciones' => ['Aire exterior', 'Solo interior', 'Agua', 'Suelo'], 'correcta' => 'Aire exterior'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Reacción Hb + CO', 'opciones' => ['HbCO', 'HbO₂', 'HbN', 'HbH'], 'correcta' => 'HbCO'],
        ['pregunta' => 'Concentración letal H₂S', 'opciones' => ['>500 ppm', '<50 ppm', '100 ppm', '0 ppm'], 'correcta' => '>500 ppm'],
        ['pregunta' => 'STEL para Cl₂', 'opciones' => ['3 ppm (15 min)', '1 ppm', '10 ppm', '0 ppm'], 'correcta' => '3 ppm (15 min)'],
        ['pregunta' => 'NO₂ color', 'opciones' => ['Marrón rojizo', 'Verde', 'Azul', 'Transparente'], 'correcta' => 'Marrón rojizo'],
        ['pregunta' => 'Meta EPA 2030: reducir CO en...', 'opciones' => ['Ciudades 30%', '0%', '100%', '10%'], 'correcta' => 'Ciudades 30%'],
        ['pregunta' => 'Fórmula lluvia ácida', 'opciones' => ['SO₂ + H₂O → H₂SO₃', 'CO₂ + H₂O → H₂CO₃', 'NO₂ + H₂O → HNO�3', 'Todas'], 'correcta' => 'Todas'],
        ['pregunta' => 'Gas más tóxico común', 'opciones' => ['H₂S', 'CO', 'SO₂', 'NH₃'], 'correcta' => 'H₂S'],
        ['pregunta' => 'OSHA exige monitor para...', 'opciones' => ['Espacios confinados', 'Oficinas', 'Parques', 'Playas'], 'correcta' => 'Espacios confinados'],
        ['pregunta' => 'NH₃ + HCl →', 'opciones' => ['NH₄Cl (humo blanco)', 'NH₃Cl', 'HCl₂', 'Nada'], 'correcta' => 'NH₄Cl (humo blanco)'],
        ['pregunta' => 'OMS 2025: principal fuente urbana', 'opciones' => ['Vehículos (NOₓ, CO)', 'Volcanes', 'Océanos', 'Bosques'], 'correcta' => 'Vehículos (NOₓ, CO)']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Ondas (Mecánicas, Electromagnéticas, Propiedades, Interferencia, Aplicaciones)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'ondas',
    'titulo' => 'Ondas: La Danza de la Energía a Través del Espacio',
    'contenido' => '
        <h3>¿Qué son las Ondas?</h3>
        <p>Las <strong>ondas</strong> son <strong>perturbaciones periódicas</strong> que <strong>transfieren energía</strong> sin transportar materia. Se clasifican en:</p>
        <ul>
            <li><strong>Mecánicas:</strong> Necesitan medio (agua, aire, sólidos)</li>
            <li><strong>Electromagnéticas:</strong> Viajan en vacío (luz, radio, rayos X)</li>
        </ul>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Clasificación de Ondas</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Medio</th><th>Ejemplo</th><th>Vibración</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Mecánica Transversal</strong></td><td>Sí</td><td>Cuerda, luz polarizada</td><td>Perpendicular</td></tr>
                <tr><td><strong>Mecánica Longitudinal</strong></td><td>Sí</td><td>Sonido, ondas P</td><td>Paralela</td></tr>
                <tr><td><strong>Electromagnética</strong></td><td>No</td><td>Luz, microondas</td><td>Transversal (E ⊥ B)</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Sonido</strong> → onda longitudinal → compresiones/rarefacciones en aire → v ≈ <strong>343 m/s</strong> (20°C).</p>
        </div>

  <div class="visual">
            <img src="assets/img/Types-of-Waves.jpg" alt="Tipos de ondas">
            <p><em>Clasificación visual. Fuente: Science Facts.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Características de las Ondas</h4>
        <table class="table">
            <thead>
                <tr><th>Propiedad</th><th>Símbolo</th><th>Unidad</th><th>Relación</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Amplitud</strong></td><td>A</td><td>m</td><td>E ∝ A²</td></tr>
                <tr><td><strong>Longitud de onda</strong></td><td>λ</td><td>m</td><td>Distancia cresta-cresta</td></tr>
                <tr><td><strong>Frecuencia</strong></td><td>f o ν</td><td>Hz</td><td>Ciclos/segundo</td></tr>
                <tr><td><strong>Velocidad</strong></td><td>v</td><td>m/s</td><td><strong>v = f · λ</strong></td></tr>
                <tr><td><strong>Periodo</strong></td><td>T</td><td>s</td><td>T = 1/f</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="/assets/img/Types-of-Waves-2.png" alt="Transversal vs Longitudinal">
            <p><em>Transversal vs Longitudinal. Fuente: BYJU\'S.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/tipos-ondas.jpg" alt="Tipos de ondas">
            <p><em>Resumen gráfico. Fuente: KORMAX.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Fórmulas Clave</h4>
        <p>\[
            v = f \cdot \lambda \quad \text{(velocidad = frecuencia × longitud de onda)}
        \]</p>
        <p>\[
            E = h \cdot f = \frac{h c}{\lambda} \quad \text{(energía del fotón, EM)}
        \]</p>
        <p>\[
            I \propto A^2 \quad \text{(intensidad ∝ amplitud²)}
        \]</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. Fenómenos Ondulatorios</h4>
        <ul>
            <li><strong>Reflexión:</strong> Rebote (eco, espejo)</li>
            <li><strong>Refracción:</strong> Cambio velocidad (lente)</li>
            <li><strong>Difracción:</strong> Curvatura en obstáculos</li>
            <li><strong>Interferencia:</strong> Constructiva (más fuerte), destructiva (silencio)</li>
            <li><strong>Polarización:</strong> Solo EM transversales</li>
        </ul>

        <div class="visual">
            <img src="assets/img/interferencia.gif" alt="Interferencia">
            <p><em>Interferencia constructiva/destructiva. Fuente: Physics Classroom.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>5. SVG Animado: Onda Transversal + Longitudinal</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E8F5E9"/>

                <!-- Título -->
                <text x="400" y="50" fill="#1B5E20" font-size="32" text-anchor="middle" font-weight="bold">ONDAS: TRANSVERSAL Y LONGITUDINAL</text>

                <!-- Onda Transversal -->
                <g transform="translate(50,100)">
                    <text x="150" y="-10" fill="#1565C0" font-size="18" text-anchor="middle">Transversal (⊥)</text>
                    <path id="transversal" d="M0,100 Q50,50 100,100 T200,100 T300,100 T400,100" 
                          stroke="#1565C0" stroke-width="4" fill="none"/>
                    <animate href="#transversal" attributeName="d" 
                             values="M0,100 Q50,50 100,100 T200,100 T300,100 T400,100;
                                     M0,100 Q50,150 100,100 T200,100 T300,100 T400,100;
                                     M0,100 Q50,50 100,100 T200,100 T300,100 T400,100" 
                             dur="2s" repeatCount="indefinite"/>
                    <!-- Partícula oscilando -->
                    <circle r="8" fill="#1976D2">
                        <animate attributeName="cx" values="100;100;100" dur="2s" repeatCount="indefinite"/>
                        <animate attributeName="cy" values="50;150;50" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="100" y="170" fill="#1565C0" font-size="12" text-anchor="middle">↑↓</text>
                </g>

                <!-- Onda Longitudinal -->
                <g transform="translate(50,300)">
                    <text x="150" y="-10" fill="#D32F2F" font-size="18" text-anchor="middle">Longitudinal (∥)</text>
                    <!-- Compresión/rarefacción -->
                    <g id="longitudinal">
                        <line x1="0" y1="100" x2="50" y2="100" stroke="#D32F2F" stroke-width="6"/>
                        <line x1="50" y1="100" x2="70" y2="100" stroke="#D32F2F" stroke-width="3"/>
                        <line x1="70" y1="100" x2="120" y2="100" stroke="#D32F2F" stroke-width="6"/>
                        <line x1="120" y1="100" x2="140" y2="100" stroke="#D32F2F" stroke-width="3"/>
                        <line x1="140" y1="100" x2="190" y2="100" stroke="#D32F2F" stroke-width="6"/>
                        <line x1="190" y1="100" x2="210" y2="100" stroke="#D32F2F" stroke-width="3"/>
                        <line x1="210" y1="100" x2="260" y2="100" stroke="#D32F2F" stroke-width="6"/>
                        <line x1="260" y1="100" x2="280" y2="100" stroke="#D32F2F" stroke-width="3"/>
                        <line x1="280" y1="100" x2="330" y2="100" stroke="#D32F2F" stroke-width="6"/>
                        <line x1="330" y1="100" x2="350" y2="100" stroke="#D32F2F" stroke-width="3"/>
                        <line x1="350" y1="100" x2="400" y2="100" stroke="#D32F2F" stroke-width="6"/>
                    </g>
                    <animate href="#longitudinal" attributeName="transform" 
                             attributeType="XML" type="translate" 
                             values="0,0;50,0;0,0" dur="2s" repeatCount="indefinite"/>
                    <!-- Partícula -->
                    <circle r="8" fill="#B71C1C" cx="200" cy="100">
                        <animate attributeName="cx" values="200;250;200" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="200" y="130" fill="#D32F2F" font-size="12" text-anchor="middle">←→</text>
                </g>

                <!-- Fórmulas -->
                <text x="500" y="150" fill="#1B5E20" font-size="18">v = f · λ</text>
                <text x="500" y="200" fill="#1B5E20" font-size="18">T = 1/f</text>
                <text x="500" y="250" fill="#1B5E20" font-size="18">E ∝ A²</text>

                <!-- Ejemplo sonido -->
                <text x="500" y="350" fill="#1565C0" font-size="16">Sonido: v = 343 m/s (aire)</text>
                <text x="500" y="380" fill="#D32F2F" font-size="16">Luz: v = 3×10⁸ m/s (vacío)</text>

                <!-- Leyenda -->
                <text x="400" y="450" fill="#1B5E20" font-size="14" text-anchor="middle">NIST 2025: c = 299792458 m/s (exacto)</text>
            </svg>
            <p><em>SVG Animado: Comparación ondas transversal y longitudinal con movimiento de partículas.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Tipos de ondas', 'respuesta' => 'Mecánicas, electromagnéticas'],
        ['enunciado' => 'Longitud de onda λ es', 'respuesta' => 'Distancia entre crestas'],
        ['enunciado' => 'Frecuencia unidad', 'respuesta' => 'Hertz (Hz)'],

        // === APLICADOS ===
        ['enunciado' => 'v = 340 m/s, f = 680 Hz → λ', 'respuesta' => '0.5 m'],
        ['enunciado' => 'λ = 550 nm, luz → f', 'respuesta' => '5.45×10¹⁴ Hz'],
        ['enunciado' => 'Sonido en agua v ≈', 'respuesta' => '1480 m/s'],

        // === FÍSICO-QUÍMICOS ===
        ['enunciado' => 'Fórmula velocidad onda', 'respuesta' => '\\(v = f \\lambda\\)'],
        ['enunciado' => 'Energía onda ∝', 'respuesta' => 'A²'],
        ['enunciado' => 'Periodo T =', 'respuesta' => '1/f'],

        // === AVANZADOS ===
        ['enunciado' => 'c (vacío) exacto', 'respuesta' => '299792458 m/s'],
        ['enunciado' => 'Difracción máxima cuando', 'respuesta' => 'λ ≈ tamaño obstáculo'],
        ['enunciado' => 'Polarización solo en', 'respuesta' => 'Ondas transversales']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Ondas mecánicas necesitan...', 'opciones' => ['Medio', 'Vacío', 'Luz', 'Nada'], 'correcta' => 'Medio'],
        ['pregunta' => 'Transversal: vibración...', 'opciones' => ['Perpendicular', 'Paralela', 'Circular', 'Aleatoria'], 'correcta' => 'Perpendicular'],
        ['pregunta' => 'Longitudinal ejemplo', 'opciones' => ['Sonido', 'Luz', 'Radio', 'Rayos X'], 'correcta' => 'Sonido'],
        ['pregunta' => 'Amplitud mide...', 'opciones' => ['Energía', 'Frecuencia', 'Velocidad', 'Masa'], 'correcta' => 'Energía'],
        ['pregunta' => 'Frecuencia unidad', 'opciones' => ['Hz', 'm', 'm/s', 's'], 'correcta' => 'Hz'],
        ['pregunta' => 'v = f · λ es...', 'opciones' => ['Velocidad', 'Energía', 'Masa', 'Fuerza'], 'correcta' => 'Velocidad'],
        ['pregunta' => 'Luz viaja en...', 'opciones' => ['Vacío', 'Solo agua', 'Solo aire', 'Sólidos'], 'correcta' => 'Vacío'],
        ['pregunta' => 'Periodo T =', 'opciones' => ['1/f', 'f', 'λ', 'v'], 'correcta' => '1/f'],
        ['pregunta' => 'Interferencia constructiva', 'opciones' => ['Ondas en fase', 'Desfase π', 'Desfase λ/2', 'Nada'], 'correcta' => 'Ondas en fase'],
        ['pregunta' => 'Polarización solo en...', 'opciones' => ['Transversales', 'Longitudinales', 'Mecánicas', 'Todas'], 'correcta' => 'Transversales'],

        // === MEDIO (10) ===
        ['pregunta' => 'λ = 2 m, f = 170 Hz → v =', 'opciones' => ['340 m/s', '170 m/s', '85 m/s', '680 m/s'], 'correcta' => '340 m/s'],
        ['pregunta' => 'Sonido en agua v ≈', 'opciones' => ['1480 m/s', '343 m/s', '300 m/s', '5000 m/s'], 'correcta' => '1480 m/s'],
        ['pregunta' => 'E ∝ A² significa...', 'opciones' => ['Intensidad ∝ amplitud²', 'Energía ∝ frecuencia', 'Masa ∝ λ', 'Nada'], 'correcta' => 'Intensidad ∝ amplitud²'],
        ['pregunta' => 'Difracción máxima cuando', 'opciones' => ['λ ≈ obstáculo', 'λ >> obstáculo', 'λ << obstáculo', 'f alta'], 'correcta' => 'λ ≈ obstáculo'],
        ['pregunta' => 'Eco es...', 'opciones' => ['Reflexión', 'Refracción', 'Difracción', 'Interferencia'], 'correcta' => 'Reflexión'],
        ['pregunta' => 'Lente converge luz por...', 'opciones' => ['Refracción', 'Reflexión', 'Difracción', 'Polarización'], 'correcta' => 'Refracción'],
        ['pregunta' => 'Ondas EM tienen...', 'opciones' => ['E ⊥ B', 'E ∥ B', 'E = B', 'E circular'], 'correcta' => 'E ⊥ B'],
        ['pregunta' => 'c es constante en...', 'opciones' => ['Vacío', 'Agua', 'Aire', 'Vidrio'], 'correcta' => 'Vacío'],
        ['pregunta' => 'Sonido no viaja en...', 'opciones' => ['Vacío', 'Agua', 'Aire', 'Acero'], 'correcta' => 'Vacío'],
        ['pregunta' => 'NIST define c como...', 'opciones' => ['299792458 m/s exacto', 'Aproximado', '3×10⁸', 'Variable'], 'correcta' => '299792458 m/s exacto'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'f = 5×10¹⁴ Hz, luz → λ =', 'opciones' => ['600 nm', '400 nm', '800 nm', '300 nm'], 'correcta' => '600 nm'],
        ['pregunta' => 'Ecuación onda general', 'opciones' => ['y = A sin(2π(ft - x/λ))', 'y = A cos(fx)', 'y = A λ', 'y = v t'], 'correcta' => 'y = A sin(2π(ft - x/λ))'],
        ['pregunta' => 'Interferencia destructiva', 'opciones' => ['Desfase π', 'Desfase 0', 'Desfase 2π', 'Desfase λ'], 'correcta' => 'Desfase π'],
        ['pregunta' => 'Número de onda k =', 'opciones' => ['2π/λ', 'λ/2π', 'f/2π', 'v/λ'], 'correcta' => '2π/λ'],
        ['pregunta' => 'Velocidad grupo vs fase', 'opciones' => ['vg = dω/dk', 'vf = ω/k', 'Ambas', 'Ninguna'], 'correcta' => 'Ambas'],
        ['pregunta' => 'Efecto Doppler: fuente se acerca', 'opciones' => ['f ↑, λ ↓', 'f ↓, λ ↑', 'f = c', 'Nada'], 'correcta' => 'f ↑, λ ↓'],
        ['pregunta' => 'Onda estacionaria nodos cuando', 'opciones' => ['L = nλ/2', 'L = λ/4', 'L = λ', 'L = 2λ'], 'correcta' => 'L = nλ/2'],
        ['pregunta' => 'Polarización por reflexión (Brewster)', 'opciones' => ['tan θ = n', 'sin θ = n', 'cos θ = n', 'θ = 90°'], 'correcta' => 'tan θ = n'],
        ['pregunta' => 'Principio de Huygens', 'opciones' => ['Cada punto es fuente secundaria', 'Solo reflexión', 'Solo refracción', 'Nada'], 'correcta' => 'Cada punto es fuente secundaria'],
        ['pregunta' => 'c exacto desde 1983 porque', 'opciones' => ['Metro definido por c', 'c medido', 'Aproximado', 'Variable'], 'correcta' => 'Metro definido por c']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: La Materia (Clasificación, Propiedades, Estados, Cambios, Densidad)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'materia',
    'titulo' => 'La Materia: Todo lo que Ocupa Espacio y Tiene Masa',
    'contenido' => '
        <h3>¿Qué es la Materia?</h3>
        <p>La <strong>materia</strong> es <strong>todo</strong> que tiene <strong>masa</strong> y <strong>ocupa volumen</strong>. Compuesta por <strong>átomos</strong>, se clasifica por <strong>composición</strong> y <strong>propiedades</strong>.</p>
        <p><strong>Estados:</strong> Sólido, líquido, gas, plasma (99% universo).</p>

        <hr style="border:1px dashed #2196F3;">

        <h4>1. Clasificación de la Materia</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Subtipo</th><th>Ejemplo</th><th>Separación</th></tr>
            </thead>
            <tbody>
                <tr><td rowspan="2"><strong>Pura</strong></td><td>Elemento</td><td>Oro (Au), Oxígeno (O₂)</td><td>Química</td></tr>
                <tr><td>Compuesto</td><td>Agua (H₂O), Sal (NaCl)</td><td>Química</td></tr>
                <tr><td rowspan="2"><strong>Mezcla</strong></td><td>Homogénea</td><td>Aire, Salmuera</td><td>Física</td></tr>
                <tr><td>Heterogénea</td><td>Ensalada, Granito</td><td>Física</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Agua destilada</strong> → Compuesto puro (H₂O). <strong>Agua de mar</strong> → Mezcla homogénea (H₂O + sales).</p>
        </div>

        <div class="visual">
            <img src="assets/img/materia.png" alt="Clasificación materia">
            <p><em>Diagrama completo. Fuente: ChemistryBytes.</em></p>
        </div>

        <hr style="border:1px dashed #2196F3;">

        <h4>2. Propiedades de la Materia</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Definición</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Físicas</strong></td><td>Sin cambiar composición</td><td>Densidad, punto fusión</td></tr>
                <tr><td><strong>Químicas</strong></td><td>Cambia composición</td><td>Reactividad, combustión</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/clasificacion-tec-science.jpg" alt="Clasificación tec-science">
            <p><em>Flujograma. Fuente: tec-science.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/classifying_matter.jpg" alt="Clasificación infantil">
            <p><em>Versión didáctica. Fuente: SmartClass4Kids.</em></p>
        </div>

        <hr style="border:1px dashed #2196F3;">

        <h4>3. Cambios de la Materia</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Reversible</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Físico</strong></td><td>Sí</td><td>Fusión hielo</td></tr>
                <tr><td><strong>Químico</strong></td><td>No</td><td>Combustión madera</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #2196F3;">

        <h4>4. Densidad: Propiedad Intensiva</h4>
        <p>\[
            \\rho = \\frac{m}{V} \\quad \\text{(kg/m³ o g/cm³)}
        \]</p>
        <p>Ejemplos:</p>
        <ul>
            <li><strong>Agua:</strong> 1 g/cm³</li>
            <li><strong>Oro:</strong> 19.3 g/cm³</li>
            <li><strong>Aire:</strong> 0.0012 g/cm³</li>
        </ul>

        <div class="visual">
            <img src="assets/img/clasificacion-materia.png" alt="NIST materia">
            <p><em>Clasificación oficial. Fuente: NIST.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/elementos-puros.jpg" alt="Tabla IUPAC">
            <p><em>Elementos puros. Fuente: IUPAC.</em></p>
        </div>

        <hr style="border:1px dashed #2196F3;">

        <h4>5. SVG Animado: Clasificación de la Materia</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#E8EAF6"/>

                <!-- Centro: Materia -->
                <circle cx="350" cy="250" r="80" fill="#1976D2" stroke="#0D47A1" stroke-width="5">
                    <animate attributeName="r" values="80;90;80" dur="3s" repeatCount="indefinite"/>
                </circle>
                <text x="350" y="240" fill="white" font-size="16" text-anchor="middle" font-weight="bold">MATERIA</text>
                <text x="350" y="260" fill="white" font-size="12" text-anchor="middle">Masa + Volumen</text>

                <!-- Pura -->
                <rect x="100" y="100" width="120" height="80" fill="#4CAF50" rx="15">
                    <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="160" y="130" fill="white" font-size="14" text-anchor="middle">PURA</text>
                <text x="160" y="150" fill="#E8F5E9" font-size="10" text-anchor="middle">Elementos</text>
                <text x="160" y="165" fill="#E8F5E9" font-size="9" text-anchor="middle">Compuestos</text>

                <!-- Mezcla -->
                <rect x="480" y="100" width="120" height="80" fill="#FF9800" rx="15">
                    <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="540" y="130" fill="white" font-size="14" text-anchor="middle">MEZCLA</text>
                <text x="540" y="150" fill="#FFF3E0" font-size="10" text-anchor="middle">Homogénea</text>
                <text x="540" y="165" fill="#FFF3E0" font-size="9" text-anchor="middle">Heterogénea</text>

                <!-- Elementos -->
                <circle cx="100" cy="320" r="40" fill="#2196F3">
                    <animate attributeName="r" values="40;50;40" begin="1s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="100" y="315" fill="white" font-size="12" text-anchor="middle">Au</text>
                <text x="100" y="335" fill="#BBDEFB" font-size="9" text-anchor="middle">Oro</text>

                <!-- Compuestos -->
                <rect x="200" y="300" width="80" height="60" fill="#43A047" rx="10">
                    <animate attributeName="opacity" values="0.6;1;0.6" begin="1.5s" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="240" y="330" fill="white" font-size="12" text-anchor="middle">H₂O</text>

                <!-- Homogénea -->
                <circle cx="450" cy="320" r="45" fill="#FFB300">
                    <animate attributeName="r" values="45;55;45" begin="2s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="450" y="315" fill="#212121" font-size="12" text-anchor="middle">Aire</text>

                <!-- Heterogénea -->
                <rect x="520" y="300" width="100" height="80" fill="#D32F2F" rx="15">
                    <animate attributeName="opacity" values="0.6;1;0.6" begin="2.5s" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="570" y="340" fill="white" font-size="12" text-anchor="middle">Ensalada</text>

                <!-- Flechas -->
                <path d="M350 170 L160 180" stroke="#1976D2" stroke-width="6" marker-end="url(#arrow)"/>
                <path d="M350 170 L540 180" stroke="#1976D2" stroke-width="6" marker-end="url(#arrow)"/>
                <path d="M160 180 L100 300" stroke="#4CAF50" stroke-width="5" marker-end="url(#arrow-green)"/>
                <path d="M160 180 L240 320" stroke="#4CAF50" stroke-width="5" marker-end="url(#arrow-green)"/>
                <path d="M540 180 L450 300" stroke="#FF9800" stroke-width="5" marker-end="url(#arrow-orange)"/>
                <path d="M540 180 L570 340" stroke="#FF9800" stroke-width="5" marker-end="url(#arrow-orange)"/>

                <!-- Marcadores -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#1976D2"/>
                    </marker>
                    <marker id="arrow-green" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#4CAF50"/>
                    </marker>
                    <marker id="arrow-orange" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#FF9800"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="350" y="60" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">CLASIFICACIÓN DE LA MATERIA</text>
                <text x="350" y="90" fill="#1565C0" font-size="16" text-anchor="middle">Pura vs Mezcla – IUPAC 2025</text>
            </svg>
            <p><em>SVG Animado: Árbol de clasificación con ejemplos y animación jerárquica.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define materia', 'respuesta' => 'Todo con masa y volumen'],
        ['enunciado' => 'Ejemplo materia pura', 'respuesta' => 'Oro, agua destilada'],
        ['enunciado' => 'Mezcla homogénea', 'respuesta' => 'Aire, salmuera'],

        // === APLICADOS ===
        ['enunciado' => 'Agua de mar es...', 'respuesta' => 'Mezcla homogénea'],
        ['enunciado' => 'Granito es...', 'respuesta' => 'Mezcla heterogénea'],
        ['enunciado' => 'Densidad agua', 'respuesta' => '1 g/cm³'],

        // === QUÍMICOS ===
        ['enunciado' => 'Propiedad física', 'respuesta' => 'Punto de fusión'],
        ['enunciado' => 'Propiedad química', 'respuesta' => 'Reactividad con ácidos'],
        ['enunciado' => 'Cambio físico', 'respuesta' => 'Fusión, evaporación'],

        // === AVANZADOS ===
        ['enunciado' => 'Fórmula densidad', 'respuesta' => '\\(\\rho = \\frac{m}{V}\\)',],
        ['enunciado' => 'NIST define masa atómica C-12', 'respuesta' => '12 u exacto'],
        ['enunciado' => 'IUPAC clasifica elementos', 'respuesta' => '118 conocidos 2025']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Materia tiene...', 'opciones' => ['Masa y volumen', 'Solo masa', 'Solo volumen', 'Nada'], 'correcta' => 'Masa y volumen'],
        ['pregunta' => 'Propiedad física cambia...', 'opciones' => ['Forma, no composición', 'Composición', 'Todo', 'Nada'], 'correcta' => 'Forma, no composición'],
        ['pregunta' => 'Química involucra...', 'opciones' => ['Reacciones', 'Medidas', 'Nada', 'Volumen'], 'correcta' => 'Reacciones'],
        ['pregunta' => 'Ejemplo materia pura', 'opciones' => ['Oro', 'Aire', 'Agua salada', 'Suelo'], 'correcta' => 'Oro'],
        ['pregunta' => 'Mezcla homogénea', 'opciones' => ['Aire', 'Ensalada', 'Granito', 'Aceite+agua'], 'correcta' => 'Aire'],
        ['pregunta' => 'Heterogénea', 'opciones' => ['Granito', 'Salmuera', 'Alcohol+agua', 'Aire'], 'correcta' => 'Granito'],
        ['pregunta' => 'Densidad =', 'opciones' => ['m/V', 'V/m', 'm+V', 'm-V'], 'correcta' => 'm/V'],
        ['pregunta' => 'Estado plasma', 'opciones' => ['99% universo', '1%', '0%', '50%'], 'correcta' => '99% universo'],
        ['pregunta' => 'Cambio físico', 'opciones' => ['Fusión', 'Combustión', 'Reacción', 'Oxidación'], 'correcta' => 'Fusión'],
        ['pregunta' => 'IUPAC 2025 elementos', 'opciones' => ['118', '100', '92', '200'], 'correcta' => '118'],

        // === MEDIO (10) ===
        ['pregunta' => 'Agua de mar es...', 'opciones' => ['Mezcla homogénea', 'Pura', 'Elemento', 'Heterogénea'], 'correcta' => 'Mezcla homogénea'],
        ['pregunta' => 'Granito es...', 'opciones' => ['Mezcla heterogénea', 'Homogénea', 'Pura', 'Elemento'], 'correcta' => 'Mezcla heterogénea'],
        ['pregunta' => 'Densidad oro', 'opciones' => ['19.3 g/cm³', '1 g/cm³', '0.001 g/cm³', '100 g/cm³'], 'correcta' => '19.3 g/cm³'],
        ['pregunta' => 'C-12 masa exacta', 'opciones' => ['12 u', '12.011 u', '13 u', '11 u'], 'correcta' => '12 u'],
        ['pregunta' => 'Número másico A =', 'opciones' => ['p⁺ + n⁰', 'p⁺ + e⁻', 'Z + e⁻', 'Solo Z'], 'correcta' => 'p⁺ + n⁰'],
        ['pregunta' => 'Cambio químico libera...', 'opciones' => ['Energía', 'Masa', 'Volumen', 'Nada'], 'correcta' => 'Energía'],
        ['pregunta' => 'Propiedad intensiva', 'opciones' => ['Densidad', 'Masa', 'Volumen', 'Peso'], 'correcta' => 'Densidad'],
        ['pregunta' => 'Extensiva', 'opciones' => ['Masa', 'Densidad', 'Color', 'pH'], 'correcta' => 'Masa'],
        ['pregunta' => 'NIST define átomo como...', 'opciones' => ['Unidad con Z', 'Molécula', 'Ión', 'Nada'], 'correcta' => 'Unidad con Z'],
        ['pregunta' => 'Mezcla separada por...', 'opciones' => ['Física', 'Química', 'Nuclear', 'Nada'], 'correcta' => 'Física'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula densidad', 'opciones' => ['\\(\\rho = \\frac{m}{V}\\)', '\\(\\rho = m + V\\)', '\\(\\rho = V/m\\)', '\\(\\rho = 0\\)'], 'correcta' => '\\(\\rho = \\frac{m}{V}\\)',],
        ['pregunta' => 'Átomo con Z=1', 'opciones' => ['Hidrógeno', 'Helio', 'Litio', 'Carbono'], 'correcta' => 'Hidrógeno'],
        ['pregunta' => 'C-12 tiene...', 'opciones' => ['6p⁺, 6n⁰, 6e⁻', '12p⁺', '6e⁻', '0'], 'correcta' => '6p⁺, 6n⁰, 6e⁻'],
        ['pregunta' => 'IUPAC nombra elementos hasta...', 'opciones' => ['118 (Oganesson)', '100', '92', '200'], 'correcta' => '118 (Oganesson)'],
        ['pregunta' => 'Propiedad química del Na', 'opciones' => ['Reacciona con H₂O', 'Densidad', 'Color', 'Volumen'], 'correcta' => 'Reacciona con H₂O'],
        ['pregunta' => 'Mezcla azeótropa', 'opciones' => ['No separable destilación', 'Fácil', 'Solo física', 'Nada'], 'correcta' => 'No separable destilación'],
        ['pregunta' => 'Densidad aire ≈', 'opciones' => ['0.0012 g/cm³', '1 g/cm³', '19.3 g/cm³', '0 g/cm³'], 'correcta' => '0.0012 g/cm³'],
        ['pregunta' => 'Cambio físico reversible', 'opciones' => ['Fusión', 'Combustión', 'Reacción', 'Oxidación'], 'correcta' => 'Fusión'],
        ['pregunta' => 'Ley conservación masa por...', 'opciones' => ['Lavoisier', 'Dalton', 'Thomson', 'Rutherford'], 'correcta' => 'Lavoisier'],
        ['pregunta' => 'Masa molar C-12', 'opciones' => ['12 g/mol exacto', '12.011 g/mol', '13 g/mol', '11 g/mol'], 'correcta' => '12 g/mol exacto']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Hielo Seco (CO₂(s), Sublimación, Estructura, Orbitales, Usos, Seguridad)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'hielo-seco',
    'titulo' => 'Hielo Seco: El Frío que Nunca se Derrite',
    'contenido' => '
        <h3>¿Qué es el Hielo Seco?</h3>
        <p>El <strong>hielo seco</strong> es <strong>dióxido de carbono sólido (CO₂(s))</strong>. A presión atmosférica, <strong>sublima</strong> (pasa de sólido a gas) a <strong>-78.5°C</strong> sin fase líquida. <strong>No tóxico</strong> en bajas concentraciones, pero <strong>asfixiante</strong> en espacios cerrados (>5% vol).</p>

        <hr style="border:1px dashed #B71C1C;">

        <h4>1. Propiedades Físicas</h4>
        <table class="table">
            <thead>
                <tr><th>Propiedad</th><th>Valor</th><th>Unidad</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Temperatura sublimación</strong></td><td>-78.5</td><td>°C</td></tr>
                <tr><td><strong>Densidad (sólido)</strong></td><td>1.56</td><td>g/cm³</td></tr>
                <tr><td><strong>Calor sublimación</strong></td><td>571</td><td>J/g</td></tr>
                <tr><td><strong>Punto triple</strong></td><td>-56.6 (5.11 atm)</td><td>°C</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> 1 kg de hielo seco sublima → absorbe <strong>571 kJ</strong> → enfría aire rápidamente.</p>
        </div>

        <hr style="border:1px dashed #B71C1C;">

        <h4>2. Estructura Molecular del CO₂</h4>
        <p>CO₂ es <strong>lineal</strong>, <strong>apolar</strong>. Enlaces <strong>doble covalentes</strong> (resonancia).</p>
        <p>\[
            \\text{O=C=O} \\quad \\leftrightarrow \\quad \\text{}^{+}O≡C-O^{-}
        \]</p>

        <div class="visual">
            <img src="assets/img/orbitales_moleculares.png" alt="Orbitales CO2">
            <p><em>Orbitales moleculares. Fuente: ThoughtCo.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/configruacion_electronicos.jpg" alt="Cajas orbitales">
            <p><em>Configuración electrónica. Fuente: Pathways to Chemistry.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/diagrama-electrones.jpg" alt="Configuración electrónica">
            <p><em>Diagrama de electrones. Fuente: Science Facts.</em></p>
        </div>

        <hr style="border:1px dashed #B71C1C;">

        <h4>3. Aplicaciones del Hielo Seco</h4>
        <ul>
            <li><strong>Refrigeración:</strong> Transporte vacunas, alimentos</li>
            <li><strong>Efectos especiales:</strong> Niebla (CO₂ + H₂O)</li>
            <li><strong>Limpieza:</strong> Blasting (remueve suciedad sin residuos)</li>
            <li><strong>Carbonatación:</strong> Bebidas</li>
        </ul>

        <div class="visual">
            <img src="assets/img/ficha-seguridad-osha.jpg" alt="Ficha seguridad">
            <p><em>Ficha OSHA. Fuente: Airgas.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/CO2-diagrama.jpg" alt="Diagrama fases CO2">
            <p><em>Diagrama de fases. Fuente: NIST.</em></p>
        </div>

        <hr style="border:1px dashed #B71C1C;">

        <h4>4. Seguridad (OSHA 2025)</h4>
        <ul>
            <li><strong>PEL:</strong> 5000 ppm (8h)</li>
            <li><strong>STEL:</strong> 30,000 ppm (15 min)</li>
            <li><strong>IDLH:</strong> 40,000 ppm</li>
            <li><strong>Riesgo:</strong> Asfixia, quemaduras por frío</li>
        </ul>

        <hr style="border:1px dashed #B71C1C;">

        <h4>5. SVG Animado: Sublimación del Hielo Seco</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#E3F2FD"/>

                <!-- Título -->
                <text x="350" y="60" fill="#B71C1C" font-size="28" text-anchor="middle" font-weight="bold">HIELO SECO: SUBLIMACIÓN</text>

                <!-- Hielo seco -->
                <g id="hielo-seco">
                    <rect x="250" y="300" width="200" height="100" fill="#BBDEFB" rx="20"/>
                    <text x="350" y="350" fill="#0D47A1" font-size="18" text-anchor="middle">Hielo Seco</text>
                    <text x="350" y="380" fill="#1565C0" font-size="14" text-anchor="middle">CO₂(s)</text>
                </g>

                <!-- Partículas sublimando -->
                <g id="particulas">
                    <circle cx="300" cy="280" r="8" fill="#90CAF9">
                        <animate attributeName="cy" values="280;200;100" dur="3s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="1;0.5;0" dur="3s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="350" cy="280" r="10" fill="#90CAF9">
                        <animate attributeName="cy" values="280;180;80" dur="2.5s" begin="0.5s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="1;0.5;0" dur="2.5s" begin="0.5s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="400" cy="280" r="7" fill="#90CAF9">
                        <animate attributeName="cy" values="280;220;120" dur="3.5s" begin="1s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="1;0.5;0" dur="3.5s" begin="1s" repeatCount="indefinite"/>
                    </circle>
                </g>

                <!-- Nube de gas -->
                <g id="nube">
                    <ellipse cx="350" cy="150" rx="120" ry="60" fill="#BBDEFB" opacity="0.6"/>
                    <text x="350" y="150" fill="#1565C0" font-size="16" text-anchor="middle">CO₂(g)</text>
                    <animate attributeName="rx" values="120;150;120" dur="4s" repeatCount="indefinite"/>
                </g>

                <!-- Niebla (efecto) -->
                <g id="niebla">
                    <circle cx="200" cy="180" r="30" fill="#E3F2FD" opacity="0.7">
                        <animate attributeName="r" values="30;50;30" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <circle cx="500" cy="180" r="25" fill="#E3F2FD" opacity="0.7">
                        <animate attributeName="r" values="25;45;25" dur="2.5s" repeatCount="indefinite"/>
                    </circle>
                </g>

                <!-- Flecha sublimación -->
                <path d="M350 280 L350 200" stroke="#B71C1C" stroke-width="6" marker-end="url(#arrow)"/>
                <text x="370" y="240" fill="#B71C1C" font-size="16">Sublimación</text>
                <text x="370" y="260" fill="#D32F2F" font-size="12">-78.5°C</text>

                <!-- Fórmulas -->
                <text x="100" y="100" fill="#1565C0" font-size="16">CO₂(s) → CO₂(g)</text>
                <text x="100" y="130" fill="#1565C0" font-size="16">ΔH<sub>sub</sub> = 571 J/g</text>

                <!-- Seguridad -->
                <rect x="480" y="320" width="180" height="80" fill="#FFEBEE" rx="15"/>
                <text x="570" y="350" fill="#B71C1C" font-size="14" text-anchor="middle">¡PEL: 5000 ppm!</text>
                <text x="570" y="370" fill="#D32F2F" font-size="12" text-anchor="middle">Asfixia >5%</text>

                <!-- Marcador -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#B71C1C"/>
                    </marker>
                </defs>

                <!-- Animación de reducción -->
                <animate href="#hielo-seco" attributeName="height" values="100;80;60;40;20;0" dur="15s" repeatCount="1"/>
                <animate href="#hielo-seco" attributeName="y" values="300;320;340;360;380;400" dur="15s" repeatCount="1"/>
            </svg>
            <p><em>SVG Animado: Proceso de sublimación con partículas, nube y seguridad.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Composición hielo seco', 'respuesta' => 'CO₂ sólido'],
        ['enunciado' => 'Proceso al calentarse', 'respuesta' => 'Sublimación'],
        ['enunciado' => 'Temperatura sublimación', 'respuesta' => '-78.5°C'],

        // === APLICADOS ===
        ['enunciado' => 'Usos principales', 'respuesta' => 'Refrigeración, efectos, limpieza'],
        ['enunciado' => 'Densidad hielo seco', 'respuesta' => '1.56 g/cm³'],
        ['enunciado' => 'Calor sublimación', 'respuesta' => '571 J/g'],

        // === QUÍMICOS ===
        ['enunciado' => 'Estructura CO₂', 'respuesta' => 'Lineal, apolar'],
        ['enunciado' => 'Enlaces en CO₂', 'respuesta' => 'Doble (resonancia)'],
        ['enunciado' => 'PEL OSHA CO₂', 'respuesta' => '5000 ppm'],

        // === AVANZADOS ===
        ['enunciado' => 'Punto triple CO₂', 'respuesta' => '-56.6°C, 5.11 atm'],
        ['enunciado' => 'IDLH CO₂', 'respuesta' => '40,000 ppm'],
        ['enunciado' => 'NIST 2025: T<sub>sub</sub> exacta', 'respuesta' => '-78.464°C']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Hielo seco es...', 'opciones' => ['CO₂ sólido', 'H₂O congelado', 'N₂ líquido', 'O₂'], 'correcta' => 'CO₂ sólido'],
        ['pregunta' => 'Sublima a...', 'opciones' => ['-78.5°C', '0°C', '100°C', '-196°C'], 'correcta' => '-78.5°C'],
        ['pregunta' => 'No deja...', 'opciones' => ['Líquido', 'Gas', 'Sólido', 'Calor'], 'correcta' => 'Líquido'],
        ['pregunta' => 'Riesgo principal', 'opciones' => ['Asfixia', 'Explosión', 'Toxicidad', 'Calor'], 'correcta' => 'Asfixia'],
        ['pregunta' => 'Usado en...', 'opciones' => ['Refrigeración', 'Calefacción', 'Iluminación', 'Sonido'], 'correcta' => 'Refrigeración'],
        ['pregunta' => 'Efecto niebla por...', 'opciones' => ['CO₂ + H₂O', 'CO₂ + O₂', 'CO₂ solo', 'Calor'], 'correcta' => 'CO₂ + H₂O'],
        ['pregunta' => 'Densidad > agua', 'opciones' => ['Sí', 'No', 'Igual', 'Variable'], 'correcta' => 'Sí'],
        ['pregunta' => 'PEL OSHA CO₂', 'opciones' => ['5000 ppm', '500 ppm', '50 ppm', '0 ppm'], 'correcta' => '5000 ppm'],
        ['pregunta' => 'Sublimación es...', 'opciones' => ['Sólido → Gas', 'Líquido → Gas', 'Gas → Sólido', 'Sólido → Líquido'], 'correcta' => 'Sólido → Gas'],
        ['pregunta' => 'CO₂ es...', 'opciones' => ['Apolar', 'Polar', 'Iónico', 'Metálico'], 'correcta' => 'Apolar'],

        // === MEDIO (10) ===
        ['pregunta' => 'Calor sublimación', 'opciones' => ['571 J/g', '334 J/g', '2260 J/g', '0 J/g'], 'correcta' => '571 J/g'],
        ['pregunta' => 'Punto triple CO₂', 'opciones' => ['-56.6°C', '-78.5°C', '0°C', '100°C'], 'correcta' => '-56.6°C'],
        ['pregunta' => 'Estructura CO₂', 'opciones' => ['Lineal', 'Angular', 'Trigonal', 'Tetraédrica'], 'correcta' => 'Lineal'],
        ['pregunta' => 'Blasting remueve...', 'opciones' => ['Suciedad sin residuos', 'Con agua', 'Con calor', 'Con luz'], 'correcta' => 'Suciedad sin residuos'],
        ['pregunta' => 'IDLH CO₂', 'opciones' => ['40,000 ppm', '5000 ppm', '1000 ppm', '100 ppm'], 'correcta' => '40,000 ppm'],
        ['pregunta' => 'Enlaces CO₂', 'opciones' => ['Doble (resonancia)', 'Simple', 'Triple', 'Iónico'], 'correcta' => 'Doble (resonancia)'],
        ['pregunta' => 'Transporte vacunas', 'opciones' => ['Hielo seco', 'Hielo normal', 'Agua', 'Aire'], 'correcta' => 'Hielo seco'],
        ['pregunta' => 'CO₂ en sangre forma...', 'opciones' => ['H₂CO₃', 'CO', 'O₂', 'H₂O'], 'correcta' => 'H₂CO₃'],
        ['pregunta' => 'NIST mide T<sub>sub</sub>', 'opciones' => ['-78.464°C', '-78.5°C', '-80°C', '-70°C'], 'correcta' => '-78.464°C'],
        ['pregunta' => 'Quemadura por frío', 'opciones' => ['< -78°C', '> 0°C', '> 100°C', 'Ninguna'], 'correcta' => '< -78°C'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula sublimación', 'opciones' => ['CO₂(s) → CO₂(g)', 'CO₂(g) → CO₂(s)', 'CO₂(l) → CO₂(g)', 'CO₂(s) → CO₂(l)'], 'correcta' => 'CO₂(s) → CO₂(g)'],
        ['preguna' => 'Presión punto triple', 'opciones' => ['5.11 atm', '1 atm', '0.1 atm', '10 atm'], 'correcta' => '5.11 atm'],
        ['pregunta' => 'Híbrido CO₂', 'opciones' => ['sp', 'sp²', 'sp³', 'No híbrido'], 'correcta' => 'sp'],
        ['pregunta' => 'CO₂ en bebidas', 'opciones' => ['Carbonatación', 'Refrigeración', 'Limpieza', 'Efectos'], 'correcta' => 'Carbonatación'],
        ['pregunta' => 'Efecto invernadero', 'opciones' => ['CO₂ absorbe IR', 'Refleja UV', 'Emite luz', 'Nada'], 'correcta' => 'CO₂ absorbe IR'],
        ['pregunta' => 'OSHA exige ventilación si...', 'opciones' => ['>5000 ppm', '<1000 ppm', '>100 ppm', 'Siempre'], 'correcta' => '>5000 ppm'],
        ['pregunta' => 'Densidad CO₂(g) a 0°C', 'opciones' => ['1.98 g/L', '1.29 g/L', '0.001 g/L', '100 g/L'], 'correcta' => '1.98 g/L'],
        ['pregunta' => 'Sublimación endotérmica', 'opciones' => ['Absorbe calor', 'Libera calor', 'Neutro', 'Variable'], 'correcta' => 'Absorbe calor'],
        ['pregunta' => 'IUPAC nombre CO₂', 'opciones' => ['Dióxido de carbono', 'Monóxido', 'Óxido', 'Carburo'], 'correcta' => 'Dióxido de carbono'],
        ['pregunta' => 'Meta OSHA 2030: reducir CO₂ en...', 'opciones' => ['Espacios cerrados 20%', '0%', '100%', '50%'], 'correcta' => 'Espacios cerrados 20%']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: El Big Bang (Origen, Nucleosíntesis, CMB, Redshift, Elementos, Planck 2025)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'big-bang',
    'titulo' => 'El Big Bang: El Nacimiento Químico del Universo',
    'contenido' => '
        <h3>¿Qué es el Big Bang?</h3>
        <p>El <strong>Big Bang</strong> es la <strong>teoría cosmológica estándar</strong> que describe el <strong>origen del universo</strong> hace <strong>13.799 ± 0.021 mil millones de años</strong> (Planck 2025). No fue una explosión, sino una <strong>expansión rápida</strong> de un <strong>punto singular</strong> extremadamente caliente y denso.</p>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>1. Cronología del Universo</h4>
        <table class="table">
            <thead>
                <tr><th>Tiempo</th><th>Evento</th><th>Temperatura</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>10⁻⁴³ s</strong></td><td>Era de Planck</td><td>10³² K</td></tr>
                <tr><td><strong>10⁻³⁶ s</strong></td><td>Inflación</td><td>10²⁸ K</td></tr>
                <tr><td><strong>10⁻⁶ s</strong></td><td>Quarks → Hadrones</td><td>10¹² K</td></tr>
                <tr><td><strong>3 min</strong></td><td><strong>Nucleosíntesis</strong></td><td>10⁹ K</td></tr>
                <tr><td><strong>380,000 años</strong></td><td>Recombinación → CMB</td><td>3000 K</td></tr>
                <tr><td><strong>100 millones años</strong></td><td>Primeras estrellas</td><td>—</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> En los <strong>primeros 3 minutos</strong>, se formó el <strong>75% H, 25% He</strong> del universo → <strong>abundancia cósmica</strong>.</p>
        </div>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>2. Nucleosíntesis del Big Bang (BBN)</h4>
        <p>Formó:</p>
        <ul>
            <li><strong>Hidrógeno (¹H):</strong> 75.0%</li>
            <li><strong>Helio-4 (⁴He):</strong> 24.9%</li>
            <li><strong>Deuterio (²H):</strong> 0.01%</li>
            <li><strong>Helio-3 (³He):</strong> 0.01%</li>
            <li><strong>Litio-7 (⁷Li):</strong> trazas</li>
        </ul>
        <p><strong>Elementos pesados (C, O, Fe)</strong> → <strong>fusión estelar</strong>.</p>

        <div class="visual">
            <img src="assets/img/radicacion-cosmica.jpg" alt="CMB Planck">
            <p><em>Radiación Cósmica de Fondo (CMB). Fuente: NASA/ESA.</em></p>
        </div>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>3. Evidencias del Big Bang</h4>
        <table class="table">
            <thead>
                <tr><th>Evidencia</th><th>Descubrimiento</th><th>Significado</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Expansión (Hubble)</strong></td><td>1929</td><td>Galaxias se alejan → v = H₀·d</td></tr>
                <tr><td><strong>CMB</strong></td><td>1965 (Penzias & Wilson)</td><td>T = 2.725 K</td></tr>
                <tr><td><strong>Abundancia H/He</strong></td><td>1948 (Alpher)</td><td>Coincide con BBN</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/cronologia-cosmica.jpg" alt="Línea temporal">
            <p><em>Cronología cósmica. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>4. Fórmulas Clave</h4>
        <p>\[
            v = H_0 \\cdot d \\quad \\text{(Ley de Hubble)}
        \]</p>
        <p>\[
            H_0 = 67.4 \\, \\text{km/s/Mpc} \\quad \\text{(Planck 2025)}
        \]</p>
        <p>\[
            T_{\\text{CMB}} = 2.72548 \\, \\text{K} \\quad \\text{(COBE/FIRAS)}
        \]</p>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>5. SVG Animado: Evolución del Universo</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E8EAF6"/>

                <!-- Título -->
                <text x="400" y="50" fill="#4A148C" font-size="28" text-anchor="middle" font-weight="bold">EVOLUCIÓN DEL UNIVERSO</text>

                <!-- Punto singular -->
                <circle id="singular" cx="400" cy="250" r="5" fill="#D500F9">
                    <animate attributeName="r" values="5;200;300;400" dur="10s" repeatCount="1"/>
                </circle>

                <!-- Expansión -->
                <g id="expansion">
                    <circle cx="400" cy="250" r="50" fill="none" stroke="#7B1FA2" stroke-width="3" opacity="0.8">
                        <animate attributeName="r" values="50;150;250;350" dur="10s" begin="2s" repeatCount="1"/>
                    </circle>
                    <text x="400" y="200" fill="#4A148C" font-size="16" text-anchor="middle">Inflación</text>
                </g>

                <!-- Nucleosíntesis -->
                <g id="nucleo" opacity="0">
                    <rect x="100" y="100" width="120" height="80" fill="#7B1FA2" rx="15"/>
                    <text x="160" y="140" fill="white" font-size="14" text-anchor="middle">Nucleosíntesis</text>
                    <text x="160" y="160" fill="#E8EAF6" font-size="10" text-anchor="middle">H + He</text>
                    <animate attributeName="opacity" values="0;1" begin="4s" dur="1s"/>
                </g>

                <!-- CMB -->
                <g id="cmb" opacity="0">
                    <ellipse cx="600" cy="350" rx="100" ry="60" fill="#9FA8DA" opacity="0.6"/>
                    <text x="600" y="340" fill="#4A148C" font-size="16" text-anchor="middle">CMB</text>
                    <text x="600" y="360" fill="#6A1B9A" font-size="12" text-anchor="middle">2.725 K</text>
                    <animate attributeName="opacity" values="0;1" begin="6s" dur="1s"/>
                </g>

                <!-- Estrellas -->
                <g id="estrellas" opacity="0">
                    <circle cx="200" cy="300" r="20" fill="#FFCA28">
                        <animate attributeName="r" values="0;20" begin="8s" dur="1s"/>
                    </circle>
                    <text x="200" y="290" fill="#E65100" font-size="12" text-anchor="middle">C, O, Fe</text>
                    <animate attributeName="opacity" values="0;1" begin="8s" dur="1s"/>
                </g>

                <!-- Galaxias -->
                <g id="galaxias" opacity="0">
                    <path d="M550,150 Q580,130 610,150 Q580,170 550,150" fill="#536DFE"/>
                    <text x="580" y="160" fill="white" font-size="10" text-anchor="middle">Galaxias</text>
                    <animate attributeName="opacity" values="0;1" begin="9s" dur="1s"/>
                </g>

                <!-- Leyenda -->
                <text x="400" y="420" fill="#4A148C" font-size="14" text-anchor="middle">Planck 2025: 13.799 Ga</text>
                <text x="400" y="440" fill="#6A1B9A" font-size="12" text-anchor="middle">H₀ = 67.4 km/s/Mpc</text>
            </svg>
            <p><em>SVG Animado: Desde el punto singular hasta la formación de galaxias.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Edad universo (Planck 2025)', 'respuesta' => '13.799 ± 0.021 Ga'],
        ['enunciado' => 'Elementos BBN', 'respuesta' => 'H, He, trazas D, Li'],
        ['enunciado' => 'Evidencia principal', 'respuesta' => 'CMB, redshift, H/He'],

        // === APLICADOS ===
        ['enunciado' => 'T CMB actual', 'respuesta' => '2.72548 K'],
        ['enunciado' => 'H₀ (Hubble)', 'respuesta' => '67.4 km/s/Mpc'],
        ['enunciado' => 'Abundancia ⁴He', 'respuesta' => '24.9%'],

        // === QUÍMICOS ===
        ['enunciado' => 'Nucleosíntesis forma', 'respuesta' => '¹H, ⁴He'],
        ['enunciado' => 'Elementos pesados por', 'respuesta' => 'Fusión estelar'],
        ['enunciado' => 'Ley de Hubble', 'respuesta' => '\\(v = H_0 d\\)'],

        // === AVANZADOS ===
        ['enunciado' => 'Tiempo inflación', 'respuesta' => '10⁻³⁶ a 10⁻³² s'],
        ['enunciado' => 'NIST: T CMB exacta', 'respuesta' => '2.72548 K'],
        ['enunciado' => 'Primeras estrellas (Era)', 'respuesta' => 'Reionización, ~100 Ma']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Big Bang es...', 'opciones' => ['Expansión', 'Explosión', 'Colapso', 'Nada'], 'correcta' => 'Expansión'],
        ['pregunta' => 'Formó elementos...', 'opciones' => ['Ligeros', 'Pesados', 'Metales', 'Gases'], 'correcta' => 'Ligeros'],
        ['pregunta' => 'CMB es...', 'opciones' => ['Radiación fondo', 'Luz estelar', 'Rayos X', 'Microondas'], 'correcta' => 'Radiación fondo'],
        ['pregunta' => 'Edad universo', 'opciones' => ['13.8 Ga', '4.5 Ga', '100 Ma', '1 Ga'], 'correcta' => '13.8 Ga'],
        ['pregunta' => 'Hubble descubrió...', 'opciones' => ['Expansión', 'CMB', 'Quarks', 'Estrellas'], 'correcta' => 'Expansión'],
        ['pregunta' => 'Nucleosíntesis duró...', 'opciones' => ['3 minutos', '1 hora', '1 día', '1 año'], 'correcta' => '3 minutos'],
        ['pregunta' => 'Abundancia H', 'opciones' => ['75%', '25%', '50%', '100%'], 'correcta' => '75%'],
        ['pregunta' => 'CMB T =', 'opciones' => ['2.7 K', '3000 K', '0 K', '100 K'], 'correcta' => '2.7 K'],
        ['pregunta' => 'Redshift significa...', 'opciones' => ['Galaxias se alejan', 'Acercan', 'Estáticas', 'Explosión'], 'correcta' => 'Galaxias se alejan'],
        ['pregunta' => 'Planck mide...', 'opciones' => ['CMB', 'Estrellas', 'Planetas', 'Agujeros'], 'correcta' => 'CMB'],

        // === MEDIO (10) ===
        ['pregunta' => 'H₀ =', 'opciones' => ['67.4 km/s/Mpc', '100 km/s/Mpc', '50 km/s/Mpc', '0'], 'correcta' => '67.4 km/s/Mpc'],
        ['pregunta' => 'T CMB exacta', 'opciones' => ['2.72548 K', '2.7 K', '3 K', '2 K'], 'correcta' => '2.72548 K'],
        ['pregunta' => 'Elemento más abundante', 'opciones' => ['Hidrógeno', 'Helio', 'Oxígeno', 'Carbono'], 'correcta' => 'Hidrógeno'],
        ['pregunta' => 'BBN predice...', 'opciones' => ['H/He', 'C/O', 'Fe/Ni', 'Au/Pt'], 'correcta' => 'H/He'],
        ['pregunta' => 'Inflación resuelve...', 'opciones' => ['Horizonte, planitud', 'Masa', 'Energía', 'Nada'], 'correcta' => 'Horizonte, planitud'],
        ['pregunta' => 'Primeras estrellas formaron...', 'opciones' => ['C, O, Fe', 'H, He', 'Li', 'D'], 'correcta' => 'C, O, Fe'],
        ['pregunta' => 'v = H₀·d es...', 'opciones' => ['Ley de Hubble', 'Newton', 'Einstein', 'Planck'], 'correcta' => 'Ley de Hubble'],
        ['pregunta' => 'NIST certifica...', 'opciones' => ['T CMB', 'Masa atómica', 'Velocidad luz', 'Todas'], 'correcta' => 'T CMB'],
        ['pregunta' => 'Recombinación ocurrió a...', 'opciones' => ['380,000 años', '3 min', '10⁻⁶ s', '13.8 Ga'], 'correcta' => '380,000 años'],
        ['pregunta' => 'Era de Planck', 'opciones' => ['10⁻⁴³ s', '10⁻³⁶ s', '3 min', '380 ka'], 'correcta' => '10⁻⁴³ s'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Edad exacta (Planck 2025)', 'opciones' => ['13.799 ± 0.021 Ga', '13.8 Ga', '14 Ga', '13 Ga'], 'correcta' => '13.799 ± 0.021 Ga'],
        ['pregunta' => 'Densidad crítica', 'opciones' => ['\\(\\rho_c = \\frac{3H_0^2}{8\\pi G}\\)', 'm/V', 'E=mc²', 'F=ma'], 'correcta' => '\\(\\rho_c = \\frac{3H_0^2}{8\\pi G}\\)',],
        ['pregunta' => 'Abundancia ⁴He', 'opciones' => ['0.249 ± 0.001', '0.25', '0.75', '0.01'], 'correcta' => '0.249 ± 0.001'],
        ['pregunta' => 'Deuterio BBN', 'opciones' => ['²H/H ≈ 10⁻⁵', '10⁻³', '0.25', '0.75'], 'correcta' => '²H/H ≈ 10⁻⁵'],
        ['pregunta' => 'CMB es un cuerpo negro a...', 'opciones' => ['2.72548 K', '2.7 K', '3000 K', '0 K'], 'correcta' => '2.72548 K'],
        ['pregunta' => 'Inflación impulsada por...', 'opciones' => ['Campo inflatón', 'Gravedad', 'Electromagnetismo', 'Nuclear'], 'correcta' => 'Campo inflatón'],
        ['pregunta' => 'Reionización por...', 'opciones' => ['Primeras estrellas', 'Big Bang', 'CMB', 'Galaxias'], 'correcta' => 'Primeras estrellas'],
        ['pregunta' => 'Parámetro Ω_m ≈', 'opciones' => ['0.315', '1', '0', '0.7'], 'correcta' => '0.315'],
        ['pregunta' => 'COBE midió...', 'opciones' => ['CMB dipolo', 'Estrellas', 'Planetas', 'Agujeros'], 'correcta' => 'CMB dipolo'],
        ['pregunta' => 'WMAP mejoró...', 'opciones' => ['Anisotropías CMB', 'H/He', 'Redshift', 'Todas'], 'correcta' => 'Anisotropías CMB']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Contaminación (Aire, Agua, Suelo, Lluvia Ácida, GHG, PM, Efectos, Prevención)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'contaminacion',
    'titulo' => 'Contaminación: El Enemigo Silencioso del Planeta',
    'contenido' => '
        <h3>¿Qué es la Contaminación?</h3>
        <p>La <strong>contaminación</strong> es la <strong>introducción de sustancias tóxicas</strong> al medio ambiente que <strong>alteran ecosistemas</strong> y <strong>afectan la salud</strong>. Según la <strong>OMS (2025)</strong>, causa <strong>9 millones de muertes/año</strong>.</p>

        <hr style="border:1px dashed #D32F2F;">

        <h4>1. Tipos de Contaminación</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Contaminante</th><th>Fuente</th><th>Efecto</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Aire</strong></td><td>PM2.5, CO, NOₓ, SO₂, O₃</td><td>Vehículos, industria</td><td>Asma, cáncer</td></tr>
                <tr><td><strong>Agua</strong></td><td>Nitratos, Pb, Hg, plásticos</td><td>Agricultura, minería</td><td>Eutrofización, intoxicación</td></tr>
                <tr><td><strong>Suelo</strong></td><td>Pesticidas, DDT, Cd</td><td>Agricultura, desechos</td><td>Infertilidad, bioacumulación</td></tr>
                <tr><td><strong>Lluvia Ácida</strong></td><td>H₂SO₄, HNO₃</td><td>SO₂, NOₓ</td><td>Acidificación lagos</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Smog fotoquímico</strong> en CDMX → NOₓ + VOCs + luz → O₃ → irritación ocular/respiratoria.</p>
        </div>

        <hr style="border:1px dashed #D32F2F;">

        <h4>2. Contaminantes Clave</h4>
        <table class="table">
            <thead>
                <tr><th>Contaminante</th><th>Fórmula</th><th>Límite EPA (2025)</th><th>Efecto Salud</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>PM2.5</strong></td><td>—</td><td>9 µg/m³ (anual)</td><td>Enfermedad cardíaca</td></tr>
                <tr><td><strong>CO</strong></td><td>CO</td><td>9 ppm (8h)</td><td>Asfixia</td></tr>
                <tr><td><strong>NO₂</strong></td><td>NO₂</td><td>53 ppb (anual)</td><td>Edema pulmonar</td></tr>
                <tr><td><strong>Ozono</strong></td><td>O₃</td><td>70 ppb (8h)</td><td>Daño pulmonar</td></tr>
                <tr><td><strong>Plomo</strong></td><td>Pb</td><td>0.15 µg/m³</td><td>Daño cerebral</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/tendencia-calidad-aire.png" alt="EPA tendencias">
            <p><em>Tendencias calidad aire. Fuente: EPA.</em></p>
        </div>

        <hr style="border:1px dashed #D32F2F;">

        <h4>3. Efecto Invernadero y Cambio Climático</h4>
        <p><strong>Gases de Efecto Invernadero (GHG):</strong></p>
        <ul>
            <li>CO₂: 76% (combustión fósil)</li>
            <li>CH₄: 16% (ganadería, arroz)</li>
            <li>N₂O: 6% (fertilizantes)</li>
            <li>CFC/HFC: Potencial alto</li>
        </ul>
        <p>CO₂ actual: <strong>423 ppm</strong> (NOAA 2025)</p>

        <div class="visual">
            <img src="assets/img/tendencia-CO2.png" alt="CO2 histórico">
            <p><em>CO₂ últimos 800,000 años. Fuente: NASA.</em></p>
        </div>

        <hr style="border:1px dashed #D32F2F;">

        <h4>4. Prevención y Control</h4>
        <ul>
            <li><strong>Filtros HEPA</strong> (PM)</li>
            <li><strong>Catalizadores</strong> (CO, NOₓ)</li>
            <li><strong>Tratamiento agua</strong> (filtración, cloración)</li>
            <li><strong>Reciclaje</strong> (plásticos, metales)</li>
            <li><strong>Energía renovable</strong> (solar, eólica)</li>
        </ul>

        <hr style="border:1px dashed #D32F2F;">

        <h4>5. SVG Animado: Ciclo de Contaminación del Aire</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 700 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="700" height="500" fill="#FFEBEE"/>

                <!-- Título -->
                <text x="350" y="50" fill="#B71C1C" font-size="28" text-anchor="middle" font-weight="bold">CONTAMINACIÓN DEL AIRE</text>

                <!-- Fábrica -->
                <g id="fabrica">
                    <rect x="50" y="250" width="100" height="150" fill="#757575"/>
                    <rect x="100" y="200" width="20" height="50" fill="#424242"/>
                    <circle cx="110" cy="180" r="15" fill="#B71C1C">
                        <animate attributeName="r" values="15;20;15" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="100" y="300" fill="white" font-size="12" text-anchor="middle">Industria</text>
                </g>

                <!-- Emisiones -->
                <g id="emisiones">
                    <circle cx="110" cy="150" r="8" fill="#9E9E9E">
                        <animate attributeName="cy" values="150;100;50" dur="3s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="1;0.5;0" dur="3s" repeatCount="indefinite"/>
                    </circle>
                    <text x="110" y="140" fill="#424242" font-size="10" text-anchor="middle">CO₂</text>
                </g>

                <!-- Nube contaminación -->
                <g id="nube">
                    <ellipse cx="350" cy="150" rx="150" ry="80" fill="#B0BEC5" opacity="0.7"/>
                    <text x="350" y="140" fill="#212121" font-size="16" text-anchor="middle">Smog</text>
                    <text x="350" y="160" fill="#424242" font-size="12" text-anchor="middle">PM2.5 + O₃</text>
                    <animate attributeName="rx" values="150;180;150" dur="4s" repeatCount="indefinite"/>
                </g>

                <!-- Persona -->
                <g id="persona">
                    <circle cx="500" cy="350" r="30" fill="#FFCCBC"/>
                    <text x="500" y="340" fill="#B71C1C" font-size="12" text-anchor="middle">Tos</text>
                    <animate attributeName="opacity" values="1;0.7;1" dur="2s" repeatCount="indefinite"/>
                </g>

                <!-- Sol -->
                <circle cx="600" cy="100" r="40" fill="#FFEB3B"/>
                <text x="600" y="90" fill="#F57F17" font-size="12" text-anchor="middle">UV → O₃</text>

                <!-- Flechas -->
                <path d="M150 300 L300 200" stroke="#B71C1C" stroke-width="5" marker-end="url(#arrow)"/>
                <path d="M350 200 L480 320" stroke="#B71C1C" stroke-width="5" marker-end="url(#arrow)"/>

                <!-- Prevención -->
                <rect x="450" y="50" width="200" height="80" fill="#E8F5E9" rx="15"/>
                <text x="550" y="80" fill="#1B5E20" font-size="14" text-anchor="middle">Filtros + Renovables</text>
                <text x="550" y="100" fill="#2E7D32" font-size="12" text-anchor="middle">EPA: PM2.5 ↓ 40% (2030)</text>

                <!-- Marcador -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#B71C1C"/>
                    </marker>
                </defs>

                <!-- Datos -->
                <text x="100" y="450" fill="#B71C1C" font-size="14">OMS 2025: 9M muertes/año</text>
                <text x="350" y="450" fill="#212121" font-size="12" text-anchor="middle">CO₂ = 423 ppm</text>
            </svg>
            <p><em>SVG Animado: Emisiones → Smog → Impacto salud → Solución.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Tipos contaminación', 'respuesta' => 'Aire, agua, suelo'],
        ['enunciado' => 'Causa principal aire', 'respuesta' => 'Combustión fósil'],
        ['enunciado' => 'Efecto PM2.5', 'respuesta' => 'Enfermedad cardíaca'],

        // === APLICADOS ===
        ['enunciado' => 'Límite EPA PM2.5', 'respuesta' => '9 µg/m³ (anual)'],
        ['enunciado' => 'CO₂ actual (2025)', 'respuesta' => '423 ppm'],
        ['enunciado' => 'Lluvia ácida por', 'respuesta' => 'SO₂ + NOₓ'],

        // === QUÍMICOS ===
        ['enunciado' => 'Reacción lluvia ácida', 'respuesta' => 'SO₂ + H₂O → H₂SO₃'],
        ['enunciado' => 'Eutrofización por', 'respuesta' => 'Nitratos/fosfatos'],
        ['enunciado' => 'Bioacumulación', 'respuesta' => 'Hg, DDT en cadena'],

        // === AVANZADOS ===
        ['enunciado' => 'Meta EPA 2030', 'respuesta' => 'PM2.5 ↓ 40%'],
        ['enunciado' => 'OMS: muertes/año', 'respuesta' => '9 millones'],
        ['enunciado' => 'Protocolo Montreal', 'respuesta' => 'Eliminó CFC (ozono)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Contaminación causa...', 'opciones' => ['Enfermedades', 'Salud', 'Nada', 'Bienestar'], 'correcta' => 'Enfermedades'],
        ['pregunta' => 'Aire contaminado por...', 'opciones' => ['PM2.5', 'O₂', 'N₂', 'H₂O'], 'correcta' => 'PM2.5'],
        ['pregunta' => 'Lluvia ácida por...', 'opciones' => ['SO₂, NOₓ', 'CO₂', 'CH₄', 'O₂'], 'correcta' => 'SO₂, NOₓ'],
        ['pregunta' => 'Eutrofización en...', 'opciones' => ['Agua', 'Aire', 'Suelo', 'Luz'], 'correcta' => 'Agua'],
        ['pregunta' => 'CO₂ es GHG...', 'opciones' => ['Principal', 'Secundario', 'Ninguno', 'Beneficioso'], 'correcta' => 'Principal'],
        ['pregunta' => 'Prevención clave', 'opciones' => ['Reciclaje', 'Quemar más', 'Desechos', 'Nada'], 'correcta' => 'Reciclaje'],
        ['pregunta' => 'Smog fotoquímico contiene...', 'opciones' => ['O₃', 'O₂', 'N₂', 'H₂'], 'correcta' => 'O₃'],
        ['pregunta' => 'OMS dice causa...', 'opciones' => ['9M muertes/año', '0', '1M', '100M'], 'correcta' => '9M muertes/año'],
        ['pregunta' => 'Plásticos en océano', 'opciones' => ['8M toneladas/año', '0', '1', '100'], 'correcta' => '8M toneladas/año'],
        ['pregunta' => 'CFC destruyen...', 'opciones' => ['Ozono', 'CO₂', 'N₂', 'O₂'], 'correcta' => 'Ozono'],

        // === MEDIO (10) ===
        ['pregunta' => 'Límite EPA PM2.5', 'opciones' => ['9 µg/m³', '35 µg/m³', '100 µg/m³', '0'], 'correcta' => '9 µg/m³'],
        ['pregunta' => 'CO₂ actual', 'opciones' => ['423 ppm', '280 ppm', '1000 ppm', '0 ppm'], 'correcta' => '423 ppm'],
        ['pregunta' => 'Reacción SO₂', 'opciones' => ['H₂SO₃', 'H₂SO₄', 'SO₃', 'H₂S'], 'correcta' => 'H₂SO₃'],
        ['pregunta' => 'Bioacumulación afecta...', 'opciones' => ['Peces → humanos', 'Solo plantas', 'Aire', 'Nada'], 'correcta' => 'Peces → humanos'],
        ['pregunta' => 'Catalizador reduce...', 'opciones' => ['CO, NOₓ', 'CO₂', 'O₂', 'H₂O'], 'correcta' => 'CO, NOₓ'],
        ['pregunta' => 'Protocolo Montreal', 'opciones' => ['CFC', 'CO₂', 'CH₄', 'PM'], 'correcta' => 'CFC'],
        ['pregunta' => 'Efecto invernadero natural', 'opciones' => ['Necesario', 'Dañino', 'Ninguno', 'Todo'], 'correcta' => 'Necesario'],
        ['pregunta' => 'Meta EPA 2030', 'opciones' => ['PM2.5 ↓ 40%', '↑ 40%', '0%', '100%'], 'correcta' => 'PM2.5 ↓ 40%'],
        ['pregunta' => 'CH₄ potencial vs CO₂', 'opciones' => ['25×', '1×', '100×', '0×'], 'correcta' => '25×'],
        ['pregunta' => 'Filtro HEPA captura...', 'opciones' => ['PM2.5', 'CO₂', 'O₂', 'N₂'], 'correcta' => 'PM2.5'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Fórmula lluvia ácida', 'opciones' => ['SO₂ + H₂O → H₂SO₃', 'CO₂ + H₂O → H₂CO₃', 'NO₂ + H₂O → HNO₃', 'Todas'], 'correcta' => 'Todas'],
        ['pregunta' => 'PM2.5 entra en...', 'opciones' => ['Alveolos', 'Nariz', 'Garganta', 'Ojos'], 'correcta' => 'Alveolos'],
        ['pregunta' => 'CO₂ preindustrial', 'opciones' => ['280 ppm', '423 ppm', '100 ppm', '0 ppm'], 'correcta' => '280 ppm'],
        ['pregunta' => 'Eutrofización causa...', 'opciones' => ['Zona muerta', 'Más peces', 'Agua clara', 'Nada'], 'correcta' => 'Zona muerta'],
        ['pregunta' => 'DDT es...', 'opciones' => ['Persistente', 'Biodegradable', 'Inofensivo', 'Nutriente'], 'correcta' => 'Persistente'],
        ['pregunta' => 'Acuerdo París meta', 'opciones' => ['<2°C', '<1°C', '<5°C', '0°C'], 'correcta' => '<2°C'],
        ['pregunta' => 'NOₓ forma...', 'opciones' => ['Smog + lluvia ácida', 'Solo ozono', 'Solo CO₂', 'Nada'], 'correcta' => 'Smog + lluvia ácida'],
        ['pregunta' => 'Microplásticos en...', 'opciones' => ['Cadena alimentaria', 'Solo océano', 'Aire', 'Suelo'], 'correcta' => 'Cadena alimentaria'],
        ['pregunta' => 'EPA regula...', 'opciones' => ['Aire + agua', 'Solo suelo', 'Luz', 'Ruido'], 'correcta' => 'Aire + agua'],
        ['pregunta' => 'ONU GEO-6 advierte...', 'opciones' => ['Crisis triple', 'Progreso', 'Nada', 'Todo'], 'correcta' => 'Crisis triple']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Propiedades de la Materia (Físicas, Químicas, Intensivas, Extensivas, Cambios)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'propiedades-materia',
    'titulo' => 'Propiedades de la Materia: Cómo Identificar y Clasificar',
    'contenido' => '
        <h3>Propiedades de la Materia</h3>
        <p>Las <strong>propiedades</strong> describen <strong>cómo se comporta</strong> la materia. Se dividen en:</p>
        <ul>
            <li><strong>Físicas:</strong> Sin cambio de composición</li>
            <li><strong>Químicas:</strong> Durante reacción</li>
            <li><strong>Intensivas:</strong> Independientes de cantidad</li>
            <li><strong>Extensivas:</strong> Dependientes de cantidad</li>
        </ul>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Propiedades Físicas</h4>
        <table class="table">
            <thead>
                <tr><th>Propiedad</th><th>Unidad</th><th>Ejemplo (Agua)</th><th>Tipo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Densidad</strong></td><td>g/cm³</td><td>1.00</td><td>Intensiva</td></tr>
                <tr><td><strong>Punto fusión</strong></td><td>°C</td><td>0</td><td>Intensiva</td></tr>
                <tr><td><strong>Punto ebullición</strong></td><td>°C</td><td>100</td><td>Intensiva</td></tr>
                <tr><td><strong>Color</strong></td><td>—</td><td>Incoloro</td><td>Intensiva</td></tr>
                <tr><td><strong>Masa</strong></td><td>g</td><td>18 (molécula)</td><td>Extensiva</td></tr>
                <tr><td><strong>Volumen</strong></td><td>cm³</td><td>18 (1 mol)</td><td>Extensiva</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Densidad del oro</strong> = 19.3 g/cm³ → <strong>intensiva</strong> (igual en 1g o 1kg).</p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Propiedades Químicas</h4>
        <table class="table">
            <thead>
                <tr><th>Propiedad</th><th>Ejemplo</th><th>Reacción</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Inflamabilidad</strong></td><td>Gasolina</td><td>Arde con O₂</td></tr>
                <tr><td><strong>Reactividad</strong></td><td>Na + H₂O</td><td>→ NaOH + H₂</td></tr>
                <tr><td><strong>Acidez</strong></td><td>HCl</td><td>→ H⁺ + Cl⁻</td></tr>
                <tr><td><strong>Oxidación</strong></td><td>Fe → Fe₂O₃</td><td>Óxido rojo</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Cambios de la Materia</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Reversible</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Físico</strong></td><td>Sí</td><td>Fusión hielo</td></tr>
                <tr><td><strong>Químico</strong></td><td>No</td><td>Combustión papel</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/clasificacion-materia.png" alt="Clasificación propiedades">
            <p><em>Diagrama propiedades. Fuente: LibreTexts.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/clasificacion-tec-science.jpg" alt="Físicas vs químicas">
            <p><em>Físicas vs Químicas. Fuente: ThoughtCo.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/classifying_matter.jpg" alt="Science Buddies">
            <p><em>Propiedades intensivas/extensivas. Fuente: Science Buddies.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. Fórmulas Clave</h4>
        <p>\[
            \\rho = \\frac{m}{V} \\quad \\text{(densidad)}
        \]</p>
        <p>\[
            \\Delta T = T_f - T_i \\quad \\text{(cambio temperatura)}
        \]</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>5. SVG Animado: Clasificación de Propiedades</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>

                <!-- Centro: Materia -->
                <circle cx="400" cy="250" r="80" fill="#1976D2" stroke="#0D47A1" stroke-width="5">
                    <animate attributeName="r" values="80;90;80" dur="3s" repeatCount="indefinite"/>
                </circle>
                <text x="400" y="240" fill="white" font-size="16" text-anchor="middle" font-weight="bold">MATERIA</text>
                <text x="400" y="265" fill="white" font-size="12" text-anchor="middle">H₂O, Au, Fe...</text>

                <!-- Físicas -->
                <rect x="100" y="100" width="140" height="100" fill="#4CAF50" rx="20">
                    <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="170" y="130" fill="white" font-size="14" text-anchor="middle">FÍSICAS</text>
                <text x="170" y="150" fill="#E8F5E9" font-size="10" text-anchor="middle">Densidad</text>
                <text x="170" y="165" fill="#E8F5E9" font-size="9" text-anchor="middle">P. fusión</text>
                <text x="170" y="180" fill="#E8F5E9" font-size="9" text-anchor="middle">Color</text>

                <!-- Químicas -->
                <rect x="560" y="100" width="140" height="100" fill="#D32F2F" rx="20">
                    <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="630" y="130" fill="white" font-size="14" text-anchor="middle">QUÍMICAS</text>
                <text x="630" y="150" fill="#FFEBEE" font-size="10" text-anchor="middle">Inflamabilidad</text>
                <text x="630" y="165" fill="#FFEBEE" font-size="9" text-anchor="middle">Reactividad</text>
                <text x="630" y="180" fill="#FFEBEE" font-size="9" text-anchor="middle">Acidez</text>

                <!-- Intensivas -->
                <circle cx="200" cy="350" r="50" fill="#2196F3">
                    <animate attributeName="r" values="50;60;50" begin="1s" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="200" y="340" fill="white" font-size="12" text-anchor="middle">ρ = 1 g/cm³</text>
                <text x="200" y="360" fill="#BBDEFB" font-size="9" text-anchor="middle">Intensiva</text>

                <!-- Extensivas -->
                <rect x="520" y="320" width="120" height="80" fill="#FF9800" rx="15">
                    <animate attributeName="opacity" values="0.6;1;0.6" begin="1.5s" dur="2s" repeatCount="indefinite"/>
                </rect>
                <text x="580" y="360" fill="white" font-size="12" text-anchor="middle">V = 100 cm³</text>
                <text x="580" y="380" fill="#FFF3E0" font-size="9" text-anchor="middle">Extensiva</text>

                <!-- Flechas -->
                <path d="M400 170 L170 180" stroke="#1976D2" stroke-width="6" marker-end="url(#arrow)"/>
                <path d="M400 170 L630 180" stroke="#1976D2" stroke-width="6" marker-end="url(#arrow)"/>
                <path d="M170 200 L200 300" stroke="#4CAF50" stroke-width="5" marker-end="url(#arrow-green)"/>
                <path d="M630 200 L580 320" stroke="#D32F2F" stroke-width="5" marker-end="url(#arrow-red)"/>
                <path d="M400 330 L200 350" stroke="#2196F3" stroke-width="5" marker-end="url(#arrow-blue)"/>
                <path d="M400 330 L580 360" stroke="#FF9800" stroke-width="5" marker-end="url(#arrow-orange)"/>

                <!-- Marcadores -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#1976D2"/>
                    </marker>
                    <marker id="arrow-green" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#4CAF50"/>
                    </marker>
                    <marker id="arrow-red" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#D32F2F"/>
                    </marker>
                    <marker id="arrow-blue" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#2196F3"/>
                    </marker>
                    <marker id="arrow-orange" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#FF9800"/>
                    </marker>
                </defs>

                <!-- Título -->
                <text x="400" y="60" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">PROPIEDADES DE LA MATERIA</text>
                <text x="400" y="90" fill="#1565C0" font-size="16" text-anchor="middle">Físicas vs Químicas | Intensivas vs Extensivas</text>

                <!-- Datos NIST -->
                <text x="400" y="450" fill="#1B5E20" font-size="14" text-anchor="middle">NIST 2025: ρ_H₂O = 0.999972 g/cm³ (4°C)</text>
            </svg>
            <p><em>SVG Animado: Árbol de clasificación con ejemplos animados.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Propiedad física ejemplo', 'respuesta' => 'Densidad, color'],
        ['enunciado' => 'Propiedad química ejemplo', 'respuesta' => 'Inflamabilidad'],
        ['enunciado' => 'Intensiva', 'respuesta' => 'Densidad, punto fusión'],
        ['enunciado' => 'Extensiva', 'respuesta' => 'Masa, volumen'],

        // === APLICADOS ===
        ['enunciado' => 'Densidad agua 4°C', 'respuesta' => '1 g/cm³'],
        ['enunciado' => 'Punto ebullición etanol', 'respuesta' => '78.37°C'],
        ['enunciado' => 'Masa 1 mol H₂O', 'respuesta' => '18.02 g'],

        // === QUÍMICOS ===
        ['enunciado' => 'Fórmula densidad', 'respuesta' => '\\(\\rho = \\frac{m}{V}\\)',],
        ['enunciado' => 'Cambio físico', 'respuesta' => 'Fusión, evaporación'],
        ['enunciado' => 'Cambio químico', 'respuesta' => 'Combustión, oxidación'],

        // === AVANZADOS ===
        ['enunciado' => 'NIST: ρ_H₂O exacta 4°C', 'respuesta' => '0.999972 g/cm³'],
        ['enunciado' => 'IUPAC: p.e. oro', 'respuesta' => '1064.18°C']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Físicas cambian...', 'opciones' => ['Forma', 'Composición', 'Nada', 'Todo'], 'correcta' => 'Forma'],
        ['pregunta' => 'Químicas durante...', 'opciones' => ['Reacción', 'Medición', 'Fusión', 'Color'], 'correcta' => 'Reacción'],
        ['pregunta' => 'Densidad es...', 'opciones' => ['Intensiva', 'Extensiva', 'Química', 'Nada'], 'correcta' => 'Intensiva'],
        ['pregunta' => 'Volumen es...', 'opciones' => ['Extensiva', 'Intensiva', 'Química', 'Física'], 'correcta' => 'Extensiva'],
        ['pregunta' => 'Color es...', 'opciones' => ['Física intensiva', 'Química', 'Extensiva', 'Nada'], 'correcta' => 'Física intensiva'],
        ['pregunta' => 'Masa es...', 'opciones' => ['Extensiva', 'Intensiva', 'Química', 'Física'], 'correcta' => 'Extensiva'],
        ['pregunta' => 'Inflamabilidad es...', 'opciones' => ['Química', 'Física', 'Intensiva', 'Extensiva'], 'correcta' => 'Química'],
        ['pregunta' => 'Punto fusión es...', 'opciones' => ['Intensiva', 'Extensiva', 'Química', 'Nada'], 'correcta' => 'Intensiva'],
        ['pregunta' => 'Cambio físico', 'opciones' => ['Fusión', 'Combustión', 'Reacción', 'Oxidación'], 'correcta' => 'Fusión'],
        ['pregunta' => 'Densidad agua', 'opciones' => ['1 g/cm³', '0.5 g/cm³', '2 g/cm³', '10 g/cm³'], 'correcta' => '1 g/cm³'],

        // === MEDIO (10) ===
        ['pregunta' => 'Punto ebullición agua', 'opciones' => ['100°C', '0°C', '78°C', '1064°C'], 'correcta' => '100°C'],
        ['pregunta' => 'Densidad oro', 'opciones' => ['19.3 g/cm³', '1 g/cm³', '0.001 g/cm³', '100 g/cm³'], 'correcta' => '19.3 g/cm³'],
        ['pregunta' => 'Reactividad Na con H₂O', 'opciones' => ['Explosiva', 'Lenta', 'Ninguna', 'Fría'], 'correcta' => 'Explosiva'],
        ['pregunta' => 'Fórmula densidad', 'opciones' => ['\\(\\rho = m/V\\)', '\\(\\rho = V/m\\)', '\\(\\rho = m+V\\)', '\\(\\rho = 0\\)'], 'correcta' => '\\(\\rho = m/V\\)',],
        ['pregunta' => 'Cambio químico libera...', 'opciones' => ['Energía', 'Masa', 'Volumen', 'Nada'], 'correcta' => 'Energía'],
        ['pregunta' => 'Punto fusión hielo', 'opciones' => ['0°C', '100°C', '-78°C', '1064°C'], 'correcta' => '0°C'],
        ['pregunta' => 'Masa 1 mol NaCl', 'opciones' => ['58.44 g', '18 g', '44 g', '100 g'], 'correcta' => '58.44 g'],
        ['pregunta' => 'Intensiva no cambia con...', 'opciones' => ['Cantidad', 'Temperatura', 'Presión', 'Color'], 'correcta' => 'Cantidad'],
        ['pregunta' => 'Extensiva cambia con...', 'opciones' => ['Cantidad', 'Densidad', 'Color', 'pH'], 'correcta' => 'Cantidad'],
        ['pregunta' => 'IUPAC define p.e. oro', 'opciones' => ['1064.18°C', '100°C', '0°C', '78°C'], 'correcta' => '1064.18°C'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'NIST: ρ_H₂O a 4°C', 'opciones' => ['0.999972 g/cm³', '1.000000 g/cm³', '0.998 g/cm³', '1.002 g/cm³'], 'correcta' => '0.999972 g/cm³'],
        ['pregunta' => 'Densidad diamante', 'opciones' => ['3.51 g/cm³', '19.3 g/cm³', '1 g/cm³', '0.001 g/cm³'], 'correcta' => '3.51 g/cm³'],
        ['pregunta' => 'Conductividad térmica es...', 'opciones' => ['Física intensiva', 'Química', 'Extensiva', 'Nada'], 'correcta' => 'Física intensiva'],
        ['pregunta' => 'Calor específico es...', 'opciones' => ['Intensiva', 'Extensiva', 'Química', 'Masa'], 'correcta' => 'Intensiva'],
        ['pregunta' => 'Entalpía combustión es...', 'opciones' => ['Química extensiva', 'Intensiva', 'Física', 'Nada'], 'correcta' => 'Química extensiva'],
        ['pregunta' => 'p.e. etanol IUPAC', 'opciones' => ['78.37°C', '100°C', '64°C', '90°C'], 'correcta' => '78.37°C'],
        ['pregunta' => 'Densidad aire STP', 'opciones' => ['1.293 g/L', '1 g/L', '0.001 g/L', '100 g/L'], 'correcta' => '1.293 g/L'],
        ['pregunta' => 'Viscosidad es...', 'opciones' => ['Física intensiva', 'Química', 'Extensiva', 'Masa'], 'correcta' => 'Física intensiva'],
        ['pregunta' => 'Ley conservación masa', 'opciones' => ['Lavoisier', 'Dalton', 'Boyle', 'Avogadro'], 'correcta' => 'Lavoisier'],
        ['pregunta' => 'p.f. NaCl IUPAC', 'opciones' => ['801°C', '100°C', '0°C', '1413°C'], 'correcta' => '801°C']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Cambios Químicos (Reacciones, Señales, Tipos, Ecuaciones, Conservación)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'cambios-quimicos-materia',
    'titulo' => 'Cambios Químicos: Cuando la Materia se Transforma',
    'contenido' => '
        <h3>Cambios Químicos</h3>
        <p>Los <strong>cambios químicos</strong> (o <strong>reacciones químicas</strong>) <strong>alteran la composición</strong> de la materia formando <strong>nuevas sustancias</strong>. <strong>No son reversibles</strong> fácilmente.</p>

        <hr style="border:1px dashed #D32F2F;">

        <h4>1. Señales de Cambio Químico</h4>
        <table class="table">
            <thead>
                <tr><th>Señal</th><th>Ejemplo</th><th>Reacción</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Cambio de color</strong></td><td>Fe → Fe₂O₃ (herrumbre)</td><td>Rojo</td></tr>
                <tr><td><strong>Liberación de gas</strong></td><td>CaCO₃ + HCl</td><td>CO₂ ↑</td></tr>
                <tr><td><strong>Formación precipitado</strong></td><td>AgNO₃ + NaCl</td><td>AgCl ↓</td></tr>
                <tr><td><strong>Calor/luz</strong></td><td>CH₄ + 2O₂</td><td>Fuego</td></tr>
                <tr><td><strong>Olor</strong></td><td>H₂S</td><td>Huevos podridos</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Combustión del metano</strong>:<br>
            \\[ \\ce{CH4 + 2O2 -> CO2 + 2H2O} \\] → gas, calor, luz.</p>
        </div>

        <hr style="border:1px dashed #D32F2F;">

        <h4>2. Tipos de Cambios Químicos</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Definición</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Exotérmico</strong></td><td>Libera calor</td><td>Combustión</td></tr>
                <tr><td><strong>Endotérmico</strong></td><td>Absorbe calor</td><td>Fotosíntesis</td></tr>
                <tr><td><strong>Redox</strong></td><td>Transferencia e⁻</td><td>Pila Zn-Cu</td></tr>
                <tr><td><strong>Ácido-base</strong></td><td>Neutralización</td><td>HCl + NaOH</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #D32F2F;">

        <h4>3. Conservación de la Masa (Lavoisier)</h4>
        <p>\[
            \\text{Masa}_{\\text{reactivos}} = \\text{Masa}_{\\text{productos}}
        \]</p>
        <p><strong>Ejemplo:</strong> 2H₂ + O₂ → 2H₂O → 4g + 32g = 36g</p>

        <div class="visual">
            <img src="assets/img/cambios-quimico-señale.png" alt="Señales cambio químico">
            <p><em>Señales visuales. Fuente: LibreTexts.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/ejemplos-cambios-quimicos.png" alt="Ejemplos">
            <p><em>Ejemplos reales. Fuente: ThoughtCo.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/combustion_metano.png" alt="Combustión metano">
            <p><em>Reacción metano. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #D32F2F;">

        <h4>4. Ecuaciones Químicas</h4>
        <p><strong>Reglas:</strong></p>
        <ul>
            <li>Balancear átomos</li>
            <li>Estados: (s), (l), (g), (aq)</li>
            <li>Flecha → (irreversible), ⇌ (reversible)</li>
        </ul>
        <p>Ejemplo balanceado:<br>
        \\[ \\ce{2Mg(s) + O2(g) -> 2MgO(s)} \\]</p>

        <hr style="border:1px dashed #D32F2F;">

        <h4>5. SVG Animado: Cambio Químico en Acción</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#FFEBEE"/>

                <!-- Título -->
                <text x="400" y="50" fill="#B71C1C" font-size="28" text-anchor="middle" font-weight="bold">CAMBIO QUÍMICO</text>

                <!-- Reactivos -->
                <g id="reactivos">
                    <circle cx="150" cy="250" r="50" fill="#2196F3">
                        <animate attributeName="r" values="50;60;50" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="150" y="240" fill="white" font-size="14" text-anchor="middle">H₂</text>
                    <text x="150" y="260" fill="#BBDEFB" font-size="10" text-anchor="middle">(g)</text>

                    <circle cx="300" cy="250" r="50" fill="#F44336">
                        <animate attributeName="r" values="50;60;50" begin="0.5s" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="300" y="240" fill="white" font-size="14" text-anchor="middle">O₂</text>
                    <text x="300" y="260" fill="#FFCDD2" font-size="10" text-anchor="middle">(g)</text>
                </g>

                <!-- Flecha reacción -->
                <path d="M200 250 L400 250" stroke="#B71C1C" stroke-width="6" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" values="0;100" dur="3s" repeatCount="indefinite"/>
                </path>
                <text x="300" y="230" fill="#B71C1C" font-size="16">Reacción</text>
                <text x="300" y="280" fill="#D32F2F" font-size="12">+ Calor</text>

                <!-- Producto -->
                <g id="producto" opacity="0">
                    <rect x="480" y="200" width="140" height="100" fill="#4CAF50" rx="20"/>
                    <text x="550" y="240" fill="white" font-size="14" text-anchor="middle">H₂O</text>
                    <text x="550" y="260" fill="#E8F5E9" font-size="10" text-anchor="middle">(l)</text>
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="1s"/>
                </g>

                <!-- Partículas -->
                <g id="particulas">
                    <circle cx="350" cy="220" r="8" fill="#FF9800">
                        <animate attributeName="cy" values="220;180;140" dur="2s" begin="1s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="1;0" dur="2s" begin="1s" repeatCount="indefinite"/>
                    </circle>
                    <text x="350" y="210" fill="#E65100" font-size="10" text-anchor="middle">Calor</text>
                </g>

                <!-- Ecuación -->
                <text x="400" y="350" fill="#1565C0" font-size="18" text-anchor="middle">2H₂ + O₂ → 2H₂O</text>
                <text x="400" y="380" fill="#1976D2" font-size="14" text-anchor="middle">Exotérmica</text>

                <!-- Señales -->
                <rect x="50" y="380" width="180" height="80" fill="#E8F5E9" rx="15"/>
                <text x="140" y="410" fill="#1B5E20" font-size="12" text-anchor="middle">Gas + Calor + Luz</text>
                <text x="140" y="430" fill="#2E7D32" font-size="10" text-anchor="middle">Señales</text>

                <!-- Conservación -->
                <text x="600" y="380" fill="#6A1B9A" font-size="14" text-anchor="middle">Masa conservada</text>
                <text x="600" y="410" fill="#4A148C" font-size="12" text-anchor="middle">Lavoisier 1789</text>

                <!-- Marcador -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#B71C1C"/>
                    </marker>
                </defs>

                <!-- Animación final -->
                <animate href="#reactivos" attributeName="opacity" values="1;0.3;1" dur="4s" repeatCount="indefinite"/>
            </svg>
            <p><em>SVG Animado: 2H₂ + O₂ → 2H₂O con señales y conservación.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Señal cambio químico', 'respuesta' => 'Gas, precipitado, calor'],
        ['enunciado' => 'Ejemplo cambio químico', 'respuesta' => 'Combustión, oxidación'],
        ['enunciado' => 'Diferencia con físico', 'respuesta' => 'Cambia composición'],

        // === APLICADOS ===
        ['enunciado' => 'Reacción exotérmica', 'respuesta' => 'Combustión metano'],
        ['enunciado' => 'Endotérmica', 'respuesta' => 'Fotosíntesis'],
        ['enunciado' => 'Balancea: H₂ + O₂ → H₂O', 'respuesta' => '2H₂ + O₂ → 2H₂O'],

        // === QUÍMICOS ===
        ['enunciado' => 'Ley conservación masa', 'respuesta' => 'Lavoisier'],
        ['enunciado' => 'Ecuación herrumbre', 'respuesta' => '4Fe + 3O₂ → 2Fe₂O₃'],
        ['enunciado' => 'Precipitado ejemplo', 'respuesta' => 'AgCl (blanco)'],

        // === AVANZADOS ===
        ['enunciado' => 'ΔH < 0 significa', 'respuesta' => 'Exotérmica'],
        ['enunciado' => 'IUPAC: combustión completa', 'respuesta' => 'CO₂ + H₂O'],
        ['enunciado' => 'NIST: ΔH combustión CH₄', 'respuesta' => '-890.3 kJ/mol']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Cambios químicos forman...', 'opciones' => ['Nuevas sustancias', 'Igual', 'Forma', 'Color'], 'correcta' => 'Nuevas sustancias'],
        ['pregunta' => 'Señal común', 'opciones' => ['Gas liberado', 'Fusión', 'Corte', 'Evaporación'], 'correcta' => 'Gas liberado'],
        ['pregunta' => 'Ejemplo', 'opciones' => ['Quema madera', 'Hielo derrite', 'Agua hierve', 'Papel corta'], 'correcta' => 'Quema madera'],
        ['pregunta' => 'Reversible?', 'opciones' => ['General no', 'Sí', 'Siempre', 'Nunca'], 'correcta' => 'General no'],
        ['pregunta' => 'Combustión es...', 'opciones' => ['Exotérmica', 'Endotérmica', 'Física', 'Nuclear'], 'correcta' => 'Exotérmica'],
        ['pregunta' => 'Fotosíntesis es...', 'opciones' => ['Endotérmica', 'Exotérmica', 'Física', 'Nuclear'], 'correcta' => 'Endotérmica'],
        ['pregunta' => 'Herrumbre es...', 'opciones' => ['Cambio químico', 'Físico', 'Nuclear', 'Nada'], 'correcta' => 'Cambio químico'],
        ['pregunta' => 'Precipitado es...', 'opciones' => ['Sólido insoluble', 'Líquido', 'Gas', 'Plasma'], 'correcta' => 'Sólido insoluble'],
        ['pregunta' => 'Conservación masa por...', 'opciones' => ['Lavoisier', 'Dalton', 'Boyle', 'Avogadro'], 'correcta' => 'Lavoisier'],
        ['pregunta' => 'Ecuación balanceada tiene...', 'opciones' => ['Igual # átomos', 'Más reactivos', 'Menos productos', 'Nada'], 'correcta' => 'Igual # átomos'],

        // === MEDIO (10) ===
        ['pregunta' => 'Reacción: 2H₂ + O₂ →', 'opciones' => ['2H₂O', 'H₂O', 'H₄O₂', 'HO'], 'correcta' => '2H₂O'],
        ['pregunta' => 'Gas en CaCO₃ + HCl', 'opciones' => ['CO₂', 'H₂', 'O₂', 'N₂'], 'correcta' => 'CO₂'],
        ['pregunta' => 'Color en Cu + HNO₃', 'opciones' => ['Verde → azul', 'Rojo', 'Blanco', 'Negro'], 'correcta' => 'Verde → azul'],
        ['pregunta' => 'ΔH < 0 es...', 'opciones' => ['Exotérmica', 'Endotérmica', 'Isotérmica', 'Adiabática'], 'correcta' => 'Exotérmica'],
        ['pregunta' => 'Neutralización es...', 'opciones' => ['Ácido + base', 'Metal + no metal', 'Combustión', 'Fusión'], 'correcta' => 'Ácido + base'],
        ['pregunta' => 'Redox involucra...', 'opciones' => ['e⁻', 'H⁺', 'OH⁻', 'Calor'], 'correcta' => 'e⁻'],
        ['pregunta' => 'Masa reactivos =', 'opciones' => ['Masa productos', 'Volumen', 'Temperatura', 'Color'], 'correcta' => 'Masa productos'],
        ['pregunta' => 'Fermentación produce...', 'opciones' => ['CO₂ + etanol', 'O₂', 'H₂O', 'CH₄'], 'correcta' => 'CO₂ + etanol'],
        ['pregunta' => 'IUPAC: estado gas', 'opciones' => ['(g)', '(s)', '(l)', '(aq)'], 'correcta' => '(g)'],
        ['pregunta' => 'Reacción reversible usa...', 'opciones' => ['⇌', '→', '=', '≡'], 'correcta' => '⇌'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Balancea: Fe + O₂ → Fe₂O₃', 'opciones' => ['4Fe + 3O₂ → 2Fe₂O₃', 'Fe + O₂ → Fe₂O₃', '2Fe + O₂ → Fe₂O₃', 'Fe + 3O₂ → Fe₂O₃'], 'correcta' => '4Fe + 3O₂ → 2Fe₂O₃'],
        ['pregunta' => 'ΔH combustión CH₄ (NIST)', 'opciones' => ['-890.3 kJ/mol', '-393.5 kJ/mol', '-285.8 kJ/mol', '0 kJ/mol'], 'correcta' => '-890.3 kJ/mol'],
        ['pregunta' => 'Reacción fotosíntesis', 'opciones' => ['6CO₂ + 6H₂O → C₆H₁₂O₆ + 6O₂', 'C₆H₁₂O₆ → CO₂ + H₂O', 'CO₂ → C + O₂', 'H₂O → H₂ + O₂'], 'correcta' => '6CO₂ + 6H₂O → C₆H₁₂O₆ + 6O₂'],
        ['pregunta' => 'Cinética estudia...', 'opciones' => ['Velocidad reacción', 'Equilibrio', 'Masa', 'Volumen'], 'correcta' => 'Velocidad reacción'],
        ['pregunta' => 'Catalizador...', 'opciones' => ['Aumenta velocidad', 'Cambia ΔH', 'Se consume', 'Detiene reacción'], 'correcta' => 'Aumenta velocidad'],
        ['pregunta' => 'Reacción espontánea si...', 'opciones' => ['ΔG < 0', 'ΔH < 0', 'ΔS > 0', 'T > 0'], 'correcta' => 'ΔG < 0'],
        ['pregunta' => 'Equilibrio dinámico significa...', 'opciones' => ['Velocidades iguales', 'Reacción parada', 'Sin productos', 'Sin reactivos'], 'correcta' => 'Velocidades iguales'],
        ['pregunta' => 'IUPAC: combustión incompleta', 'opciones' => ['CO + H₂O', 'CO₂ + H₂O', 'C + O₂', 'CH₄ + O₂'], 'correcta' => 'CO + H₂O'],
        ['pregunta' => 'Termoquímica mide...', 'opciones' => ['ΔH', 'ΔS', 'ΔG', 'Todas'], 'correcta' => 'Todas'],
        ['pregunta' => 'Reacción nuclear vs química', 'opciones' => ['Núcleo vs electrones', 'Igual', 'Solo masa', 'Solo energía'], 'correcta' => 'Núcleo vs electrones']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Propiedades Físicas (Intensivas, Extensivas, Estados, Conductividad, Solubilidad)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'propiedades-fisicas-materia',
    'titulo' => 'Propiedades Físicas: El ADN Invisible de la Materia',
    'contenido' => '
        <h3>Propiedades Físicas de la Materia</h3>
        <p>Las <strong>propiedades físicas</strong> se miden <strong>sin alterar la composición química</strong>. Son clave para <strong>identificar</strong> y <strong>clasificar</strong> sustancias. <strong>No forman nuevas moléculas</strong>.</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Clasificación de Propiedades Físicas</h4>
        <table class="table">
            <thead>
                <tr><th>Propiedad</th><th>Tipo</th><th>Unidad</th><th>Ejemplo (Agua)</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Densidad</strong></td><td>Intensiva</td><td>g/cm³</td><td>1.000</td></tr>
                <tr><td><strong>Punto fusión</strong></td><td>Intensiva</td><td>°C</td><td>0.00</td></tr>
                <tr><td><strong>Punto ebullición</strong></td><td>Intensiva</td><td>°C</td><td>100.00</td></tr>
                <tr><td><strong>Conductividad térmica</strong></td><td>Intensiva</td><td>W/m·K</td><td>0.606</td></tr>
                <tr><td><strong>Conductividad eléctrica</strong></td><td>Intensiva</td><td>S/m</td><td>5.5×10⁻⁶</td></tr>
                <tr><td><strong>Solubilidad</strong></td><td>Intensiva</td><td>g/100 mL</td><td>—</td></tr>
                <tr><td><strong>Volumen</strong></td><td>Extensiva</td><td>cm³</td><td>18.02 (1 mol)</td></tr>
                <tr><td><strong>Masa</strong></td><td>Extensiva</td><td>g</td><td>18.02 (1 mol)</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Mercurio (Hg)</strong>: líquido a 25°C, densidad 13.534 g/cm³, conduce electricidad → <strong>metal líquido</strong>.</p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Estados de la Materia y Cambios Físicos</h4>
        <table class="table">
            <thead>
                <tr><th>Estado</th><th>Características</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Sólido</strong></td><td>Forma fija, volumen fijo</td><td>Hielo</td></tr>
                <tr><td><strong>Líquido</strong></td><td>Volumen fijo, forma variable</td><td>Agua</td></tr>
                <tr><td><strong>Gas</strong></td><td>Forma y volumen variable</td><td>Vapor</td></tr>
                <tr><td><strong>Plasma</strong></td><td>Iones + e⁻</td><td>Neón</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/estado_materia-transicion.webp" alt="Estados de la materia">
            <p><em>Estados y transiciones. Fuente: LibreTexts.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/propiedades-fisicas-materia.jpg" alt="Propiedades físicas">
            <p><em>Lista visual. Fuente: ThoughtCo.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Fórmulas Clave</h4>
        <p>\[
            \\rho = \\frac{m}{V} \\quad \\text{(densidad)}
        \]</p>
        <p>\[
            \\Delta T = T_f - T_i \\quad \\text{(cambio temperatura)}
        \]</p>
        <p>\[
            \\text{Solubilidad} = \\frac{\\text{masa soluto}}{\\text{volumen disolvente}}
        \]</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. Datos NIST 2025 (Precisión)</h4>
        <table class="table">
            <thead>
                <tr><th>Sustancia</th><th>P. Fusión (°C)</th><th>P. Ebullición (°C)</th><th>Densidad (g/cm³)</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Agua</strong></td><td>0.000</td><td>99.974</td><td>0.999972 (4°C)</td></tr>
                <tr><td><strong>Etanol</strong></td><td>-114.1</td><td>78.37</td><td>0.789</td></tr>
                <tr><td><strong>Mercurio</strong></td><td>-38.83</td><td>356.73</td><td>13.534</td></tr>
                <tr><td><strong>Diamante</strong></td><td>3550</td><td>—</td><td>3.515</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/constantes-físicas.png" alt="NIST 2025">
            <p><em>Constantes físicas. Fuente: NIST.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/mas-constantes.png" alt="NIST 2025">
            <p><em>Más constantes físicas. Fuente: NIST.</em></p>
        </div>


        <hr style="border:1px dashed #1976D2;">

        <h4>5. SVG Animado: Transiciones de Estado (Agua)</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>

                <!-- Título -->
                <text x="400" y="50" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">CAMBIOS FÍSICOS: H₂O</text>

                <!-- Hielo -->
                <g id="hielo">
                    <rect x="100" y="200" width="120" height="120" fill="#BBDEFB" rx="15"/>
                    <text x="160" y="260" fill="#1565C0" font-size="14" text-anchor="middle">HIELO</text>
                    <text x="160" y="280" fill="#1976D2" font-size="10" text-anchor="middle">0°C</text>
                </g>

                <!-- Flecha fusión -->
                <path d="M220 260 L320 260" stroke="#1976D2" stroke-width="6" marker-end="url(#arrow)"/>
                <text x="270" y="245" fill="#1565C0" font-size="12">Fusión</text>
                <text x="270" y="295" fill="#1976D2" font-size="10">+334 J/g</text>

                <!-- Agua líquida -->
                <g id="liquido" opacity="0">
                    <rect x="340" y="200" width="120" height="120" fill="#2196F3" rx="15"/>
                    <text x="400" y="260" fill="white" font-size="14" text-anchor="middle">AGUA</text>
                    <text x="400" y="280" fill="#BBDEFB" font-size="10" text-anchor="middle">25°C</text>
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="1s"/>
                </g>

                <!-- Flecha evaporación -->
                <path d="M460 260 L560 200" stroke="#1976D2" stroke-width="6" marker-end="url(#arrow)"/>
                <text x="510" y="185" fill="#1565C0" font-size="12">Evaporación</text>
                <text x="510" y="235" fill="#1976D2" font-size="10">+2260 J/g</text>

                <!-- Vapor -->
                <g id="vapor" opacity="0">
                    <circle cx="620" cy="150" r="60" fill="none" stroke="#90CAF9" stroke-width="4" stroke-dasharray="5,5"/>
                    <text x="620" y="145" fill="#1565C0" font-size="14" text-anchor="middle">VAPOR</text>
                    <text x="620" y="165" fill="#1976D2" font-size="10" text-anchor="middle">100°C</text>
                    <animate attributeName="opacity" values="0;1" begin="4s" dur="1s"/>
                </g>

                <!-- Partículas -->
                <g id="particulas">
                    <circle cx="300" cy="240" r="8" fill="#90CAF9">
                        <animate attributeName="cy" values="240;200;160" dur="3s" begin="1s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="1;0.5;0" dur="3s" begin="1s" repeatCount="indefinite"/>
                    </circle>
                </g>

                <!-- Propiedades -->
                <rect x="50" y="350" width="200" height="100" fill="#E8F5E9" rx="15"/>
                <text x="150" y="380" fill="#1B5E20" font-size="12" text-anchor="middle">ρ = 1 g/cm³</text>
                <text x="150" y="400" fill="#2E7D32" font-size="10" text-anchor="middle">Intensiva</text>

                <rect x="550" y="350" width="200" height="100" fill="#FFF3E0" rx="15"/>
                <text x="650" y="380" fill="#E65100" font-size="12" text-anchor="middle">V = 18 cm³/mol</text>
                <text x="650" y="400" fill="#FF6F00" font-size="10" text-anchor="middle">Extensiva</text>

                <!-- NIST -->
                <text x="400" y="470" fill="#1565C0" font-size="14" text-anchor="middle">NIST 2025: P.F. H₂O = 0.000°C</text>

                <!-- Marcador -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#1976D2"/>
                    </marker>
                </defs>
            </svg>
            <p><em>SVG Animado: Hielo → Agua → Vapor con energías y propiedades.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Propiedad física ejemplo', 'respuesta' => 'Densidad, punto fusión'],
        ['enunciado' => 'No cambia composición', 'respuesta' => 'Sí'],
        ['enunciado' => 'Intensiva/extensiva', 'respuesta' => 'Densidad intensiva, volumen extensiva'],

        // === APLICADOS ===
        ['enunciado' => 'Densidad agua 4°C', 'respuesta' => '0.999972 g/cm³'],
        ['enunciado' => 'Punto ebullición etanol', 'respuesta' => '78.37°C'],
        ['enunciado' => 'Conductividad térmica agua', 'respuesta' => '0.606 W/m·K'],

        // === QUÍMICOS ===
        ['enunciado' => 'Fórmula densidad', 'respuesta' => '\\(\\rho = \\frac{m}{V}\\)',],
        ['enunciado' => 'Cambio físico', 'respuesta' => 'Fusión, evaporación, disolución'],
        ['enunciado' => 'Solubilidad NaCl en agua', 'respuesta' => '35.9 g/100 mL (20°C)'],

        // === AVANZADOS ===
        ['enunciado' => 'NIST: P.F. H₂O exacto', 'respuesta' => '0.000°C'],
        ['enunciado' => 'IUPAC: P.E. Hg', 'respuesta' => '356.73°C'],
        ['enunciado' => 'Diamante: conductividad eléctrica', 'respuesta' => 'Aislante (10⁻¹⁴ S/m)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Propiedades físicas miden...', 'opciones' => ['Sin cambio composición', 'Con cambio', 'Reacción', 'Explosión'], 'correcta' => 'Sin cambio composición'],
        ['pregunta' => 'Ejemplo física', 'opciones' => ['Solubilidad', 'Inflamabilidad', 'Acidez', 'Oxidación'], 'correcta' => 'Solubilidad'],
        ['pregunta' => 'Densidad es...', 'opciones' => ['Intensiva', 'Extensiva', 'Química', 'Nada'], 'correcta' => 'Intensiva'],
        ['pregunta' => 'Conductividad térmica', 'opciones' => ['Física', 'Química', 'Nuclear', 'Biológica'], 'correcta' => 'Física'],
        ['pregunta' => 'Volumen es...', 'opciones' => ['Extensiva', 'Intensiva', 'Química', 'Física'], 'correcta' => 'Extensiva'],
        ['pregunta' => 'Punto fusión es...', 'opciones' => ['Intensiva', 'Extensiva', 'Química', 'Nada'], 'correcta' => 'Intensiva'],
        ['pregunta' => 'Cambio físico', 'opciones' => ['Fusión', 'Combustión', 'Reacción', 'Óxido'], 'correcta' => 'Fusión'],
        ['pregunta' => 'Estado con forma fija', 'opciones' => ['Sólido', 'Líquido', 'Gas', 'Plasma'], 'correcta' => 'Sólido'],
        ['pregunta' => 'Agua hierve a...', 'opciones' => ['100°C', '0°C', '-38°C', '356°C'], 'correcta' => '100°C'],
        ['pregunta' => 'Mercurio es...', 'opciones' => ['Líquido a 25°C', 'Sólido', 'Gas', 'Plasma'], 'correcta' => 'Líquido a 25°C'],

        // === MEDIO (10) ===
        ['pregunta' => 'Densidad agua 4°C', 'opciones' => ['0.999972 g/cm³', '1.000 g/cm³', '0.5 g/cm³', '13.5 g/cm³'], 'correcta' => '0.999972 g/cm³'],
        ['pregunta' => 'Punto ebullición etanol', 'opciones' => ['78.37°C', '100°C', '0°C', '356°C'], 'correcta' => '78.37°C'],
        ['pregunta' => 'Conductividad térmica cobre', 'opciones' => ['~400 W/m·K', '0.6 W/m·K', '0.02 W/m·K', '0 W/m·K'], 'correcta' => '~400 W/m·K'],
        ['pregunta' => 'Solubilidad NaCl 20°C', 'opciones' => ['35.9 g/100 mL', '100 g', '0 g', '1 g'], 'correcta' => '35.9 g/100 mL'],
        ['pregunta' => 'Diamante es...', 'opciones' => ['Aislante eléctrico', 'Conductor', 'Semiconductor', 'Superconductor'], 'correcta' => 'Aislante eléctrico'],
        ['pregunta' => 'Fórmula densidad', 'opciones' => ['\\(\\rho = m/V\\)', '\\(\\rho = V/m\\)', '\\(\\rho = m+V\\)', '\\(\\rho = 0\\)'], 'correcta' => '\\(\\rho = m/V\\)',],
        ['pregunta' => 'Calor latente fusión H₂O', 'opciones' => ['334 J/g', '2260 J/g', '0 J/g', '100 J/g'], 'correcta' => '334 J/g'],
        ['pregunta' => 'IUPAC: P.F. Hg', 'opciones' => ['-38.83°C', '0°C', '100°C', '356°C'], 'correcta' => '-38.83°C'],
        ['pregunta' => 'Estado plasma contiene...', 'opciones' => ['Iones + e⁻', 'Moléculas', 'Átomos', 'Nada'], 'correcta' => 'Iones + e⁻'],
        ['pregunta' => 'Viscosidad es...', 'opciones' => ['Física intensiva', 'Química', 'Extensiva', 'Masa'], 'correcta' => 'Física intensiva'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'NIST: P.E. H₂O exacto', 'opciones' => ['99.974°C', '100.000°C', '99.000°C', '100.974°C'], 'correcta' => '99.974°C'],
        ['pregunta' => 'Densidad Hg 20°C', 'opciones' => ['13.534 g/cm³', '1.000 g/cm³', '0.789 g/cm³', '3.515 g/cm³'], 'correcta' => '13.534 g/cm³'],
        ['pregunta' => 'Conductividad eléctrica Au', 'opciones' => ['4.1×10⁷ S/m', '5.5×10⁻⁶ S/m', '0 S/m', '10¹⁴ S/m'], 'correcta' => '4.1×10⁷ S/m'],
        ['pregunta' => 'Calor específico agua', 'opciones' => ['4.184 J/g·°C', '0.606 J/g·°C', '2.080 J/g·°C', '0.385 J/g·°C'], 'correcta' => '4.184 J/g·°C'],
        ['pregunta' => 'Punto crítico H₂O', 'opciones' => ['374°C, 218 atm', '100°C, 1 atm', '0°C, 1 atm', '647 K, 22.1 MPa'], 'correcta' => '374°C, 218 atm'],
        ['pregunta' => 'Diamante: P.F. estimado', 'opciones' => ['3550°C', '100°C', '0°C', '1064°C'], 'correcta' => '3550°C'],
        ['pregunta' => 'Índice refracción agua', 'opciones' => ['1.333', '1.000', '2.417', '0.5'], 'correcta' => '1.333'],
        ['pregunta' => 'Superfluidez en...', 'opciones' => ['He-4 < 2.17 K', 'H₂O', 'Hg', 'Au'], 'correcta' => 'He-4 < 2.17 K'],
        ['pregunta' => 'Ley de Dulong-Petit aplica a...', 'opciones' => ['Sólidos', 'Gases', 'Líquidos', 'Plasma'], 'correcta' => 'Sólidos'],
        ['pregunta' => 'IUPAC define P.E. como...', 'opciones' => ['T a 1 atm', 'T a 0°C', 'T a 100°C', 'T crítica'], 'correcta' => 'T a 1 atm']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Estados de la Materia y Transiciones (Fusión, Sublimación, Calor Latente, Diagrama Fases)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'estados-materia',
    'titulo' => 'Estados de la Materia y sus Transiciones: El Ciclo de la Energía',
    'contenido' => '
        <h3>Estados de la Materia</h3>
        <p>La materia existe en <strong>cuatro estados principales</strong> según <strong>temperatura</strong> y <strong>presión</strong>. Las <strong>transiciones</strong> entre ellos requieren o liberan <strong>energía</strong>.</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Los Cuatro Estados</h4>
        <table class="table">
            <thead>
                <tr><th>Estado</th><th>Forma</th><th>Volumen</th><th>Compresión</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Sólido</strong></td><td>Fija</td><td>Fijo</td><td>No</td><td>Hielo</td></tr>
                <tr><td><strong>Líquido</strong></td><td>Variable</td><td>Fijo</td><td>Poco</td><td>Agua</td></tr>
                <tr><td><strong>Gas</strong></td><td>Variable</td><td>Variable</td><td>Mucho</td><td>Vapor</td></tr>
                <tr><td><strong>Plasma</strong></td><td>Variable</td><td>Variable</td><td>Mucho</td><td>Neón, Sol</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Transiciones de Fase</h4>
        <table class="table">
            <thead>
                <tr><th>Transición</th><th>Dirección</th><th>Calor</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Fusión</strong></td><td>Sólido → Líquido</td><td>Absorbe</td><td>Hielo → Agua</td></tr>
                <tr><td><strong>Congelación</strong></td><td>Líquido → Sólido</td><td>Libera</td><td>Agua → Hielo</td></tr>
                <tr><td><strong>Evaporación</strong></td><td>Líquido → Gas</td><td>Absorbe</td><td>Agua → Vapor</td></tr>
                <tr><td><strong>Condensación</strong></td><td>Gas → Líquido</td><td>Libera</td><td>Vapor → Agua</td></tr>
                <tr><td><strong>Sublimación</strong></td><td>Sólido → Gas</td><td>Absorbe</td><td>CO₂ seco</td></tr>
                <tr><td><strong>Deposición</strong></td><td>Gas → Sólido</td><td>Libera</td><td>Escarcha</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Hielo seco (CO₂)</strong> → <strong>sublimación</strong> a -78.5°C → gas sin pasar por líquido.</p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Calor Latente (Energía Oculta)</h4>
        <p>\[
            Q = m \\cdot \\Delta H
        \]</p>
        <table class="table">
            <thead>
                <tr><th>Transición</th><th>Agua (J/g)</th><th>CO₂ (J/g)</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Fusión</strong></td><td>334</td><td>184</td></tr>
                <tr><td><strong>Evaporación</strong></td></g><td>2260</td><td>571</td></tr>
                <tr><td><strong>Sublimación</strong></td><td>—</td><td>571</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/estado_materia-transicion.webp" alt="Diagrama de fases">
            <p><em>Diagrama de fases. Fuente: LibreTexts.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/tansicion-calor.jpg" alt="Transiciones">
            <p><em>Transiciones con calor. Fuente: ThoughtCo.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/diragrama-fase-agua.png" alt="Diagrama de fases agua">
            <p><em>Diagrama de fases del agua. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. Punto Crítico y Triple</h4>
        <ul>
            <li><strong>Punto triple (agua):</strong> 0.01°C, 611.7 Pa → 3 fases coexisten</li>
            <li><strong>Punto crítico (agua):</strong> 374°C, 22.1 MPa → no hay distinción líquido/gas</li>
        </ul>

        <hr style="border:1px dashed #1976D2;">

        <h4>5. SVG Animado: Ciclo Completo del Agua</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>

                <!-- Título -->
                <text x="400" y="50" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">CICLO DE ESTADOS: H₂O</text>

                <!-- Hielo -->
                <g id="hielo">
                    <rect x="100" y="200" width="120" height="120" fill="#BBDEFB" rx="20">
                        <animate attributeName="opacity" values="1;0.7;1" dur="3s" repeatCount="indefinite"/>
                    </rect>
                    <text x="160" y="260" fill="#1565C0" font-size="16" text-anchor="middle">HIELO</text>
                    <text x="160" y="285" fill="#1976D2" font-size="12" text-anchor="middle">0°C</text>
                </g>

                <!-- Flecha fusión -->
                <path d="M220 260 L320 260" stroke="#1976D2" stroke-width="6" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" values="0;50" dur="2s" repeatCount="indefinite"/>
                </path>
                <text x="270" y="245" fill="#1565C0" font-size="12">Fusión</text>
                <text x="270" y="275" fill="#1976D2" font-size="10">+334 J/g</text>

                <!-- Agua líquida -->
                <g id="liquido">
                    <rect x="340" y="200" width="120" height="120" fill="#2196F3" rx="20">
                        <animate attributeName="opacity" values="0.7;1;0.7" begin="1s" dur="3s" repeatCount="indefinite"/>
                    </rect>
                    <text x="400" y="260" fill="white" font-size="16" text-anchor="middle">AGUA</text>
                    <text x="400" y="285" fill="#BBDEFB" font-size="12" text-anchor="middle">25°C</text>
                </g>

                <!-- Flecha evaporación -->
                <path d="M460 260 L560 200" stroke="#1976D2" stroke-width="6" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" values="0;50" begin="0.5s" dur="2s" repeatCount="indefinite"/>
                </path>
                <text x="510" y="185" fill="#1565C0" font-size="12">Evaporación</text>
                <text x="510" y="215" fill="#1976D2" font-size="10">+2260 J/g</text>

                <!-- Vapor -->
                <g id="vapor">
                    <circle cx="620" cy="150" r="60" fill="none" stroke="#90CAF9" stroke-width="5" stroke-dasharray="8,5">
                        <animate attributeName="r" values="60;70;60" dur="3s" repeatCount="indefinite"/>
                    </circle>
                    <text x="620" y="145" fill="#1565C0" font-size="16" text-anchor="middle">VAPOR</text>
                    <text x="620" y="165" fill="#1976D2" font-size="12" text-anchor="middle">100°C</text>
                </g>

                <!-- Flecha condensación -->
                <path d="M620 210 L560 310" stroke="#1976D2" stroke-width="6" marker-end="url(#arrow)"/>
                <text x="590" y="260" fill="#1565C0" font-size="12">Condensación</text>
                <text x="590" y="290" fill="#1976D2" font-size="10">-2260 J/g</text>

                <!-- Flecha congelación -->
                <path d="M340 320 L220 320" stroke="#1976D2" stroke-width="6" marker-end="url(#arrow)"/>
                <text x="280" y="305" fill="#1565C0" font-size="12">Congelación</text>
                <text x="280" y="335" fill="#1976D2" font-size="10">-334 J/g</text>

                <!-- Sublimación (CO₂ ejemplo) -->
                <g id="sublimacion" opacity="0">
                    <rect x="50" y="380" width="180" height="80" fill="#E8F5E9" rx="15"/>
                    <text x="140" y="410" fill="#1B5E20" font-size="12" text-anchor="middle">Sublimación CO₂</text>
                    <text x="140" y="430" fill="#2E7D32" font-size="10" text-anchor="middle">-78.5°C</text>
                    <animate attributeName="opacity" values="0;1;0" begin="3s" dur="2s" repeatCount="indefinite"/>
                </g>

                <!-- Datos NIST -->
                <text x="400" y="470" fill="#1565C0" font-size="14" text-anchor="middle">NIST 2025: Punto triple H₂O = 0.01°C, 611.7 Pa</text>

                <!-- Marcador -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#1976D2"/>
                    </marker>
                </defs>
            </svg>
            <p><em>SVG Animado: Ciclo completo con energías y sublimación.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Sólido a líquido', 'respuesta' => 'Fusión'],
        ['enunciado' => 'Gas a sólido', 'respuesta' => 'Deposición'],
        ['enunciado' => 'Sólido a gas', 'respuesta' => 'Sublimación'],

        // === APLICADOS ===
        ['enunciado' => 'Calor fusión H₂O', 'respuesta' => '334 J/g'],
        ['enunciado' => 'Calor evaporación H₂O', 'respuesta' => '2260 J/g'],
        ['enunciado' => 'Punto triple H₂O', 'respuesta' => '0.01°C, 611.7 Pa'],

        // === QUÍMICOS ===
        ['enunciado' => 'Ejemplo sublimación', 'respuesta' => 'Hielo seco (CO₂)'],
        ['enunciado' => 'Plasma en', 'respuesta' => 'Estrellas, lámparas neón'],
        ['enunciado' => 'Fórmula calor latente', 'respuesta' => '\\(Q = m \\Delta H\\)'],

        // === AVANZADOS ===
        ['enunciado' => 'Punto crítico H₂O', 'respuesta' => '374°C, 22.1 MPa'],
        ['enunciado' => 'NIST: P.F. CO₂', 'respuesta' => '-78.5°C (sublimación)'],
        ['enunciado' => 'Q para evaporar 18g H₂O', 'respuesta' => '40,680 J']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Sublimación es...', 'opciones' => ['Sólido → Gas', 'Gas → Líquido', 'Líquido → Sólido', 'Plasma'], 'correcta' => 'Sólido → Gas'],
        ['pregunta' => 'Congelación', 'opciones' => ['Líquido → Sólido', 'Sólido → Líquido', 'Gas → Sólido', 'Todo'], 'correcta' => 'Líquido → Sólido'],
        ['pregunta' => 'Plasma es...', 'opciones' => ['Gas ionizado', 'Sólido', 'Líquido', 'Gas normal'], 'correcta' => 'Gas ionizado'],
        ['pregunta' => 'Evaporación requiere...', 'opciones' => ['Calor', 'Frío', 'Presión', 'Luz'], 'correcta' => 'Calor'],
        ['pregunta' => 'Estado con forma fija', 'opciones' => ['Sólido', 'Líquido', 'Gas', 'Plasma'], 'correcta' => 'Sólido'],
        ['pregunta' => 'Hielo seco hace...', 'opciones' => ['Sublimación', 'Fusión', 'Condensación', 'Ionización'], 'correcta' => 'Sublimación'],
        ['pregunta' => 'Punto triple es...', 'opciones' => ['3 fases coexisten', '2 fases', '1 fase', 'Ninguna'], 'correcta' => '3 fases coexisten'],
        ['pregunta' => 'Calor latente es...', 'opciones' => ['Energía oculta', 'Temperatura', 'Masa', 'Volumen'], 'correcta' => 'Energía oculta'],
        ['pregunta' => 'Agua hierve a...', 'opciones' => ['100°C (1 atm)', '0°C', '-78°C', '374°C'], 'correcta' => '100°C (1 atm)'],
        ['pregunta' => 'Deposición forma...', 'opciones' => ['Escarcha', 'Lluvia', 'Nieve líquida', 'Vapor'], 'correcta' => 'Escarcha'],

        // === MEDIO (10) ===
        ['pregunta' => 'Calor fusión H₂O', 'opciones' => ['334 J/g', '2260 J/g', '571 J/g', '0 J/g'], 'correcta' => '334 J/g'],
        ['pregunta' => 'Calor evaporación H₂O', 'opciones' => ['2260 J/g', '334 J/g', '184 J/g', '0 J/g'], 'correcta' => '2260 J/g'],
        ['pregunta' => 'Punto triple H₂O', 'opciones' => ['0.01°C', '0.00°C', '100°C', '374°C'], 'correcta' => '0.01°C'],
        ['pregunta' => 'Sublimación CO₂ a', 'opciones' => ['-78.5°C', '0°C', '100°C', '356°C'], 'correcta' => '-78.5°C'],
        ['pregunta' => 'Q = m·ΔH es...', 'opciones' => ['Calor latente', 'Calor sensible', 'Trabajo', 'Entropía'], 'correcta' => 'Calor latente'],
        ['pregunta' => 'Punto crítico elimina...', 'opciones' => ['Distinción líquido/gas', 'Sólido', 'Plasma', 'Masa'], 'correcta' => 'Distinción líquido/gas'],
        ['pregunta' => 'Fusión es...', 'opciones' => ['Endotérmica', 'Exotérmica', 'Isotérmica', 'Adiabática'], 'correcta' => 'Endotérmica'],
        ['pregunta' => 'Condensación es...', 'opciones' => ['Exotérmica', 'Endotérmica', 'Nuclear', 'Física'], 'correcta' => 'Exotérmica'],
        ['pregunta' => 'Plasma conduce...', 'opciones' => ['Electricidad', 'Calor', 'Luz', 'Sonido'], 'correcta' => 'Electricidad'],
        ['pregunta' => 'Diagrama de fases muestra...', 'opciones' => ['P vs T', 'm vs V', 'Q vs t', 'E vs m'], 'correcta' => 'P vs T'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Punto crítico H₂O', 'opciones' => ['374°C, 22.1 MPa', '100°C, 1 atm', '0.01°C, 611 Pa', '647 K, 22.1 MPa'], 'correcta' => '374°C, 22.1 MPa'],
        ['pregunta' => 'Q para sublimar 44g CO₂', 'respuesta' => '25,124 J', 'opciones' => ['25,124 J', '8,096 J', '14,784 J', '0 J'], 'correcta' => '25,124 J'],
        ['pregunta' => 'Punto triple CO₂', 'opciones' => ['-56.6°C, 5.11 atm', '0.01°C, 611 Pa', '-78.5°C, 1 atm', '100°C, 1 atm'], 'correcta' => '-56.6°C, 5.11 atm'],
        ['pregunta' => 'Calor latente más alto', 'opciones' => ['Evaporación H₂O', 'Fusión H₂O', 'Sublimación CO₂', 'Fusión Na'], 'correcta' => 'Evaporación H₂O'],
        ['pregunta' => 'Supercrítico es...', 'opciones' => ['Más allá punto crítico', 'Debajo punto triple', 'En plasma', 'En vacío'], 'correcta' => 'Más allá punto crítico'],
        ['pregunta' => 'Ionización en plasma requiere...', 'opciones' => ['Alta T o campo E', 'Baja T', 'Presión', 'Luz'], 'correcta' => 'Alta T o campo E'],
        ['pregunta' => 'Diagrama de fases agua inclinada por...', 'opciones' => ['Puente H', 'Enlaces iónicos', 'Van der Waals', 'Covalentes'], 'correcta' => 'Puente H'],
        ['pregunta' => 'Calor sensible cambia...', 'opciones' => ['Temperatura', 'Estado', 'Masa', 'Volumen'], 'correcta' => 'Temperatura'],
        ['pregunta' => 'IUPAC define punto ebullición a...', 'opciones' => ['1 atm', '1 bar', '0°C', '100 kPa'], 'correcta' => '1 atm'],
        ['pregunta' => 'Bose-Einstein condensado es...', 'opciones' => ['5º estado (T≈0K)', 'Plasma', 'Líquido', 'Gas'], 'correcta' => '5º estado (T≈0K)']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Clasificación de la Materia (Pura, Mezclas, Separación, Propiedades)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'clasificacion-materia',
    'titulo' => 'Clasificación de la Materia: El Árbol de la Química',
    'contenido' => '
        <h3>Clasificación de la Materia</h3>
        <p>Toda la <strong>materia</strong> se clasifica según su <strong>composición</strong>:</p>
        <ul>
            <li><strong>Pura:</strong> Composición fija → <strong>Elementos</strong> o <strong>Compuestos</strong></li>
            <li><strong>Mezclas:</strong> Composición variable → <strong>Homogéneas</strong> o <strong>Heterogéneas</strong></li>
        </ul>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Materia Pura</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Definición</th><th>Ejemplo</th><th>Separación</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Elemento</strong></td><td>Un solo tipo de átomo</td><td>Oro (Au), Oxígeno (O₂)</td><td>No químicamente</td></tr>
                <tr><td><strong>Compuesto</strong></td><td>Dos o más elementos unidos</td><td>Agua (H₂O), Sal (NaCl)</td><td>Solo por reacción</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Mezclas</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Composición</th><th>Ejemplo</th><th>Separación</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Homogénea</strong></td><td>Uniforme</td><td>Aire, Salmuera</td><td>Destilación, Cromatografía</td></tr>
                <tr><td><strong>Heterogénea</strong></td><td>No uniforme</td><td>Ensalada, Aceite+Agua</td><td>Filtración, Decantación</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Aire</strong> → mezcla homogénea (78% N₂, 21% O₂). <strong>Agua de mar</strong> → homogénea (sal disuelta). <strong>Petróleo</strong> → heterogénea.</p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Métodos de Separación (Físicos)</h4>
        <table class="table">
            <thead>
                <tr><th>Método</th><th>Principio</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Filtración</strong></td><td>Tamaño partícula</td><td>Arena + agua</td></tr>
                <tr><td><strong>Destilación</strong></td><td>Punto ebullición</td><td>Alcohol + agua</td></tr>
                <tr><td><strong>Decantación</strong></td><td>Densidad</td><td>Aceite + agua</td></tr>
                <tr><td><strong>Cromatografía</strong></td><td>Afinidad fase</td><td>Tinta en papel</td></tr>
                <tr><td><strong>Centrifugación</strong></td><td>Densidad + giro</td><td>Sangre (plasma)</td></tr>
                <tr><td><strong>Evaporación</strong></td><td>Volatilidad</td><td>Sal de mar</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/materia_clasificacionjpg.jpg" alt="Clasificación completa">
            <p><em>Diagrama completo. Fuente: LibreTexts.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/metodo-separacion_mezcla.jpg" alt="Separación">
            <p><em>Métodos físicos. Fuente: ThoughtCo.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. Fórmulas y Datos Clave</h4>
        <p>\[
            \\text{Compuesto} \\rightarrow \\text{Elementos} \\quad (\\text{por reacción química})
        \]</p>
        <p>\[
            \\text{Mezcla} \\rightarrow \\text{Componentes} \\quad (\\text{por método físico})
        \]</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>5. SVG Animado: Árbol de Clasificación Interactivo</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>

                <!-- Título -->
                <text x="400" y="50" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">CLASIFICACIÓN DE LA MATERIA</text>

                <!-- Materia -->
                <g id="materia">
                    <rect x="300" y="80" width="200" height="80" fill="#1976D2" rx="20">
                        <animate attributeName="opacity" values="1;0.8;1" dur="3s" repeatCount="indefinite"/>
                    </rect>
                    <text x="400" y="120" fill="white" font-size="18" text-anchor="middle">MATERIA</text>
                    <text x="400" y="140" fill="#BBDEFB" font-size="12" text-anchor="middle">Todo lo que tiene masa y volumen</text>
                </g>

                <!-- Flechas -->
                <path d="M400 160 L400 200" stroke="#1565C0" stroke-width="6" marker-end="url(#arrow)"/>
                <path d="M400 200 L250 250" stroke="#1565C0" stroke-width="5" marker-end="url(#arrow)"/>
                <path d="M400 200 L550 250" stroke="#1565C0" stroke-width="5" marker-end="url(#arrow)"/>

                <!-- Pura -->
                <g id="pura">
                    <rect x="150" y="240" width="180" height="100" fill="#4CAF50" rx="20">
                        <animate attributeName="opacity" values="0.7;1;0.7" begin="1s" dur="3s" repeatCount="indefinite"/>
                    </rect>
                    <text x="240" y="280" fill="white" font-size="16" text-anchor="middle">MATERIA PURA</text>
                    <text x="240" y="300" fill="#E8F5E9" font-size="10" text-anchor="middle">Composición fija</text>
                </g>

                <!-- Mezcla -->
                <g id="mezcla">
                    <rect x="470" y="240" width="180" height="100" fill="#FF9800" rx="20">
                        <animate attributeName="opacity" values="0.7;1;0.7" begin="1.5s" dur="3s" repeatCount="indefinite"/>
                    </rect>
                    <text x="560" y="280" fill="white" font-size="16" text-anchor="middle">MEZCLA</text>
                    <text x="560" y="300" fill="#FFF3E0" font-size="10" text-anchor="middle">Composición variable</text>
                </g>

                <!-- Elemento y Compuesto -->
                <path d="M240 340 L200 380" stroke="#2E7D32" stroke-width="4" marker-end="url(#arrow-green)"/>
                <path d="M240 340 L280 380" stroke="#2E7D32" stroke-width="4" marker-end="url(#arrow-green)"/>

                <circle cx="200" cy="400" r="50" fill="#8BC34A">
                    <animate attributeName="r" values="50;55;50" dur="2s" repeatCount="indefinite"/>
                </circle>
                <text x="200" y="395" fill="white" font-size="12" text-anchor="middle">Elemento</text>
                <text x="200" y="410" fill="#E8F5E9" font-size="9" text-anchor="middle">Au, O₂</text>

                <rect x="250" y="370" width="100" height="60" fill="#66BB6A" rx="15"/>
                <text x="300" y="395" fill="white" font-size="12" text-anchor="middle">Compuesto</text>
                <text x="300" y="415" fill="#E8F5E9" font-size="9" text-anchor="middle">H₂O, NaCl</text>

                <!-- Homogénea y Heterogénea -->
                <path d="M560 340 L520 380" stroke="#FF6F00" stroke-width="4" marker-end="url(#arrow-orange)"/>
                <path d="M560 340 L600 380" stroke="#FF6F00" stroke-width="4" marker-end="url(#arrow-orange)"/>

                <rect x="470" y="370" width="100" height="60" fill="#FFB300" rx="15"/>
                <text x="520" y="395" fill="white" font-size="12" text-anchor="middle">Homogénea</text>
                <text x="520" y="415" fill="#FFF3E0" font-size="9" text-anchor="middle">Aire, Salmuera</text>

                <rect x="580" y="370" width="100" height="60" fill="#FF8F00" rx="15"/>
                <text x="630" y="395" fill="white" font-size="12" text-anchor="middle">Heterogénea</text>
                <text x="630" y="415" fill="#FFF3E0" font-size="9" text-anchor="middle">Ensalada, Aceite+Agua</text>

                <!-- Separación -->
                <rect x="50" y="400" width="120" height="80" fill="#E8F5E9" rx="15"/>
                <text x="110" y="430" fill="#1B5E20" font-size="10" text-anchor="middle">Filtración</text>
                <text x="110" y="450" fill="#2E7D32" font-size="9" text-anchor="middle">Destilación</text>

                <!-- Datos IUPAC -->
                <text x="400" y="470" fill="#1565C0" font-size="14" text-anchor="middle">IUPAC 2025: 118 Elementos Confirmados</text>

                <!-- Marcadores -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#1565C0"/>
                    </marker>
                    <marker id="arrow-green" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#2E7D32"/>
                    </marker>
                    <marker id="arrow-orange" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#FF6F00"/>
                    </marker>
                </defs>
            </svg>
            <p><em>SVG Animado: Árbol interactivo de clasificación con ejemplos.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Materia pura ejemplo', 'respuesta' => 'Oro, agua'],
        ['enunciado' => 'Mezcla homogénea', 'respuesta' => 'Aire, salmuera'],
        ['enunciado' => 'Mezcla heterogénea', 'respuesta' => 'Ensalada, aceite+agua'],

        // === APLICADOS ===
        ['enunciado' => 'Separar sal de agua', 'respuesta' => 'Evaporación'],
        ['enunciado' => 'Separar arena de agua', 'respuesta' => 'Filtración'],
        ['enunciado' => 'Separar alcohol de agua', 'respuesta' => 'Destilación'],

        // === QUÍMICOS ===
        ['enunciado' => 'Descomponer H₂O', 'respuesta' => 'Electrólisis → H₂ + O₂'],
        ['enunciado' => 'Elemento no descomponible', 'respuesta' => 'Oro (Au)'],
        ['enunciado' => 'Compuesto fórmula', 'respuesta' => 'H₂O, CO₂'],

        // === AVANZADOS ===
        ['enunciado' => 'IUPAC: elementos totales 2025', 'respuesta' => '118'],
        ['enunciado' => 'NIST: % N₂ en aire seco', 'respuesta' => '78.08%'],
        ['enunciado' => 'Cromatografía separa por', 'respuesta' => 'Afinidad fase']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Materia pura tiene...', 'opciones' => ['Composición constante', 'Variable', 'Aleatoria', 'Ninguna'], 'correcta' => 'Composición constante'],
        ['pregunta' => 'Elemento ejemplo', 'opciones' => ['Oro', 'Agua', 'Aire', 'Suelo'], 'correcta' => 'Oro'],
        ['pregunta' => 'Mezcla homogénea es...', 'opciones' => ['Uniforme', 'No uniforme', 'Pura', 'Elemento'], 'correcta' => 'Uniforme'],
        ['pregunta' => 'Compuesto se descompone en...', 'opciones' => ['Elementos', 'Mezclas', 'Átomos', 'Moléculas'], 'correcta' => 'Elementos'],
        ['pregunta' => 'Aire es...', 'opciones' => ['Mezcla homogénea', 'Pura', 'Heterogénea', 'Elemento'], 'correcta' => 'Mezcla homogénea'],
        ['pregunta' => 'Agua es...', 'opciones' => ['Compuesto', 'Elemento', 'Mezcla', 'Plasma'], 'correcta' => 'Compuesto'],
        ['pregunta' => 'Ensalada es...', 'opciones' => ['Heterogénea', 'Homogénea', 'Pura', 'Elemento'], 'correcta' => 'Heterogénea'],
        ['pregunta' => 'Separar mezclas usa...', 'opciones' => ['Métodos físicos', 'Reacciones', 'Fusión nuclear', 'Nada'], 'correcta' => 'Métodos físicos'],
        ['pregunta' => 'Destilación separa por...', 'opciones' => ['Punto ebullición', 'Color', 'Masa', 'Sabor'], 'correcta' => 'Punto ebullición'],
        ['pregunta' => 'Filtración separa...', 'opciones' => ['Sólido de líquido', 'Gases', 'Luz', 'Sonido'], 'correcta' => 'Sólido de líquido'],

        // === MEDIO (10) ===
        ['pregunta' => 'Electrólisis de H₂O produce...', 'opciones' => ['H₂ + ½O₂', 'CO₂', 'NaCl', 'Au'], 'correcta' => 'H₂ + ½O₂'],
        ['pregunta' => 'Cromatografía usa...', 'opciones' => ['Fase estacionaria/móvil', 'Calor', 'Presión', 'Luz'], 'correcta' => 'Fase estacionaria/móvil'],
        ['pregunta' => 'Decantación por...', 'opciones' => ['Densidad', 'Color', 'Olor', 'Sabor'], 'correcta' => 'Densidad'],
        ['pregunta' => 'IUPAC: elementos totales', 'opciones' => ['118', '100', '92', '150'], 'correcta' => '118'],
        ['pregunta' => '% O₂ en aire', 'opciones' => ['20.95%', '78%', '1%', '50%'], 'correcta' => '20.95%'],
        ['pregunta' => 'Salmuera es...', 'opciones' => ['Solución (homogénea)', 'Suspensión', 'Elemento', 'Compuesto'], 'correcta' => 'Solución (homogénea)'],
        ['pregunta' => 'Petróleo crudo es...', 'opciones' => ['Mezcla heterogénea', 'Pura', 'Elemento', 'Gas'], 'correcta' => 'Mezcla heterogénea'],
        ['pregunta' => 'Centrifugación separa...', 'opciones' => ['Por densidad', 'Por color', 'Por olor', 'Por masa'], 'correcta' => 'Por densidad'],
        ['pregunta' => 'Evaporación deja...', 'opciones' => ['Sólido disuelto', 'Líquido', 'Gas', 'Nada'], 'correcta' => 'Sólido disuelto'],
        ['pregunta' => 'Mezcla vs compuesto', 'opciones' => ['Física vs química', 'Igual', 'Ambos puros', 'Nada'], 'correcta' => 'Física vs química'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Aire seco: % N₂ (NIST)', 'opciones' => ['78.08%', '20.95%', '0.93%', '0.04%'], 'correcta' => '78.08%'],
        ['pregunta' => 'Separar tintas por...', 'opciones' => ['Cromatografía en papel', 'Destilación', 'Filtración', 'Decantación'], 'correcta' => 'Cromatografía en papel'],
        ['pregunta' => 'Agua destilada es...', 'opciones' => ['Compuesto puro', 'Mezcla', 'Elemento', 'Heterogénea'], 'correcta' => 'Compuesto puro'],
        ['pregunta' => 'Oro 24K es...', 'opciones' => ['Elemento puro', 'Aleación', 'Compuesto', 'Mezcla'], 'correcta' => 'Elemento puro'],
        ['pregunta' => 'Bronce es...', 'opciones' => ['Aleación (mezcla)', 'Compuesto', 'Elemento', 'Pura'], 'correcta' => 'Aleación (mezcla)'],
        ['pregunta' => 'Separar sangre en...', 'opciones' => ['Plasma + células (centrifugación)', 'Destilación', 'Evaporación', 'Filtración'], 'correcta' => 'Plasma + células (centrifugación)'],
        ['pregunta' => 'Solubilidad es propiedad...', 'opciones' => ['Intensiva', 'Extensiva', 'Química', 'Nuclear'], 'correcta' => 'Intensiva'],
        ['pregunta' => 'Ley proporciones definidas aplica a...', 'opciones' => ['Compuestos', 'Mezclas', 'Elementos', 'Gases'], 'correcta' => 'Compuestos'],
        ['pregunta' => 'Mezclas azeotrópicas se separan por...', 'opciones' => ['Destilación especial', 'Filtración', 'Evaporación', 'Decantación'], 'correcta' => 'Destilación especial'],
        ['pregunta' => 'IUPAC define solución como...', 'opciones' => ['Mezcla homogénea', 'Pura', 'Heterogénea', 'Elemento'], 'correcta' => 'Mezcla homogénea']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Mezclas (Homogéneas, Heterogéneas, Soluciones, Suspensiones, Coloides, Separación)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'mezclas',
    'titulo' => 'Mezclas: El Arte de Combinar sin Reaccionar',
    'contenido' => '
        <h3>¿Qué son las Mezclas?</h3>
        <p>Las <strong>mezclas</strong> son <strong>combinaciones físicas</strong> de dos o más sustancias <strong>sin unión química</strong>. Se separan por <strong>métodos físicos</strong>. No tienen fórmula fija.</p>

        <hr style="border:1px dashed #FF9800;">

        <h4>1. Tipos de Mezclas</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Uniformidad</th><th>Tamaño Partículas</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Homogénea</strong></td><td>Uniforme</td><td>&lt; 1 nm</td><td>Aire, salmuera</td></tr>
                <tr><td><strong>Heterogénea</strong></td><td>No uniforme</td><td>&gt; 1 nm</td><td>Aceite+agua, granito</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #FF9800;">

        <h4>2. Clasificación Detallada</h4>
        <table class="table">
            <thead>
                <tr><th>Subtipo</th><th>Característica</th><th>Ejemplo</th><th>Efecto Tyndall</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Solución</strong></td><td>Homogénea molecular</td><td>Azúcar en agua</td><td>No</td></tr>
                <tr><td><strong>Coloide</strong></td><td>Dispersión intermedia</td><td>Leche, gelatina</td><td>Sí</td></tr>
                <tr><td><strong>Suspensión</strong></td><td>Partículas grandes</td><td>Arena en agua</td><td>Sí (fuerte)</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Leche</strong> → <strong>coloide</strong> (grasa dispersa en agua). <strong>Aceite + agua</strong> → <strong>suspensión</strong> (se separa). <strong>Aire</strong> → <strong>solución gaseosa</strong>.</p>
        </div>

        <hr style="border:1px dashed #FF9800;">

        <h4>3. Métodos de Separación Física</h4>
        <table class="table">
            <thead>
                <tr><th>Método</th><th>Principio</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Destilación</strong></td><td>Punto ebullición</td><td>Agua + alcohol</td></tr>
                <tr><td><strong>Filtración</strong></td><td>Tamaño partícula</td><td>Café con posos</td></tr>
                <tr><td><strong>Decantación</strong></td><td>Densidad</td><td>Aceite + agua</td></tr>
                <tr><td><strong>Centrifugación</strong></td><td>Densidad + fuerza</td><td>Sangre</td></tr>
                <tr><td><strong>Cromatografía</strong></td><td>Afinidad fase</td><td>Tintas</td></tr>
                <tr><td><strong>Sublimación</strong></td><td>Volatilidad</td><td>Naftalina + sal</td></tr>
                <tr><td><strong>Evaporación</strong></td><td>Volatilidad</td><td>Sal de mar</td></tr>
                <tr><td><strong>Embudo decantación</strong></td><td>Inmiscibilidad</td><td>Aceite + agua</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/tipos-mezclas.jpg" alt="Tipos de mezclas">
            <p><em>Clasificación visual. Fuente: LibreTexts.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/metodo-separacion_mezcla.jpg" alt="Métodos separación">
            <p><em>Métodos físicos. Fuente: ThoughtCo.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/efecto-tyndall.jpg" alt="Efecto Tyndall">
            <p><em>Efecto Tyndall en coloides. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #FF9800;">

        <h4>4. Efecto Tyndall</h4>
        <p>Dispersión de luz por partículas &gt; 1 nm:</p>
        <ul>
            <li><strong>Soluciones:</strong> No (partículas &lt; 1 nm)</li>
            <li><strong>Coloides:</strong> Sí (1–1000 nm)</li>
            <li><strong>Suspensiones:</strong> Sí (fuerte)</li>
        </ul>

        <hr style="border:1px dashed #FF9800;">

        <h4>5. SVG Animado: Separación de Mezclas</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#FFF3E0"/>

                <!-- Título -->
                <text x="400" y="50" fill="#E65100" font-size="28" text-anchor="middle" font-weight="bold">SEPARACIÓN DE MEZCLAS</text>

                <!-- Mezcla inicial -->
                <g id="mezcla">
                    <rect x="100" y="150" width="180" height="200" fill="#FFB300" rx="20">
                        <animate attributeName="opacity" values="1;0.7;1" dur="3s" repeatCount="indefinite"/>
                    </rect>
                    <text x="190" y="220" fill="white" font-size="16" text-anchor="middle">MEZCLA</text>
                    <text x="190" y="250" fill="#FFF3E0" font-size="12" text-anchor="middle">Aceite + Agua</text>
                    <circle cx="150" cy="200" r="20" fill="#1976D2"/>
                    <circle cx="230" cy="300" r="25" fill="#FFEB3B"/>
                </g>

                <!-- Embudo decantación -->
                <g id="embudo" opacity="0">
                    <path d="M350 180 L380 350 L320 350 Z" fill="#90A4AE"/>
                    <path d="M350 350 L350 380" stroke="#455A64" stroke-width="8"/>
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="1s"/>
                </g>
                <text x="350" y="170" fill="#455A64" font-size="12" text-anchor="middle">Embudo Decantación</text>

                <!-- Separación -->
                <g id="separacion" opacity="0">
                    <rect x="450" y="200" width="100" height="80" fill="#1976D2" rx="15"/>
                    <text x="500" y="240" fill="white" font-size="12" text-anchor="middle">AGUA</text>
                    <rect x="450" y="290" width="100" height="80" fill="#FFEB3B" rx="15"/>
                    <text x="500" y="330" fill="#1B5E20" font-size="12" text-anchor="middle">ACEITE</text>
                    <animate attributeName="opacity" values="0;1" begin="3s" dur="1s"/>
                </g>

                <!-- Destilación -->
                <g id="destilacion" opacity="0">
                    <circle cx="650" cy="200" r="50" fill="#2196F3" opacity="0.6"/>
                    <path d="M650 150 L700 100 L750 150" stroke="#1976D2" stroke-width="6" fill="none"/>
                    <text x="700" y="90" fill="#1565C0" font-size="12" text-anchor="middle">Destilación</text>
                    <animate attributeName="opacity" values="0;1" begin="4s" dur="1s"/>
                </g>

                <!-- Filtración -->
                <g id="filtracion" opacity="0">
                    <rect x="100" y="380" width="120" height="80" fill="#8D6E63" rx="15"/>
                    <text x="160" y="420" fill="white" font-size="12" text-anchor="middle">FILTRACIÓN</text>
                    <animate attributeName="opacity" values="0;1" begin="5s" dur="1s"/>
                </g>

                <!-- Efecto Tyndall -->
                <g id="tyndall" opacity="0">
                    <rect x="550" y="380" width="200" height="80" fill="#E8F5E9" rx="15"/>
                    <text x="650" y="410" fill="#1B5E20" font-size="12" text-anchor="middle">Efecto Tyndall</text>
                    <text x="650" y="430" fill="#2E7D32" font-size="10" text-anchor="middle">Coloides: Sí</text>
                    <animate attributeName="opacity" values="0;1" begin="6s" dur="1s"/>
                </g>

                <!-- Datos -->
                <text x="400" y="470" fill="#E65100" font-size="14" text-anchor="middle">IUPAC 2025: Solución = Mezcla Homogénea</text>

            </svg>
            <p><em>SVG Animado: Separación paso a paso + Efecto Tyndall.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Mezcla homogénea ejemplo', 'respuesta' => 'Aire, salmuera'],
        ['enunciado' => 'Mezcla heterogénea ejemplo', 'respuesta' => 'Sopa, granito'],
        ['enunciado' => 'Separación física', 'respuesta' => 'Destilación, filtración'],

        // === APLICADOS ===
        ['enunciado' => 'Separar aceite de agua', 'respuesta' => 'Embudo decantación'],
        ['enunciado' => 'Separar sal de agua', 'respuesta' => 'Evaporación'],
        ['enunciado' => 'Separar alcohol de agua', 'respuesta' => 'Destilación fraccionada'],

        // === QUÍMICOS ===
        ['enunciado' => 'Efecto Tyndall en leche', 'respuesta' => 'Sí (coloide)'],
        ['enunciado' => 'Suspensión se asienta', 'respuesta' => 'Sí'],
        ['enunciado' => 'Solución no muestra Tyndall', 'respuesta' => 'Correcto'],

        // === AVANZADOS ===
        ['enunciado' => 'IUPAC: solución es', 'respuesta' => 'Mezcla homogénea'],
        ['enunciado' => 'NIST: % O₂ en aire seco', 'respuesta' => '20.95%'],
        ['enunciado' => 'Azeótropo etanol-agua', 'respuesta' => '95.6% etanol']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Mezclas se separan...', 'opciones' => ['Físicamente', 'Químicamente', 'Nuclearmente', 'Nada'], 'correcta' => 'Físicamente'],
        ['pregunta' => 'Mezcla homogénea es...', 'opciones' => ['Uniforme', 'No uniforme', 'Pura', 'Elemento'], 'correcta' => 'Uniforme'],
        ['pregunta' => 'Ejemplo homogénea', 'opciones' => ['Aire', 'Sopa', 'Roca', 'Arena'], 'correcta' => 'Aire'],
        ['pregunta' => 'Unión en mezclas', 'opciones' => ['Física', 'Química', 'Iónica', 'Covalente'], 'correcta' => 'Física'],
        ['pregunta' => 'Aceite + agua es...', 'opciones' => ['Heterogénea', 'Homogénea', 'Pura', 'Compuesto'], 'correcta' => 'Heterogénea'],
        ['pregunta' => 'Azúcar en agua es...', 'opciones' => ['Solución', 'Suspensión', 'Coloide', 'Elemento'], 'correcta' => 'Solución'],
        ['pregunta' => 'Leche es...', 'opciones' => ['Coloide', 'Solución', 'Suspensión', 'Pura'], 'correcta' => 'Coloide'],
        ['pregunta' => 'Arena en agua es...', 'opciones' => ['Suspensión', 'Solución', 'Coloide', 'Gas'], 'correcta' => 'Suspensión'],
        ['pregunta' => 'Destilación separa por...', 'opciones' => ['Punto ebullición', 'Color', 'Masa', 'Sabor'], 'correcta' => 'Punto ebullición'],
        ['pregunta' => 'Filtración usa...', 'opciones' => ['Papel poroso', 'Calor', 'Luz', 'Presión'], 'correcta' => 'Papel poroso'],

        // === MEDIO (10) ===
        ['pregunta' => 'Efecto Tyndall en solución', 'opciones' => ['No', 'Sí', 'Fuerte', 'Débil'], 'correcta' => 'No'],
        ['pregunta' => 'Efecto Tyndall en leche', 'opciones' => ['Sí', 'No', 'Solo calor', 'Solo luz'], 'correcta' => 'Sí'],
        ['pregunta' => 'Suspensión se asienta', 'opciones' => ['Sí', 'No', 'Solo con calor', 'Nunca'], 'correcta' => 'Sí'],
        ['pregunta' => 'Coloide tamaño partícula', 'opciones' => ['1–1000 nm', '&lt;1 nm', '&gt;1000 nm', '0 nm'], 'correcta' => '1–1000 nm'],
        ['pregunta' => 'Embudo decantación separa...', 'opciones' => ['Líquidos inmiscibles', 'Gases', 'Sólidos', 'Coloides'], 'correcta' => 'Líquidos inmiscibles'],
        ['pregunta' => 'Cromatografía separa por...', 'opciones' => ['Afinidad fase', 'Masa', 'Volumen', 'Color'], 'correcta' => 'Afinidad fase'],
        ['pregunta' => 'Sublimación separa...', 'opciones' => ['Sólidos volátiles', 'Líquidos', 'Gases', 'Coloides'], 'correcta' => 'Sólidos volátiles'],
        ['pregunta' => '% O₂ en aire seco', 'opciones' => ['20.95%', '78.08%', '0.93%', '0.04%'], 'correcta' => '20.95%'],
        ['pregunta' => 'Centrifugación acelera...', 'opciones' => ['Decantación', 'Fusión', 'Evaporación', 'Sublimación'], 'correcta' => 'Decantación'],
        ['pregunta' => 'IUPAC: solución es...', 'opciones' => ['Mezcla homogénea', 'Pura', 'Heterogénea', 'Elemento'], 'correcta' => 'Mezcla homogénea'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Azeótropo etanol-agua', 'opciones' => ['95.6% etanol', '100% etanol', '50% etanol', '0% etanol'], 'correcta' => '95.6% etanol'],
        ['pregunta' => 'Gel es un coloide...', 'opciones' => ['Sólido en líquido', 'Líquido en sólido', 'Gas en líquido', 'Sólido en gas'], 'correcta' => 'Líquido en sólido'],
        ['pregunta' => 'Emulsión es...', 'opciones' => ['Líquido en líquido', 'Sólido en líquido', 'Gas en líquido', 'Líquido en gas'], 'correcta' => 'Líquido en líquido'],
        ['pregunta' => 'Mayonesa es...', 'opciones' => ['Emulsión', 'Solución', 'Suspensión', 'Aerosol'], 'correcta' => 'Emulsión'],
        ['pregunta' => 'Humo es...', 'opciones' => ['Aerosol sólido en gas', 'Espuma', 'Gel', 'Emulsión'], 'correcta' => 'Aerosol sólido en gas'],
        ['pregunta' => 'Separar proteínas por...', 'opciones' => ['Electroforesis', 'Destilación', 'Filtración', 'Decantación'], 'correcta' => 'Electroforesis'],
        ['pregunta' => 'Diálisis separa por...', 'opciones' => ['Membrana semipermeable', 'Calor', 'Luz', 'Presión'], 'correcta' => 'Membrana semipermeable'],
        ['pregunta' => 'Cristalización fraccionada separa...', 'opciones' => ['Sales por solubilidad', 'Gases', 'Líquidos', 'Coloides'], 'correcta' => 'Sales por solubilidad'],
        ['pregunta' => 'Extracción líquido-líquido usa...', 'opciones' => ['Solubilidad en dos solventes', 'Densidad', 'Color', 'pH'], 'correcta' => 'Solubilidad en dos solventes'],
        ['pregunta' => 'Ley de Henry aplica a...', 'opciones' => ['Solubilidad gases en líquidos', 'Sólidos', 'Coloides', 'Suspensiones'], 'correcta' => 'Solubilidad gases en líquidos']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Sustancias Puras (Elementos, Compuestos, Propiedades, Separación Química)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'sustancias-puras',
    'titulo' => 'Sustancias Puras: La Esencia Inmutable de la Química',
    'contenido' => '
        <h3>Sustancias Puras</h3>
        <p>Las <strong>sustancias puras</strong> tienen <strong>composición química fija</strong> y <strong>propiedades constantes</strong>. <strong>No se separan físicamente</strong>. Se dividen en:</p>
        <ul>
            <li><strong>Elementos:</strong> Un solo tipo de átomo</li>
            <li><strong>Compuestos:</strong> Dos o más elementos unidos químicamente</li>
        </ul>

        <hr style="border:1px dashed #4CAF50;">

        <h4>1. Tipos de Sustancias Puras</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Composición</th><th>Separación</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Elemento</strong></td><td>Un tipo de átomo</td><td>Solo por reacciones nucleares</td><td>Au, O₂, Fe</td></tr>
                <tr><td><strong>Compuesto</strong></td><td>Múltiples elementos</td><td>Solo por reacción química</td><td>H₂O, CO₂, NaCl</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #4CAF50;">

        <h4>2. Propiedades de Sustancias Puras</h4>
        <table class="table">
            <thead>
                <tr><th>Propiedad</th><th>Característica</th><th>Ejemplo (H₂O)</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Punto fusión</strong></td><td>Fijo</td><td>0.00°C</td></tr>
                <tr><td><strong>Punto ebullición</strong></td><td>Fijo</td><td>100.00°C</td></tr>
                <tr><td><strong>Densidad</strong></td><td>Constante (T, P)</td><td>1.000 g/cm³</td></tr>
                <tr><td><strong>Composición</strong></td><td>Fija</td><td>11.19% H, 88.81% O</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Agua (H₂O)</strong> → siempre 2H:1O. <strong>Oro (Au)</strong> → solo átomos de oro. <strong>Sal (NaCl)</strong> → 1:1 Na:Cl.</p>
        </div>

        <hr style="border:1px dashed #4CAF50;">

        <h4>3. Ley de Proporciones Definidas (Proust)</h4>
        <p>\[
            \\text{Composición de un compuesto es siempre la misma}
        \]</p>
        <p>Ejemplo: CO₂ → siempre 27.29% C, 72.71% O</p>

        <hr style="border:1px dashed #4CAF50;">

        <h4>4. Separación Química</h4>
        <table class="table">
            <thead>
                <tr><th>Método</th><th>Principio</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Electrólisis</strong></td><td>Corriente eléctrica</td><td>H₂O → H₂ + ½O₂</td></tr>
                <tr><td><strong>Descomposición térmica</strong></td><td>Calor</td><td>CaCO₃ → CaO + CO₂</td></tr>
                <tr><td><strong>Reacción química</strong></td><td>Reactivos</td><td>2H₂O₂ → 2H₂O + O₂</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/sustancias-puras.avif" alt="Sustancias puras">
            <p><em>Diagrama completo. Fuente: LibreTexts.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/propiedades-sustancias-puras.PNG" alt="Propiedades">
            <p><em>Propiedades fijas. Fuente: ThoughtCo.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/electrólisis agua.png" alt="Electrólisis">
            <p><em>Electrólisis del agua. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #4CAF50;">

        <h4>5. Datos NIST 2025 (Precisión)</h4>
        <table class="table">
            <thead>
                <tr><th>Sustancia</th><th>P. Fusión (°C)</th><th>P. Ebullición (°C)</th><th>Densidad (g/cm³)</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>H₂O</strong></td><td>0.000</td><td>99.974</td><td>0.999972</td></tr>
                <tr><td><strong>NaCl</strong></td><td>801</td><td>1465</td><td>2.165</td></tr>
                <tr><td><strong>Au</strong></td><td>1064.18</td><td>2970</td><td>19.30</td></tr>
                <tr><td><strong>CO₂</strong></td><td>-78.5 (subl.)</td><td>—</td><td>1.977 (sólido)</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #4CAF50;">

        <h4>6. SVG Animado: De Compuesto a Elementos</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E8F5E9"/>

                <!-- Título -->
                <text x="400" y="50" fill="#1B5E20" font-size="28" text-anchor="middle" font-weight="bold">SUSTANCIAS PURAS</text>

                <!-- Compuesto -->
                <g id="compuesto">
                    <rect x="300" y="100" width="200" height="120" fill="#4CAF50" rx="25">
                        <animate attributeName="opacity" values="1;0.7;1" dur="3s" repeatCount="indefinite"/>
                    </rect>
                    <text x="400" y="150" fill="white" font-size="18" text-anchor="middle">COMPUESTO</text>
                    <text x="400" y="180" fill="#E8F5E9" font-size="14" text-anchor="middle">H₂O</text>
                    <text x="400" y="205" fill="#C8E6C9" font-size="10" text-anchor="middle">2H + O</text>
                </g>

                <!-- Flecha electrólisis -->
                <path d="M400 220 L400 280" stroke="#2E7D32" stroke-width="6" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" values="0;60" dur="2s" repeatCount="indefinite"/>
                </path>
                <text x="400" y="260" fill="#1B5E20" font-size="14" text-anchor="middle">Electrólisis</text>

                <!-- Elementos -->
                <g id="elementos" opacity="0">
                    <circle cx="250" cy="350" r="60" fill="#2196F3">
                        <animate attributeName="r" values="60;70;60" dur="2s" begin="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="250" y="340" fill="white" font-size="16" text-anchor="middle">H₂</text>
                    <text x="250" y="360" fill="#BBDEFB" font-size="10" text-anchor="middle">Hidrógeno</text>

                    <circle cx="550" cy="350" r="60" fill="#F44336">
                        <animate attributeName="r" values="60;70;60" begin="2.5s" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="550" y="340" fill="white" font-size="16" text-anchor="middle">O₂</text>
                    <text x="550" y="360" fill="#FFCDD2" font-size="10" text-anchor="middle">Oxígeno</text>

                    <animate attributeName="opacity" values="0;1" begin="2s" dur="1s"/>
                </g>

                <!-- Rayos -->
                <g id="rayos" opacity="0">
                    <line x1="380" y1="280" x2="270" y2="320" stroke="#FFEB3B" stroke-width="4">
                        <animate attributeName="opacity" values="0;1;0" begin="2s" dur="1s" repeatCount="indefinite"/>
                    </line>
                    <line x1="420" y1="280" x2="530" y2="320" stroke="#FFEB3B" stroke-width="4">
                        <animate attributeName="opacity" values="0;1;0" begin="2.2s" dur="1s" repeatCount="indefinite"/>
                    </line>
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="1s"/>
                </g>

                <!-- Propiedades -->
                <rect x="50" y="380" width="200" height="100" fill="#FFF3E0" rx="15"/>
                <text x="150" y="410" fill="#E65100" font-size="12" text-anchor="middle">P.F. = 0.00°C</text>
                <text x="150" y="430" fill="#FF6F00" font-size="10" text-anchor="middle">P.E. = 100.00°C</text>
                <text x="150" y="450" fill="#E65100" font-size="10" text-anchor="middle">Densidad fija</text>

                <!-- Ley Proust -->
                <rect x="550" y="380" width="200" height="100" fill="#E8F5E9" rx="15"/>
                <text x="650" y="410" fill="#1B5E20" font-size="12" text-anchor="middle">Ley Proporciones</text>
                <text x="650" y="430" fill="#2E7D32" font-size="10" text-anchor="middle">Definidas (Proust)</text>

                <!-- NIST -->
                <text x="400" y="470" fill="#1B5E20" font-size="14" text-anchor="middle">NIST 2025: H₂O = 2.016 : 15.999</text>

                <!-- Marcador -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#2E7D32"/>
                    </marker>
                </defs>
            </svg>
            <p><em>SVG Animado: Electrólisis de H₂O → H₂ + O₂ con propiedades fijas.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Sustancia pura incluye', 'respuesta' => 'Elementos, compuestos'],
        ['enunciado' => 'Separación de compuesto', 'respuesta' => 'Química (electrólisis)'],
        ['enunciado' => 'Propiedades', 'respuesta' => 'Constantes (P.F., P.E.)'],

        // === APLICADOS ===
        ['enunciado' => 'P.F. NaCl', 'respuesta' => '801°C'],
        ['enunciado' => 'P.E. Au', 'respuesta' => '2970°C'],
        ['enunciado' => '% O en CO₂', 'respuesta' => '72.71%'],

        // === QUÍMICOS ===
        ['enunciado' => 'Electrólisis H₂O', 'respuesta' => '2H₂O → 2H₂ + O₂'],
        ['enunciado' => 'Ley Proust en H₂O', 'respuesta' => 'Siempre 11.19% H'],
        ['enunciado' => 'Composición NaCl', 'respuesta' => '39.34% Na, 60.66% Cl'],

        // === AVANZADOS ===
        ['enunciado' => 'NIST: P.F. H₂O exacto', 'respuesta' => '0.000°C'],
        ['enunciado' => 'IUPAC: elementos totales 2025', 'respuesta' => '118'],
        ['enunciado' => 'Separar O₂ de aire', 'respuesta' => 'Destilación fraccionada (física, pero aire es mezcla)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Sustanciasar puras tienen...', 'opciones' => ['Composición fija', 'Variable', 'Aleatoria', 'Ninguna'], 'correcta' => 'Composición fija'],
        ['pregunta' => 'Elemento es...', 'opciones' => ['Un tipo de átomo', 'Mezcla', 'Compuesto', 'Solución'], 'correcta' => 'Un tipo de átomo'],
        ['pregunta' => 'Compuesto ejemplo', 'opciones' => ['CO₂', 'Aire', 'Agua salada', 'Suelo'], 'correcta' => 'CO₂'],
        ['pregunta' => 'Separar H₂O en H₂ y O₂', 'opciones' => ['Electrólisis', 'Filtración', 'Destilación', 'Decantación'], 'correcta' => 'Electrólisis'],
        ['pregunta' => 'Agua es...', 'opciones' => ['Compuesto', 'Elemento', 'Mezcla', 'Plasma'], 'correcta' => 'Compuesto'],
        ['pregunta' => 'Oro es...', 'opciones' => ['Elemento', 'Compuesto', 'Mezcla', 'Solución'], 'correcta' => 'Elemento'],
        ['pregunta' => 'Propiedades puras son...', 'opciones' => ['Constantes', 'Variables', 'Aleatorias', 'Ninguna'], 'correcta' => 'Constantes'],
        ['pregunta' => 'Punto fusión H₂O', 'opciones' => ['0°C', '100°C', '-78°C', '801°C'], 'correcta' => '0°C'],
        ['pregunta' => 'Ley Proust dice...', 'opciones' => ['Composición fija', 'Masa variable', 'Volumen constante', 'Color cambia'], 'correcta' => 'Composición fija'],
        ['pregunta' => 'NaCl se descompone por...', 'opciones' => ['Electrólisis', 'Evaporación', 'Filtración', 'Sublimación'], 'correcta' => 'Electrólisis'],

        // === MEDIO (10) ===
        ['pregunta' => '% O en CO₂', 'opciones' => ['72.71%', '27.29%', '50%', '11.19%'], 'correcta' => '72.71%'],
        ['pregunta' => 'Electrólisis H₂O produce...', 'opciones' => ['2H₂ + O₂', 'H₂ + O₂', '2H₂O', 'CO₂'], 'correcta' => '2H₂ + O₂'],
        ['pregunta' => 'P.F. NaCl', 'opciones' => ['801°C', '0°C', '1064°C', '1465°C'], 'correcta' => '801°C'],
        ['pregunta' => 'Densidad Au', 'opciones' => ['19.30 g/cm³', '1.000 g/cm³', '2.165 g/cm³', '0.789 g/cm³'], 'correcta' => '19.30 g/cm³'],
        ['pregunta' => 'Composición H₂O', 'opciones' => ['11.19% H', '50% H', '88.81% H', '100% H'], 'correcta' => '11.19% H'],
        ['pregunta' => 'IUPAC: elementos totales', 'opciones' => ['118', '100', '92', '150'], 'correcta' => '118'],
        ['pregunta' => 'CaCO₃ se descompone por...', 'opciones' => ['Calor', 'Luz', 'Presión', 'Agua'], 'correcta' => 'Calor'],
        ['pregunta' => 'P.E. CO₂', 'opciones' => ['Sublima a -78.5°C', '100°C', '0°C', '1465°C'], 'correcta' => 'Sublima a -78.5°C'],
        ['pregunta' => 'Separar NaCl en Na y Cl', 'opciones' => ['Electrólisis fundido', 'Destilación', 'Filtración', 'Decantación'], 'correcta' => 'Electrólisis fundido'],
        ['pregunta' => 'Propiedad intensiva en puros', 'opciones' => ['Densidad', 'Volumen', 'Masa', 'Área'], 'correcta' => 'Densidad'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'NIST: P.F. H₂O exacto', 'opciones' => ['0.000°C', '0.01°C', '0.00°C', '0.0000°C'], 'correcta' => '0.000°C'],
        ['pregunta' => 'Relación H:O en H₂O', 'opciones' => ['2:1 átomos', '1:1', '1:2', '3:1'], 'correcta' => '2:1 átomos'],
        ['pregunta' => 'Ley proporciones múltiples', 'opciones' => ['CO y CO₂', 'H₂O y H₂O₂', 'NaCl y KCl', 'Au y Ag'], 'correcta' => 'CO y CO₂'],
        ['pregunta' => 'Descomposición térmica HgO', 'opciones' => ['2HgO → 2Hg + O₂', 'HgO → HgO', 'Hg → O₂', 'O₂ → Hg'], 'correcta' => '2HgO → 2Hg + O₂'],
        ['pregunta' => 'Punto triple H₂O', 'opciones' => ['0.01°C, 611.7 Pa', '0.00°C, 1 atm', '100°C, 1 atm', '374°C, 22.1 MPa'], 'correcta' => '0.01°C, 611.7 Pa'],
        ['pregunta' => 'Diamante es...', 'opciones' => ['Elemento (C)', 'Compuesto', 'Mezcla', 'Aleación'], 'correcta' => 'Elemento (C)'],
        ['pregunta' => 'Grafito y diamante son...', 'opciones' => ['Alótropos', 'Isótopos', 'Iones', 'Mezclas'], 'correcta' => 'Alótropos'],
        ['pregunta' => 'O₂ y O₃ son...', 'opciones' => ['Alótropos', 'Isótopos', 'Compuestos', 'Mezclas'], 'correcta' => 'Alótropos'],
        ['pregunta' => 'Ley conservación masa en...', 'opciones' => ['Reacción química', 'Mezcla', 'Fusión', 'Evaporación'], 'correcta' => 'Reacción química'],
        ['pregunta' => 'IUPAC define compuesto como...', 'opciones' => ['Unión química fija', 'Mezcla física', 'Elemento', 'Plasma'], 'correcta' => 'Unión química fija']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Elementos y Compuestos (Tabla Periódica, Fórmulas, Alótropos, Proporciones Fijas)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'elementos-compuestos',
    'titulo' => 'Elementos y Compuestos: Los Ladrillos del Universo',
    'contenido' => '
        <h3>Elementos y Compuestos</h3>
        <p>Los <strong>elementos</strong> son sustancias puras de <strong>un solo tipo de átomo</strong>. Los <strong>compuestos</strong> son <strong>uniones químicas</strong> de dos o más elementos en <strong>proporciones fijas</strong>.</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Elementos</h4>
        <ul>
            <li><strong>118 elementos confirmados (IUPAC 2025)</strong></li>
            <li><strong>Organizados en la Tabla Periódica</strong></li>
            <li><strong>Símbolos: 1 o 2 letras (H, He, Li... Og)</strong></li>
            <li><strong>No descomponibles químicamente</strong></li>
        </ul>

        <table class="table">
            <thead>
                <tr><th>Símbolo</th><th>Nombre</th><th>N° Atómico</th><th>Masa (u)</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>H</strong></td><td>Hidrógeno</td><td>1</td><td>1.008</td></tr>
                <tr><td><strong>He</strong></td><td>Helio</td><td>2</td><td>4.0026</td></tr>
                <tr><td><strong>Fe</strong></td><td>Hierro</td><td>26</td><td>55.845</td></tr>
                <tr><td><strong>Au</strong></td><td>Oro</td><td>79</td><td>196.967</td></tr>
                <tr><td><strong>Og</strong></td><td>Oganesón</td><td>118</td><td>[294]</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Compuestos</h4>
        <ul>
            <li><strong>Fórmula química</strong> → indica elementos y proporción</li>
            <li><strong>Proporciones fijas (Ley de Proust)</strong></li>
            <li><strong>Separables solo por reacción química</strong></li>
        </ul>

        <table class="table">
            <thead>
                <tr><th>Fórmula</th><th>Nombre</th><th>Elementos</th><th>Proporción</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>H₂O</strong></td><td>Agua</td><td>H, O</td><td>2:1</td></tr>
                <tr><td><strong>CO₂</strong></td><td>Dióxido de carbono</td><td>C, O</td><td>1:2</td></tr>
                <tr><td><strong>NaCl</strong></td><td>Cloruro de sodio</td><td>Na, Cl</td><td>1:1</td></tr>
                <tr><td><strong>H₂SO₄</strong></td><td>Ácido sulfúrico</td><td>H, S, O</td><td>2:1:4</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Carbono (C)</strong> → elemento. <strong>Dióxido de carbono (CO₂)</strong> → compuesto (1C + 2O).</p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Tabla Periódica (IUPAC 2025)</h4>
        <ul>
            <li><strong>7 períodos, 18 grupos</strong></li>
            <li><strong>Metales, no metales, metaloides</strong></li>
            <li><strong>Alótropos:</strong> misma composición, estructura distinta (C: diamante, grafito)</li>
        </ul>

        <div class="visual">
            <img src="assets/img/tabla-periodica.png" alt="Tabla Periódica IUPAC 2025">
            <p><em>Tabla Periódica (IUPAC 2025). Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. Ley de Proporciones Definidas</h4>
        <p>\[
            \\text{En un compuesto, los elementos están en proporción fija por masa}
        \]</p>
        <p>Ejemplo: H₂O → siempre 11.19% H, 88.81% O</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>5. SVG Animado: Formación de H₂O</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>

                <!-- Título -->
                <text x="400" y="50" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">FORMACIÓN DE H₂O</text>

                <!-- Hidrógeno -->
                <g id="h2">
                    <circle cx="200" cy="200" r="40" fill="#2196F3">
                        <animate attributeName="r" values="40;50;40" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="200" y="195" fill="white" font-size="16" text-anchor="middle">H</text>
                    <text x="200" y="215" fill="#BBDEFB" font-size="12" text-anchor="middle">1.008 u</text>

                    <circle cx="300" cy="200" r="40" fill="#2196F3">
                        <animate attributeName="r" values="40;50;40" begin="0.5s" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="300" y="195" fill="white" font-size="16" text-anchor="middle">H</text>
                </g>

                <!-- Oxígeno -->
                <g id="o">
                    <circle cx="600" cy="200" r="60" fill="#F44336">
                        <animate attributeName="r" values="60;70;60" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="600" y="190" fill="white" font-size="18" text-anchor="middle">O</text>
                    <text x="600" y="215" fill="#FFCDD2" font-size="12" text-anchor="middle">15.999 u</text>
                </g>

                <!-- Reacción -->
                <path d="M350 200 L450 200" stroke="#1976D2" stroke-width="6" marker-end="url(#arrow)">
                    <animate attributeName="stroke-dashoffset" values="0;100" dur="3s" repeatCount="indefinite"/>
                </path>
                <text x="400" y="180" fill="#1565C0" font-size="14" text-anchor="middle">Reacción química</text>

                <!-- H₂O -->
                <g id="h2o" opacity="0">
                    <ellipse cx="400" cy="350" rx="80" ry="60" fill="#90CAF9"/>
                    <text x="400" y="340" fill="#0D47A1" font-size="18" text-anchor="middle">H₂O</text>
                    <text x="400" y="365" fill="#1565C0" font-size="12" text-anchor="middle">18.016 u</text>
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="1s"/>
                </g>

                <!-- Proporción -->
                <rect x="50" y="380" width="200" height="100" fill="#E8F5E9" rx="15"/>
                <text x="150" y="410" fill="#1B5E20" font-size="12" text-anchor="middle">2H : 1O</text>
                <text x="150" y="430" fill="#2E7D32" font-size="10" text-anchor="middle">11.19% H</text>
                <text x="150" y="450" fill="#1B5E20" font-size="10" text-anchor="middle">88.81% O</text>

                <!-- Alótropos -->
                <rect x="550" y="380" width="200" height="100" fill="#FFF3E0" rx="15"/>
                <text x="650" y="410" fill="#E65100" font-size="12" text-anchor="middle">Alótropos C</text>
                <text x="650" y="430" fill="#FF6F00" font-size="10" text-anchor="middle">Diamante</text>
                <text x="650" y="450" fill="#E65100" font-size="10" text-anchor="middle">Grafito</text>

                <!-- IUPAC -->
                <text x="400" y="470" fill="#1565C0" font-size="14" text-anchor="middle">IUPAC 2025: 118 Elementos</text>

                <!-- Marcador -->
                <defs>
                    <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="7.5" orient="auto">
                        <path d="M0,0 L0,15 L15,7.5 z" fill="#1976D2"/>
                    </marker>
                </defs>
            </svg>
            <p><em>SVG Animado: 2H + O → H₂O con proporciones y alótropos.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Elemento ejemplo', 'respuesta' => 'Hierro (Fe)'],
        ['enunciado' => 'Compuesto ejemplo', 'respuesta' => 'Ácido sulfúrico (H₂SO₄)'],
        ['enunciado' => 'Total elementos 2025', 'respuesta' => '118'],

        // === APLICADOS ===
        ['enunciado' => 'Fórmula agua', 'respuesta' => 'H₂O'],
        ['enunciado' => 'Proporción H:O en H₂O', 'respuesta' => '2:1'],
        ['enunciado' => '% O en CO₂', 'respuesta' => '72.71%'],

        // === QUÍMICOS ===
        ['enunciado' => 'Elemento más abundante Tierra', 'respuesta' => 'Oxígeno (O)'],
        ['enunciado' => 'Alótropos del carbono', 'respuesta' => 'Diamante, grafito, fullereno'],
        ['enunciado' => 'Ley Proust en NaCl', 'respuesta' => '39.34% Na, 60.66% Cl'],

        // === AVANZADOS ===
        ['enunciado' => 'NIST: masa H exacta', 'respuesta' => '1.00784 u'],
        ['enunciado' => 'IUPAC: último elemento', 'respuesta' => 'Oganesón (Og)'],
        ['enunciado' => 'Compuesto con más elementos', 'respuesta' => 'Ej. ADN (C, H, O, N, P)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Elementos son...', 'opciones' => ['Un tipo de átomo', 'Mezcla', 'Compuesto', 'Solución'], 'correcta' => 'Un tipo de átomo'],
        ['pregunta' => 'Compuestos tienen...', 'opciones' => ['Proporciones fijas', 'Variables', 'Aleatorias', 'Ninguna'], 'correcta' => 'Proporciones fijas'],
        ['pregunta' => 'Tabla periódica contiene...', 'opciones' => ['Elementos', 'Compuestos', 'Mezclas', 'Reacciones'], 'correcta' => 'Elementos'],
        ['pregunta' => 'NaCl es...', 'opciones' => ['Compuesto', 'Elemento', 'Mezcla', 'Gas'], 'correcta' => 'Compuesto'],
        ['pregunta' => 'H₂O contiene...', 'opciones' => ['2H + O', 'H + O', 'H₂ + O₂', 'H + O₂'], 'correcta' => '2H + O'],
        ['pregunta' => 'Símbolo oro', 'opciones' => ['Au', 'Ag', 'Fe', 'O'], 'correcta' => 'Au'],
        ['pregunta' => 'Número atómico H', 'opciones' => ['1', '2', '8', '26'], 'correcta' => '1'],
        ['pregunta' => 'CO₂ es...', 'opciones' => ['Compuesto', 'Elemento', 'Mezcla', 'Plasma'], 'correcta' => 'Compuesto'],
        ['pregunta' => 'Diamante es...', 'opciones' => ['Carbono (C)', 'Oxígeno', 'Hidrógeno', 'Hierro'], 'correcta' => 'Carbono (C)'],
        ['pregunta' => 'Ley Proust aplica a...', 'opciones' => ['Compuestos', 'Elementos', 'Mezclas', 'Gases'], 'correcta' => 'Compuestos'],

        // === MEDIO (10) ===
        ['pregunta' => '% O en H₂O', 'opciones' => ['88.81%', '11.19%', '50%', '100%'], 'correcta' => '88.81%'],
        ['pregunta' => 'Masa molar H₂O', 'opciones' => ['18.016 u', '16 u', '2 u', '32 u'], 'correcta' => '18.016 u'],
        ['pregunta' => 'Alótropos del oxígeno', 'opciones' => ['O₂ y O₃', 'O y O₂', 'O₂ y H₂O', 'O y CO₂'], 'correcta' => 'O₂ y O₃'],
        ['pregunta' => 'Número elementos naturales', 'opciones' => ['92', '118', '100', '150'], 'correcta' => '92'],
        ['pregunta' => 'Símbolo último elemento', 'opciones' => ['Og', 'Uuo', 'Lv', 'Ts'], 'correcta' => 'Og'],
        ['pregunta' => 'Fórmula ácido sulfúrico', 'opciones' => ['H₂SO₄', 'HCl', 'HNO₃', 'NaOH'], 'correcta' => 'H₂SO₄'],
        ['pregunta' => 'Elemento más ligero', 'opciones' => ['Hidrógeno', 'Helio', 'Litio', 'Carbono'], 'correcta' => 'Hidrógeno'],
        ['pregunta' => 'Grafito conduce...', 'opciones' => ['Electricidad', 'Calor', 'Luz', 'Sonido'], 'correcta' => 'Electricidad'],
        ['pregunta' => 'Diamante es...', 'opciones' => ['Aislante', 'Conductor', 'Semiconductor', 'Superconductor'], 'correcta' => 'Aislante'],
        ['pregunta' => 'IUPAC 2025: elementos totales', 'opciones' => ['118', '117', '119', '120'], 'correcta' => '118'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'NIST: masa exacta H', 'opciones' => ['1.00784 u', '1.008 u', '1.000 u', '2.014 u'], 'correcta' => '1.00784 u'],
        ['pregunta' => 'Relación masa H:O en H₂O', 'opciones' => ['1:8', '1:16', '2:1', '1:1'], 'correcta' => '1:8'],
        ['pregunta' => 'Oganesón (Og) es...', 'opciones' => ['Sintético', 'Natural', 'Gas noble', 'Metal'], 'correcta' => 'Sintético'],
        ['pregunta' => 'Ley proporciones múltiples', 'opciones' => ['CO y CO₂', 'H₂O y H₂O₂', 'NaCl y KCl', 'Fe y Au'], 'correcta' => 'CO y CO₂'],
        ['pregunta' => 'Fullereno es alótropo de...', 'opciones' => ['Carbono', 'Oxígeno', 'Fósforo', 'Azufre'], 'correcta' => 'Carbono'],
        ['pregunta' => 'Elemento con más isótopos estables', 'opciones' => ['Estaño (Sn)', 'Carbono', 'Hidrógeno', 'Oxígeno'], 'correcta' => 'Estaño (Sn)'],
        ['pregunta' => 'Símbolo provisional Uup', 'opciones' => ['Mc (Moscovio)', 'Og', 'Ts', 'Lv'], 'correcta' => 'Mc (Moscovio)'],
        ['pregunta' => 'Compuesto con fórmula C₆H₁₂O₆', 'opciones' => ['Glucosa', 'Metano', 'Etanol', 'Ácido cítrico'], 'correcta' => 'Glucosa'],
        ['pregunta' => 'Elemento más electronegativo', 'opciones' => ['Flúor (F)', 'Oxígeno', 'Cloro', 'Nitrógeno'], 'correcta' => 'Flúor (F)'],
        ['pregunta' => 'IUPAC define elemento como...', 'opciones' => ['Especie con mismo Z', 'Misma masa', 'Mismo volumen', 'Mismo color'], 'correcta' => 'Especie con mismo Z']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Tipos de Mezclas (Homogéneas, Heterogéneas, Soluciones, Suspensiones, Coloides, Emulsiones)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'tipos-mezclas',
    'titulo' => 'Tipos de Mezclas: Desde Soluciones hasta Coloides',
    'contenido' => '
        <h3>Tipos de Mezclas</h3>
        <p>Las <strong>mezclas</strong> se clasifican por su <strong>uniformidad</strong> y <strong>tamaño de partícula</strong>. No tienen fórmula química fija.</p>

        <hr style="border:1px dashed #FF9800;">

        <h4>1. Clasificación General</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Uniformidad</th><th>Tamaño Partícula</th><th>Efecto Tyndall</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Homogénea</strong></td><td>Sí</td><td>&lt; 1 nm</td><td>No</td></tr>
                <tr><td><strong>Heterogénea</strong></td><td>No</td><td>&gt; 1 nm</td><td>Sí</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #FF9800;">

        <h4>2. Subtipos de Mezclas</h4>
        <table class="table">
            <thead>
                <tr><th>Subtipo</th><th>Tipo</th><th>Tamaño (nm)</th><th>Ejemplo</th><th>Estabilidad</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Solución</strong></td><td>Homogénea</td><td>&lt; 1</td><td>Sal en agua</td><td>Estable</td></tr>
                <tr><td><strong>Coloide</strong></td><td>Heterogénea</td><td>1–1000</td><td>Leche</td><td>Estable</td></tr>
                <tr><td><strong>Suspensión</strong></td><td>Heterogénea</td><td>&gt; 1000</td><td>Arena en agua</td><td>Inestable</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #FF9800;">

        <h4>3. Tipos de Coloides</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Disperso</th><th>Medio</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Sol</strong></td><td>Sólido</td><td>Líquido</td><td>Pintura</td></tr>
                <tr><td><strong>Gel</strong></td><td>Líquido</td><td>Sólido</td><td>Gelatina</td></tr>
                <tr><td><strong>Emulsión</strong></td><td>Líquido</td><td>Líquido</td><td>Mayonesa</td></tr>
                <tr><td><strong>Espuma</strong></td><td>Gas</td><td>Líquido</td><td>Crema batida</td></tr>
                <tr><td><strong>Aerosol</strong></td><td>Líquido/Sólido</td><td>Gas</td><td>Niebla, humo</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Vino</strong> → solución (homogénea). <strong>Mayonesa</strong> → emulsión (coloide). <strong>Granola</strong> → suspensión (heterogénea).</p>
        </div>

        <hr style="border:1px dashed #FF9800;">

        <h4>4. Efecto Tyndall</h4>
        <p>Dispersión de luz por partículas:</p>
        <ul>
            <li><strong>Soluciones:</strong> No (partículas &lt; 1 nm)</li>
            <li><strong>Coloides:</strong> Sí (1–1000 nm)</li>
            <li><strong>Suspensiones:</strong> Sí (fuerte, &gt; 1000 nm)</li>
        </ul>

        <hr style="border:1px dashed #FF9800;">

        <h4>5. Métodos de Identificación</h4>
        <table class="table">
            <thead>
                <tr><th>Prueba</th><th>Solución</th><th>Coloide</th><th>Suspensión</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Visual</strong></td><td>Transparente</td><td>Opalescente</td><td>Turbia</td></tr>
                <tr><td><strong>Sedimentación</strong></td><td>No</td><td>No</td><td>Sí</td></tr>
                <tr><td><strong>Filtración</strong></td><td>Pasa</td><td>No pasa</td><td>No pasa</td></tr>
                <tr><td><strong>Efecto Tyndall</strong></td><td>No</td><td>Sí</td><td>Sí</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/clasificacion-mezclas.jpeg" alt="Clasificación de mezclas">
            <p><em>Clasificación detallada. Fuente: LibreTexts.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/coloides.png" alt="Tipos de coloides">
            <p><em>Tipos de coloides. Fuente: ThoughtCo.</em></p>
        </div>

        <hr style="border:1px dashed #FF9800;">

        <h4>6. SVG Animado: Efecto Tyndall y Clasificación</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#FFF3E0"/>

                <!-- Título -->
                <text x="400" y="50" fill="#E65100" font-size="28" text-anchor="middle" font-weight="bold">TIPOS DE MEZCLAS</text>

                <!-- Solución -->
                <g id="solucion">
                    <rect x="80" y="150" width="140" height="180" fill="#2196F3" rx="20">
                        <animate attributeName="opacity" values="1;0.8;1" dur="3s" repeatCount="indefinite"/>
                    </rect>
                    <text x="150" y="200" fill="white" font-size="16" text-anchor="middle">SOLUCIÓN</text>
                    <text x="150" y="230" fill="#BBDEFB" font-size="12" text-anchor="middle">Sal + Agua</text>
                    <text x="150" y="260" fill="#E3F2FD" font-size="10" text-anchor="middle">&lt; 1 nm</text>
                    <text x="150" y="290" fill="#E3F2FD" font-size="10" text-anchor="middle">Tyndall: No</text>
                </g>

                <!-- Coloide -->
                <g id="coloide">
                    <rect x="320" y="150" width="140" height="180" fill="#FF9800" rx="20">
                        <animate attributeName="opacity" values="0.8;1;0.8" begin="1s" dur="3s" repeatCount="indefinite"/>
                    </rect>
                    <text x="390" y="200" fill="white" font-size="16" text-anchor="middle">COLOIDE</text>
                    <text x="390" y="230" fill="#FFF3E0" font-size="12" text-anchor="middle">Leche</text>
                    <text x="390" y="260" fill="#FFF3E0" font-size="10" text-anchor="middle">1–1000 nm</text>
                    <text x="390" y="290" fill="#FFF3E0" font-size="10" text-anchor="middle">Tyndall: Sí</text>
                </g>

                <!-- Suspensión -->
                <g id="suspension">
                    <rect x="560" y="150" width="140" height="180" fill="#F44336" rx="20">
                        <animate attributeName="opacity" values="0.8;1;0.8" begin="1.5s" dur="3s" repeatCount="indefinite"/>
                    </rect>
                    <text x="630" y="200" fill="white" font-size="16" text-anchor="middle">SUSPENSIÓN</text>
                    <text x="630" y="230" fill="#FFCDD2" font-size="12" text-anchor="middle">Arena + Agua</text>
                    <text x="630" y="260" fill="#FFCDD2" font-size="10" text-anchor="middle">&gt; 1000 nm</text>
                    <text x="630" y="290" fill="#FFCDD2" font-size="10" text-anchor="middle">Sedimenta</text>
                </g>

                <!-- Efecto Tyndall -->
                <g id="tyndall" opacity="0">
                    <rect x="200" y="360" width="400" height="100" fill="#E8F5E9" rx="20"/>
                    <text x="400" y="390" fill="#1B5E20" font-size="14" text-anchor="middle">EFECTO TYNDALL</text>
                    <line x1="250" y1="410" x2="350" y2="410" stroke="#2E7D32" stroke-width="4"/>
                    <text x="300" y="435" fill="#2E7D32" font-size="12" text-anchor="middle">Luz dispersada</text>
                    <animate attributeName="opacity" values="0;1" begin="3s" dur="1s"/>
                </g>

                <!-- Mayonesa -->
                <g id="emulsion" opacity="0">
                    <circle cx="100" cy="420" r="30" fill="#FFEB3B"/>
                    <text x="100" y="415" fill="#E65100" font-size="10" text-anchor="middle">Mayonesa</text>
                    <text x="100" y="435" fill="#E65100" font-size="8" text-anchor="middle">Emulsión</text>
                    <animate attributeName="opacity" values="0;1" begin="4s" dur="1s"/>
                </g>

                <!-- Datos -->
                <text x="400" y="470" fill="#E65100" font-size="14" text-anchor="middle">IUPAC 2025: Coloide = 1–1000 nm</text>
            </svg>
            <p><em>SVG Animado: Clasificación + Efecto Tyndall + Emulsión.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Mezcla homogénea ejemplo', 'respuesta' => 'Aleación, vino'],
        ['enunciado' => 'Mezcla heterogénea ejemplo', 'respuesta' => 'Granola, sopa'],
        ['enunciado' => 'Coloide ejemplo', 'respuesta' => 'Leche, gelatina'],

        // === APLICADOS ===
        ['enunciado' => 'Emulsión ejemplo', 'respuesta' => 'Mayonesa, crema'],
        ['enunciado' => 'Suspensión se separa por', 'respuesta' => 'Sedimentación'],
        ['enunciado' => 'Solución pasa filtro', 'respuesta' => 'Sí'],

        // === QUÍMICOS ===
        ['enunciado' => 'Efecto Tyndall en leche', 'respuesta' => 'Sí'],
        ['enunciado' => 'Tamaño partícula coloide', 'respuesta' => '1–1000 nm'],
        ['enunciado' => 'Gel es coloide de', 'respuesta' => 'Líquido en sólido'],

        // === AVANZADOS ===
        ['enunciado' => 'IUPAC: límite coloide', 'respuesta' => '1000 nm'],
        ['enunciado' => 'Aerosol ejemplo', 'respuesta' => 'Niebla, humo'],
        ['enunciado' => 'Estabilizador en emulsión', 'respuesta' => 'Emulsionante (ej. lecitina)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Mezcla homogénea tiene...', 'opciones' => ['Apariencia uniforme', 'Fases visibles', 'Sedimento', 'Turbidez'], 'correcta' => 'Apariencia uniforme'],
        ['pregunta' => 'Mezcla heterogénea tiene...', 'opciones' => ['Fases visibles', 'Uniforme', 'Transparente', 'Estable'], 'correcta' => 'Fases visibles'],
        ['pregunta' => 'Solución es...', 'opciones' => ['Homogénea', 'Heterogénea', 'Pura', 'Elemento'], 'correcta' => 'Homogénea'],
        ['pregunta' => 'Suspensión se separa por...', 'opciones' => ['Sedimentación', 'Destilación', 'Química', 'Luz'], 'correcta' => 'Sedimentación'],
        ['pregunta' => 'Leche es...', 'opciones' => ['Coloide', '', 'Solución', 'Suspensión', 'Pura'], 'correcta' => 'Coloide'],
        ['pregunta' => 'Mayonesa es...', 'opciones' => ['Emulsión', 'Solución', 'Suspensión', 'Gel'], 'correcta' => 'Emulsión'],
        ['pregunta' => 'Efecto Tyndall en solución', 'opciones' => ['No', 'Sí', 'Fuerte', 'Débil'], 'correcta' => 'No'],
        ['pregunta' => 'Arena en agua es...', 'opciones' => ['Suspensión', 'Solución', 'Coloide', 'Gas'], 'correcta' => 'Suspensión'],
        ['pregunta' => 'Vino es...', 'opciones' => ['Solución', 'Coloide', 'Suspensión', 'Elemento'], 'correcta' => 'Solución'],
        ['pregunta' => 'Gelatina es...', 'opciones' => ['Gel (coloide)', 'Solución', 'Emulsión', 'Aerosol'], 'correcta' => 'Gel (coloide)'],

        // === MEDIO (10) ===
        ['pregunta' => 'Tamaño partícula solución', 'opciones' => ['&lt; 1 nm', '1–1000 nm', '&gt; 1000 nm', '0 nm'], 'correcta' => '&lt; 1 nm'],
        ['pregunta' => 'Tamaño partícula coloide', 'opciones' => ['1–1000 nm', '&lt; 1 nm', '&gt; 1000 nm', '0 nm'], 'correcta' => '1–1000 nm'],
        ['pregunta' => 'Tamaño partícula suspensión', 'opciones' => ['&gt; 1000 nm', '1–1000 nm', '&lt; 1 nm', '0 nm'], 'correcta' => '&gt; 1000 nm'],
        ['pregunta' => 'Efecto Tyndall en leche', 'opciones' => ['Sí', 'No', 'Solo calor', 'Solo luz'], 'correcta' => 'Sí'],
        ['pregunta' => 'Emulsión es...', 'opciones' => ['Líquido en líquido', 'Sólido en líquido', 'Gas en líquido', 'Líquido en gas'], 'correcta' => 'Líquido en líquido'],
        ['pregunta' => 'Niebla es...', 'opciones' => ['Aerosol líquido', 'Espuma', 'Gel', 'Emulsión'], 'correcta' => 'Aerosol líquido'],
        ['pregunta' => 'Humo es...', 'opciones' => ['Aerosol sólido', 'Espuma', 'Gel', 'Emulsión'], 'correcta' => 'Aerosol sólido'],
        ['pregunta' => 'Pintura es...', 'opciones' => ['Sol (coloide)', 'Solución', 'Suspensión', 'Emulsión'], 'correcta' => 'Sol (coloide)'],
        ['pregunta' => 'Crema batida es...', 'opciones' => ['Espuma', 'Gel', 'Emulsión', 'Aerosol'], 'correcta' => 'Espuma'],
        ['pregunta' => 'IUPAC: límite superior coloide', 'opciones' => ['1000 nm', '1 nm', '100 nm', '10,000 nm'], 'correcta' => '1000 nm'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Estabilizador en mayonesa', 'opciones' => ['Lecitina (emulsionante)', 'Sal', 'Azúcar', 'Agua'], 'correcta' => 'Lecitina (emulsionante)'],
        ['pregunta' => 'Diálisis separa...', 'opciones' => ['Coloides de soluciones', 'Suspensiones', 'Gases', 'Sólidos'], 'correcta' => 'Coloides de soluciones'],
        ['pregunta' => 'Coagulación en coloides por...', 'opciones' => ['Electrolitos', 'Calor', 'Luz', 'Presión'], 'correcta' => 'Electrolitos'],
        ['pregunta' => 'Browniano en coloides', 'opciones' => ['Movimiento zig-zag', 'Sedimentación', 'Flotación', 'Evaporación'], 'correcta' => 'Movimiento zig-zag'],
        ['pregunta' => 'Electroforesis separa...', 'opciones' => ['Por carga', 'Por masa', 'Por color', 'Por pH'], 'correcta' => 'Por carga'],
        ['pregunta' => 'Gel de sílice es...', 'opciones' => ['Sólido en gas', 'Líquido en sólido', 'Gas en líquido', 'Sólido en líquido'], 'correcta' => 'Líquido en sólido'],
        ['pregunta' => 'Nube es...', 'opciones' => ['Aerosol líquido', 'Espuma', 'Emulsión', 'Suspensión'], 'correcta' => 'Aerosol líquido'],
        ['pregunta' => 'Protección coloidal por...', 'opciones' => ['Capa adsorbida', 'Calor', 'Luz', 'Sonido'], 'correcta' => 'Capa adsorbida'],
        ['pregunta' => 'Luz láser en coloide muestra...', 'opciones' => ['Trayecto visible', 'Nada', 'Explosión', 'Calor'], 'correcta' => 'Trayecto visible'],
        ['pregunta' => 'IUPAC define coloide como sistema con...', 'opciones' => ['Partículas 1–1000 nm', 'Menos de 1 nm', 'Más de 1000 nm', 'Gases'], 'correcta' => 'Partículas 1–1000 nm']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Métodos de Separación de Mezclas (Físicos, Industriales, Analíticos)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'metodos-separacion-mezcla',
    'titulo' => 'Métodos de Separación de Mezclas: Física Pura en Acción',
    'contenido' => '
        <h3>Métodos de Separación de Mezclas</h3>
        <p>Los <strong>métodos físicos</strong> aprovechan <strong>diferencias en propiedades</strong> (tamaño, densidad, volatilidad, solubilidad, afinidad) para separar componentes sin alterar su composición química.</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Métodos Principales</h4>
        <table class="table">
            <thead>
                <tr><th>Método</th><th>Principio</th><th>Ejemplo</th><th>Uso Industrial</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Filtración</strong></td><td>Tamaño partícula</td><td>Arena + agua</td><td>Agua potable</td></tr>
                <tr><td><strong>Destilación</strong></td><td>Punto ebullición</td><td>Alcohol + agua</td><td>Petróleo, alcohol</td></tr>
                <tr><td><strong>Decantación</strong></td><td>Densidad</td><td>Aceite + agua</td><td>Refinerías</td></tr>
                <tr><td><strong>Evaporación</strong></td><td>Volatilidad</td><td>Sal de mar</td><td>Salinas</td></tr>
                <tr><td><strong>Cromatografía</strong></td><td>Afinidad fase</td><td>Tintas</td><td>Análisis ADN</td></tr>
                <tr><td><strong>Centrifugación</strong></td><td>Densidad + fuerza</td><td>Sangre</td><td>Laboratorios</td></tr>
                <tr><td><strong>Sublimación</strong></td><td>Volatilidad sólida</td><td>Yodo + sal</td><td>Purificación</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Detalles Técnicos</h4>
        <table class="table">
            <thead>
                <tr><th>Método</th><th>Equipo</th><th>Propiedad Clave</th><th>Límite</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Destilación simple</strong></td><td>Matraz + condensador</td><td>ΔT > 25°C</td><td>No azeótropos</td></tr>
                <tr><td><strong>Destilación fraccionada</strong></td><td>Columna</td><td>ΔT > 5°C</td><td>Petróleo</td></tr>
                <tr><td><strong>Cromatografía en papel</strong></td><td>Papel + solvente</td><td>Rf</td><td>Cualitativo</td></tr>
                <tr><td><strong>Centrifugación</strong></td><td>Centrifuga</td><td>g-force</td><td>100,000 g</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Agua salada</strong> → <strong>evaporación</strong> → NaCl sólido. <strong>Petróleo</strong> → <strong>destilación fraccionada</strong> → gasolina, diésel.</p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Fórmulas Clave</h4>
        <p>\[
            \\text{Rf (cromatografía)} = \\frac{\\text{distancia soluto}}{\\text{distancia solvente}}
        \]</p>
        <p>\[
            \\text{ΔT ebullición} = K_b \\cdot m \\cdot i
        \]</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. Aplicaciones Reales</h4>
        <ul>
            <li><strong>Destilación:</strong> 95% etanol (azeótropo)</li>
            <li><strong>Centrifugación:</strong> Separación plasma (4000 rpm)</li>
            <li><strong>Cromatografía GC-MS:</strong> Detección drogas</li>
        </ul>

        <div class="visual">
            <img src="assets/img/metodo-separacion_mezcla.jpg" alt="Métodos de separación">
            <p><em>Métodos físicos. Fuente: LibreTexts.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/destilacion-industrial.png" alt="Destilación fraccionada">
            <p><em>Destilación industrial. Fuente: ThoughtCo.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/instrumentos-laboratorio.jpg" alt="Equipo destilación">
            <p><em>Equipo de laboratorio. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>5. SVG Animado: Destilación Fraccionada</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>

                <!-- Título -->
                <text x="400" y="50" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">DESTILACIÓN FRACCIONADA</text>

                <!-- Matraz -->
                <g id="matraz">
                    <path d="M200 300 Q150 350 200 400 Q250 350 200 300" fill="#90CAF9" stroke="#1976D2" stroke-width="3"/>
                    <text x="200" y="350" fill="#1565C0" font-size="14" text-anchor="middle">Mezcla</text>
                    <animate attributeName="opacity" values="1;0.7;1" dur="3s" repeatCount="indefinite"/>
                </g>

                <!-- Columna -->
                <rect x="190" y="150" width="20" height="150" fill="#BBDEFB" rx="5"/>
                <text x="200" y="140" fill="#1565C0" font-size="12" text-anchor="middle">Columna</text>

                <!-- Vapor -->
                <g id="vapor" opacity="0">
                    <circle cx="200" cy="200" r="15" fill="#42A5F5">
                        <animate attributeName="cy" values="200;150;100;50" dur="2s" begin="1s" repeatCount="indefinite"/>
                    </circle>
                    <animate attributeName="opacity" values="0;1;0" dur="2s" begin="1s" repeatCount="indefinite"/>
                </g>

                <!-- Condensador -->
                <path d="M200 100 L300 100 L320 120 L280 120 Z" fill="#90A4AE"/>
                <text x="250" y="90" fill="#455A64" font-size="12" text-anchor="middle">Condensador</text>

                <!-- Recipiente -->
                <rect x="350" y="200" width="100" height="80" fill="#E3F2FD" rx="15"/>
                <text x="400" y="240" fill="#1565C0" font-size="14" text-anchor="middle">Destilado</text>

                <!-- Temperaturas -->
                <text x="100" y="320" fill="#1976D2" font-size="12">78°C</text>
                <text x="300" y="180" fill="#1976D2" font-size="12">100°C</text>

                <!-- Azeótropo -->
                <rect x="500" y="300" width="250" height="100" fill="#FFF3E0" rx="15"/>
                <text x="625" y="330" fill="#E65100" font-size="14" text-anchor="middle">Azeótropo Etanol-Agua</text>
                <text x="625" y="360" fill="#FF6F00" font-size="12" text-anchor="middle">95.6% Etanol</text>
                <text x="625" y="380" fill="#E65100" font-size="10" text-anchor="middle">No se separa más</text>

                <!-- IUPAC -->
                <text x="400" y="470" fill="#1565C0" font-size="14" text-anchor="middle">IUPAC 2025: Azeótropo = Mezcla Constante</text>
            </svg>
            <p><em>SVG Animado: Destilación fraccionada con azeótropo.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Filtración separa', 'respuesta' => 'Sólido de líquido'],
        ['enunciado' => 'Destilación por', 'respuesta' => 'Diferencia punto ebullición'],
        ['enunciado' => 'Decantación para', 'respuesta' => 'Líquidos inmiscibles'],

        // === APLICADOS ===
        ['enunciado' => 'Separar sal de agua', 'respuesta' => 'Evaporación'],
        ['enunciado' => 'Separar gasolina de petróleo', 'respuesta' => 'Destilación fraccionada'],
        ['enunciado' => 'Separar tinta negra', 'respuesta' => 'Cromatografía en papel'],

        // === QUÍMICOS ===
        ['enunciado' => 'Sublimación separa', 'respuesta' => 'Yodo de sal'],
        ['enunciado' => 'Centrifugación acelera', 'respuesta' => 'Decantación por densidad'],
        ['enunciado' => 'Rf = 0.75 significa', 'respuesta' => 'Soluto recorrió 75% del solvente'],

        // === AVANZADOS ===
        ['enunciado' => 'IUPAC: azeótropo etanol-agua', 'respuesta' => '95.6% etanol'],
        ['enunciado' => 'NIST: P.E. etanol', 'respuesta' => '78.37°C'],
        ['enunciado' => 'Método para ADN', 'respuesta' => 'Electroforesis en gel']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Métodos separación son...', 'opciones' => ['Físicos', 'Químicos', 'Nucleares', 'Biológicos'], 'correcta' => 'Físicos'],
        ['pregunta' => 'Evaporación recupera...', 'opciones' => ['Sólido', 'Líquido', 'Gas', 'Nada'], 'correcta' => 'Sólido'],
        ['pregunta' => 'Centrifugación por...', 'opciones' => ['Densidad', 'Color', 'Olor', 'Sabor'], 'correcta' => 'Densidad'],
        ['pregunta' => 'Destilación separa...', 'opciones' => ['Líquidos miscibles', 'Sólidos', 'Gases', 'Iones'], 'correcta' => 'Líquidos miscibles'],
        ['pregunta' => 'Decantación usa...', 'opciones' => ['Embudo decantación', 'Matraz', 'Filtro', 'Condensador'], 'correcta' => 'Embudo decantación'],
        ['pregunta' => 'Filtración retiene...', 'opciones' => ['Sólido', 'Líquido', 'Gas', 'Luz'], 'correcta' => 'Sólido'],
        ['pregunta' => 'Cromatografía separa por...', 'opciones' => ['Afinidad', 'Masa', 'Volumen', 'pH'], 'correcta' => 'Afinidad'],
        ['pregunta' => 'Sublimación059 para...', 'opciones' => ['Sólidos volátiles', 'Líquidos', 'Gases', 'Coloides'], 'correcta' => 'Sólidos volátiles'],
        ['pregunta' => 'Ejemplo evaporación', 'opciones' => ['Sal de mar', 'Alcohol', 'Aceite', 'Arena'], 'correcta' => 'Sal de mar'],
        ['pregunta' => 'Petróleo se separa por...', 'opciones' => ['Destilación fraccionada', 'Filtración', 'Decantación', 'Sublimación'], 'correcta' => 'Destilación fraccionada'],

        // === MEDIO (10) ===
        ['pregunta' => 'Azeótropo etanol-agua', 'opciones' => ['95.6%', '100%', '50%', '78%'], 'correcta' => '95.6%'],
        ['pregunta' => 'Rf = 0.5 significa...', 'opciones' => ['Mitad del camino', 'Inicio', 'Final', 'Nada'], 'correcta' => 'Mitad del camino'],
        ['pregunta' => 'Centrifugación en sangre', 'opciones' => ['Plasma + células', 'Agua + sal', 'Aceite + agua', 'Arena + agua'], 'correcta' => 'Plasma + células'],
        ['pregunta' => 'Sublimación de yodo', 'opciones' => ['Violeta → sólido', 'Líquido', 'Gas incoloro', 'Explosión'], 'correcta' => 'Violeta → sólido'],
        ['pregunta' => 'Destilación simple requiere...', 'opciones' => ['ΔT > 25°C', 'ΔT < 5°C', 'Misma T', 'Calor'], 'correcta' => 'ΔT > 25°C'],
        ['pregunta' => 'Cromatografía GC usa...', 'opciones' => ['Gas como fase móvil', 'Líquido', 'Sólido', 'Plasma'], 'correcta' => 'Gas como fase móvil'],
        ['pregunta' => 'Embudo decantación separa...', 'opciones' => ['Líquidos inmiscibles', 'Sólidos', 'Gases', 'Coloides'], 'correcta' => 'Líquidos inmiscibles'],
        ['pregunta' => 'Evaporación en rotavapor', 'opciones' => ['Baja presión', 'Alta T', 'Luz UV', 'Sonido'], 'correcta' => 'Baja presión'],
        ['pregunta' => 'NIST: P.E. agua', 'opciones' => ['99.974°C', '100.00°C', '78.37°C', '0.00°C'], 'correcta' => '99.974°C'],
        ['pregunta' => 'IUPAC: método para pigmentos', 'opciones' => ['Cromatografía', 'Destilación', 'Filtración', 'Decantación'], 'correcta' => 'Cromatografía'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Azeótropo mínimo hierve a...', 'opciones' => ['T < componentes', 'T > componentes', 'Igual', 'Variable'], 'correcta' => 'T < componentes'],
        ['pregunta' => 'Extracción líquido-líquido usa...', 'opciones' => ['Solubilidad en dos solventes', 'Densidad', 'Color', 'pH'], 'correcta' => 'Solubilidad en dos solventes'],
        ['pregunta' => 'Diálisis separa por...', 'opciones' => ['Membrana semipermeable', 'Calor', 'Luz', 'Presión'], 'correcta' => 'Membrana semipermeable'],
        ['pregunta' => 'Cristalización fraccionada separa...', 'opciones' => ['Sales por solubilidad', 'Gases', 'Líquidos', 'Coloides'], 'correcta' => 'Sales por solubilidad'],
        ['pregunta' => 'Electroforesis separa...', 'opciones' => ['Por carga', 'Por masa', 'Por color', 'Por tamaño'], 'correcta' => 'Por carga'],
        ['pregunta' => 'Destilación al vacío para...', 'opciones' => ['Sustancias térmicamente inestables', 'Gases', 'Sólidos', 'Coloides'], 'correcta' => 'Sustancias térmicamente inestables'],
        ['pregunta' => 'Columna Vigreux mejora...', 'opciones' => ['Eficiencia destilación', 'Filtración', 'Decantación', 'Sublimación'], 'correcta' => 'Eficiencia destilación'],
        ['pregunta' => 'Rf en cromatografía es...', 'opciones' => ['Adimensional', 'En metros', 'En gramos', 'En %'], 'correcta' => 'Adimensional'],
        ['pregunta' => 'Método para isótopos', 'opciones' => ['Espectrometría de masas', 'Destilación', 'Filtración', 'Cromatografía'], 'correcta' => 'Espectrometría de masas'],
        ['pregunta' => 'IUPAC define azeótropo como...', 'opciones' => ['Mezcla de composición constante al hervir', 'Pura', 'Elemento', 'Reacción'], 'correcta' => 'Mezcla de composición constante al hervir']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Partículas Subatómicas (Historia, Modelo Atómico, Tabla Periódica, Mole, Isótopos)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'particulas-subatomicas',
    'titulo' => 'Partículas Subatómicas: El Corazón del Átomo',
    'contenido' => '
        <h3>Partículas Subatómicas</h3>
        <p>El átomo está formado por <strong>protones (+1)</strong>, <strong>neutrones (0)</strong> y <strong>electrones (−1)</strong>. El <strong>núcleo</strong> contiene protones y neutrones; los electrones orbitan en <strong>nubes electrónicas</strong>.</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Partículas Subatómicas</h4>
        <table class="table">
            <thead>
                <tr><th>Partícula</th><th>Símbolo</th><th>Carga (e)</th><th>Masa (u)</th><th>Ubicación</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Protón</strong></td><td>p⁺</td><td>+1</td><td>1.007276</td><td>Núcleo</td></tr>
                <tr><td><strong>Neutrón</strong></td><td>n⁰</td><td>0</td><td>1.008665</td><td>Núcleo</td></tr>
                <tr><td><strong>Electrón</strong></td><td>e⁻</td><td>-1</td><td>0.00054858</td><td>Orbitales</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Historia del Modelo Atómico</h4>
        <ul>
            <li><strong>Dalton (1808):</strong> Átomo indivisible</li>
            <li><strong>Thomson (1897):</strong> Descubrió electrón (modelo "pudín")</li>
            <li><strong>Rutherford (1911):</strong> Núcleo denso (experimento lámina oro)</li>
            <li><strong>Bohr (1913):</strong> Electrones en órbitas cuantizadas</li>
            <li><strong>Chadwick (1932):</strong> Descubrió neutrón</li>
            <li><strong>Mecánica Cuántica (1920s):</strong> Orbitales de probabilidad</li>
        </ul>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Número Atómico y Másico</h4>
        <p>\[
            \\text{Número atómico (Z)} = \\text{protones} = \\text{electrones (átomo neutro)}
        \]</p>
        <p>\[
            \\text{Número másico (A)} = \\text{protones} + \\text{neutrones}
        \]</p>
        <p>\[
            \\text{Isótopos}: \\text{mismo Z, distinto A}
        \]</p>

        <table class="table">
            <thead>
                <tr><th>Elemento</th><th>Z</th><th>A</th><th>p⁺</th><th>n⁰</th><th>e⁻</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>¹²C</strong></td><td>6</td><td>12</td><td>6</td><td>6</td><td>6</td></tr>
                <tr><td><strong>¹³C</strong></td><td>6</td><td>13</td><td>6</td><td>7</td><td>6</td></tr>
                <tr><td><strong>¹⁴C</strong></td><td>6</td><td>14</td><td>6</td><td>8</td><td>6</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. El Mole y Avogadro</h4>
        <p>\[
            \\text{1 mol} = 6.02214076 \\times 10^{23} \\text{ entidades (IUPAC 2019)}
        \]</p>
        <p>\[
            \\text{Masa molar (M)} = \\text{masa de 1 mol en gramos}
        \]</p>

        <table class="table">
            <thead>
                <tr><th>Elemento</th><th>Masa molar (g/mol)</th><th>Mole contiene</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>H</strong></td><td>1.008</td><td>6.022×10²³ átomos</td></tr>
                <tr><td><strong>C</strong></td><td>12.011</td><td>6.022×10²³ átomos</td></tr>
                <tr><td><strong>O</strong></td><td>15.999</td><td>6.022×10²³ átomos</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>¹²C</strong> → 6p⁺, 6n⁰, 6e⁻. <strong>1 mol C</strong> = 12.011 g = 6.022×10²³ átomos.</p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>5. Datos NIST 2025</h4>
        <table class="table">
            <thead>
                <tr><th>Partícula</th><th>Masa (u)</th><th>Carga (C)</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Protón</strong></td><td>1.007276466621</td><td>+1.602176634×10⁻¹⁹</td></tr>
                <tr><td><strong>Neutrón</strong></td><td>1.00866491595</td><td>0</td></tr>
                <tr><td><strong>Electrón</strong></td><td>0.000548579909065</td><td>-1.602176634×10⁻¹⁹</td></tr>
            </tbody>
        </table>

        <div class="visual">
            <img src="assets/img/modelo-atomico.png" alt="Partículas subatómicas">
            <p><em>Modelo atómico. Fuente: LibreTexts.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/estructura-atomo.webp" alt="Partes del átomo">
            <p><em>Estructura del átomo. Fuente: PraxiLabs.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/modelo-thomson.jpg" alt="Modelo Thomson">
            <p><em>Modelo pudín de pasas. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>6. SVG Animado: Modelo de Rutherford → Bohr</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>

                <!-- Título -->
                <text x="400" y="50" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">EVOLUCIÓN DEL ÁTOMO</text>

                <!-- Núcleo -->
                <g id="nucleo">
                    <circle cx="400" cy="250" r="40" fill="#D32F2F">
                        <animate attributeName="r" values="40;45;40" dur="3s" repeatCount="indefinite"/>
                    </circle>
                    <text x="400" y="245" fill="white" font-size="14" text-anchor="middle">Núcleo</text>
                    <text x="400" y="265" fill="#FFCDD2" font-size="10" text-anchor="middle">p⁺ + n⁰</text>
                </g>

                <!-- Modelo Rutherford -->
                <g id="rutherford" opacity="1">
                    <circle cx="400" cy="250" r="150" fill="none" stroke="#1976D2" stroke-width="2" stroke-dasharray="5,5"/>
                    <text x="400" y="120" fill="#1565C0" font-size="16" text-anchor="middle">Rutherford 1911</text>
                    <animate attributeName="opacity" values="1;0" begin="3s" dur="1s"/>
                </g>

                <!-- Electrones Bohr -->
                <g id="bohr" opacity="0">
                    <!-- Órbita 1 -->
                    <circle cx="400" cy="250" r="80" fill="none" stroke="#4CAF50" stroke-width="3"/>
                    <circle cx="400" cy="170" r="12" fill="#2196F3">
                        <animate attributeName="cx" values="400;480;400;320;400" dur="4s" repeatCount="indefinite"/>
                    </circle>
                    <text x="400" y="100" fill="#1B5E20" font-size="14" text-anchor="middle">Bohr 1913</text>

                    <!-- Órbita 2 -->
                    <circle cx="400" cy="250" r="130" fill="none" stroke="#4CAF50" stroke-width="2" stroke-dasharray="3,3"/>
                    <circle cx="400" cy="120" r="10" fill="#2196F3">
                        <animate attributeName="cx" values="400;530;400;270;400" dur="5s" begin="0.5s" repeatCount="indefinite"/>
                    </circle>
                    <animate attributeName="opacity" values="0;1" begin="4s" dur="1s"/>
                </g>

                <!-- Avogadro -->
                <rect x="500" y="350" width="250" height="100" fill="#FFF3E0" rx="15"/>
                <text x="625" y="380" fill="#E65100" font-size="14" text-anchor="middle">Constante de Avogadro</text>
                <text x="625" y="405" fill="#FF6F00" font-size="12" text-anchor="middle">N_A = 6.02214076×10²³</text>
                <text x="625" y="425" fill="#E65100" font-size="10" text-anchor="middle">mol⁻¹</text>

                <!-- NIST -->
                <text x="400" y="470" fill="#1565C0" font-size="14" text-anchor="middle">NIST 2025: m_p = 1.007276 u</text>
            </svg>
            <p><em>SVG Animado: De Rutherford a Bohr + Constante de Avogadro.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Carga del protón', 'respuesta' => '+1'],
        ['enunciado' => 'Masa relativa electrón', 'respuesta' => '1/1836 u'],
        ['enunciado' => 'Número atómico define', 'respuesta' => 'Elemento'],

        // === APLICADOS ===
        ['enunciado' => '¹⁴C: neutrones', 'respuesta' => '8'],
        ['enunciado' => 'Masa molar O₂', 'respuesta' => '32.00 g/mol'],
        ['enunciado' => '1 mol Na contiene', 'respuesta' => '6.022×10²³ átomos'],

        // === QUÍMICOS ===
        ['enunciado' => 'Isótopo más abundante H', 'respuesta' => '¹H (99.98%)'],
        ['enunciado' => 'Experimento Rutherford', 'respuesta' => 'Lámina de oro'],
        ['enunciado' => 'Modelo cuántico describe', 'respuesta' => 'Orbitales de probabilidad'],

        // === AVANZADOS ===
        ['enunciado' => 'NIST: masa protón', 'respuesta' => '1.007276 u'],
        ['enunciado' => 'Avogadro exacto 2019', 'respuesta' => '6.02214076×10²³'],
        ['enunciado' => 'Electrón en nivel n=1', 'respuesta' => 'Orbital 1s']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Protones definen...', 'opciones' => ['Elemento', 'Isótopo', 'Ión', 'Molécula'], 'correcta' => 'Elemento'],
        ['pregunta' => 'Neutrones están en...', 'opciones' => ['Núcleo', 'Orbitales', 'Corteza', 'Vacío'], 'correcta' => 'Núcleo'],
        ['pregunta' => 'Carga electrón', 'opciones' => ['Negativa', 'Positiva', 'Neutra', 'Variable'], 'correcta' => 'Negativa'],
        ['pregunta' => 'Número Avogadro', 'opciones' => ['6.022×10²³', '3.14', '9.8', '1.38×10⁻²³'], 'correcta' => '6.022×10²³'],
        ['pregunta' => '¹²C tiene...', 'opciones' => ['6p, 6n, 6e', '6p, 6n, 5e', '7p, 5n, 6e', '6p, 7n, 6e'], 'correcta' => '6p, 6n, 6e'],
        ['pregunta' => 'Masa molar C', 'opciones' => ['12.011 g/mol', '12.000 g/mol', '6.022 g/mol', '1.008 g/mol'], 'correcta' => '12.011 g/mol'],
        ['pregunta' => 'Descubridor neutrón', 'opciones' => ['Chadwick', 'Thomson', 'Rutherford', 'Bohr'], 'correcta' => 'Chadwick'],
        ['pregunta' => 'Modelo pudín', 'opciones' => ['Thomson', 'Dalton', 'Rutherford', 'Bohr'], 'correcta' => 'Thomson'],
        ['pregunta' => 'Número másico A =', 'opciones' => ['p + n', 'p + e', 'n + e', 'Z + A'], 'correcta' => 'p + n'],
        ['pregunta' => 'Átomo neutro: p =', 'opciones' => ['e', 'n', 'Z', 'A'], 'correcta' => 'e'],

        // === MEDIO (10) ===
        ['pregunta' => '¹⁴C usado en...', 'opciones' => ['Datación radiométrica', 'Combustible', 'Medicina', 'Alimentos'], 'correcta' => 'Datación radiométrica'],
        ['pregunta' => 'Masa electrón', 'opciones' => ['1/1836 u', '1 u', '0 u', '1/12 u'], 'correcta' => '1/1836 u'],
        ['pregunta' => 'Bohr propuso...', 'opciones' => ['Órbitas cuantizadas', 'Nube electrónica', 'Núcleo vacío', 'Átomo indivisible'], 'correcta' => 'Órbitas cuantizadas'],
        ['pregunta' => 'Isótopos tienen mismo...', 'opciones' => ['Z', 'A', 'p', 'e'], 'correcta' => 'Z'],
        ['pregunta' => '1 mol H₂O =', 'opciones' => ['18.02 g', '16.00 g', '2.016 g', '32.00 g'], 'correcta' => '18.02 g'],
        ['pregunta' => 'Experimento lámina oro', 'opciones' => ['Rutherford', 'Thomson', 'Chadwick', 'Dalton'], 'correcta' => 'Rutherford'],
        ['pregunta' => 'Electrón en orbital...', 'opciones' => ['Nube de probabilidad', 'Órbita fija', 'Núcleo', 'Vacío'], 'correcta' => 'Nube de probabilidad'],
        ['pregunta' => 'NIST: carga elemental', 'opciones' => ['1.602×10⁻¹⁹ C', '1 C', '0 C', '9.11×10⁻³¹ C'], 'correcta' => '1.602×10⁻¹⁹ C'],
        ['pregunta' => 'Masa molar exacta ¹²C', 'opciones' => ['12.000 g/mol', '12.011 g/mol', '6.022 g/mol', '1.008 g/mol'], 'correcta' => '12.000 g/mol'],
        ['pregunta' => 'IUPAC: 1 mol =', 'opciones' => ['6.02214076×10²³', '6.02×10²³', '6.00×10²³', '6.022×10²²'], 'correcta' => '6.02214076×10²³'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Masa protón NIST', 'opciones' => ['1.007276 u', '1.000000 u', '1.008665 u', '0.000549 u'], 'correcta' => '1.007276 u'],
        ['pregunta' => 'Modelo cuántico usa...', 'opciones' => ['Función de onda', 'Órbitas circulares', 'Pudín', 'Núcleo hueco'], 'correcta' => 'Función de onda'],
        ['pregunta' => '¹H: neutrones', 'opciones' => ['0', '1', '2', '3'], 'correcta' => '0'],
        ['pregunta' => '²H (deuterio) tiene...', 'opciones' => ['1n', '0n', '2n', '3n'], 'correcta' => '1n'],
        ['pregunta' => '³H (tritio) es...', 'opciones' => ['Radiactivo', 'Estable', 'Gas noble', 'Metal'], 'correcta' => 'Radiactivo'],
        ['pregunta' => 'Electrón en nivel n=2 puede estar en...', 'opciones' => ['2s, 2p', '1s', '3d', '4f'], 'correcta' => '2s, 2p'],
        ['pregunta' => 'Constante Avogadro definida por...', 'opciones' => ['¹²C = 12 g/mol', 'H = 1 g/mol', 'O = 16 g/mol', 'e = 1 C'], 'correcta' => '¹²C = 12 g/mol'],
        ['pregunta' => 'Átomo con Z=26 es...', 'opciones' => ['Hierro (Fe)', 'Cobre', 'Oro', 'Carbono'], 'correcta' => 'Hierro (Fe)'],
        ['pregunta' => 'Ión Na⁺ tiene...', 'opciones' => ['10 electrones', '11 electrones', '12 electrones', '9 electrones'], 'correcta' => '10 electrones'],
        ['pregunta' => 'IUPAC 2019 redefinió mol como...', 'opciones' => ['Número fijo de entidades', 'Masa en gramos', 'Volumen', 'Densidad'], 'correcta' => 'Número fijo de entidades']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Configuraciones Electrónicas (Aufbau, Pauli, Hund, Excepciones, Bloques)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'configuraciones-electronicas',
    'titulo' => 'Configuraciones Electrónicas: El Mapa del Átomo',
    'contenido' => '
        <h3>Configuraciones Electrónicas</h3>
        <p>La <strong>configuración electrónica</strong> describe la distribución de electrones en <strong>orbitales atómicos</strong> usando <strong>números cuánticos</strong> y los principios: <strong>Aufbau</strong>, <strong>Pauli</strong>, <strong>Hund</strong>.</p>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>1. Números Cuánticos</h4>
        <table class="table">
            <thead>
                <tr><th>Número</th><th>Nombre</th><th>Valores</th><th>Significado</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>n</strong></td><td>Principal</td><td>1, 2, 3...</td><td>Nivel energético</td></tr>
                <tr><td><strong>l</strong></td><td>Azimutal</td><td>0 a n-1</td><td>Subnivel (s, p, d, f)</td></tr>
                <tr><td><strong>m_l</strong></td><td>Magnético</td><td>-l a +l</td><td>Orientación orbital</td></tr>
                <tr><td><strong>m_s</strong></td><td>Spin</td><td>±1/2</td><td>Spin electrón</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>2. Principios de Llenado</h4>
        <ul>
            <li><strong>Aufbau:</strong> Llenar orbitales de menor a mayor energía</li>
            <li><strong>Pauli:</strong> Máximo 2 e⁻ por orbital, con spins opuestos</li>
            <li><strong>Hund:</strong> Llenar cada orbital con 1 e⁻ (spin ↑) antes de parear</li>
        </ul>

        <div class="visual">
            <img src="assets/img/orbitales_moleculares.png" alt="Diagrama orbitales">
            <p><em>Representación de orbitales. Fuente: ThoughtCo.</em></p>
        </div>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>3. Orden de Llenado (Aufbau)</h4>
        <p>Orden energético:</p>
        <p><strong>1s < 2s < 2p < 3s < 3p < 4s < 3d < 4p < 5s < 4d < 5p < 6s < 4f < 5d < 6p < 7s...</strong></p>

        <table class="table">
            <thead>
                <tr><th>Elemento</th><th>Z</th><th>Configuración</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>H</strong></td><td>1</td><td>1s¹</td></tr>
                <tr><td><strong>He</strong></td><td>2</td><td>1s²</td></tr>
                <tr><td><strong>Li</strong></td><td>3</td><td>1s² 2s¹</td></tr>
                <tr><td><strong>Be</strong></td><td>4</td><td>1s² 2s²</td></tr>
                <tr><td><strong>B</strong></td><td>5</td><td>1s² 2s² 2p¹</td></tr>
                <tr><td><strong>O</strong></td><td>8</td><td>1s² 2s² 2p⁴</td></tr>
                <tr><td><strong>Na</strong></td><td>11</td><td>1s² 2s² 2p⁶ 3s¹</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>4. Excepciones Comunes</h4>
        <ul>
            <li><strong>Cr:</strong> [Ar] 4s¹ 3d⁵ (más estable)</li>
            <li><strong>Cu:</strong> [Ar] 4s¹ 3d¹⁰ (subnivel d lleno)</li>
        </ul>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>5. Bloques de la Tabla Periódica</h4>
        <table class="table">
            <thead>
                <tr><th>Bloque</th><th>Subnivel</th><th>Elementos</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>s</strong></td><td>ns</td><td>1–2</td></tr>
                <tr><td><strong>p</strong></td><td>np</td><td>13–18</td></tr>
                <tr><td><strong>d</strong></td><td>(n-1)d</td><td>3–12</td></tr>
                <tr><td><strong>f</strong></td><td>(n-2)f</td><td>Lantanoides, Actínidos</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Na (Z=11)</strong> → 1s² 2s² 2p⁶ 3s¹ → <strong>bloque s</strong>, valencia 1.</p>
        </div>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>6. SVG Animado: Llenado de Orbitales (H → Ne)</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#F3E5F5"/>

                <!-- Título -->
                <text x="400" y="50" fill="#4A148C" font-size="28" text-anchor="middle" font-weight="bold">LLENADO DE ORBITALES</text>

                <!-- 1s -->
                <g id="1s">
                    <circle cx="200" cy="200" r="40" fill="#9C27B0" opacity="0.3"/>
                    <text x="200" y="190" fill="#6A1B9A" font-size="14" text-anchor="middle">1s</text>
                    <circle cx="180" cy="200" r="10" fill="#E1BEE7">
                        <animate attributeName="opacity" values="0;1" begin="0s" dur="0.5s"/>
                    </circle>
                    <circle cx="220" cy="200" r="10" fill="#E1BEE7">
                        <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    </circle>
                    <text x="200" y="230" fill="#4A148C" font-size="12" text-anchor="middle">H, He</text>
                </g>

                <!-- 2s -->
                <g id="2s" opacity="0">
                    <circle cx="400" cy="200" r="60" fill="#7B1FA2" opacity="0.3">
                        <animate attributeName="opacity" values="0;0.3" begin="1s" dur="0.5s"/>
                    </circle>
                    <text x="400" y="170" fill="#4A148C" font-size="14" text-anchor="middle">2s</text>
                    <circle cx="370" cy="200" r="12" fill="#CE93D8">
                        <animate attributeName="opacity" values="0;1" begin="1.5s" dur="0.5s"/>
                    </circle>
                    <circle cx="430" cy="200" r="12" fill="#CE93D8">
                        <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                    </circle>
                    <text x="400" y="240" fill="#6A1B9A" font-size="12" text-anchor="middle">Li, Be</text>
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.1s"/>
                </g>

                <!-- 2p -->
                <g id="2p" opacity="0">
                    <ellipse cx="600" cy="200" rx="80" ry="40" fill="#9C27B0" opacity="0.2">
                        <animate attributeName="opacity" values="0;0.2" begin="2.5s" dur="0.5s"/>
                    </ellipse>
                    <text x="600" y="160" fill="#4A148C" font-size="14" text-anchor="middle">2p</text>
                    <circle cx="560" cy="180" r="10" fill="#E1BEE7">
                        <animate attributeName="opacity" values="0;1" begin="3s" dur="0.5s"/>
                    </circle>
                    <circle cx="600" cy="170" r="10" fill="#E1BEE7">
                        <animate attributeName="opacity" values="0;1" begin="3.5s" dur="0.5s"/>
                    </circle>
                    <circle cx="640" cy="180" r="10" fill="#E1BEE7">
                        <animate attributeName="opacity" values="0;1" begin="4s" dur="0.5s"/>
                    </circle>
                    <circle cx="580" cy="220" r="10" fill="#E1BEE7">
                        <animate attributeName="opacity" values="0;1" begin="4.5s" dur="0.5s"/>
                    </circle>
                    <circle cx="620" cy="230" r="10" fill="#E1BEE7">
                        <animate attributeName="opacity" values="0;1" begin="5s" dur="0.5s"/>
                    </circle>
                    <circle cx="660" cy="220" r="10" fill="#E1BEE7">
                        <animate attributeName="opacity" values="0;1" begin="5.5s" dur="0.5s"/>
                    </circle>
                    <text x="600" y="260" fill="#6A1B9A" font-size="12" text-anchor="middle">B → Ne</text>
                    <animate attributeName="opacity" values="0;1" begin="2.5s" dur="0.1s"/>
                </g>

                <!-- Excepción Cr -->
                <rect x="500" y="350" width="250" height="100" fill="#FFF3E0" rx="15"/>
                <text x="625" y="380" fill="#E65100" font-size="14" text-anchor="middle">EXCEPCIÓN: Cr</text>
                <text x="625" y="405" fill="#FF6F00" font-size="12" text-anchor="middle">[Ar] 4s¹ 3d⁵</text>
                <text x="625" y="425" fill="#E65100" font-size="10" text-anchor="middle">Medio lleno → estable</text>

                <!-- IUPAC -->
                <text x="400" y="470" fill="#4A148C" font-size="14" text-anchor="middle">IUPAC 2025: Aufbau + Excepciones</text>
            </svg>
            <p><em>SVG Animado: Llenado 1s → 2p + Excepción Cr.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Configuración de O (Z=8)', 'respuesta' => '1s² 2s² 2p⁴'],
        ['enunciado' => 'Configuración de Na (Z=11)', 'respuesta' => '1s² 2s² 2p⁶ 3s¹'],
        ['enunciado' => 'Principio de Aufbau', 'respuesta' => 'Llenar orbitales de menor energía primero'],

        // === APLICADOS ===
        ['enunciado' => 'Configuración de Cl (Z=17)', 'respuesta' => '1s² 2s² 2p⁶ 3s² 3p⁵'],
        ['enunciado' => 'Configuración de Fe (Z=26)', 'respuesta' => '1s² 2s² 2p⁶ 3s² 3p⁶ 4s² 3d⁶'],
        ['enunciado' => 'Excepción: Cr (Z=24)', 'respuesta' => '[Ar] 4s¹ 3d⁵'],

        // === QUÍMICOS ===
        ['enunciado' => 'Principio de Hund en 2p³', 'respuesta' => 'Tres electrones ↑ en orbitales separados'],
        ['enunciado' => 'Electrón diferenciador de K', 'respuesta' => '4s¹'],
        ['enunciado' => 'Bloque de Zn', 'respuesta' => 'd (3d¹⁰)'],

        // === AVANZADOS ===
        ['enunciado' => 'Configuración de Mo (Z=42)', 'respuesta' => '[Kr] 5s¹ 4d⁵'],
        ['enunciado' => 'IUPAC: notación abreviada', 'respuesta' => 'Usar gas noble anterior'],
        ['enunciado' => 'Número máximo e⁻ en n=3', 'respuesta' => '18 (3s² 3p⁶ 3d¹⁰)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Configuración de He', 'opciones' => ['1s²', '1s¹', '2s²', '2p⁶'], 'correcta' => '1s²'],
        ['pregunta' => 'Llenado por orden de...', 'opciones' => ['Energía (Aufbau)', 'Aleatorio', 'Tamaño', 'Masa'], 'correcta' => 'Energía (Aufbau)'],
        ['pregunta' => 'Pauli permite máximo...', 'opciones' => ['2 e⁻/orbital', '1 e⁻/orbital', '3 e⁻/orbital', '4 e⁻/orbital'], 'correcta' => '2 e⁻/orbital'],
        ['pregunta' => 'Hund dice llenar...', 'opciones' => ['Singly antes de parear', 'Parear primero', 'Aleatorio', 'Por masa'], 'correcta' => 'Singly antes de parear'],
        ['pregunta' => 'Configuración de Li', 'opciones' => ['1s² 2s¹', '1s¹ 2s²', '1s³', '2s¹'], 'correcta' => '1s² 2s¹'],
        ['pregunta' => 'Configuración de N', 'opciones' => ['1s² 2s² 2p³', '1s² 2s² 2p⁴', '1s² 2s¹ 2p⁴', '1s³ 2s²'], 'correcta' => '1s² 2s² 2p³'],
        ['pregunta' => 'Subnivel s tiene...', 'opciones' => ['1 orbital', '3 orbitales', '5 orbitales', '7 orbitales'], 'correcta' => '1 orbital'],
        ['pregunta' => 'Subnivel p tiene...', 'opciones' => ['3 orbitales', '1 orbital', '5 orbitales', '7 orbitales'], 'correcta' => '3 orbitales'],
        ['pregunta' => 'Configuración de Ne', 'opciones' => ['1s² 2s² 2p⁶', '1s² 2s² 2p⁵', '1s² 2s¹ 2p⁶', '2s² 2p⁶'], 'correcta' => '1s² 2s² 2p⁶'],
        ['pregunta' => 'Gas noble anterior a Na', 'opciones' => ['Ne', 'He', 'Ar', 'Kr'], 'correcta' => 'Ne'],

        // === MEDIO (10) ===
        ['pregunta' => 'Configuración de Ar', 'opciones' => ['1s² 2s² 2p⁶ 3s² 3p⁶', '1s² 2s² 2p⁶ 3s²', '1s² 2s² 2p⁶ 4s²', '2p⁶ 3s² 3p⁶'], 'correcta' => '1s² 2s² 2p⁶ 3s² 3p⁶'],
        ['pregunta' => 'Excepción Cr', 'opciones' => ['4s¹ 3d⁵', '4s² 3d⁴', '4s⁰ 3d⁶', '4s² 3d⁵'], 'correcta' => '4s¹ 3d⁵'],
        ['pregunta' => 'Excepción Cu', 'opciones' => ['4s¹ 3d¹⁰', '4s² 3d⁹', '4s⁰ 3d¹⁰', '4s² 3d¹⁰'], 'correcta' => '4s¹ 3d¹⁰'],
        ['pregunta' => 'Bloque de Ca', 'opciones' => ['s', 'p', 'd', 'f'], 'correcta' => 's'],
        ['pregunta' => 'Bloque de Fe', 'opciones' => ['d', 's', 'p', 'f'], 'correcta' => 'd'],
        ['pregunta' => 'Electrón valencia de Al', 'opciones' => ['3s² 3p¹', '3s¹', '3p¹', '4s¹'], 'correcta' => '3s² 3p¹'],
        ['pregunta' => 'Configuración abreviada de K', 'opciones' => ['[Ar] 4s¹', '[Ne] 4s¹', '[He] 4s¹', '[Kr] 4s¹'], 'correcta' => '[Ar] 4s¹'],
        ['pregunta' => 'Subnivel d tiene...', 'opciones' => ['5 orbitales', '1 orbital', '3 orbitales', '7 orbitales'], 'correcta' => '5 orbitales'],
        ['pregunta' => 'Máximo e⁻ en nivel n=2', 'opciones' => ['8', '2', '6', '18'], 'correcta' => '8'],
        ['pregunta' => 'IUPAC: notación orbital', 'opciones' => ['n l^{exponente}', 'n l', 'l n', 'exponente n'], 'correcta' => 'n l^{exponente}'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Configuración de Ag (Z=47)', 'opciones' => ['[Kr] 5s¹ 4d¹⁰', '[Kr] 5s² 4d⁹', '[Kr] 4d¹⁰', '[Ar] 5s¹ 4d¹⁰'], 'correcta' => '[Kr] 5s¹ 4d¹⁰'],
        ['pregunta' => 'Configuración de Au (Z=79)', 'opciones' => ['[Xe] 6s¹ 4f¹⁴ 5d¹⁰', '[Xe] 6s² 4f¹⁴ 5d⁹', '[Xe] 6s¹ 5d¹⁰', '[Kr] 6s¹ 4f¹⁴ 5d¹⁰'], 'correcta' => '[Xe] 6s¹ 4f¹⁴ 5d¹⁰'],
        ['pregunta' => 'Subnivel f tiene...', 'opciones' => ['7 orbitales', '5 orbitales', '3 orbitales', '1 orbital'], 'correcta' => '7 orbitales'],
        ['pregunta' => 'Configuración de U (Z=92)', 'opciones' => ['[Rn] 7s² 5f³ 6d¹', '[Rn] 7s² 5f⁴', '[Xe] 7s² 5f³ 6d¹', '[Rn] 6d² 5f⁴'], 'correcta' => '[Rn] 7s² 5f³ 6d¹'],
        ['pregunta' => 'Número cuántico l para d', 'opciones' => ['2', '0', '1', '3'], 'correcta' => '2'],
        ['pregunta' => 'Número cuántico l para f', 'opciones' => ['3', '2', '1', '0'], 'correcta' => '3'],
        ['pregunta' => 'Electrón en 4p³ tiene n=', 'opciones' => ['4', '3', '2', '1'], 'correcta' => '4'],
        ['pregunta' => 'Máximo e⁻ en subnivel 4d', 'opciones' => ['10', '2', '6', '14'], 'correcta' => '10'],
        ['pregunta' => 'Regla de Madelung predice...', 'opciones' => ['n + l menor primero', 'n mayor primero', 'l mayor primero', 'aleatorio'], 'correcta' => 'n + l menor primero'],
        ['pregunta' => 'IUPAC permite excepciones por...', 'opciones' => ['Estabilidad electrónica', 'Masa', 'Volumen', 'Color'], 'correcta' => 'Estabilidad electrónica']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Números Cuánticos (n, l, m_l, m_s, Orbitales, Reglas, Ejemplos)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'numeros-cuanticos',
    'titulo' => 'Números Cuánticos: El Código del Electrón',
    'contenido' => '
        <h3>Números Cuánticos</h3>
        <p>Los <strong>números cuánticos</strong> definen <strong>única y completamente</strong> el estado de un electrón en un átomo. Son 4: <strong>n, l, m_l, m_s</strong>. Regidos por la <strong>mecánica cuántica</strong> y el <strong>principio de exclusión de Pauli</strong>.</p>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>1. Los 4 Números Cuánticos</h4>
        <table class="table">
            <thead>
                <tr><th>Número</th><th>Nombre</th><th>Valores</th><th>Describe</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>n</strong></td><td>Principal</td><td>1, 2, 3, …</td><td>Nivel energético (tamaño)</td></tr>
                <tr><td><strong>l</strong></td><td>Azimutal</td><td>0 a n−1</td><td>Forma del orbital (s, p, d, f)</td></tr>
                <tr><td><strong>m_l</strong></td><td>Magnético</td><td>−l … 0 … +l</td><td>Orientación espacial</td></tr>
                <tr><td><strong>m_s</strong></td><td>Spin</td><td>±1/2</td><td>Spin del electrón</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>2. Subniveles y Orbitales</h4>
        <table class="table">
            <thead>
                <tr><th>l</th><th>Subnivel</th><th>Forma</th><th>Orbitales</th><th>e⁻ máx</th></tr>
            </thead>
            <tbody>
                <tr><td>0</td><td><strong>s</strong></td><td>Esférico</td><td>1</td><td>2</td></tr>
                <tr><td>1</td><td><strong>p</strong></td><td>Dumbbell</td><td>3</td><td>6</td></tr>
                <tr><td>2</td><td><strong>d</strong></td><td>Doble dumbbell</td><td>5</td><td>10</td></tr>
                <tr><td>3</td><td><strong>f</strong></td><td>Complejo</td><td>7</td><td>14</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>3. Ejemplos de Números Cuánticos</h4>
        <table class="table">
            <thead>
                <tr><th>Orbital</th><th>n</th><th>l</th><th>m_l</th><th>m_s</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>1s</strong></td><td>1</td><td>0</td><td>0</td><td>±1/2</td></tr>
                <tr><td><strong>2p_x</strong></td><td>2</td><td>1</td><td>-1, 0, +1</td><td>±1/2</td></tr>
                <tr><td><strong>3d_{z²}</strong></td><td>3</td><td>2</td><td>0</td><td>±1/2</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> Electrón en <strong>2p</strong>: <br>
            → n = 2, l = 1, m_l = −1, 0, o +1, m_s = +1/2 o −1/2</p>
        </div>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>4. Máximo de Electrones por Nivel</h4>
        <p>\[
            \\text{Máx e⁻ en nivel n} = 2n^2
        \]</p>
        <ul>
            <li>n=1 → 2(1)² = <strong>2</strong></li>
            <li>n=2 → 2(4) = <strong>8</strong></li>
            <li>n=3 → 2(9) = <strong>18</strong></li>
            <li>n=4 → 2(16) = <strong>32</strong></li>
        </ul>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>5. Reglas y Restricciones</h4>
        <ul>
            <li><strong>n ≥ 1</strong></li>
            <li><strong>l < n</strong></li>
            <li><strong>m_l ≤ |l|</strong></li>
            <li><strong>m_s = ±1/2</strong> (solo 2 valores)</li>
            <li><strong>Pauli:</strong> Ningún electrón con los 4 números idénticos</li>
        </ul>

        <div class="visual">
            <img src="assets/img/diargrama-numero-cuantico.png" alt="Diagrama números cuánticos">
            <p><em>Resumen visual. Fuente: GeeksforGeeks.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/quantum-number-chart.webp" alt="Tabla de valores">
            <p><em>Tabla completa. Fuente: Physicscatalyst.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/quantum-numbers-definition.jpg" alt="Definiciones">
            <p><em>Definiciones claras. Fuente: Chemistry Learner.</em></p>
        </div>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>6. SVG Animado: Números Cuánticos en Acción</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#F3E5F5"/>

                <!-- Título -->
                <text x="400" y="50" fill="#4A148C" font-size="28" text-anchor="middle" font-weight="bold">NÚMEROS CUÁNTICOS</text>

                <!-- n (Principal) -->
                <g id="n-level">
                    <circle cx="200" cy="200" r="80" fill="#9C27B0" opacity="0.2">
                        <animate attributeName="r" values="80;90;80" dur="3s" repeatCount="indefinite"/>
                    </circle>
                    <text x="200" y="180" fill="#6A1B9A" font-size="16" text-anchor="middle">n = 1, 2, 3...</text>
                    <text x="200" y="210" fill="#4A148C" font-size="14" text-anchor="middle">Nivel Energético</text>
                </g>

                <!-- l (Azimutal) -->
                <g id="l-sublevel" opacity="0">
                    <path d="M350 200 Q320 170 350 140 Q380 170 350 200" fill="#7B1FA2" opacity="0.4"/>
                    <path d="M350 200 Q320 230 350 260 Q380 230 350 200" fill="#7B1FA2" opacity="0.4"/>
                    <text x="350" y="170" fill="#4A148C" font-size="14" text-anchor="middle">l = 0 (s)</text>
                    <text x="350" y="240" fill="#4A148C" font-size="14" text-anchor="middle">l = 1 (p)</text>
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                </g>

                <!-- m_l (Magnético) -->
                <g id="ml" opacity="0">
                    <line x1="500" y1="200" x2="500" y2="150" stroke="#9C27B0" stroke-width="4"/>
                    <line x1="500" y1="200" x2="470" y2="230" stroke="#9C27B0" stroke-width="4"/>
                    <line x1="500" y1="200" x2="530" y2="230" stroke="#9C27B0" stroke-width="4"/>
                    <text x="500" y="140" fill="#6A1B9A" font-size="12" text-anchor="middle">m_l = -1</text>
                    <text x="460" y="240" fill="#6A1B9A" font-size="12" text-anchor="middle">m_l = 0</text>
                    <text x="540" y="240" fill="#6A1B9A" font-size="12" text-anchor="middle">m_l = +1</text>
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                </g>

                <!-- m_s (Spin) -->
                <g id="ms" opacity="0">
                    <circle cx="650" cy="180" r="15" fill="#E1BEE7">
                        <animate attributeName="opacity" values="0;1" begin="3s" dur="0.5s"/>
                    </circle>
                    <circle cx="650" cy="220" r="15" fill="#CE93D8">
                        <animate attributeName="opacity" values="0;1" begin="3.5s" dur="0.5s"/>
                    </circle>
                    <text x="650" y="175" fill="#4A148C" font-size="12" text-anchor="middle">↑ m_s = +1/2</text>
                    <text x="650" y="225" fill="#4A148C" font-size="12" text-anchor="middle">↓ m_s = −1/2</text>
                    <animate attributeName="opacity" values="0;1" begin="3s" dur="0.1s"/>
                </g>

                <!-- Pauli -->
                <rect x="450" y="350" width="300" height="100" fill="#FFF3E0" rx="15"/>
                <text x="600" y="380" fill="#E65100" font-size="14" text-anchor="middle">PRINCIPIO DE PAULI</text>
                <text x="600" y="405" fill="#FF6F00" font-size="12" text-anchor="middle">Ningún electrón con</text>
                <text x="600" y="425" fill="#E65100" font-size="10" text-anchor="middle">los 4 números idénticos</text>

                <!-- IUPAC -->
                <text x="400" y="470" fill="#6A1B9A" font-size="14" text-anchor="middle">IUPAC 2025: n, l, m_l, m_s ∈ ℤ, ±1/2</text>
            </svg>
            <p><em>SVG Animado: n → l → m_l → m_s + Principio de Pauli.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'n describe', 'respuesta' => 'Nivel de energía'],
        ['enunciado' => 'l = 0 es subnivel', 'respuesta' => 's'],
        ['enunciado' => 'm_l para l=1', 'respuesta' => '-1, 0, +1'],

        // === APLICADOS ===
        ['enunciado' => 'Valores posibles m_l en 3d', 'respuesta' => '-2, -1, 0, +1, +2'],
        ['enunciado' => 'm_s solo permite', 'respuesta' => '±1/2'],
        ['enunciado' => 'Máximo e⁻ en n=3', 'respuesta' => '18'],

        // === QUÍMICOS ===
        ['enunciado' => 'Electrón en 4f: n=', 'respuesta' => '4'],
        ['enunciado' => 'l para orbital f', 'respuesta' => '3'],
        ['enunciado' => 'Número de orbitales en subnivel p', 'respuesta' => '3'],

        // === AVANZADOS ===
        ['enunciado' => 'IUPAC: m_s es', 'respuesta' => '±1/2 (exacto)'],
        ['enunciado' => 'Principio Pauli implica', 'respuesta' => 'Máximo 2 e⁻ por orbital'],
        ['enunciado' => 'Total combinaciones en n=2', 'respuesta' => '8 (2s² 2p⁶)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'n puede ser', 'opciones' => ['1, 2, 3...', '0', 'Negativo', 'Fracción'], 'correcta' => '1, 2, 3...'],
        ['pregunta' => 'l máximo para n=3', 'opciones' => ['2', '3', '1', '0'], 'correcta' => '2'],
        ['pregunta' => 'm_l para l=0', 'opciones' => ['0', '-1', '+1', '-1 a +1'], 'correcta' => '0'],
        ['pregunta' => 'm_s valores', 'opciones' => ['±1/2', '0, ±1', '-1 a +1', '±1'], 'correcta' => '±1/2'],
        ['pregunta' => 'Subnivel s tiene l=', 'opciones' => ['0', '1', '2', '3'], 'correcta' => '0'],
        ['pregunta' => 'Subnivel d tiene l=', 'opciones' => ['2', '0', '1', '3'], 'correcta' => '2'],
        ['pregunta' => 'Número de orbitales en p', 'opciones' => ['3', '1', '5', '7'], 'correcta' => '3'],
        ['pregunta' => 'Máximo e⁻ en 1 orbital', 'opciones' => ['2', '1', '3', '4'], 'correcta' => '2'],
        ['pregunta' => 'Pauli dice que...', 'opciones' => ['Ningún e⁻ igual en 4 números', 'Todos iguales', 'Solo n igual', 'Solo l igual'], 'correcta' => 'Ningún e⁻ igual en 4 números'],
        ['pregunta' => 'Máx e⁻ en n=1', 'opciones' => ['2', '8', '18', '32'], 'correcta' => '2'],

        // === MEDIO (10) ===
        ['pregunta' => 'Máx e⁻ en n=4', 'opciones' => ['32', '18', '8', '2'], 'correcta' => '32'],
        ['pregunta' => 'Fórmula máx e⁻ por nivel', 'opciones' => ['2n²', 'n²', '2n', 'n'], 'correcta' => '2n²'],
        ['pregunta' => 'l=3 es subnivel', 'opciones' => ['f', 'd', 'p', 's'], 'correcta' => 'f'],
        ['pregunta' => 'Número de orbitales en d', 'opciones' => ['5', '3', '1', '7'], 'correcta' => '5'],
        ['pregunta' => 'm_l para 3p', 'opciones' => ['-1, 0, +1', '-2 a +2', '0', '-3 a +3'], 'correcta' => '-1, 0, +1'],
        ['pregunta' => 'Electrón en 3d puede tener m_l=', 'opciones' => ['-2', '-3', '+3', '0 a 3'], 'correcta' => '-2'],
        ['pregunta' => 'Spin opuestos en orbital lleno', 'opciones' => ['+1/2 y −1/2', 'Ambos +1/2', 'Ambos −1/2', '0'], 'correcta' => '+1/2 y −1/2'],
        ['pregunta' => 'n=2 tiene subniveles', 'opciones' => ['s, p', 's, p, d', 'p, d', 's'], 'correcta' => 's, p'],
        ['pregunta' => 'Total orbitales en n=3', 'opciones' => ['9', '1', '3', '5'], 'correcta' => '9'],
        ['pregunta' => 'IUPAC: m_s es', 'opciones' => ['±1/2', '±1', '0, ±1/2', 'cualquier fracción'], 'correcta' => '±1/2'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Electrón en 4f: l=', 'opciones' => ['3', '2', '1', '0'], 'correcta' => '3'],
        ['pregunta' => 'm_l posibles en 4f', 'opciones' => ['7 valores', '5 valores', '3 valores', '1 valor'], 'correcta' => '7 valores'],
        ['pregunta' => 'Total e⁻ en subnivel 4d', 'opciones' => ['10', '14', '6', '2'], 'correcta' => '10'],
        ['pregunta' => 'Principio Pauli implica', 'opciones' => ['Máximo 2 e⁻ por orbital', 'Máximo 1 e⁻ por orbital', 'Máximo 3 e⁻', 'Ilimitado'], 'correcta' => 'Máximo 2 e⁻ por orbital'],
        ['pregunta' => 'Electrón con n=1, l=0, m_l=0, m_s=+1/2 está en', 'opciones' => ['1s', '2s', '1p', '2p'], 'correcta' => '1s'],
        ['pregunta' => 'Cuántos electrones con n=3, l=1', 'opciones' => ['6', '2', '10', '18'], 'correcta' => '6'],
        ['pregunta' => 'Número cuántico que define forma', 'opciones' => ['l', 'n', 'm_l', 'm_s'], 'correcta' => 'l'],
        ['pregunta' => 'Número cuántico que define orientación', 'opciones' => ['m_l', 'l', 'n', 'm_s'], 'correcta' => 'm_l'],
        ['pregunta' => 'Máximo n en átomo de hidrógeno excitado', 'opciones' => ['Ilimitado (teórico)', '7', '4', '1'], 'correcta' => 'Ilimitado (teórico)'],
        ['pregunta' => 'IUPAC define m_s como', 'opciones' => ['±½ (exacto)', '±1', '0', 'variable'], 'correcta' => '±½ (exacto)']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Principio de Construcción (Aufbau, Regla de la Lluvia, Excepciones, Madelung)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'principio-construccion',
    'titulo' => 'Principio de Construcción: Aufbau y la Regla de la Lluvia',
    'contenido' => '
        <h3>Principio de Construcción (Aufbau)</h3>
        <p>El <strong>principio de Aufbau</strong> (del alemán "construcción") establece que los electrones se llenan en <strong>orden creciente de energía</strong> de los orbitales. Se sigue la <strong>regla de la lluvia</strong> o <strong>diagrama diagonal</strong> para recordar el orden.</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Orden Energético de Orbitales</h4>
        <p><strong>1s < 2s < 2p < 3s < 3p < 4s < 3d < 4p < 5s < 4d < 5p < 6s < 4f < 5d < 6p < 7s < 5f < 6d < 7p</strong></p>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Regla de la Lluvia (Diagrama Diagonal)</h4>
        <p>Se dibuja el orden en <strong>diagonales ascendentes</strong>:</p>
        <pre>
        1s
       ↗
      2s   2p
     ↗
    3s   3p   3d
   ↗
  4s   4p   4d   4f
 ↗
5s   5p   5d   5f
        </pre>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Regla de Madelung (n + l)</h4>
        <p>Orden predictivo: <strong>menor (n + l)</strong>, y si igual, menor <strong>n</strong>.</p>
        <p>Ejemplos:</p>
        <ul>
            <li>4s: n=4, l=0 → n+l = 4</li>
            <li>3d: n=3, l=2 → n+l = 5 → <strong>4s antes que 3d</strong></li>
            <li>5s: n=5, l=0 → n+l = 5 → <strong>igual que 3d, pero n menor → 3d antes</strong></li>
        </ul>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. Excepciones Comunes</h4>
        <table class="table">
            <thead>
                <tr><th>Elemento</th><th>Configuración Real</th><th>Esperada</th><th>Razón</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Cr</strong></td><td>[Ar] 4s¹ 3d⁵</td><td>4s² 3d⁴</td><td>Medio lleno d⁵</td></tr>
                <tr><td><strong>Cu</strong></td><td>[Ar] 4s¹ 3d¹⁰</td><td>4s² 3d⁹</td><td>Lleno d¹⁰</td></tr>
                <tr><td><strong>Mo</strong></td><td>[Kr] 5s¹ 4d⁵</td><td>5s² 4d⁴</td><td>Estabilidad</td></tr>
                <tr><td><strong>Ag</strong></td><td>[Kr] 5s¹ 4d¹⁰</td><td>5s² 4d⁹</td><td>d lleno</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>5. Aplicación en Tabla Periódica</h4>
        <ul>
            <li><strong>Bloque s:</strong> 1s, 2s, 3s, 4s, 5s, 6s, 7s</li>
            <li><strong>Bloque p:</strong> 2p, 3p, 4p, 5p, 6p, 7p</li>
            <li><strong>Bloque d:</strong> 3d, 4d, 5d, 6d</li>
            <li><strong>Bloque f:</strong> 4f, 5f</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>K (Z=19)</strong> → 1s² 2s² 2p⁶ 3s² 3p⁶ <strong>4s¹</strong> → <strong>4s antes que 3d</strong>.</p>
        </div>

        <div class="visual">
            <img src="assets/img/aufbau.jpg" alt="Problemas con Aufbau">
            <p><em>Crítica al diagrama. Fuente: RSC Education.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/diagrama-aufbau.png" alt="Diagrama Aufbau">
            <p><em>Orden claro. Fuente: Chemistry LibreTexts.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/orbital-blocks.png" alt="Bloques orbitales">
            <p><em>Bloques en tabla. Fuente: UT Austin.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>6. SVG Animado: Regla de la Lluvia + Excepción Cr</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>

                <!-- Título -->
                <text x="400" y="50" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">REGLA DE LA LLUVIA</text>

                <!-- Diagonales -->
                <g id="diagonales">
                    <!-- 1s -->
                    <text x="100" y="400" fill="#1976D2" font-size="16">1s</text>
                    <circle cx="100" cy="380" r="20" fill="#BBDEFB">
                        <animate attributeName="opacity" values="0;1" begin="0s" dur="0.5s"/>
                    </circle>

                    <!-- 2s 2p -->
                    <text x="200" y="340" fill="#1976D2" font-size="16">2s</text>
                    <text x="300" y="340" fill="#1976D2" font-size="16">2p</text>
                    <circle cx="200" cy="320" r="20" fill="#90CAF9">
                        <animate attributeName="opacity" values="0;1" begin="0.8s" dur="0.5s"/>
                    </circle>
                    <circle cx="300" cy="320" r="25" fill="#90CAF9">
                        <animate attributeName="opacity" values="0;1" begin="1.2s" dur="0.5s"/>
                    </circle>

                    <!-- 3s 3p 3d -->
                    <text x="400" y="280" fill="#1976D2" font-size="16">3s</text>
                    <text x="500" y="280" fill="#1976D2" font-size="16">3p</text>
                    <text x="600" y="280" fill="#1976D2" font-size="16">3d</text>
                    <circle cx="400" cy="260" r="20" fill="#42A5F5">
                        <animate attributeName="opacity" values="0;1" begin="1.8s" dur="0.5s"/>
                    </circle>
                    <circle cx="500" cy="260" r="25" fill="#42A5F5">
                        <animate attributeName="opacity" values="0;1" begin="2.2s" dur="0.5s"/>
                    </circle>
                    <circle cx="600" cy="260" r="30" fill="#42A5F5">
                        <animate attributeName="opacity" values="0;1" begin="2.6s" dur="0.5s"/>
                    </circle>

                    <!-- 4s -->
                    <text x="700" y="220" fill="#1976D2" font-size="16">4s</text>
                    <circle cx="700" cy="200" r="20" fill="#1E88E5">
                        <animate attributeName="opacity" values="0;1" begin="3.2s" dur="0.5s"/>
                    </circle>

                    <!-- Líneas diagonales -->
                    <line x1="120" y1="380" x2="180" y2="340" stroke="#1976D2" stroke-width="3" stroke-dasharray="5,5">
                        <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    </line>
                    <line x1="220" y1="320" x2="380" y2="280" stroke="#1976D2" stroke-width="3" stroke-dasharray="5,5">
                        <animate attributeName="opacity" values="0;1" begin="1.3s" dur="0.5s"/>
                    </line>
                    <line x1="420" y1="260" x2="680" y2="220" stroke="#1976D2" stroke-width="3" stroke-dasharray="5,5">
                        <animate attributeName="opacity" values="0;1" begin="2.3s" dur="0.5s"/>
                    </line>
                </g>

                <!-- Excepción Cr -->
                <g id="excepcion" opacity="0">
                    <rect x="450" y="350" width="300" height="100" fill="#FFF3E0" rx="15">
                        <animate attributeName="opacity" values="0;1" begin="4s" dur="0.5s"/>
                    </rect>
                    <text x="600" y="380" fill="#E65100" font-size="16" text-anchor="middle">EXCEPCIÓN: Cr</text>
                    <text x="600" y="405" fill="#FF6F00" font-size="14" text-anchor="middle">[Ar] 4s¹ 3d⁵</text>
                    <text x="600" y="425" fill="#E65100" font-size="12" text-anchor="middle">No 4s² 3d⁴ → estabilidad</text>
                </g>

                <!-- Madelung -->
                <text x="400" y="470" fill="#1565C0" font-size="14" text-anchor="middle">Regla Madelung: n + l menor primero</text>
            </svg>
            <p><em>SVG Animado: Regla de la lluvia + excepción Cr.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Orden de llenado básico', 'respuesta' => '1s 2s 2p 3s 3p 4s 3d 4p'],
        ['enunciado' => 'Aufbau significa', 'respuesta' => 'Construcción (alemán)'],
        ['enunciado' => 'Regla de la lluvia es', 'respuesta' => 'Diagrama diagonal'],

        // === APLICADOS ===
        ['enunciado' => 'Configuración de K (Z=19)', 'respuesta' => '[Ar] 4s¹'],
        ['enunciado' => 'Configuración de Ca (Z=20)', 'respuesta' => '[Ar] 4s²'],
        ['enunciado' => 'Configuración de Sc (Z=21)', 'respuesta' => '[Ar] 4s² 3d¹'],

        // === QUÍMICOS ===
        ['enunciado' => 'Excepción: Cr (Z=24)', 'respuesta' => '[Ar] 4s¹ 3d⁵'],
        ['enunciado' => 'Excepción: Cu (Z=29)', 'respuesta' => '[Ar] 4s¹ 3d¹⁰'],
        ['enunciado' => 'n + l para 4s', 'respuesta' => '4'],

        // === AVANZADOS ===
        ['enunciado' => 'n + l para 3d', 'respuesta' => '5'],
        ['enunciado' => 'IUPAC: excepción permitida por', 'respuesta' => 'Estabilidad electrónica'],
        ['enunciado' => 'Orden correcto: 5s vs 4d', 'respuesta' => '5s antes que 4d']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Aufbau llena orbitales por...', 'opciones' => ['Energía creciente', 'Energía decreciente', 'Aleatorio', 'Masa'], 'correcta' => 'Energía creciente'],
        ['pregunta' => 'Regla de la lluvia es...', 'opciones' => ['Diagrama diagonal', 'Vertical', 'Horizontal', 'Circular'], 'correcta' => 'Diagrama diagonal'],
        ['pregunta' => '4s se llena antes que...', 'opciones' => ['3d', '4p', '5s', '2p'], 'correcta' => '3d'],
        ['pregunta' => 'Excepciones al Aufbau ocurren por...', 'opciones' => ['Estabilidad', 'Tamaño', 'Color', 'Olor'], 'correcta' => 'Estabilidad'],
        ['pregunta' => '1s es el primer orbital en...', 'opciones' => ['Todos los átomos', 'Solo H', 'Solo He', 'Metales'], 'correcta' => 'Todos los átomos'],
        ['pregunta' => 'Configuración de Na', 'opciones' => ['[Ne] 3s¹', '[He] 3s¹', '[Ar] 3s¹', '3s¹'], 'correcta' => '[Ne] 3s¹'],
        ['pregunta' => 'Bloque s incluye...', 'opciones' => ['ns', 'np', 'nd', 'nf'], 'correcta' => 'ns'],
        ['pregunta' => 'Bloque d comienza en...', 'opciones' => ['3d', '1d', '2d', '4d'], 'correcta' => '3d'],
        ['pregunta' => 'Orden: 5s vs 4d', 'opciones' => ['5s antes', '4d antes', 'Igual', 'Aleatorio'], 'correcta' => '5s antes'],
        ['pregunta' => 'Madelung usa...', 'opciones' => ['n + l', 'n - l', 'n × l', 'n²'], 'correcta' => 'n + l'],

        // === MEDIO (10) ===
        ['pregunta' => 'n + l para 4p', 'opciones' => ['5', '4', '6', '3'], 'correcta' => '5'],
        ['pregunta' => 'n + l para 5s', 'opciones' => ['5', '6', '4', '7'], 'correcta' => '5'],
        ['pregunta' => 'Configuración de V (Z=23)', 'opciones' => ['[Ar] 4s² 3d³', '[Ar] 4s¹ 3d⁴', '[Ar] 4s³ 3d²', '[Ar] 3d⁵'], 'correcta' => '[Ar] 4s² 3d³'],
        ['pregunta' => 'Configuración de Ni (Z=28)', 'opciones' => ['[Ar] 4s² 3d⁸', '[Ar] 4s¹ 3d⁹', '[Ar] 4s⁰ 3d¹⁰', '[Ar] 4s³ 3d⁷'], 'correcta' => '[Ar] 4s² 3d⁸'],
        ['pregunta' => 'Excepción en bloque d', 'opciones' => ['Cr, Cu', 'Na, K', 'O, F', 'He, Ne'], 'correcta' => 'Cr, Cu'],
        ['pregunta' => 'Bloque f comienza en...', 'opciones' => ['4f', '3f', '5f', '2f'], 'correcta' => '4f'],
        ['pregunta' => 'Lantanoides son...', 'opciones' => ['4f', '3d', '5d', '6p'], 'correcta' => '4f'],
        ['pregunta' => 'Actínidos son...', 'opciones' => ['5f', '4f', '6d', '7p'], 'correcta' => '5f'],
        ['pregunta' => 'Orden correcto: 6s vs 5d', 'opciones' => ['6s antes', '5d antes', 'Igual', 'Aleatorio'], 'correcta' => '6s antes'],
        ['pregunta' => 'IUPAC acepta excepciones por...', 'opciones' => ['Estabilidad cuántica', 'Regla estricta', 'Masa', 'Volumen'], 'correcta' => 'Estabilidad cuántica'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Configuración de Pt (Z=78)', 'opciones' => ['[Xe] 6s¹ 4f¹⁴ 5d⁹', '[Xe] 6s² 4f¹⁴ 5d⁸', '[Xe] 6s⁰ 4f¹⁴ 5d¹⁰', '[Xe] 6s¹ 4f¹⁴ 5d⁸'], 'correcta' => '[Xe] 6s¹ 4f¹⁴ 5d⁹'],
        ['pregunta' => 'Configuración de Au (Z=79)', 'opciones' => ['[Xe] 6s¹ 4f¹⁴ 5d¹⁰', '[Xe] 6s² 4f¹⁴ 5d⁹', '[Xe] 6s⁰ 4f¹⁴ 5d¹⁰', '[Xe] 6s¹ 5d¹⁰'], 'correcta' => '[Xe] 6s¹ 4f¹⁴ 5d¹⁰'],
        ['pregunta' => 'Excepción en 5d', 'opciones' => ['Pt', 'Fe', 'Na', 'Cl'], 'correcta' => 'Pt'],
        ['pregunta' => 'Regla Madelung falla en...', 'opciones' => ['Transición d y f', 'Gases nobles', 'Alcalinos', 'Halógenos'], 'correcta' => 'Transición d y f'],
        ['pregunta' => 'n + l para 4f', 'opciones' => ['7', '6', '5', '4'], 'correcta' => '7'],
        ['pregunta' => 'n + l para 6s', 'opciones' => ['6', '7', '5', '8'], 'correcta' => '6'],
        ['pregunta' => 'Orden: 5f vs 6d', 'opciones' => ['5f antes', '6d antes', 'Igual', 'Aleatorio'], 'correcta' => '6d antes'],
        ['pregunta' => 'Máximo Z sin excepción', 'opciones' => ['20 (Ca)', '18 (Ar)', '10 (Ne)', '2 (He)'], 'correcta' => '20 (Ca)'],
        ['pregunta' => 'IUPAC permite...', 'opciones' => ['Configuraciones experimentales', 'Solo teóricas', 'Ninguna', 'Solo s y p'], 'correcta' => 'Configuraciones experimentales'],
        ['pregunta' => 'Regla de la lluvia es una...', 'opciones' => ['Mnemonica', 'Ley física', 'Fórmula', 'Ecuación'], 'correcta' => 'Mnemonica']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Electrones de Valencia (Capa Externa, Reactividad, Octeto, Bloques)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'electrones-valencia',
    'titulo' => 'Electrones de Valencia: La Clave de la Reactividad',
    'contenido' => '
        <h3>Electrones de Valencia</h3>
        <p>Los <strong>electrones de valencia</strong> son los electrones en la <strong>capa electrónica externa</strong> (nivel más alto de n). Determinan la <strong>reactividad química</strong> y cómo se forman enlaces. <strong>Regla del octeto:</strong> átomos tienden a tener 8 electrones en valencia.</p>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>1. Definición y Ubicación</h4>
        <ul>
            <li><strong>Valencia = electrones en orbitales de mayor n</strong></li>
            <li><strong>Grupo (principal) = número de valencia</strong> (excepto He)</li>
            <li><strong>Período = número de capas</strong></li>
        </ul>

        <table class="table">
            <thead>
                <tr><th>Elemento</th><th>Z</th><th>Configuración</th><th>Valencia</th><th>Grupo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>H</strong></td><td>1</td><td>1s¹</td><td>1</td><td>1</td></tr>
                <tr><td><strong>C</strong></td><td>6</td><td>1s² 2s² 2p²</td><td>4</td><td>14</td></tr>
                <tr><td><strong>Na</strong></td><td>11</td><td>[Ne] 3s¹</td><td>1</td><td>1</td></tr>
                <tr><td><strong>Cl</strong></td><td>17</td><td>[Ne] 3s² 3p⁵</td><td>7</td><td>17</td></tr>
                <tr><td><strong>Ar</strong></td><td>18</td><td>[Ne] 3s² 3p⁶</td><td>8</td><td>18</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>2. Reactividad Química</h4>
        <ul>
            <li><strong>Metales (1–3 valencia):</strong> Pierden electrones → cationes</li>
            <li><strong>No metales (5–7 valencia):</strong> Ganan electrones → aniones</li>
            <li><strong>Gases nobles (8):</strong> Estables (octeto completo)</li>
            <li><strong>Transición:</strong> Valencias variables (d + s)</li>
        </ul>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>3. Regla del Octeto</h4>
        <p>\[
            \\text{Átomos buscan 8 e⁻ en valencia (ns² np⁶)}
        \]</p>
        <ul>
            <li><strong>Li:</strong> pierde 1 → [He]</li>
            <li><strong>F:</strong> gana 1 → [Ne]</li>
            <li><strong>Mg:</strong> pierde 2 → [Ne]</li>
            <li><strong>O:</strong> gana 2 → [Ne]</li>
        </ul>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>4. Valencia en Bloques</h4>
        <table class="table">
            <thead>
                <tr><th>Bloque</th><th>Valencia</th><th>Ejemplos</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>s</strong></td><td>1–2</td><td>Na (1), Ca (2)</td></tr>
                <tr><td><strong>p</strong></td><td>13–18 → 3–8</td><td>Al (3), S (6)</td></tr>
                <tr><td><strong>d</strong></td><td>Variable (1–10)</td><td>Fe (2,3), Cu (1,2)</td></tr>
                <tr><td><strong>f</strong></td><td>Muy variable</td><td>Ce (3,4), U (3–6)</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Cl (Z=17)</strong> → [Ne] 3s² 3p⁵ → <strong>7 valencia</strong> → gana 1 → Cl⁻ (octeto).</p>
        </div>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>5. Excepciones y Casos Especiales</h4>
        <ul>
            <li><strong>He:</strong> 2 electrones → estable (dueto)</li>
            <li><strong>Be, B:</strong> menos de 8 en compuestos</li>
            <li><strong>P, S:</strong> expansión de octeto (d orbitales)</li>
        </ul>

        <div class="visual">
            <img src="assets/img/Valence-Electrons.jpg" alt="Diagrama valencia">
            <p><em>Visualización clara. Fuente: Science Facts.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/Oxygen-Valence-Electrons.jpg" alt="Oxígeno valencia">
            <p><em>Oxígeno: 6 valencia. Fuente: PraxiLabs.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/capas-electronicas.png" alt="Capas electrónicas">
            <p><em>Capas completas. Fuente: ScienceABC.</em></p>
        </div>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>6. SVG Animado: Formación de Octeto (Na + Cl → NaCl)</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#F3E5F5"/>

                <!-- Título -->
                <text x="400" y="50" fill="#4A148C" font-size="28" text-anchor="middle" font-weight="bold">REGLA DEL OCTETO</text>

                <!-- Na (izquierda) -->
                <g id="na">
                    <circle cx="200" cy="250" r="60" fill="#9C27B0" opacity="0.3"/>
                    <circle cx="200" cy="250" r="30" fill="#7B1FA2"/>
                    <text x="200" y="245" fill="white" font-size="16" text-anchor="middle">Na</text>
                    <text x="200" y="265" fill="#E1BEE7" font-size="12" text-anchor="middle">11 e⁻</text>
                    <!-- Valencia -->
                    <circle cx="140" cy="250" r="12" fill="#FF5252">
                        <animate attributeName="opacity" values="1;0" begin="2s" dur="1s"/>
                    </circle>
                    <text x="120" y="255" fill="#D500F9" font-size="10" text-anchor="middle">1 val</text>
                </g>

                <!-- Cl (derecha) -->
                <g id="cl">
                    <circle cx="600" cy="250" r="70" fill="#388E3C" opacity="0.3"/>
                    <circle cx="600" cy="250" r="40" fill="#43A047"/>
                    <text x="600" y="245" fill="white" font-size="16" text-anchor="middle">Cl</text>
                    <text x="600" y="265" fill="#C8E6C9" font-size="12" text-anchor="middle">17 e⁻</text>
                    <!-- 7 valencia -->
                    <g transform="translate(600,250)">
                        <circle cx="50" cy="0" r="10" fill="#FF5252"/>
                        <circle cx="35" cy="35" r="10" fill="#FF5252"/>
                        <circle cx="0" cy="50" r="10" fill="#FF5252"/>
                        <circle cx="-35" cy="35" r="10" fill="#FF5252"/>
                        <circle cx="-50" cy="0" r="10" fill="#FF5252"/>
                        <circle cx="-35" cy="-35" r="10" fill="#FF5252"/>
                        <circle cx="0" cy="-50" r="10" fill="#FF5252"/>
                    </g>
                    <text x="600" y="340" fill="#2E7D32" font-size="12" text-anchor="middle">7 val</text>
                </g>

                <!-- Transferencia -->
                <g id="transfer" opacity="0">
                    <circle cx="400" cy="250" r="12" fill="#FF5252">
                        <animate attributeName="cx" values="140;400;660" dur="2s" begin="3s"/>
                        <animate attributeName="opacity" values="0;1;1;0" begin="3s" dur="2s"/>
                    </circle>
                    <animate attributeName="opacity" values="0;1" begin="3s" dur="0.1s"/>
                </g>

                <!-- Na⁺ y Cl⁻ -->
                <g id="ions" opacity="0">
                    <circle cx="200" cy="250" r="50" fill="#7B1FA2" opacity="0.5"/>
                    <text x="200" y="255" fill="white" font-size="18" text-anchor="middle">Na⁺</text>
                    <circle cx="600" cy="250" r="60" fill="#43A047" opacity="0.5"/>
                    <text x="600" y="255" fill="white" font-size="18" text-anchor="middle">Cl⁻</text>
                    <!-- Octeto completo -->
                    <g transform="translate(600,250)">
                        <circle cx="45" cy="0" r="10" fill="#4CAF50"/>
                        <circle cx="32" cy="32" r="10" fill="#4CAF50"/>
                        <circle cx="0" cy="45" r="10" fill="#4CAF50"/>
                        <circle cx="-32" cy="32" r="10" fill="#4CAF50"/>
                        <circle cx="-45" cy="0" r="10" fill="#4CAF50"/>
                        <circle cx="-32" cy="-32" r="10" fill="#4CAF50"/>
                        <circle cx="0" cy="-45" r="10" fill="#4CAF50"/>
                        <circle cx="32" cy="-32" r="10" fill="#4CAF50"/>
                    </g>
                    <animate attributeName="opacity" values="0;1" begin="5s" dur="1s"/>
                </g>

                <!-- Octeto -->
                <rect x="450" y="350" width="300" height="100" fill="#FFF3E0" rx="15"/>
                <text x="600" y="380" fill="#E65100" font-size="16" text-anchor="middle">REGLA DEL OCTETO</text>
                <text x="600" y="405" fill="#FF6F00" font-size="14" text-anchor="middle">8 e⁻ en valencia</text>
                <text x="600" y="425" fill="#E65100" font-size="12" text-anchor="middle">Estabilidad</text>

                <!-- IUPAC -->
                <text x="400" y="470" fill="#6A1B9A" font-size="14" text-anchor="middle">IUPAC 2025: Valencia = e⁻ en ns, np (principal)</text>
            </svg>
            <p><em>SVG Animado: Na pierde 1 e⁻ → Cl gana 1 e⁻ → Na⁺Cl⁻ (octeto).</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Valencia de C (Z=6)', 'respuesta' => '4'],
        ['enunciado' => 'Valencia de O (Z=8)', 'respuesta' => '6'],
        ['enunciado' => 'Grupo 1 tiene valencia', 'respuesta' => '1'],

        // === APLICADOS ===
        ['enunciado' => 'Valencia de Al (Z=13)', 'respuesta' => '3'],
        ['enunciado' => 'Valencia de S (Z=16)', 'respuesta' => '6'],
        ['enunciado' => 'Ión formado por K', 'respuesta' => 'K⁺ (pierde 1)'],

        // === QUÍMICOS ===
        ['enunciado' => 'No metal con 5 valencia', 'respuesta' => 'N (nitrógeno)'],
        ['enunciado' => 'Metal con 2 valencia', 'respuesta' => 'Mg (magnesio)'],
        ['enunciado' => 'Gas noble valencia', 'respuesta' => '8 (excepto He: 2)'],

        // === AVANZADOS ===
        ['enunciado' => 'Valencia de Fe en Fe²⁺', 'respuesta' => '2 (pierde 4s²)'],
        ['enunciado' => 'IUPAC: valencia en transición', 'respuesta' => 'Variable (d + s)'],
        ['enunciado' => 'Electrón valencia en Br', 'respuesta' => '7 (4s² 4p⁵)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Electrones valencia están en...', 'opciones' => ['Capa externa', 'Núcleo', 'Todas las capas', 'Solo s'], 'correcta' => 'Capa externa'],
        ['pregunta' => 'Determinan la...', 'opciones' => ['Reactividad', 'Masa', 'Color', 'Densidad'], 'correcta' => 'Reactividad'],
        ['pregunta' => 'Valencia de Na (grupo 1)', 'opciones' => ['1', '11', '3', '8'], 'correcta' => '1'],
        ['pregunta' => 'Gases nobles tienen...', 'opciones' => ['8 valencia', '0', '1', '2'], 'correcta' => '8 valencia'],
        ['pregunta' => 'Valencia de F', 'opciones' => ['7', '9', '1', '8'], 'correcta' => '7'],
        ['pregunta' => 'Valencia de Mg', 'opciones' => ['2', '12', '4', '0'], 'correcta' => '2'],
        ['pregunta' => 'Metales alcalinos valencia', 'opciones' => ['1', '2', '3', '8'], 'correcta' => '1'],
        ['pregunta' => 'Halógenos valencia', 'opciones' => ['7', '1', '8', '5'], 'correcta' => '7'],
        ['pregunta' => 'Regla del octeto busca...', 'opciones' => ['8 e⁻ valencia', '2 e⁻', '18 e⁻', '0 e⁻'], 'correcta' => '8 e⁻ valencia'],
        ['pregunta' => 'He es estable con...', 'opciones' => ['2 e⁻ (dueto)', '8 e⁻', '1 e⁻', '0 e⁻'], 'correcta' => '2 e⁻ (dueto)'],

        // === MEDIO (10) ===
        ['pregunta' => 'Valencia de Si (grupo 14)', 'opciones' => ['4', '14', '2', '6'], 'correcta' => '4'],
        ['pregunta' => 'Valencia de P (grupo 15)', 'opciones' => ['5', '3', '15', '8'], 'correcta' => '5'],
        ['pregunta' => 'Ión O²⁻ tiene valencia efectiva', 'opciones' => ['8', '6', '2', '10'], 'correcta' => '8'],
        ['pregunta' => 'Transición valencia', 'opciones' => ['Variable', 'Fija', 'Siempre 8', 'Siempre 1'], 'correcta' => 'Variable'],
        ['pregunta' => 'Valencia de Cr en Cr³⁺', 'opciones' => ['3', '6', '2', '1'], 'correcta' => '3'],
        ['pregunta' => 'Bloque p valencia', 'opciones' => ['3 a 8', '1 a 2', '1 a 10', 'Solo 8'], 'correcta' => '3 a 8'],
        ['pregunta' => 'Electrón valencia en Ca', 'opciones' => ['4s²', '3s²', '4p⁶', '3d¹⁰'], 'correcta' => '4s²'],
        ['pregunta' => 'No metal que gana 3 e⁻', 'opciones' => ['N', 'O', 'F', 'Cl'], 'correcta' => 'N'],
        ['pregunta' => 'IUPAC: valencia principal', 'opciones' => ['ns + np', 'nd', 'nf', 'solo s'], 'correcta' => 'ns + np'],
        ['pregunta' => 'Expansión de octeto en...', 'opciones' => ['S, P', 'C, N', 'H, He', 'Na, K'], 'correcta' => 'S, P'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Valencia de Mn en MnO₄⁻', 'opciones' => ['+7', '+2', '+3', '+4'], 'correcta' => '+7'],
        ['pregunta' => 'Valencia de Fe en Fe(CN)₆³⁻', 'opciones' => ['+3', '+2', '+6', '+1'], 'correcta' => '+3'],
        ['pregunta' => 'Lantanoides valencia típica', 'opciones' => ['+3', '+2', '+4', '+1'], 'correcta' => '+3'],
        ['pregunta' => 'Actínidos valencia común', 'opciones' => ['+3 a +6', '+1 a +2', '+7', '+8'], 'correcta' => '+3 a +6'],
        ['pregunta' => 'Valencia de Cu en Cu⁺', 'opciones' => ['1 (pierde 4s¹)', '2', '0', '3'], 'correcta' => '1 (pierde 4s¹)'],
        ['pregunta' => 'Electrón valencia en Zn', 'opciones' => ['4s²', '3d¹⁰', '4p⁶', '5s¹'], 'correcta' => '4s²'],
        ['pregunta' => 'Ión con octeto: Al³⁺', 'opciones' => ['[Ne]', '[He]', '[Ar]', '[Kr]'], 'correcta' => '[Ne]'],
        ['pregunta' => 'Elementos con valencia 0', 'opciones' => ['Gases nobles', 'Metales', 'No metales', 'Transición'], 'correcta' => 'Gases nobles'],
        ['pregunta' => 'Valencia máxima teórica', 'opciones' => ['8 (octeto)', '18', '32', '7'], 'correcta' => '8 (octeto)'],
        ['pregunta' => 'IUPAC define valencia como...', 'opciones' => ['e⁻ en capa más externa', 'e⁻ totales', 'protones', 'neutrones'], 'correcta' => 'e⁻ en capa más externa']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Electrón Diferencial (Último e⁻, Bloque, Propiedades, Excepciones)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'electron-diferencial',
    'titulo' => 'Electrón Diferencial: El Último en Entrar, el Primero en Salir',
    'contenido' => '
        <h3>Electrón Diferencial</h3>
        <p>El <strong>electrón diferencial</strong> es el <strong>último electrón agregado</strong> al construir la configuración electrónica usando el <strong>principio de Aufbau</strong>. Determina el <strong>bloque periódico</strong> (s, p, d, f) y las <strong>propiedades químicas</strong> del elemento.</p>

        <hr style="border:1px dashed #388E3C;">

        <h4>1. Definición y Regla</h4>
        <ul>
            <li><strong>Diferencial = electrón en el orbital de mayor energía</strong></li>
            <li><strong>Se identifica en la configuración completa</strong></li>
            <li><strong>Determina:</strong> bloque, valencia (parcial), reactividad</li>
        </ul>

        <table class="table">
            <thead>
                <tr><th>Elemento</th><th>Z</th><th>Configuración</th><th>Diferencial</th><th>Bloque</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Na</strong></td><td>11</td><td>1s² 2s² 2p⁶ 3s¹</td><td>3s¹</td><td>s</td></tr>
                <tr><td><strong>Cl</strong></td><td>17</td><td>1s² 2s² 2p⁶ 3s² 3p⁵</td><td>3p⁵</td><td>p</td></tr>
                <tr><td><strong>Sc</strong></td><td>21</td><td>[Ar] 4s² 3d¹</td><td>3d¹</td><td>d</td></tr>
                <tr><td><strong>Ce</strong></td><td>58</td><td>[Xe] 6s² 4f¹ 5d¹</td><td>4f¹</td><td>f</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #388E3C;">

        <h4>2. Bloque Periódico por Diferencial</h4>
        <table class="table">
            <thead>
                <tr><th>Bloque</th><th>Orbital Diferencial</th><th>Grupos</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>s</strong></td><td>ns¹⁻²</td><td>1–2</td></tr>
                <tr><td><strong>p</strong></td><td>np¹⁻⁶</td><td>13–18</td></tr>
                <tr><td><strong>d</strong></td><td>(n-1)d¹⁻¹⁰</td><td>3–12</td></tr>
                <tr><td><strong>f</strong></td><td>(n-2)f¹⁻¹⁴</td><td>Lantanoides, Actínidos</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #388E3C;">

        <h4>3. Excepciones (Aufbau)</h4>
        <ul>
            <li><strong>Cr:</strong> [Ar] 4s¹ 3d⁵ → diferencial <strong>3d⁵</strong> (no 4s²)</li>
            <li><strong>Cu:</strong> [Ar] 4s¹ 3d¹⁰ → diferencial <strong>3d¹⁰</strong></li>
        </ul>
        <p>→ <strong>Bloque d</strong>, aunque 4s es más externo.</p>

        <hr style="border:1px dashed #388E3C;">

        <h4>4. Importancia Química</h4>
        <ul>
            <li><strong>Reactividad:</strong> fácil pérdida/ganancia</li>
            <li><strong>Valencia:</strong> electrones disponibles</li>
            <li><strong>Espectros:</strong> transiciones electrónicas</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Fe (Z=26)</strong> → [Ar] 4s² 3d⁶ → diferencial <strong>3d⁶</strong> → bloque <strong>d</strong>, valencia variable (2+, 3+).</p>
        </div>

        <div class="visual">
            <img src="assets/img/orbitales_moleculares.png" alt="Representación orbital">
            <p><em>Orbitales. Fuente: ThoughtCo.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/configruacion_electronicos.jpg" alt="Diagramas de caja">
            <p><em>Cajas orbitales 1–18. Fuente: Pathways to Chemistry.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/diagrama-electrones.jpg" alt="Configuración electrónica">
            <p><em>Configuración. Fuente: Science Facts.</em></p>
        </div>

        <hr style="border:1px dashed #388E3C;">

        <h4>5. SVG Animado: Construcción + Diferencial (H → Ar)</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E8F5E9"/>

                <!-- Título -->
                <text x="400" y="50" fill="#1B5E20" font-size="28" text-anchor="middle" font-weight="bold">ELECTRÓN DIFERENCIAL</text>

                <!-- 1s -->
                <g id="1s">
                    <circle cx="150" cy="200" r="40" fill="#4CAF50" opacity="0.3"/>
                    <text x="150" y="180" fill="#2E7D32" font-size="14" text-anchor="middle">1s</text>
                    <circle cx="130" cy="200" r="10" fill="#81C784">
                        <animate attributeName="opacity" values="0;1" begin="0s" dur="0.5s"/>
                    </circle>
                    <circle cx="170" cy="200" r="10" fill="#81C784">
                        <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    </circle>
                    <text x="150" y="240" fill="#1B5E20" font-size="12" text-anchor="middle">H, He</text>
                </g>

                <!-- 2s 2p -->
                <g id="2sp" opacity="0">
                    <circle cx="350" cy="200" r="60" fill="#66BB6A" opacity="0.3">
                        <animate attributeName="opacity" values="0;0.3" begin="1s" dur="0.5s"/>
                    </circle>
                    <text x="350" y="160" fill="#2E7D32" font-size="14" text-anchor="middle">2s</text>
                    <ellipse cx="550" cy="200" rx="80" ry="40" fill="#4CAF50" opacity="0.2">
                        <animate attributeName="opacity" values="0;0.2" begin="2s" dur="0.5s"/>
                    </ellipse>
                    <text x="550" y="160" fill="#2E7D32" font-size="14" text-anchor="middle">2p</text>
                    <!-- Diferencial en Ne -->
                    <circle cx="630" cy="200" r="12" fill="#FF5252">
                        <animate attributeName="opacity" values="0;1" begin="3s" dur="0.5s"/>
                    </circle>
                    <text x="630" y="230" fill="#D50000" font-size="10" text-anchor="middle">Diferencial: 2p⁶</text>
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.1s"/>
                </g>

                <!-- 3s 3p -->
                <g id="3sp" opacity="0">
                    <circle cx="350" cy="350" r="50" fill="#43A047" opacity="0.3">
                        <animate attributeName="opacity" values="0;0.3" begin="4s" dur="0.5s"/>
                    </circle>
                    <text x="350" y="320" fill="#2E7D32" font-size="14" text-anchor="middle">3s</text>
                    <ellipse cx="550" cy="350" rx="70" ry="35" fill="#43A047" opacity="0.2">
                        <animate attributeName="opacity" values="0;0.2" begin="5s" dur="0.5s"/>
                    </ellipse>
                    <text x="550" y="320" fill="#2E7D32" font-size="14" text-anchor="middle">3p</text>
                    <!-- Diferencial en Ar -->
                    <circle cx="620" cy="350" r="12" fill="#FF5252">
                        <animate attributeName="opacity" values="0;1" begin="6s" dur="0.5s"/>
                    </circle>
                    <text x="620" y="380" fill="#D50000" font-size="10" text-anchor="middle">Diferencial: 3p⁶</text>
                    <animate attributeName="opacity" values="0;1" begin="4s" dur="0.1s"/>
                </g>

                <!-- Excepción Cr -->
                <g id="excepcion" opacity="0">
                    <rect x="450" y="100" width="300" height="100" fill="#FFF3E0" rx="15">
                        <animate attributeName="opacity" values="0;1" begin="7s" dur="0.5s"/>
                    </rect>
                    <text x="600" y="130" fill="#E65100" font-size="14" text-anchor="middle">EXCEPCIÓN: Cr</text>
                    <text x="600" y="155" fill="#FF6F00" font-size="12" text-anchor="middle">[Ar] 4s¹ 3d⁵</text>
                    <text x="600" y="175" fill="#E65100" font-size="10" text-anchor="middle">Diferencial: 3d⁵</text>
                </g>

                <!-- IUPAC -->
                <text x="400" y="470" fill="#2E7D32" font-size="14" text-anchor="middle">IUPAC 2025: Diferencial = último en Aufbau</text>
            </svg>
            <p><em>SVG Animado: Llenado 1s → 3p + Diferencial en Ne, Ar, Cr.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Electrón diferencial de Mg (Z=12)', 'respuesta' => '3s²'],
        ['enunciado' => 'Electrón diferencial de Al (Z=13)', 'respuesta' => '3p¹'],
        ['enunciado' => 'Bloque determinado por', 'respuesta' => 'Diferencial'],

        // === APLICADOS ===
        ['enunciado' => 'Diferencial de K (Z=19)', 'respuesta' => '4s¹'],
        ['enunciado' => 'Diferencial de Ca (Z=20)', 'respuesta' => '4s²'],
        ['enunciado' => 'Diferencial de Ti (Z=22)', 'respuesta' => '3d²'],

        // === QUÍMICOS ===
        ['enunciado' => 'Diferencial de Cl (Z=17)', 'respuesta' => '3p⁵'],
        ['enunciado' => 'Diferencial de Cr (Z=24)', 'respuesta' => '3d⁵'],
        ['enunciado' => 'Bloque de Zn (Z=30)', 'respuesta' => 'd (3d¹⁰)'],

        // === AVANZADOS ===
        ['enunciado' => 'Diferencial de La (Z=57)', 'respuesta' => '5d¹'],
        ['enunciado' => 'IUPAC: diferencial en transición', 'respuesta' => 'd o f, no s'],
        ['enunciado' => 'Diferencial de U (Z=92)', 'respuesta' => '5f³ 6d¹ → 5f³']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Electrón diferencial es...', 'opciones' => ['Último agregado', 'Primero', 'Valencia', 'Núcleo'], 'correcta' => 'Último agregado'],
        ['pregunta' => 'Determina el bloque', 'opciones' => ['Sí', 'No', 'A veces', 'Nunca'], 'correcta' => 'Sí'],
        ['pregunta' => 'Diferencial de Na', 'opciones' => ['3s¹', '2p⁶', '1s²', '3p¹'], 'correcta' => '3s¹'],
        ['pregunta' => 'Diferencial de O', 'opciones' => ['2p⁴', '2s²', '1s²', '3s¹'], 'correcta' => '2p⁴'],
        ['pregunta' => 'Bloque s tiene diferencial en...', 'opciones' => ['ns', 'np', 'nd', 'nf'], 'correcta' => 'ns'],
        ['pregunta' => 'Bloque p diferencial en...', 'opciones' => ['np', 'ns', 'nd', 'nf'], 'correcta' => 'np'],
        ['pregunta' => 'Diferencial de Ne', 'opciones' => ['2p⁶', '2s²', '1s²', '3s¹'], 'correcta' => '2p⁶'],
        ['pregunta' => 'Importancia del diferencial', 'opciones' => ['Propiedades químicas', 'Masa', 'Color', 'Volumen'], 'correcta' => 'Propiedades químicas'],
        ['pregunta' => 'Diferencial de He', 'opciones' => ['1s²', '2s¹', '1s¹', '2p¹'], 'correcta' => '1s²'],
        ['pregunta' => 'Diferencial de Li', 'opciones' => ['2s¹', '1s²', '2p¹', '3s¹'], 'correcta' => '2s¹'],

        // === MEDIO (10) ===
        ['pregunta' => 'Diferencial de Ar', 'opciones' => ['3p⁶', '3s²', '2p⁶', '4s¹'], 'correcta' => '3p⁶'],
        ['pregunta' => 'Diferencial de Sc', 'opciones' => ['3d¹', '4s²', '3p⁶', '4p¹'], 'correcta' => '3d¹'],
        ['pregunta' => 'Diferencial de Cu', 'opciones' => ['3d¹⁰', '4s¹', '4s²', '3d⁹'], 'correcta' => '3d¹⁰'],
        ['pregunta' => 'Bloque de Fe', 'opciones' => ['d', 's', 'p', 'f'], 'correcta' => 'd'],
        ['pregunta' => 'Diferencial de Br', 'opciones' => ['4p⁵', '4s²', '3d¹⁰', '5s¹'], 'correcta' => '4p⁵'],
        ['pregunta' => 'Diferencial de Kr', 'opciones' => ['4p⁶', '4s²', '3d¹⁰', '5s¹'], 'correcta' => '4p⁶'],
        ['pregunta' => 'Excepción Cr diferencial', 'opciones' => ['3d⁵', '4s¹', '4s²', '3d⁴'], 'correcta' => '3d⁵'],
        ['pregunta' => 'Diferencial de Mo', 'opciones' => ['4d⁵', '5s¹', '5s²', '4d⁴'], 'correcta' => '4d⁵'],
        ['pregunta' => 'IUPAC: bloque por', 'opciones' => ['Diferencial', 'Valencia', 'Masa', 'Período'], 'correcta' => 'Diferencial'],
        ['pregunta' => 'Diferencial de Ce', 'opciones' => ['4f¹', '6s²', '5d¹', '4f⁰'], 'correcta' => '4f¹'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Diferencial de Pt (Z=78)', 'opciones' => ['5d⁹', '6s¹', '4f¹⁴', '6s²'], 'correcta' => '5d⁹'],
        ['pregunta' => 'Diferencial de U (Z=92)', 'opciones' => ['5f³', '7s²', '6d¹', '5f⁴'], 'correcta' => '5f³'],
        ['pregunta' => 'Bloque de La (Z=57)', 'opciones' => ['d', 'f', 's', 'p'], 'correcta' => 'd'],
        ['pregunta' => 'Diferencial de Ac (Z=89)', 'opciones' => ['6d¹', '7s²', '5f⁰', '7p¹'], 'correcta' => '6d¹'],
        ['pregunta' => 'Diferencial de Au', 'opciones' => ['5d¹⁰', '6s¹', '4f¹⁴', '6s²'], 'correcta' => '5d¹⁰'],
        ['pregunta' => 'Excepción en 5d', 'opciones' => ['Pt, Au', 'Na, K', 'O, F', 'He, Ne'], 'correcta' => 'Pt, Au'],
        ['pregunta' => 'Diferencial de Gd', 'opciones' => ['4f⁷', '5d¹', '6s²', '4f⁸'], 'correcta' => '4f⁷'],
        ['pregunta' => 'IUPAC permite diferencial en...', 'opciones' => ['d o f para transición', 'solo s', 'solo p', 'ninguno'], 'correcta' => 'd o f para transición'],
        ['pregunta' => 'Diferencial de Th', 'opciones' => ['6d²', '7s²', '5f⁰', '6d¹'], 'correcta' => '6d²'],
        ['pregunta' => 'Diferencial define...', 'opciones' => ['Bloque y serie', 'Solo período', 'Solo grupo', 'Masa atómica'], 'correcta' => 'Bloque y serie']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Diagrama de Orbitales (Box, Aufbau, Pauli, Hund, Spin, Excepciones)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'diagrama-orbitales',
    'titulo' => 'Diagrama de Orbitales: El Mapa Visual de los Electrones',
    'contenido' => '
        <h3>Diagrama de Orbitales (Box Diagram)</h3>
        <p>El <strong>diagrama de orbitales</strong> representa cada <strong>orbital como una caja</strong> y los <strong>electrones como flechas</strong> (↑ para +1/2, ↓ para −1/2). Sigue:</p>
        <ul>
            <li><strong>Aufbau:</strong> Llenar de menor a mayor energía</li>
            <li><strong>Pauli:</strong> Máximo 2 e⁻ por caja, spins opuestos</li>
            <li><strong>Hund:</strong> Llenar singly antes de parear</li>
        </ul>

        <hr style="border:1px dashed #0288D1;">

        <h4>1. Reglas del Diagrama</h4>
        <table class="table">
            <thead>
                <tr><th>Principio</th><th>Regla</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Aufbau</strong></td><td>1s → 2s → 2p → 3s → 3p → 4s → 3d → ...</td></tr>
                <tr><td><strong>Pauli</strong></td><td>Max 2 e⁻/orbital, ↑↓</td></tr>
                <tr><td><strong>Hund</strong></td><td>Unpaired ↑ primero en p, d, f</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #0288D1;">

        <h4>2. Ejemplos Básicos</h4>
        <table class="table">
            <thead>
                <tr><th>Elemento</th><th>Diagrama</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>H</strong></td><td>1s: [↑]</td></tr>
                <tr><td><strong>He</strong></td><td>1s: [↑↓]</td></tr>
                <tr><td><strong>C</strong></td><td>1s: [↑↓] 2s: [↑↓] 2p: [↑] [↑] [ ]</td></tr>
                <tr><td><strong>N</strong></td><td>1s: [↑↓] 2s: [↑↓] 2p: [↑] [↑] [↑]</td></tr>
                <tr><td><strong>O</strong></td><td>1s: [↑↓] 2s: [↑↓] 2p: [↑↓] [↑] [↑]</td></tr>
                <tr><td><strong>Ne</strong></td><td>1s: [↑↓] 2s: [↑↓] 2p: [↑↓] [↑↓] [↑↓]</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #0288D1;">

        <h4>3. Hund en Acción (p³)</h4>
        <p>Para subnivel <strong>p³</strong> (ej: N):</p>
        <p style="font-family: monospace; background:#E1F5FE; padding:10px;">
            2p: [↑] [↑] [↑]  → 3 electrones unpaired
        </p>

        <hr style="border:1px dashed #0288D1;">

        <h4>4. Excepciones (Cr, Cu)</h4>
        <ul>
            <li><strong>Cr:</strong> [Ar] ↑↓ ↑ ↑ ↑ ↑ ↑ (4s¹ 3d⁵) → medio lleno</li>
            <li><strong>Cu:</strong> [Ar] ↑↓ ↑↓ ↑↓ ↑↓ ↑↓ ↑↓ (4s¹ 3d¹⁰) → d lleno</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>N (Z=7)</strong><br>
            1s: [↑↓] &nbsp; 2s: [↑↓] &nbsp; 2p: [↑] [↑] [↑] → <strong>Hund</strong></p>
        </div>

        <div class="visual">
            <img src="assets/img/oxygen-fluorine-neon-configuration-orbital-diagram.png" alt="O, F, Ne diagramas">
            <p><em>Diagrama O, F, Ne. Fuente: Chemistry Steps.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/orbital diagrams.jpg" alt="Video tutorial">
            <p><em>Explicación visual. Fuente: YouTube.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/configruacion_electronicos.jpg" alt="Primeros 18 elementos">
            <p><em>Box para 1–18. Fuente: Pathways to Chemistry.</em></p>
        </div>

        <hr style="border:1px dashed #0288D1;">

        <h4>5. SVG Animado: Llenado 1s → 2p (H → Ne)</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E1F5FE"/>

                <!-- Título -->
                <text x="400" y="50" fill="#0277BD" font-size="28" text-anchor="middle" font-weight="bold">DIAGRAMA DE ORBITALES</text>

                <!-- 1s -->
                <g id="1s">
                    <rect x="100" y="150" width="60" height="40" fill="#81D4FA" rx="5"/>
                    <text x="130" y="140" fill="#01579B" font-size="14" text-anchor="middle">1s</text>
                    <line x1="115" y1="170" x2="115" y2="160" stroke="#D50000" stroke-width="3" marker-end="url(#arrow-up)">
                        <animate attributeName="opacity" values="0;1" begin="0s" dur="0.5s"/>
                    </line>
                    <line x1="145" y1="160" x2="145" y2="170" stroke="#2962FF" stroke-width="3" marker-end="url(#arrow-down)">
                        <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    </line>
                    <text x="130" y="210" fill="#0277BD" font-size="12" text-anchor="middle">H → He</text>
                </g>

                <!-- 2s -->
                <g id="2s" opacity="0">
                    <rect x="250" y="150" width="60" height="40" fill="#4FC3F7" rx="5">
                        <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                    </rect>
                    <text x="280" y="140" fill="#01579B" font-size="14" text-anchor="middle">2s</text>
                    <line x1="265" y1="170" x2="265" y2="160" stroke="#D50000" stroke-width="3" marker-end="url(#arrow-up)">
                        <animate attributeName="opacity" values="0;1" begin="1.5s" dur="0.5s"/>
                    </line>
                    <line x1="295" y1="160" x2="295" y2="170" stroke="#2962FF" stroke-width="3" marker-end="url(#arrow-down)">
                        <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                    </line>
                    <text x="280" y="210" fill="#0277BD" font-size="12" text-anchor="middle">Li → Be</text>
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.1s"/>
                </g>

                <!-- 2p (3 cajas) -->
                <g id="2p" opacity="0">
                    <!-- p_x -->
                    <rect x="400" y="130" width="50" height="40" fill="#29B6F6" rx="5">
                        <animate attributeName="opacity" values="0;1" begin="2.5s" dur="0.5s"/>
                    </rect>
                    <!-- p_y -->
                    <rect x="460" y="130" width="50" height="40" fill="#29B6F6" rx="5">
                        <animate attributeName="opacity" values="0;1" begin="2.5s" dur="0.5s"/>
                    </rect>
                    <!-- p_z -->
                    <rect x="520" y="130" width="50" height="40" fill="#29B6F6" rx="5">
                        <animate attributeName="opacity" values="0;1" begin="2.5s" dur="0.5s"/>
                    </rect>
                    <text x="495" y="120" fill="#01579B" font-size="14" text-anchor="middle">2p</text>

                    <!-- Llenado B → Ne -->
                    <line x1="415" y1="150" x2="415" y2="140" stroke="#D50000" stroke-width="3" marker-end="url(#arrow-up)">
                        <animate attributeName="opacity" values="0;1" begin="3s" dur="0.5s"/>
                    </line>
                    <line x1="475" y1="150" x2="475" y2="140" stroke="#D50000" stroke-width="3" marker-end="url(#arrow-up)">
                        <animate attributeName="opacity" values="0;1" begin="3.5s" dur="0.5s"/>
                    </line>
                    <line x1="535" y1="150" x2="535" y2="140" stroke="#D50000" stroke-width="3" marker-end="url(#arrow-up)">
                        <animate attributeName="opacity" values="0;1" begin="4s" dur="0.5s"/>
                    </line>
                    <!-- Pareado O → Ne -->
                    <line x1="415" y1="140" x2="415" y2="150" stroke="#2962FF" stroke-width="3" marker-end="url(#arrow-down)">
                        <animate attributeName="opacity" values="0;1" begin="4.5s" dur="0.5s"/>
                    </line>
                    <line x1="475" y1="140" x2="475" y2="150" stroke="#2962FF" stroke-width="3" marker-end="url(#arrow-down)">
                        <animate attributeName="opacity" values="0;1" begin="5s" dur="0.5s"/>
                    </line>
                    <line x1="535" y1="140" x2="535" y2="150" stroke="#2962FF" stroke-width="3" marker-end="url(#arrow-down)">
                        <animate attributeName="opacity" values="0;1" begin="5.5s" dur="0.5s"/>
                    </line>

                    <text x="495" y="190" fill="#0277BD" font-size="12" text-anchor="middle">B → Ne (Hund)</text>
                    <animate attributeName="opacity" values="0;1" begin="2.5s" dur="0.1s"/>
                </g>

                <!-- Hund -->
                <rect x="450" y="300" width="300" height="100" fill="#FFF3E0" rx="15"/>
                <text x="600" y="330" fill="#E65100" font-size="16" text-anchor="middle">REGLA DE HUND</text>
                <text x="600" y="355" fill="#FF6F00" font-size="14" text-anchor="middle">↑ ↑ ↑ antes de parear</text>
                <text x="600" y="375" fill="#E65100" font-size="12" text-anchor="middle">Máxima multiplicidad</text>

                <!-- Pauli -->
                <text x="400" y="470" fill="#0277BD" font-size="14" text-anchor="middle">Pauli: ↑↓ máximo por caja</text>

                <!-- Marcadores -->
                <defs>
                    <marker id="arrow-up" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto" markerUnits="strokeWidth">
                        <path d="M0,0 L0,6 L9,3 z" fill="#D50000"/>
                    </marker>
                    <marker id="arrow-down" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                        <path d="M0,3 L9,0 L9,6 z" fill="#2962FF"/>
                    </marker>
                </defs>
            </svg>
            <p><em>SVG Animado: 1s → 2s → 2p (H → Ne) + Hund.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Diagrama de O (Z=8)', 'respuesta' => '1s↑↓ 2s↑↓ 2p↑↓ ↑ ↑'],
        ['enunciado' => 'Diagrama de N (Z=7)', 'respuesta' => '1s↑↓ 2s↑↓ 2p↑ ↑ ↑'],
        ['enunciado' => 'Pauli permite por orbital', 'respuesta' => '2 (↑↓)'],

        // === APLICADOS ===
        ['enunciado' => 'Diagrama de F (Z=9)', 'respuesta' => '1s↑↓ 2s↑↓ 2p↑↓ ↑↓ ↑'],
        ['enunciado' => 'Diagrama de Ne (Z=10)', 'respuesta' => '1s↑↓ 2s↑↓ 2p↑↓ ↑↓ ↑↓'],
        ['enunciado' => 'Hund para 2p³', 'respuesta' => '↑ ↑ ↑'],

        // === QUÍMICOS ===
        ['enunciado' => 'Diagrama de Cr (excepción)', 'respuesta' => '4s↑ 3d↑ ↑ ↑ ↑ ↑'],
        ['enunciado' => 'Diagrama de Cu (excepción)', 'respuesta' => '4s↑ 3d↑↓ ↑↓ ↑↓ ↑↓ ↑↓'],
        ['enunciado' => 'Spin up es', 'respuesta' => '+1/2'],

        // === AVANZADOS ===
        ['enunciado' => 'Diagrama de Fe (Z=26)', 'respuesta' => '4s↑↓ 3d↑↓ ↑↓ ↑ ↑ ↑'],
        ['enunciado' => 'IUPAC: diagrama muestra', 'respuesta' => 'Distribución real (con excepciones)'],
        ['enunciado' => 'Máximo unpaired en d⁵', 'respuesta' => '5 (↑ ↑ ↑ ↑ ↑)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Diagrama orbital usa...', 'opciones' => ['Cajas y flechas', 'Números', 'Letras', 'Colores'], 'correcta' => 'Cajas y flechas'],
        ['pregunta' => 'Hund dice...', 'opciones' => ['Unpaired primero', 'Paired primero', 'Aleatorio', 'Nada'], 'correcta' => 'Unpaired primero'],
        ['pregunta' => 'Pauli permite...', 'opciones' => ['2 e⁻/caja', '1 e⁻/caja', '3 e⁻/caja', 'Ilimitado'], 'correcta' => '2 e⁻/caja'],
        ['pregunta' => 'Ne tiene...', 'opciones' => ['Todo paired', 'Unpaired', 'Mitad', 'Nada'], 'correcta' => 'Todo paired'],
        ['pregunta' => 'C tiene en 2p...', 'opciones' => ['2 unpaired', '1 unpaired', '0 unpaired', '3 unpaired'], 'correcta' => '2 unpaired'],
        ['pregunta' => 'N tiene en 2p...', 'opciones' => ['3 unpaired', '2 unpaired', '1 unpaired', '0'], 'correcta' => '3 unpaired'],
        ['pregunta' => 'Flecha ↑ es spin...', 'opciones' => ['+1/2', '−1/2', '0', '+1'], 'correcta' => '+1/2'],
        ['pregunta' => 'Flecha ↓ es spin...', 'opciones' => ['−1/2', '+1/2', '0', '−1'], 'correcta' => '−1/2'],
        ['pregunta' => 'Subnivel p tiene...', 'opciones' => ['3 cajas', '1 caja', '5 cajas', '7 cajas'], 'correcta' => '3 cajas'],
        ['pregunta' => 'Subnivel d tiene...', 'opciones' => ['5 cajas', '3 cajas', '1 caja', '7 cajas'], 'correcta' => '5 cajas'],

        // === MEDIO (10) ===
        ['pregunta' => 'O tiene en 2p...', 'opciones' => ['2 unpaired', '1 unpaired', '3 unpaired', '0'], 'correcta' => '2 unpaired'],
        ['pregunta' => 'F tiene en 2p...', 'opciones' => ['1 unpaired', '2 unpaired', '0', '3'], 'correcta' => '1 unpaired'],
        ['pregunta' => 'Cr diagrama 3d...', 'opciones' => ['5 unpaired', '4 unpaired', '6 unpaired', '0'], 'correcta' => '5 unpaired'],
        ['pregunta' => 'Cu diagrama 3d...', 'opciones' => ['Todo paired', '1 unpaired', '5 unpaired', '3'], 'correcta' => 'Todo paired'],
        ['pregunta' => 'Diagrama de S (Z=16)', 'opciones' => ['2p↑↓ ↑↓ ↑', '2p↑↓ ↑ ↑', '2p↑ ↑ ↑', '2p↑↓ ↑↓ ↑↓'], 'correcta' => '2p↑↓ ↑↓ ↑'],
        ['pregunta' => 'Diagrama de Cl (Z=17)', 'opciones' => ['3p↑↓ ↑↓ ↑', '3p↑↓ ↑ ↑', '3p↑ ↑ ↑', '3p↑↓ ↑↓ ↑↓'], 'correcta' => '3p↑↓ ↑↓ ↑'],
        ['pregunta' => 'Máximo unpaired en p⁴', 'opciones' => ['2', '1', '3', '0'], 'correcta' => '2'],
        ['pregunta' => 'IUPAC permite...', 'opciones' => ['Excepciones en diagrama', 'Solo teórico', 'Ninguna', 'Solo s,p'], 'correcta' => 'Excepciones en diagrama'],
        ['pregunta' => 'Diagrama de V (Z=23)', 'opciones' => ['3d↑ ↑ ↑', '3d↑↓ ↑ ↑', '3d↑↓ ↑↓ ↑', '3d↑↓ ↑↓ ↑↓'], 'correcta' => '3d↑ ↑ ↑'],
        ['pregunta' => 'Hund maximiza...', 'opciones' => ['Multiplicidad de spin', 'Energía', 'Masa', 'Volumen'], 'correcta' => 'Multiplicidad de spin'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Diagrama de Mn²⁺ (Z=25)', 'opciones' => ['3d↑ ↑ ↑ ↑ ↑', '3d↑↓ ↑ ↑ ↑', '3d↑↓ ↑↓ ↑', '3d↑↓ ↑↓ ↑↓'], 'correcta' => '3d↑ ↑ ↑ ↑ ↑'],
        ['pregunta' => 'Diagrama de Co³⁺ (Z=27)', 'opciones' => ['3d↑↓ ↑ ↑ ↑', '3d↑ ↑ ↑ ↑ ↑', '3d↑↓ ↑↓ ↑↓', '3d↑↓ ↑↓ ↑'], 'correcta' => '3d↑↓ ↑ ↑ ↑'],
        ['pregunta' => 'Diagrama de Ni²⁺ (Z=28)', 'opciones' => ['3d↑↓ ↑↓ ↑↓ ↑↑', '3d↑↓ ↑↓ ↑↓ ↑↓', '3d↑ ↑ ↑ ↑ ↑', '3d↑↓ ↑ ↑ ↑'], 'correcta' => '3d↑↓ ↑↓ ↑↓ ↑↑'],
        ['pregunta' => 'Máximo unpaired en d⁶ (high spin)', 'opciones' => ['4', '3', '2', '5'], 'correcta' => '4'],
        ['pregunta' => 'Diagrama de Gd (Z=64)', 'opciones' => ['4f↑ ↑ ↑ ↑ ↑ ↑ ↑', '4f↑↓ ↑↓ ↑↓ ↑↓', '4f↑↓ ↑ ↑ ↑ ↑', '4f↑ ↑ ↑ ↑ ↑'], 'correcta' => '4f↑ ↑ ↑ ↑ ↑ ↑ ↑'],
        ['pregunta' => 'IUPAC: diagrama debe mostrar...', 'opciones' => ['Configuración experimental', 'Solo teórica', 'Solo s,p', 'Nada'], 'correcta' => 'Configuración experimental'],
        ['pregunta' => 'Diagrama de Pt (Z=78)', 'opciones' => ['5d↑↓ ↑↓ ↑↓ ↑↓ ↑', '5d↑↓ ↑↓ ↑↓ ↑↓ ↑↓', '5d↑ ↑ ↑ ↑ ↑', '5d↑↓ ↑↓ ↑↓ ↑↓'], 'correcta' => '5d↑↓ ↑↓ ↑↓ ↑↓ ↑'],
        ['pregunta' => 'Hund aplica a...', 'opciones' => ['p, d, f', 'solo s', 'solo p', 'ninguno'], 'correcta' => 'p, d, f'],
        ['pregunta' => 'Pauli se viola si...', 'opciones' => ['↑↑ en misma caja', '↑↓ en misma caja', '↑ en caja vacía', '↓ en caja llena'], 'correcta' => '↑↑ en misma caja'],
        ['pregunta' => 'Diagrama de U (Z=92)', 'opciones' => ['5f↑ ↑ ↑ 6d↑', '5f↑↓ ↑↓ ↑↓', '5f↑ ↑ ↑ ↑', '5f↑↓ ↑ ↑'], 'correcta' => '5f↑ ↑ ↑ 6d↑']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Electronegatividad (Pauling, Tendencias, Polaridad, Enlaces, Escalas)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'electronegatividad',
    'titulo' => 'Electronegatividad: El Poder de Atraer Electrones',
    'contenido' => '
        <h3>Electronegatividad</h3>
        <p>La <strong>electronegatividad</strong> mide la <strong>capacidad de un átomo para atraer electrones</strong> en un enlace químico. Escala de <strong>Pauling</strong>: <strong>F = 4.0</strong> (máxima), <strong>Cs = 0.7</strong> (mínima). Determina <strong>polaridad de enlaces</strong> y tipo de enlace.</p>

        <hr style="border:1px dashed #D81B60;">

        <h4>1. Escala de Pauling</h4>
        <table class="table">
            <thead>
                <tr><th>Elemento</th><th>χ (Pauling)</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>F</strong></td><td>4.0</td></tr>
                <tr><td><strong>O</strong></td><td>3.5</td></tr>
                <tr><td><strong>N</strong></td><td>3.0</td></tr>
                <tr><td><strong>Cl</strong></td><td>3.0</td></tr>
                <tr><td><strong>C</strong></td><td>2.5</td></tr>
                <tr><td><strong>H</strong></td><td>2.1</td></tr>
                <tr><td><strong>Na</strong></td><td>0.9</td></tr>
                <tr><td><strong>Cs</strong></td><td>0.7</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #D81B60;">

        <h4>2. Tendencias Periódicas</h4>
        <ul>
            <li><strong>→ Derecha:</strong> Aumenta (más protones, mismo nivel)</li>
            <li><strong>↓ Abajo:</strong> Disminuye (más capas, apantallamiento)</li>
            <li><strong>Excepción:</strong> Gases nobles (sin χ definida)</li>
        </ul>

        <hr style="border:1px dashed #D81B60;">

        <h4>3. Tipo de Enlace por Δχ</h4>
        <table class="table">
            <thead>
                <tr><th>Δχ</th><th>Tipo de Enlace</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>0.0 – 0.4</strong></td><td>Covalente apolar</td><td>H–H (0.0)</td></tr>
                <tr><td><strong>0.4 – 1.7</strong></td><td>Covalente polar</td><td>H–Cl (0.9)</td></tr>
                <tr><td><strong>> 1.7</strong></td><td>Iónico</td><td>NaCl (2.1)</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #D81B60;">

        <h4>4. Otras Escalas</h4>
        <ul>
            <li><strong>Mulliken:</strong> χ = (IE + EA)/2</li>
            <li><strong>Allred-Rochow:</strong> Basada en carga efectiva</li>
            <li><strong>Pauling:</strong> Estándar IUPAC</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>H–F</strong><br>
            χ_H = 2.1, χ_F = 4.0 → Δχ = 1.9 → <strong>enlace iónico (muy polar)</strong></p>
        </div>

        <div class="visual">
            <img src="assets/img/electronegativity-chart-periodic-table.jpg" alt="Tabla electronegatividad">
            <p><em>Valores completos. Fuente: Learn With Dr. Scott.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/electronegativity_trends.png" alt="Tendencias">
            <p><em>Gráfico de tendencias. Fuente: ChemTalk.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/ElectronegativityTrend2-1024x791.png" alt="Tendencia periódica">
            <p><em>Tendencia clara. Fuente: Science Notes.</em></p>
        </div>

        <hr style="border:1px dashed #D81B60;">

        <h4>5. SVG Animado: Tendencia + Polaridad (H₂, HCl, NaCl)</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#FCE4EC"/>

                <!-- Título -->
                <text x="400" y="50" fill="#880E4F" font-size="28" text-anchor="middle" font-weight="bold">ELECTRONEGATIVIDAD</text>

                <!-- Tabla Periódica Mini -->
                <g id="tabla">
                    <rect x="50" y="100" width="300" height="300" fill="#F8BBD0" rx="15"/>
                    <text x="200" y="130" fill="#880E4F" font-size="16" text-anchor="middle">Tendencia</text>
                    <text x="100" y="200" fill="#C2185B" font-size="14">F 4.0</text>
                    <text x="300" y="350" fill="#C2185B" font-size="14">Cs 0.7</text>
                    <line x1="100" y1="180" x2="300" y2="180" stroke="#EC407A" stroke-width="3"/>
                    <text x="200" y="175" fill="#AD1457" font-size="12" text-anchor="middle">→ Aumenta</text>
                    <line x1="200" y1="200" x2="200" y2="350" stroke="#EC407A" stroke-width="3"/>
                    <text x="195" y="270" fill="#AD1457" font-size="12" text-anchor="end">↑ Aumenta</text>
                    <animate attributeName="opacity" values="0;1" begin="0s" dur="0.5s"/>
                </g>

                <!-- Enlaces -->
                <g id="enlaces" opacity="0">
                    <!-- H-H -->
                    <circle cx="450" cy="150" r="25" fill="#FFCDD2"/>
                    <text x="450" y="155" fill="#880E4F" font-size="14" text-anchor="middle">H</text>
                    <line x1="475" y1="150" x2="525" y2="150" stroke="#EC407A" stroke-width="4"/>
                    <circle cx="550" cy="150" r="25" fill="#FFCDD2"/>
                    <text x="550" y="155" fill="#880E4F" font-size="14" text-anchor="middle">H</text>
                    <text x="500" y="185" fill="#C2185B" font-size="12" text-anchor="middle">Δχ = 0 → Apolar</text>

                    <!-- H-Cl -->
                    <circle cx="450" cy="250" r="25" fill="#FFCDD2"/>
                    <text x="450" y="255" fill="#880E4F" font-size="14" text-anchor="middle">H</text>
                    <line x1="475" y1="250" x2="525" y2="250" stroke="#EC407A" stroke-width="4" stroke-dasharray="5,5"/>
                    <circle cx="550" cy="250" r="35" fill="#C8E6C9"/>
                    <text x="550" y="255" fill="#2E7D32" font-size="14" text-anchor="middle">Cl</text>
                    <text x="500" y="285" fill="#C2185B" font-size="12" text-anchor="middle">Δχ = 0.9 → Polar</text>

                    <!-- Na-Cl -->
                    <circle cx="450" cy="350" r="40" fill="#BBDEFB"/>
                    <text x="450" y="355" fill="#1E88E5" font-size="14" text-anchor="middle">Na</text>
                    <line x1="490" y1="350" x2="510" y2="350" stroke="#42A5F5" stroke-width="6"/>
                    <circle cx="550" cy="350" r="35" fill="#C8E6C9"/>
                    <text x="550" y="355" fill="#2E7D32" font-size="14" text-anchor="middle">Cl</text>
                    <text x="500" y="385" fill="#C2185B" font-size="12" text-anchor="middle">Δχ = 2.1 → Iónico</text>

                    <animate attributeName="opacity" values="0;1" begin="1s" dur="1s"/>
                </g>

                <!-- Pauling -->
                <rect x="450" y="100" width="300" height="100" fill="#FFF3E0" rx="15"/>
                <text x="600" y="130" fill="#E65100" font-size="16" text-anchor="middle">ESCALA PAULING</text>
                <text x="600" y="155" fill="#FF6F00" font-size="14" text-anchor="middle">F = 4.0</text>
                <text x="600" y="175" fill="#E65100" font-size="12" text-anchor="middle">Cs = 0.7</text>

                <!-- IUPAC -->
                <text x="400" y="470" fill="#880E4F" font-size="14" text-anchor="middle">IUPAC 2025: χ_Pauling estándar</text>
            </svg>
            <p><em>SVG Animado: Tendencia + H₂ (apolar), HCl (polar), NaCl (iónico).</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Elemento más electronegativo', 'respuesta' => 'F (4.0)'],
        ['enunciado' => 'Elemento menos electronegativo', 'respuesta' => 'Cs (0.7)'],
        ['enunciado' => 'Tendencia en período', 'respuesta' => 'Aumenta de izquierda a derecha'],

        // === APLICADOS ===
        ['enunciado' => 'Δχ en H–O', 'respuesta' => '1.4 (polar)'],
        ['enunciado' => 'Δχ en C–C', 'respuesta' => '0 (apolar)'],
        ['enunciado' => 'Δχ en K–F', 'respuesta' => '3.2 (iónico)'],

        // === QUÍMICOS ===
        ['enunciado' => 'Enlace más polar: H–F o H–Cl', 'respuesta' => 'H–F (Δχ=1.9)'],
        ['enunciado' => 'Enlace iónico típico', 'respuesta' => 'NaCl (Δχ=2.1)'],
        ['enunciado' => 'χ de Cl', 'respuesta' => '3.0'],

        // === AVANZADOS ===
        ['enunciado' => 'Mulliken: χ =', 'respuesta' => '(IE + EA)/2'],
        ['enunciado' => 'IUPAC recomienda', 'respuesta' => 'Escala Pauling'],
        ['enunciado' => 'Δχ > 1.7 implica', 'respuesta' => 'Enlace predominantemente iónico']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Electronegatividad mide...', 'opciones' => ['Atracción por e⁻', 'Repulsión', 'Masa', 'Volumen'], 'correcta' => 'Atracción por e⁻'],
        ['pregunta' => 'Escala estándar', 'opciones' => ['Pauling', 'Mulliken', 'Newton', 'Celsius'], 'correcta' => 'Pauling'],
        ['pregunta' => 'F tiene χ =', 'opciones' => ['4.0', '3.5', '3.0', '2.5'], 'correcta' => '4.0'],
        ['pregunta' => 'Tendencia en grupo', 'opciones' => ['Disminuye abajo', 'Aumenta abajo', 'Igual', 'Variable'], 'correcta' => 'Disminuye abajo'],
        ['pregunta' => 'Tendencia en período', 'opciones' => ['Aumenta derecha', 'Disminuye derecha', 'Igual', 'Variable'], 'correcta' => 'Aumenta derecha'],
        ['pregunta' => 'Δχ = 0 → enlace', 'opciones' => ['Apolar', 'Polar', 'Iónico', 'Metálico'], 'correcta' => 'Apolar'],
        ['pregunta' => 'Δχ > 1.7 → enlace', 'opciones' => ['Iónico', 'Apolar', 'Covalente', 'Metálico'], 'correcta' => 'Iónico'],
        ['pregunta' => 'H–Cl es', 'opciones' => ['Polar', 'Apolar', 'Iónico', 'Metálico'], 'correcta' => 'Polar'],
        ['pregunta' => 'Na–F es', 'opciones' => ['Iónico', 'Polar', 'Apolar', 'Metálico'], 'correcta' => 'Iónico'],
        ['pregunta' => 'No metales tienen...', 'opciones' => ['Alta χ', 'Baja χ', 'Igual', 'Variable'], 'correcta' => 'Alta χ'],

        // === MEDIO (10) ===
        ['pregunta' => 'Δχ en O–H', 'opciones' => ['1.4', '0.9', '2.1', '0.0'], 'correcta' => '1.4'],
        ['pregunta' => 'Δχ en C–H', 'opciones' => ['0.4', '0.0', '1.9', '2.5'], 'correcta' => '0.4'],
        ['pregunta' => 'Enlace más polar', 'opciones' => ['H–F', 'H–Cl', 'H–Br', 'H–I'], 'correcta' => 'H–F'],
        ['pregunta' => 'χ de N', 'opciones' => ['3.0', '2.5', '3.5', '4.0'], 'correcta' => '3.0'],
        ['pregunta' => 'χ de Li', 'opciones' => ['1.0', '0.7', '2.1', '3.0'], 'correcta' => '1.0'],
        ['pregunta' => 'Mulliken usa', 'opciones' => ['IE + EA', 'Solo IE', 'Solo EA', 'Masa'], 'correcta' => 'IE + EA'],
        ['pregunta' => 'Allred-Rochow basado en', 'opciones' => ['Carga efectiva', 'Radio', 'Masa', 'Volumen'], 'correcta' => 'Carga efectiva'],
        ['pregunta' => 'Polaridad depende de', 'opciones' => ['Δχ', 'Suma χ', 'Producto', 'Nada'], 'correcta' => 'Δχ'],
        ['pregunta' => 'Enlace metálico tiene', 'opciones' => ['Δχ ≈ 0', 'Δχ > 1.7', 'Δχ = 1', 'Δχ < 0'], 'correcta' => 'Δχ ≈ 0'],
        ['pregunta' => 'IUPAC define χ como', 'opciones' => ['Pauling', 'Mulliken', 'Cualquier', 'Ninguna'], 'correcta' => 'Pauling'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Δχ en Be–F', 'opciones' => ['2.4', '1.9', '0.9', '3.3'], 'correcta' => '2.4'],
        ['pregunta' => 'Enlace con Δχ = 1.8', 'opciones' => ['Límite iónico', 'Polar', 'Apolar', 'Metálico'], 'correcta' => 'Límite iónico'],
        ['pregunta' => 'Elemento con χ = 3.5', 'opciones' => ['O', 'F', 'N', 'Cl'], 'correcta' => 'O'],
        ['pregunta' => 'χ de Br', 'opciones' => ['2.8', '3.0', '2.5', '3.5'], 'correcta' => '2.8'],
        ['pregunta' => 'χ de I', 'opciones' => ['2.5', '2.8', '3.0', '2.1'], 'correcta' => '2.5'],
        ['pregunta' => 'Escala más teórica', 'opciones' => ['Mulliken', 'Pauling', 'Allred-Rochow', 'Sanderson'], 'correcta' => 'Mulliken'],
        ['pregunta' => 'Δχ en Cs–F', 'opciones' => ['3.3', '2.1', '1.9', '0.9'], 'correcta' => '3.3'],
        ['pregunta' => 'Enlace H–I', 'opciones' => ['Apolar (Δχ=0.4)', 'Polar', 'Iónico', 'Metálico'], 'correcta' => 'Apolar (Δχ=0.4)'],
        ['pregunta' => 'Polaridad máxima en', 'opciones' => ['F–F', 'H–F', 'Na–F', 'Cs–F'], 'correcta' => 'Cs–F'],
        ['pregunta' => 'IUPAC 2025: χ_F =', 'opciones' => ['4.0 (fijo)', '3.98', '4.1', 'variable'], 'correcta' => '4.0 (fijo)']
    ]
];
// ========================================
// MATERIA: QUÍMICA I
// SUBTEMA: Clases de Elementos (Metales, No Metales, Metaloides, Bloques, Grupos)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Química I',
    'slug' => 'clases-elementos',
    'titulo' => 'Clases de Elementos: Metales, No Metales y Metaloides',
    'contenido' => '
        <h3>Clases de Elementos en la Tabla Periódica</h3>
        <p>Los elementos se clasifican en <strong>metales</strong>, <strong>no metales</strong> y <strong>metaloides</strong> según sus propiedades físicas y químicas. También se agrupan en <strong>bloques (s, p, d, f)</strong> y <strong>familias (alcalinos, halógenos, etc.)</strong>.</p>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>1. Clases Principales</h4>
        <table class="table">
            <thead>
                <tr><th>Clase</th><th>Ubicación</th><th>Propiedades</th><th>Ejemplos</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Metales</strong></td><td>Izquierda y centro</td><td>Conductores, maleables, dúctiles, brillo</td><td>Fe, Cu, Na, Au</td></tr>
                <tr><td><strong>No Metales</strong></td><td>Derecha (excepto H)</td><td>Aislantes, frágiles, opacos</td><td>O, N, Cl, S</td></tr>
                <tr><td><strong>Metaloides</strong></td><td>Frontera (escalera)</td><td>Semiconductores, propiedades intermedias</td><td>Si, Ge, As, Te</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>2. Familias Principales (Grupos)</h4>
        <table class="table">
            <thead>
                <tr><th>Familia</th><th>Grupo</th><th>Características</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Alcalinos</strong></td><td>1</td><td>1 valencia, muy reactivos</td></tr>
                <tr><td><strong>Alcalinotérreos</strong></td><td>2</td><td>2 valencia, reactivos</td></tr>
                <tr><td><strong>Halógenos</strong></td><td>17</td><td>7 valencia, muy electronegativos</td></tr>
                <tr><td><strong>Gases Nobles</strong></td><td>18</td><td>Octeto completo, inertes</td></tr>
                <tr><td><strong>Transición</strong></td><td>3–12</td><td>Valencias variables, colores</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>3. Bloques Periódicos</h4>
        <ul>
            <li><strong>Bloque s:</strong> Grupos 1–2</li>
            <li><strong>Bloque p:</strong> Grupos 13–18</li>
            <li><strong>Bloque d:</strong> Grupos 3–12</li>
            <li><strong>Bloque f:</strong> Lantanoides y Actínidos</li>
        </ul>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>4. Línea Divisoria (Escalera de Metaloides)</h4>
        <p>De B a At: <strong>B, Si, Ge, As, Sb, Te</strong> → metaloides.</p>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong><br>
            <strong>Cu</strong> → metal (conductor, maleable)<br>
            <strong>O</strong> → no metal (aislante, gas)<br>
            <strong>Si</strong> → metaloide (semiconductor)</p>
        </div>

        <div class="visual">
            <img src="assets/img/metales-nometales-metaloides.jpg" alt="Clasificación en tabla">
            <p><em>Colores: metales, no metales, metaloides. Fuente: Science Notes.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/periodica-colores.png" alt="Tabla con colores">
            <p><em>Clasificación clara. Fuente: ThoughtCo.</em></p>
        </div>

        <hr style="border:1px dashed #6A1B9A;">

        <h4>5. SVG Animado: Tabla Periódica + Clasificación</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E8EAF6"/>

                <!-- Título -->
                <text x="400" y="50" fill="#311B92" font-size="28" text-anchor="middle" font-weight="bold">CLASES DE ELEMENTOS</text>

                <!-- Mini Tabla -->
                <g id="tabla">
                    <!-- Metales (izquierda) -->
                    <rect x="50" y="100" width="300" height="250" fill="#90CAF9" opacity="0.4"/>
                    <text x="200" y="130" fill="#1565C0" font-size="16" text-anchor="middle">METALES</text>
                    <text x="200" y="160" fill="#0D47A1" font-size="12" text-anchor="middle">Conductores, brillo</text>

                    <!-- No Metales (derecha) -->
                    <rect x="450" y="100" width="300" height="250" fill="#FFCCBC" opacity="0.4"/>
                    <text x="600" y="130" fill="#E65100" font-size="16" text-anchor="middle">NO METALES</text>
                    <text x="600" y="160" fill="#BF360C" font-size="12" text-anchor="middle">Aislantes, frágiles</text>

                    <!-- Escalera Metaloides -->
                    <path d="M 350 100 L 370 120 L 390 140 L 410 160 L 430 180 L 450 200 L 470 220 L 450 240 L 430 260 L 410 280 L 390 300 L 370 320 L 350 340" fill="none" stroke="#7B1FA2" stroke-width="5"/>
                    <text x="400" y="200" fill="#4A148C" font-size="14" text-anchor="middle">METALOIDES</text>
                    <text x="400" y="230" fill="#6A1B9A" font-size="12" text-anchor="middle">Si, Ge, As...</text>

                    <!-- Animación aparición -->
                    <animate attributeName="opacity" values="0;1" begin="0s" dur="1s"/>
                </g>

                <!-- Grupos -->
                <g id="grupos" opacity="0">
                    <!-- Alcalinos -->
                    <rect x="50" y="370" width="80" height="80" fill="#69F0AE" rx="10"/>
                    <text x="90" y="400" fill="#00C853" font-size="12" text-anchor="middle">Alcalinos</text>
                    <text x="90" y="420" fill="#1B5E20" font-size="10" text-anchor="middle">Grupo 1</text>

                    <!-- Halógenos -->
                    <rect x="670" y="370" width="80" height="80" fill="#FF8A80" rx="10"/>
                    <text x="710" y="400" fill="#D50000" font-size="12" text-anchor="middle">Halógenos</text>
                    <text x="710" y="420" fill="#B71C1C" font-size="10" text-anchor="middle">Grupo 17</text>

                    <!-- Gases Nobles -->
                    <rect x="350" y="370" width="100" height="80" fill="#B9F6CA" rx="10"/>
                    <text x="400" y="400" fill="#00C853" font-size="12" text-anchor="middle">Gases Nobles</text>
                    <text x="400" y="420" fill="#1B5E20" font-size="10" text-anchor="middle">Grupo 18</text>

                    <animate attributeName="opacity" values="0;1" begin="1.5s" dur="1s"/>
                </g>

                <!-- IUPAC -->
                <text x="400" y="470" fill="#311B92" font-size="14" text-anchor="middle">IUPAC 2025: 118 elementos, 7 períodos, 18 grupos</text>
            </svg>
            <p><em>SVG Animado: Metales, No Metales, Metaloides + Familias.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Propiedades de metales', 'respuesta' => 'Conductores, maleables, brillo'],
        ['enunciado' => 'Propiedades de no metales', 'respuesta' => 'Aislantes, frágiles, opacos'],
        ['enunciado' => 'Ejemplo de metaloide', 'respuesta' => 'Silicio (Si)'],

        // === APLICADOS ===
        ['enunciado' => 'Grupo de los alcalinos', 'respuesta' => '1'],
        ['enunciado' => 'Grupo de los halógenos', 'respuesta' => '17'],
        ['enunciado' => 'Grupo de los gases nobles', 'respuesta' => '18'],

        // === QUÍMICOS ===
        ['enunciado' => 'Elemento metal en grupo 11', 'respuesta' => 'Cu (cobre)'],
        ['enunciado' => 'No metal en período 2', 'respuesta' => 'O (oxígeno)'],
        ['enunciado' => 'Metaloide usado en chips', 'respuesta' => 'Silicio'],

        // === AVANZADOS ===
        ['enunciado' => 'Bloque de los lantanoides', 'respuesta' => 'f'],
        ['enunciado' => 'IUPAC: número de metaloides', 'respuesta' => '7 (B, Si, Ge, As, Sb, Te, At)'],
        ['enunciado' => 'Elemento transicional típico', 'respuesta' => 'Fe (hierro)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Metales están en...', 'opciones' => ['Izquierda', 'Derecha', 'Arriba', 'Abajo'], 'correcta' => 'Izquierda'],
        ['pregunta' => 'No metales en...', 'opciones' => ['Derecha', 'Izquierda', 'Centro', 'Todo'], 'correcta' => 'Derecha'],
        ['pregunta' => 'Metaloides forman...', 'opciones' => ['Escalera', 'Círculo', 'Línea', 'Cuadro'], 'correcta' => 'Escalera'],
        ['pregunta' => 'Alcalinos en grupo...', 'opciones' => ['1', '2', '17', '18'], 'correcta' => '1'],
        ['pregunta' => 'Halógenos en grupo...', 'opciones' => ['17', '1', '18', '2'], 'correcta' => '17'],
        ['pregunta' => 'Gases nobles en grupo...', 'opciones' => ['18', '17', '1', '2'], 'correcta' => '18'],
        ['pregunta' => 'Ejemplo de metal', 'opciones' => ['Fe', 'O', 'Si', 'He'], 'correcta' => 'Fe'],
        ['pregunta' => 'Ejemplo de no metal', 'opciones' => ['Cl', 'Na', 'Al', 'Si'], 'correcta' => 'Cl'],
        ['pregunta' => 'Ejemplo de metaloide', 'opciones' => ['Ge', 'Cu', 'N', 'Ne'], 'correcta' => 'Ge'],
        ['pregunta' => 'Metales son...', 'opciones' => ['Conductores', 'Aislantes', 'Frágiles', 'Opacos'], 'correcta' => 'Conductores'],

        // === MEDIO (10) ===
        ['pregunta' => 'Bloque s incluye...', 'opciones' => ['Grupos 1–2', '13–18', '3–12', 'Lantanoides'], 'correcta' => 'Grupos 1–2'],
        ['pregunta' => 'Bloque p incluye...', 'opciones' => ['13–18', '1–2', '3–12', 'f'], 'correcta' => '13–18'],
        ['pregunta' => 'Bloque d es...', 'opciones' => ['Transición', 'Alcalinos', 'Halógenos', 'Nobles'], 'correcta' => 'Transición'],
        ['pregunta' => 'Lantanoides son bloque...', 'opciones' => ['f', 'd', 'p', 's'], 'correcta' => 'f'],
        ['pregunta' => 'Número de metaloides', 'opciones' => ['7', '5', '10', '3'], 'correcta' => '7'],
        ['pregunta' => 'H es...', 'opciones' => ['No metal', 'Metal', 'Metaloide', 'Noble'], 'correcta' => 'No metal'],
        ['pregunta' => 'Au es...', 'opciones' => ['Metal', 'No metal', 'Metaloide', 'Gas'], 'correcta' => 'Metal'],
        ['pregunta' => 'As es...', 'opciones' => ['Metaloide', 'Metal', 'No metal', 'Noble'], 'correcta' => 'Metaloide'],
        ['pregunta' => 'IUPAC reconoce...', 'opciones' => ['118 elementos', '100', '92', '150'], 'correcta' => '118 elementos'],
        ['pregunta' => 'Período más largo', 'opciones' => ['6 y 7', '1', '2', '3'], 'correcta' => '6 y 7'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Elemento 118 (Og) es...', 'opciones' => ['Gas noble', 'Metal', 'No metal', 'Metaloide'], 'correcta' => 'Gas noble'],
        ['pregunta' => 'Elemento con Z=50 (Sn)', 'opciones' => ['Metal', 'Metaloide', 'No metal', 'Noble'], 'correcta' => 'Metal'],
        ['pregunta' => 'Elemento con Z=33 (As)', 'opciones' => ['Metaloide', 'Metal', 'No metal', 'Noble'], 'correcta' => 'Metaloide'],
        ['pregunta' => 'Bloque de U (Z=92)', 'opciones' => ['f', 'd', 'p', 's'], 'correcta' => 'f'],
        ['pregunta' => 'Grupo de Cr', 'opciones' => ['6', '1', '17', '18'], 'correcta' => '6'],
        ['pregunta' => 'Familia de Mg', 'opciones' => ['Alcalinotérreos', 'Alcalinos', 'Halógenos', 'Nobles'], 'correcta' => 'Alcalinotérreos'],
        ['pregunta' => 'Elemento transicional con valencia +7', 'opciones' => ['Mn', 'Na', 'Cl', 'He'], 'correcta' => 'Mn'],
        ['pregunta' => 'IUPAC: metaloides oficiales', 'opciones' => ['B, Si, Ge, As, Sb, Te', 'Solo Si', 'Todos', 'Ninguno'], 'correcta' => 'B, Si, Ge, As, Sb, Te'],
        ['pregunta' => 'Período con más metales', 'opciones' => ['6', '1', '2', '7'], 'correcta' => '6'],
        ['pregunta' => 'Clasificación basada en...', 'opciones' => ['Propiedades físicas/químicas', 'Masa', 'Color', 'Olor'], 'correcta' => 'Propiedades físicas/químicas']
    ]
];
// ========================================
// MATERIA: FÍSICA I
// SUBTEMA: Energía, Conservación, Formas, Transformaciones, Ejemplos, Trabajo, Eficiencia
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'energia-conservacion-ejemplos',
    'titulo' => 'Energía: La Moneda Universal del Universo',
    'contenido' => '
        <h3>¿Qué es la Energía?</h3>
        <p>La <strong>energía</strong> es la <strong>capacidad de realizar trabajo</strong> o producir cambio. Se mide en <strong>joules (J)</strong> en el SI. <strong>Ley de conservación:</strong> en un sistema aislado, la <strong>energía total es constante</strong>.</p>

        <p>\[
            E_{\\text{inicial}} = E_{\\text{final}} \\quad \\Rightarrow \\quad E_{\\text{total}} = \\text{constante}
        \]</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Formas de Energía</h4>
        <table class="table">
            <thead>
                <tr><th>Forma</th><th>Fórmula</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Cinética</strong></td><td>\\(E_k = \\frac{1}{2}mv^2\\)</td><td>Auto en movimiento</td></tr>
                <tr><td><strong>Potencial gravitatoria</strong></td><td>\\(E_p = mgh\\)</td><td>Libro en estante</td></tr>
                <tr><td><strong>Elástica</strong></td><td>\\(E_e = \\frac{1}{2}kx^2\\)</td><td>Resorte comprimido</td></tr>
                <tr><td><strong>Térmica</strong></td><td>Q (calor)</td><td>Agua caliente</td></tr>
                <tr><td><strong>Eléctrica</strong></td><td>\\(E = qV\\)</td><td>Batería</td></tr>
                <tr><td><strong>Química</strong></td><td>Enlaces</td><td>Gasolina</td></tr>
                <tr><td><strong>Nuclear</strong></td><td>\\(E = mc^2\\)</td><td>Uranio</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Ley de Conservación</h4>
        <ul>
            <li><strong>Sistema aislado:</strong> sin interacción externa</li>
            <li><strong>Transformación:</strong> una forma → otra</li>
            <li><strong>Trabajo = transferencia de energía</strong></li>
        </ul>

        <p>\[
            W = \\Delta E = E_f - E_i
        \]</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Ejemplos Clásicos</h4>
        <ul>
            <li><strong>Montaña rusa:</strong> \(E_p \\rightarrow E_k\) (punto alto → bajo)</li>
            <li><strong>Péndulo:</strong> \(E_k \\leftrightarrow E_p\)</li>
            <li><strong>Bombilla:</strong> eléctrica → luz + térmica</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Caída libre</strong><br>
            Objeto de 2 kg cae 10 m:<br>
            \(E_{p_i} = mgh = 2 \\cdot 9.8 \\cdot 10 = 196\\,\\text{J}\)<br>
            Al suelo: \(E_{k_f} = 196\\,\\text{J}\) → conservada</p>
        </div>

        <div class="visual">
            <img src="assets/img/conservacion-energia.jpg" alt="Diagrama conservación">
            <p><em>Transformaciones. Fuente: EIA.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/formula.gif" alt="Montaña rusa">
            <p><em>E_p → E_k. Fuente: Physics Classroom.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/transformacion-de-la-energia.jpg" alt="Transformaciones">
            <p><em>Ejemplos reales. Fuente: Science Buddies.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. SVG Animado: Péndulo + Conservación</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>

                <!-- Título -->
                <text x="400" y="50" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">CONSERVACIÓN DE ENERGÍA</text>

                <!-- Péndulo -->
                <g id="pendulo">
                    <line x1="400" y1="100" x2="400" y2="150" stroke="#1976D2" stroke-width="4"/>
                    <circle cx="400" cy="150" r="15" fill="#42A5F5"/>
                    <text x="400" y="180" fill="#1565C0" font-size="14" text-anchor="middle">m</text>

                    <!-- Movimiento -->
                    <g id="mov">
                        <line x1="400" y1="100" x2="300" y2="250" stroke="#1976D2" stroke-width="4">
                            <animate attributeName="x2" values="300;500;400" dur="3s" repeatCount="indefinite"/>
                            <animate attributeName="y2" values="250;250;150" dur="3s" repeatCount="indefinite"/>
                        </line>
                        <circle cx="300" cy="250" r="20" fill="#42A5F5">
                            <animate attributeName="cx" values="300;500;400" dur="3s" repeatCount="indefinite"/>
                            <animate attributeName="cy" values="250;250;150" dur="3s" repeatCount="indefinite"/>
                        </circle>
                    </g>

                    <!-- Energía -->
                    <rect x="100" y="300" width="200" height="120" fill="#BBDEFB" rx="15"/>
                    <text x="200" y="330" fill="#1565C0" font-size="16" text-anchor="middle">E_p = mgh</text>
                    <text x="200" y="360" fill="#0D47A1" font-size="14" text-anchor="middle">E_k = ½mv²</text>
                    <text x="200" y="390" fill="#1976D2" font-size="14" text-anchor="middle">E_total = cte</text>

                    <rect x="500" y="300" width="200" height="120" fill="#C8E6C9" rx="15"/>
                    <text x="600" y="330" fill="#2E7D32" font-size="16" text-anchor="middle">Ejemplos</text>
                    <text x="600" y="360" fill="#1B5E20" font-size="12" text-anchor="middle">• Montaña rusa</text>
                    <text x="600" y="380" fill="#1B5E20" font-size="12" text-anchor="middle">• Péndulo</text>
                    <text x="600" y="400" fill="#1B5E20" font-size="12" text-anchor="middle">• Bombilla</text>
                </g>

                <!-- Fórmula -->
                <text x="400" y="470" fill="#0D47A1" font-size="14" text-anchor="middle">SI 2025: 1 J = 1 N·m = 1 kg·m²/s²</text>
            </svg>
            <p><em>SVG Animado: Péndulo + E_p ↔ E_k + ejemplos.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Define energía', 'respuesta' => 'Capacidad para realizar trabajo'],
        ['enunciado' => 'Unidad de energía', 'respuesta' => 'Joule (J)'],
        ['enunciado' => 'Ley de conservación', 'respuesta' => 'Energía no se crea ni destruye, se transforma'],

        // === APLICADOS ===
        ['enunciado' => 'E_k de 2 kg a 5 m/s', 'respuesta' => '25 J'],
        ['enunciado' => 'E_p de 1 kg a 10 m', 'respuesta' => '98 J'],
        ['enunciado' => 'Transformación en caída libre', 'respuesta' => 'E_p → E_k'],

        // === QUÍMICOS/FÍSICOS ===
        ['enunciado' => 'Energía en gasolina', 'respuesta' => 'Química'],
        ['enunciado' => 'Energía en batería', 'respuesta' => 'Eléctrica'],
        ['enunciado' => 'Energía en sol', 'respuesta' => 'Nuclear (fusión)'],

        // === AVANZADOS ===
        ['enunciado' => 'Eficiencia = (E_salida / E_entrada) × 100%', 'respuesta' => 'Fórmula eficiencia'],
        ['enunciado' => 'SI: 1 kWh =', 'respuesta' => '3.6 MJ'],
        ['enunciado' => 'Trabajo = F × d × cosθ', 'respuesta' => 'Fórmula trabajo']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Energía es...', 'opciones' => ['Capacidad para trabajo', 'Fuerza', 'Velocidad', 'Masa'], 'correcta' => 'Capacidad para trabajo'],
        ['pregunta' => 'Unidad SI', 'opciones' => ['Joule', 'Newton', 'Watt', 'Pascal'], 'correcta' => 'Joule'],
        ['pregunta' => 'Ley de conservación', 'opciones' => ['E total constante', 'E aumenta', 'E disminuye', 'E se pierde'], 'correcta' => 'E total constante'],
        ['pregunta' => 'E_cinética depende de...', 'opciones' => ['m y v', 'solo m', 'solo v', 'h'], 'correcta' => 'm y v'],
        ['pregunta' => 'E_potencial depende de...', 'opciones' => ['m, g, h', 'solo m', 'solo v', 'F'], 'correcta' => 'm, g, h'],
        ['pregunta' => 'En sistema aislado...', 'opciones' => ['E constante', 'E varía', 'E = 0', 'E infinita'], 'correcta' => 'E constante'],
        ['pregunta' => 'Trabajo =', 'opciones' => ['F × d × cosθ', 'm × a', '½mv²', 'mgh'], 'correcta' => 'F × d × cosθ'],
        ['pregunta' => 'Energía química en...', 'opciones' => ['Combustión', 'Movimiento', 'Altura', 'Velocidad'], 'correcta' => 'Combustión'],
        ['pregunta' => 'Péndulo convierte...', 'opciones' => ['E_p ↔ E_k', 'E_k → E_térmica', 'E_e → E_p', 'E_nuclear'], 'correcta' => 'E_p ↔ E_k'],
        ['pregunta' => '1 J =', 'opciones' => ['1 N·m', '1 kg·m/s', '1 W·s', '1 kg'], 'correcta' => '1 N·m'],

        // === MEDIO (10) ===
        ['pregunta' => 'E_k de 4 kg a 3 m/s', 'opciones' => ['18 J', '12 J', '24 J', '36 J'], 'correcta' => '18 J'],
        ['pregunta' => 'E_p de 5 kg a 20 m', 'opciones' => ['980 J', '100 J', '490 J', '1960 J'], 'correcta' => '980 J'],
        ['pregunta' => 'En bombilla, E_eléctrica →', 'opciones' => ['Luz + térmica', 'Solo luz', 'Solo cinética', 'Nuclear'], 'correcta' => 'Luz + térmica'],
        ['pregunta' => 'Eficiencia =', 'opciones' => ['(E_salida / E_entrada) × 100%', 'E_entrada / E_salida', 'E_total', 'W / t'], 'correcta' => '(E_salida / E_entrada) × 100%'],
        ['pregunta' => '1 kWh =', 'opciones' => ['3.6 MJ', '1 MJ', '3.6 kJ', '36 MJ'], 'correcta' => '3.6 MJ'],
        ['pregunta' => 'Energía nuclear en...', 'opciones' => ['Fusión/fisión', 'Combustión', 'Caída', 'Resorte'], 'correcta' => 'Fusión/fisión'],
        ['pregunta' => 'Montaña rusa: punto más alto', 'opciones' => ['Máx E_p', 'Máx E_k', 'E = 0', 'E térmica'], 'correcta' => 'Máx E_p'],
        ['pregunta' => 'Montaña rusa: punto más bajo', 'opciones' => ['Máx E_k', 'Máx E_p', 'E = 0', 'E química'], 'correcta' => 'Máx E_k'],
        ['pregunta' => 'Potencia =', 'opciones' => ['W / t', 'F × d', '½mv²', 'mgh'], 'correcta' => 'W / t'],
        ['pregunta' => 'SI: potencia en', 'opciones' => ['Watt (W)', 'Joule', 'Newton', 'Pascal'], 'correcta' => 'Watt (W)'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Objeto 1 kg, v = 10 m/s → E_k =', 'opciones' => ['50 J', '100 J', '25 J', '500 J'], 'correcta' => '50 J'],
        ['pregunta' => 'Resorte k=200 N/m, x=0.1 m → E_e =', 'opciones' => ['1 J', '2 J', '0.5 J', '10 J'], 'correcta' => '1 J'],
        ['pregunta' => 'Eficiencia 75%, E_entrada=400 J → E_salida=', 'opciones' => ['300 J', '100 J', '533 J', '75 J'], 'correcta' => '300 J'],
        ['pregunta' => 'Trabajo de 50 N en 2 m, θ=0° → W=', 'opciones' => ['100 J', '50 J', '25 J', '0 J'], 'correcta' => '100 J'],
        ['pregunta' => 'θ=90° → W=', 'opciones' => ['0 J', 'F×d', '½Fd', 'Fd²'], 'correcta' => '0 J'],
        ['pregunta' => 'Energía disipada por fricción', 'opciones' => ['Térmica', 'Cinética', 'Potencial', 'Eléctrica'], 'correcta' => 'Térmica'],
        ['pregunta' => 'Principio fundamental', 'opciones' => ['Conservación E', 'Conservación masa', 'Inercia', 'Aceleración'], 'correcta' => 'Conservación E'],
        ['pregunta' => 'E = mc² es...', 'opciones' => ['Equivalencia masa-energía', 'Cinética', 'Potencial', 'Eléctrica'], 'correcta' => 'Equivalencia masa-energía'],
        ['pregunta' => 'En reactor nuclear', 'opciones' => ['Fisión', 'Fusión', 'Combustión', 'Caída'], 'correcta' => 'Fisión'],
        ['pregunta' => 'SI 2025: 1 eV =', 'opciones' => ['1.6 × 10⁻¹⁹ J', '1 J', '1 MJ', '1 kJ'], 'correcta' => '1.6 × 10⁻¹⁹ J']
    ]
];
// ========================================
// MATERIA: FÍSICA I
// SUBTEMA: Tipos de Energía, Fuentes, Transformaciones, Eficiencia, Sostenibilidad
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'tipos-energia-transformaciones',
    'titulo' => 'Tipos de Energía: De la Fuente a la Transformación',
    'contenido' => '
        <h3>Tipos de Energía y sus Transformaciones</h3>
        <p>La energía se presenta en múltiples formas y se transforma de una a otra. Fuentes renovables y no renovables. <strong>Ley de conservación:</strong> \( E_{\\text{total}} = \\text{cte} \).</p>

        <hr style="border:1px dashed #388E3C;">

        <h4>1. Clasificación Principal</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Fórmula/Ejemplo</th><th>Fuente</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Mecánica</strong></td><td>\(E_k = \\frac{1}{2}mv^2\), \(E_p = mgh\)</td><td>Movimiento, altura</td></tr>
                <tr><td><strong>Térmica</strong></td><td>Q = mc\\Delta T</td><td>Calor interno</td></tr>
                <tr><td><strong>Química</strong></td><td>Enlaces</td><td>Combustibles, alimentos</td></tr>
                <tr><td><strong>Eléctrica</strong></td><td>\(E = qV\)</td><td>Cargas en movimiento</td></tr>
                <tr><td><strong>Nuclear</strong></td><td>\(E = \\Delta mc^2\)</td><td>Fisión/fusión</td></tr>
                <tr><td><strong>Radiante</strong></td><td>Ondas EM</td><td>Sol, microondas</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #388E3C;">

        <h4>2. Fuentes de Energía</h4>
        <table class="table">
            <thead>
                <tr><th>Fuente</th><th>Tipo</th><th>Renovable</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Solar</strong></td><td>Radiante</td><td>Sí</td><td>Paneles fotovoltaicos</td></tr>
                <tr><td><strong>Eólica</strong></td><td>Mecánica</td><td>Sí</td><td>Turbinas</td></tr>
                <tr><td><strong>Hidroeléctrica</strong></td><td>Mecánica/Potencial</td><td>Sí</td><td>Represas</td></tr>
                <tr><td><strong>Hidráulica</strong></td><td>Mecánica</td><td>Sí</td><td>Flujo de fluidos</td></tr>
                <tr><td><strong>Fósil</strong></td><td>Química</td><td>No</td><td>Petróleo, carbón</td></tr>
                <tr><td><strong>Nuclear</strong></td><td>Nuclear</td><td>No (U)</td><td>Reactores</td></tr>
                <tr><td><strong>Biomasa</strong></td><td>Química</td><td>Sí</td><td>Madera, etanol</td></tr>
                <tr><td><strong>Geotérmica</strong></td><td>Térmica</td><td>Sí</td><td>Calor Tierra</td></tr>
                <tr><td><strong>Hidrógeno</strong></td><td>Química</td><td>Sí (vector)</td><td>Celdas de combustible</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #388E3C;">

        <h4>3. Transformaciones Comunes</h4>
        <ul>
            <li><strong>Solar → Eléctrica:</strong> paneles</li>
            <li><strong>Química → Térmica → Mecánica:</strong> motor combustión</li>
            <li><strong>Nuclear → Térmica → Eléctrica:</strong> central nuclear</li>
            <li><strong>Eólica → Mecánica → Eléctrica:</strong> aerogenerador</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Central hidroeléctrica</strong><br>
            \(E_p\) (agua en represa) → \(E_k\) (turbina) → \(E_{\\text{eléctrica}}\) (generador)</p>
        </div>

        <div class="visual">
            <img src="assets/img/cuales-son-los-tipos-de-energia.jpg" alt="Formas de energía">
            <p><em>Clasificación. Fuente: EIA.</em></p>
        </div>

        <hr style="border:1px dashed #388E3C;">

        <h4>4. SVG Animado: Ciclo Energético (Solar → Eléctrica → Mecánica)</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E8F5E9"/>

                <!-- Título -->
                <text x="400" y="50" fill="#1B5E20" font-size="28" text-anchor="middle" font-weight="bold">TRANSFORMACIONES</text>

                <!-- Sol -->
                <g id="solar">
                    <circle cx="150" cy="150" r="40" fill="#FFEB3B">
                        <animate attributeName="r" values="40;45;40" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="150" y="200" fill="#F57F17" font-size="14" text-anchor="middle">Solar</text>
                    <line x1="190" y1="150" x2="250" y2="150" stroke="#FBC02D" stroke-width="4"/>
                    <text x="220" y="140" fill="#F57F17" font-size="12" text-anchor="middle">Radiante</text>
                </g>

                <!-- Panel -->
                <g id="panel" opacity="0">
                    <rect x="250" y="120" width="100" height="60" fill="#1565C0" rx="5">
                        <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                    </rect>
                    <text x="300" y="150" fill="#0D47A1" font-size="14" text-anchor="middle">Panel FV</text>
                    <line x1="350" y1="150" x2="410" y2="150" stroke="#42A5F5" stroke-width="4"/>
                    <text x="380" y="140" fill="#1976D2" font-size="12" text-anchor="middle">Eléctrica</text>
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.1s"/>
                </g>

                <!-- Motor -->
                <g id="motor" opacity="0">
                    <circle cx="450" cy="150" r="30" fill="#43A047"/>
                    <text x="450" y="155" fill="#E8F5E9" font-size="12" text-anchor="middle">Motor</text>
                    <path d="M480 150 L520 130 M480 150 L520 170" stroke="#2E7D32" stroke-width="4"/>
                    <text x="540" y="150" fill="#1B5E20" font-size="14" text-anchor="middle">Mecánica</text>
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                </g>

                <!-- Eficiencia -->
                <rect x="100" y="300" width="600" height="120" fill="#C8E6C9" rx="15"/>
                <text x="400" y="330" fill="#2E7D32" font-size="16" text-anchor="middle">EFICIENCIA</text>
                <text x="400" y="360" fill="#1B5E20" font-size="12" text-anchor="middle">Panel FV: ~20%</text>
                <text x="400" y="380" fill="#1B5E20" font-size="12" text-anchor="middle">Motor: ~30-40%</text>
                <text x="400" y="400" fill="#1B5E20" font-size="12" text-anchor="middle">Total: ~6-8%</text>

                <!-- Fuentes -->
                <text x="400" y="470" fill="#1B5E20" font-size="14" text-anchor="middle">SI 2025: 1 TJ = 10¹² J | Renovables >50% global (proyección)</text>
            </svg>
            <p><em>SVG Animado: Solar → Eléctrica → Mecánica + Eficiencia.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Transformación en panel solar', 'respuesta' => 'Radiante -> Eléctrica'],
        ['enunciado' => 'Fuente fósil ejemplo', 'respuesta' => 'Petróleo (química -> térmica)'],
        ['enunciado' => 'Nuclear transformación típica', 'respuesta' => 'Nuclear -> Térmica -> Eléctrica'],

        // === APLICADOS ===
        ['enunciado' => 'Eólica -> ?', 'respuesta' => 'Mecánica -> Eléctrica'],
        ['enunciado' => 'Biomasa -> ?', 'respuesta' => 'Química -> Térmica'],
        ['enunciado' => 'Geotérmica -> ?', 'respuesta' => 'Térmica -> Eléctrica'],

        // === SOSTENIBILIDAD ===
        ['enunciado' => 'Hidrógeno como', 'respuesta' => 'Vector energético (no fuente)'],
        ['enunciado' => 'Renovable: solar, eólica, hidro, biomasa, geotérmica', 'respuesta' => 'Sí'],
        ['enunciado' => 'No renovable: fósil, nuclear (U)', 'respuesta' => 'Sí'],

        // === AVANZADOS ===
        ['enunciado' => 'Eficiencia típica panel FV', 'respuesta' => '~15-22%'],
        ['enunciado' => '1 MWh =', 'respuesta' => '3.6 GJ'],
        ['enunciado' => 'Cadena completa: carbón -> electricidad', 'respuesta' => 'Química -> Térmica -> Mecánica -> Eléctrica (~35%)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Energía solar es...', 'opciones' => ['Radiante', 'Química', 'Nuclear', 'Mecánica'], 'correcta' => 'Radiante'],
        ['pregunta' => 'Eólica proviene de...', 'opciones' => ['Viento', 'Sol', 'Agua', 'Tierra'], 'correcta' => 'Viento'],
        ['pregunta' => 'Nuclear de...', 'opciones' => ['Núcleo', 'Enlaces', 'Electrones', 'Movimiento'], 'correcta' => 'Núcleo'],
        ['pregunta' => 'Fósil es...', 'opciones' => ['No renovable', 'Renovable', 'Nuclear', 'Solar'], 'correcta' => 'No renovable'],
        ['pregunta' => 'Hidroeléctrica usa...', 'opciones' => ['Agua', 'Viento', 'Sol', 'Carbón'], 'correcta' => 'Agua'],
        ['pregunta' => 'Panel solar convierte...', 'opciones' => ['Solar -> Eléctrica', 'Eléctrica -> Solar', 'Térmica -> Eléctrica', 'Mecánica -> Solar'], 'correcta' => 'Solar -> Eléctrica'],
        ['pregunta' => 'Biomasa es...', 'opciones' => ['Renovable', 'No renovable', 'Nuclear', 'Fósil'], 'correcta' => 'Renovable'],
        ['pregunta' => 'Geotérmica usa...', 'opciones' => ['Calor Tierra', 'Viento', 'Sol', 'Agua'], 'correcta' => 'Calor Tierra'],
        ['pregunta' => 'Hidrógeno es...', 'opciones' => ['Vector energético', 'Fuente primaria', 'No renovable', 'Nuclear'], 'correcta' => 'Vector energético'],
        ['pregunta' => 'Motor combustión: química ->', 'opciones' => ['Térmica -> Mecánica', 'Eléctrica', 'Radiante', 'Nuclear'], 'correcta' => 'Térmica -> Mecánica'],

        // === MEDIO (10) ===
        ['pregunta' => 'Central nuclear: nuclear ->', 'opciones' => ['Térmica -> Eléctrica', 'Eléctrica -> Térmica', 'Mecánica -> Eléctrica', 'Solar'], 'correcta' => 'Térmica -> Eléctrica'],
        ['pregunta' => 'Turbina eólica: mecánica ->', 'opciones' => ['Eléctrica', 'Térmica', 'Química', 'Radiante'], 'correcta' => 'Eléctrica'],
        ['pregunta' => 'Eficiencia típica carbón', 'opciones' => ['~35%', '80%', '10%', '100%'], 'correcta' => '~35%'],
        ['pregunta' => 'Eficiencia panel FV', 'opciones' => ['~20%', '80%', '5%', '100%'], 'correcta' => '~20%'],
        ['pregunta' => '1 TJ =', 'opciones' => ['10¹² J', '10⁶ J', '10⁹ J', '10³ J'], 'correcta' => '10¹² J'],
        ['pregunta' => 'Renovable con más capacidad global', 'opciones' => ['Hidroeléctrica', 'Solar', 'Eólica', 'Nuclear'], 'correcta' => 'Hidroeléctrica'],
        ['pregunta' => 'Combustible con más CO₂', 'opciones' => ['Carbón', 'Solar', 'Eólica', 'Hidrógeno'], 'correcta' => 'Carbón'],
        ['pregunta' => 'Hidrógeno se produce por', 'opciones' => ['Electrólisis', 'Combustión', 'Fotosíntesis', 'Fisión'], 'correcta' => 'Electrólisis'],
        ['pregunta' => 'Energía radiante incluye...', 'opciones' => ['Luz, microondas', 'Sonido', 'Movimiento', 'Calor'], 'correcta' => 'Luz, microondas'],
        ['pregunta' => 'Central térmica fósil usa...', 'opciones' => ['Ciclo Rankine', 'Ciclo Otto', 'Ciclo Brayton', 'Ciclo Stirling'], 'correcta' => 'Ciclo Rankine'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Eficiencia máxima teórica motor térmico', 'opciones' => ['Carnot', '100%', '50%', 'Rankine'], 'correcta' => 'Carnot'],
        ['pregunta' => 'Central nuclear eficiencia típica', 'opciones' => ['~33%', '90%', '10%', '60%'], 'correcta' => '~33%'],
        ['pregunta' => 'Hidrógeno verde se obtiene por', 'opciones' => ['Electrólisis con renovables', 'Reforma vapor', 'Gasificación', 'Fotosíntesis'], 'correcta' => 'Electrólisis con renovables'],
        ['pregunta' => 'Energía mareomotriz es...', 'opciones' => ['Mecánica (renovable)', 'Nuclear', 'Fósil', 'Térmica'], 'correcta' => 'Mecánica (renovable)'],
        ['pregunta' => '1 GWh =', 'opciones' => ['3.6 TJ', '3.6 GJ', '3.6 MJ', '3.6 kJ'], 'correcta' => '3.6 TJ'],
        ['pregunta' => 'Proyección 2050: % renovables', 'opciones' => ['>70%', '<30%', '50%', '100%'], 'correcta' => '>70%'],
        ['pregunta' => 'Fusión nuclear produce...', 'opciones' => ['He + energía', 'CO₂', 'U-235', 'H₂O'], 'correcta' => 'He + energía'],
        ['pregunta' => 'Ciclo combinado eficiencia', 'opciones' => ['~60%', '30%', '90%', '20%'], 'correcta' => '~60%'],
        ['pregunta' => 'Energía osmotica usa...', 'opciones' => ['Gradiente salinidad', 'Viento', 'Sol', 'Calor Tierra'], 'correcta' => 'Gradiente salinidad'],
        ['pregunta' => 'SI 2025: energía en', 'opciones' => ['Joule', 'Caloría', 'BTU', 'kWh'], 'correcta' => 'Joule']
    ]
];
// ========================================
// MATERIA: FÍSICA I
// SUBTEMA: Fracking (Fracturación Hidráulica), Física, Energía, Riesgos, Sostenibilidad
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'fracking',
    'titulo' => 'Fracking: Física de la Fracturación Hidráulica',
    'contenido' => '
        <h3>Fracking: Extracción de Energía Fósil</h3>
        <p>El <strong>fracking</strong> (fracturación hidráulica) es una técnica para extraer <strong>gas y petróleo de esquisto</strong> inyectando <strong>fluido a alta presión</strong> (agua, arena, químicos) para fracturar la roca. Aplica <strong>física de fluidos, presión, energía</strong> y genera <strong>impactos ambientales</strong>.</p>

        <p>\[
            P = \\frac{F}{A} \\quad \\text{(Ley de Pascal)} \\quad \\Rightarrow \\quad P_{\\text{inyección}} \\sim 700\\,\\text{bar}
        \]</p>

        <hr style="border:1px dashed #E65100;">

        <h4>1. Proceso Físico</h4>
        <table class="table">
            <thead>
                <tr><th>Paso</th><th>Descripción</th><th>Física</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Perforación</strong></td><td>Pozo vertical/horizontal</td><td>Mecánica de sólidos</td></tr>
                <tr><td><strong>Inyección</strong></td><td>Agua + proppant + químicos</td><td>Hidrostática, Bernoulli</td></tr>
                <tr><td><strong>Fractura</strong></td><td>Roca se rompe</td><td>Tensión, módulo Young</td></tr>
                <tr><td><strong>Flujo</strong></td><td>Gas/petróleo sube</td><td>Darcy, permeabilidad</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #E65100;">

        <h4>2. Composición del Fluido</h4>
        <ul>
            <li><strong>90% Agua</strong></li>
            <li><strong>9.5% Arena (proppant)</strong></li>
            <li><strong>0.5% Químicos</strong> (biocidas, reductores fricción)</li>
        </ul>

        <hr style="border:1px dashed #E65100;">

        <h4>3. Energía y Eficiencia</h4>
        <ul>
            <li><strong>EROEI:</strong> ~5:1 (5 unidades energía obtenida por 1 invertida)</li>
            <li><strong>Comparado:</strong> Petróleo convencional ~20:1</li>
        </ul>

        <hr style="border:1px dashed #E65100;">

        <h4>4. Impactos Ambientales</h4>
        <table class="table">
            <thead>
                <tr><th>Riesgo</th><th>Consecuencia</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Contaminación agua</strong></td><td>Metano, químicos en acuíferos</td></tr>
                <tr><td><strong>Sismos inducidos</strong></td><td>Magnitud < 3.0 (general)</td></tr>
                <tr><td><strong>Emisiones GHG</strong></td><td>Metano (CH₄) fugas</td></tr>
                <tr><td><strong>Uso agua</strong></td><td>~30 millones L/pozo</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>EE.UU. (Marcellus Shale)</strong><br>
            Producción gas ↑ 400% (2005–2020), pero <strong>1,000+ casos contaminación agua</strong> reportados.</p>
        </div>

        <div class="visual">
            <img src="assets/img/frackingex.jpg" alt="Proceso fracking">
            <p><em>Diagrama técnico. Fuente: EIA.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/etapas-fracking.png" alt="Etapas fracking">
            <p><em>Etapas detalladas. Fuente: UCS.</em></p>
        </div>

        <hr style="border:1px dashed #E65100;">

        <h4>5. SVG Animado: Proceso de Fracking</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#FFF3E0"/>

                <!-- Título -->
                <text x="400" y="50" fill="#E65100" font-size="28" text-anchor="middle" font-weight="bold">FRACKING</text>

                <!-- Capas roca -->
                <g id="roca">
                    <rect x="100" y="100" width="600" height="300" fill="#8D6E63" rx="10"/>
                    <text x="400" y="150" fill="#FFCCBC" font-size="16" text-anchor="middle">ESQUISTO</text>
                    <path d="M150 200 Q200 180 250 200 M300 220 Q350 200 400 220 M450 200 Q500 180 550 200" stroke="#A1887F" stroke-width="3" fill="none"/>
                </g>

                <!-- Pozo -->
                <g id="pozo" opacity="0">
                    <line x1="400" y1="100" x2="400" y2="400" stroke="#37474F" stroke-width="6"/>
                    <text x="410" y="250" fill="#263238" font-size="14">Pozo</text>
                    <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                </g>

                <!-- Inyección -->
                <g id="inyeccion" opacity="0">
                    <circle cx="400" cy="300" r="40" fill="#1E88E5">
                        <animate attributeName="r" values="0;40;50;40" begin="1.5s" dur="1s" repeatCount="indefinite"/>
                    </circle>
                    <text x="400" y="305" fill="white" font-size="12" text-anchor="middle">700 bar</text>
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                </g>

                <!-- Fracturas -->
                <g id="fracturas" opacity="0">
                    <line x1="300" y1="300" x2="500" y2="300" stroke="#D32F2F" stroke-width="4" stroke-dasharray="5,5">
                        <animate attributeName="stroke-dashoffset" values="0;-10" dur="0.5s" repeatCount="indefinite"/>
                    </line>
                    <line x1="350" y1="250" x2="450" y2="350" stroke="#D32F2F" stroke-width="4" stroke-dasharray="5,5">
                        <animate attributeName="stroke-dashoffset" values="0;-10" dur="0.5s" repeatCount="indefinite"/>
                    </line>
                    <text x="400" y="350" fill="#B71C1C" font-size="14" text-anchor="middle">Fractura</text>
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                </g>

                <!-- Flujo gas -->
                <g id="gas" opacity="0">
                    <circle cx="400" cy="200" r="15" fill="#FFEB3B">
                        <animate attributeName="cy" values="300;200;100" begin="3s" dur="1s"/>
                    </circle>
                    <text x="400" y="100" fill="#FF6F00" font-size="14" text-anchor="middle">Gas ↑</text>
                    <animate attributeName="opacity" values="0;1" begin="3s" dur="0.1s"/>
                </g>

                <!-- Impactos -->
                <rect x="100" y="420" width="600" height="60" fill="#FFCCBC" rx="10"/>
                <text x="400" y="450" fill="#D84315" font-size="14" text-anchor="middle">Riesgos: agua, sismos, CH₄ | EROEI ~5:1</text>

                <!-- SI -->
                <text x="400" y="490" fill="#E65100" font-size="12" text-anchor="middle">SI 2025: 1 bar = 10⁵ Pa | México: fracking prohibido (2024)</text>
            </svg>
            <p><em>SVG Animado: Pozo → Inyección → Fractura → Flujo + Riesgos.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Fracking extrae de...', 'respuesta' => 'Esquisto (shale)'],
        ['enunciado' => 'Fluido principal', 'respuesta' => 'Agua + arena + químicos'],
        ['enunciado' => 'Presión típica', 'respuesta' => '~700 bar'],
        ['enunciado' => 'EROEI fracking vs petróleo convencional', 'respuesta' => '5:1 vs 20:1'],
        ['enunciado' => 'Agua por pozo', 'respuesta' => '~30 millones L'],
        ['enunciado' => 'Riesgo sísmico', 'respuesta' => 'Sismos inducidos < 3.0'],
        ['enunciado' => 'Contaminante principal', 'respuesta' => 'Metano (CH₄)'],
        ['enunciado' => 'México 2024', 'respuesta' => 'Fracking prohibido'],
        ['enunciado' => 'Químicos en fluido', 'respuesta' => '~0.5%'],
        ['enunciado' => 'Ley física clave', 'respuesta' => 'Pascal (presión hidrostática)'],
        ['enunciado' => 'Permeabilidad post-fractura', 'respuesta' => 'Aumenta (Darcy)'],
        ['enunciado' => 'Eficiencia energética global', 'respuesta' => '~30% (química → eléctrica)']
    ],
    'quiz' => [
        ['pregunta' => 'Fracking es...', 'opciones' => ['Fracturación hidráulica', 'Perforación', 'Combustión', 'Fusión'], 'correcta' => 'Fracturación hidráulica'],
        ['pregunta' => 'Extrae de...', 'opciones' => ['Esquisto', 'Carbón', 'Arena', 'Agua'], 'correcta' => 'Esquisto'],
        ['pregunta' => 'Fluido contiene...', 'opciones' => ['Agua + químicos', 'Solo agua', 'Aire', 'Gasolina'], 'correcta' => 'Agua + químicos'],
        ['pregunta' => 'Presión ~...', 'opciones' => ['700 bar', '1 bar', '10 bar', '1000 bar'], 'correcta' => '700 bar'],
        ['pregunta' => 'Riesgo principal', 'opciones' => ['Contaminación agua', 'Calor', 'Ruido', 'Luz'], 'correcta' => 'Contaminación agua'],
        ['pregunta' => 'Proppant es...', 'opciones' => ['Arena', 'Agua', 'Químico', 'Gas'], 'correcta' => 'Arena'],
        ['pregunta' => 'EE.UU. aumentó...', 'opciones' => ['Producción gas', 'Consumo agua', 'Nada', 'Solar'], 'correcta' => 'Producción gas'],
        ['pregunta' => 'Sismos por fracking...', 'opciones' => ['Inducidos', 'Naturales', 'Volcánicos', 'Ninguno'], 'correcta' => 'Inducidos'],
        ['pregunta' => 'México 2024...', 'opciones' => ['Prohibido', 'Permitido', 'Obligatorio', 'Desconocido'], 'correcta' => 'Prohibido'],
        ['pregunta' => 'EROEI ~...', 'opciones' => ['5:1', '1:1', '20:1', '100:1'], 'correcta' => '5:1'],

        ['pregunta' => 'Agua por pozo ~...', 'opciones' => ['30 millones L', '1 millón L', '100 L', '1 billón L'], 'correcta' => '30 millones L'],
        ['pregunta' => '% químicos', 'opciones' => ['0.5%', '50%', '10%', '90%'], 'correcta' => '0.5%'],
        ['pregunta' => 'Metano es...', 'opciones' => ['GHG potente', 'Inerte', 'Refrigerante', 'Combustible limpio'], 'correcta' => 'GHG potente'],
        ['pregunta' => 'Pozo horizontal hasta...', 'opciones' => ['3 km', '100 m', '10 km', '1 cm'], 'correcta' => '3 km'],
        ['pregunta' => 'Ley de Pascal aplica en...', 'opciones' => ['Transmisión presión', 'Velocidad', 'Masa', 'Color'], 'correcta' => 'Transmisión presión'],
        ['pregunta' => 'Permeabilidad mide...', 'opciones' => ['Flujo fluido', 'Dureza', 'Color', 'Olor'], 'correcta' => 'Flujo fluido'],
        ['pregunta' => 'Eficiencia química → eléctrica', 'opciones' => ['~30%', '90%', '5%', '100%'], 'correcta' => '~30%'],
        ['pregunta' => 'Sismo típico fracking', 'opciones' => ['< 3.0', '> 5.0', '= 0', '> 7.0'], 'correcta' => '< 3.0'],
        ['pregunta' => 'Prohibido en...', 'opciones' => ['Francia, México', 'EE.UU.', 'China', 'Rusia'], 'correcta' => 'Francia, México'],
        ['pregunta' => 'Unidad presión SI', 'opciones' => ['Pascal', 'Bar', 'Atm', 'Psi'], 'correcta' => 'Pascal'],

        ['pregunta' => 'Módulo Young roca esquisto ~...', 'opciones' => ['30 GPa', '1 GPa', '100 GPa', '1 MPa'], 'correcta' => '30 GPa'],
        ['pregunta' => 'Fuga metano % producción', 'opciones' => ['1-5%', '0%', '50%', '100%'], 'correcta' => '1-5%'],
        ['pregunta' => 'Tratamiento agua residual', 'opciones' => ['Re-inyección', 'Evaporación', 'Beber', 'Nada'], 'correcta' => 'Re-inyección'],
        ['pregunta' => 'Energía para bombear fluido', 'opciones' => ['~10% total', '50%', '0%', '100%'], 'correcta' => '~10% total'],
        ['pregunta' => 'Declinación pozo', 'opciones' => ['60% primer año', '10%', '0%', '100%'], 'correcta' => '60% primer año'],
        ['pregunta' => 'Alternativa renovable', 'opciones' => ['Geotérmica', 'Fracking', 'Carbón', 'Nuclear'], 'correcta' => 'Geotérmica'],
        ['pregunta' => 'CO₂ equivalente metano (100 años)', 'opciones' => ['25×', '1×', '100×', '0×'], 'correcta' => '25×'],
        ['pregunta' => 'Ley Darcy: Q =', 'opciones' => ['-kAΔP/μL', 'F=ma', 'PV=nRT', 'E=mc²'], 'correcta' => '-kAΔP/μL'],
        ['pregunta' => 'México: reforma 2024', 'opciones' => ['Prohibición total', 'Permiso parcial', 'Obligatorio', 'Sin cambio'], 'correcta' => 'Prohibición total'],
        ['pregunta' => 'SI 2025: 1 bar =', 'opciones' => ['10⁵ Pa', '1 Pa', '10⁶ Pa', '1 atm'], 'correcta' => '10⁵ Pa']
    ]
];
// ========================================
// MATERIA: FÍSICA I
// SUBTEMA: Joule (Unidad SI), Trabajo, Energía, Equivalencias, Historia
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'joule',
    'titulo' => 'Joule: La Unidad Universal de Energía',
    'contenido' => '
        <h3>El Joule (J): Unidad SI de Energía y Trabajo</h3>
        <p>El <strong>joule</strong> es la <strong>unidad SI</strong> de <strong>energía, trabajo y calor</strong>. Definido como:</p>
        <p>\[
            1\\,\\text{J} = 1\\,\\text{N} \\cdot \\text{m} = 1\\,\\text{kg} \\cdot \\text{m}^2 \\cdot \\text{s}^{-2}
        \]</p>
        <p>Nombrado en honor a <strong>James Prescott Joule</strong> (1818–1889), pionero en termodinámica.</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Definición y Dimensiones</h4>
        <table class="table">
            <thead>
                <tr><th>Equivalencia</th><th>Valor</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>1 J</strong></td><td>1 N·m</td></tr>
                <tr><td><strong>1 J</strong></td><td>1 W·s</td></tr>
                <tr><td><strong>1 J</strong></td><td>10⁷ erg</td></tr>
                <tr><td><strong>1 J</strong></td><td>0.239 cal</td></tr>
                <tr><td><strong>1 J</strong></td><td>6.24 × 10¹⁸ eV</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Aplicaciones Físicas</h4>
        <ul>
            <li><strong>Trabajo:</strong> \( W = F \\cdot d \\cdot \\cos\\theta \)</li>
            <li><strong>Energía cinética:</strong> \( E_k = \\frac{1}{2}mv^2 \)</li>
            <li><strong>Energía potencial:</strong> \( E_p = mgh \)</li>
            <li><strong>Calor:</strong> \( Q = mc\\Delta T \)</li>
        </ul>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. James Prescott Joule</h4>
        <p>Demostró la <strong>equivalencia mecánica del calor</strong> (1843). Experimento: <strong>rueda de paletas en agua</strong> → temperatura ↑ por trabajo mecánico.</p>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Levantar una manzana</strong><br>
            m = 0.1 kg, h = 1 m → \( E_p = mgh = 0.1 \\cdot 9.8 \\cdot 1 = 0.98\\,\\text{J} \)</p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. SVG Animado: Experimento de Joule + Cálculo</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>

                <!-- Título -->
                <text x="400" y="50" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">JOULE (J)</text>

                <!-- Experimento Joule -->
                <g id="experimento">
                    <rect x="100" y="150" width="200" height="200" fill="#BBDEFB" rx="15"/>
                    <circle cx="200" cy="250" r="50" fill="#42A5F5"/>
                    <path d="M150 250 Q180 220 200 250 Q220 280 250 250" stroke="#1976D2" stroke-width="4" fill="none">
                        <animate attributeName="d" values="M150 250 Q180 220 200 250 Q220 280 250 250; M150 250 Q180 280 200 250 Q220 220 250 250; M150 250 Q180 220 200 250 Q220 280 250 250" dur="2s" repeatCount="indefinite"/>
                    </path>
                    <text x="200" y="280" fill="#1565C0" font-size="14" text-anchor="middle">Paletas</text>
                    <text x="200" y="320" fill="#0D47A1" font-size="12" text-anchor="middle">Trabajo → Calor</text>
                </g>

                <!-- Cálculo -->
                <g id="calculo" opacity="0">
                    <rect x="450" y="150" width="250" height="200" fill="#C8E6C9" rx="15"/>
                    <text x="575" y="190" fill="#2E7D32" font-size="16" text-anchor="middle">1 J = 1 N·m</text>
                    <text x="575" y="220" fill="#1B5E20" font-size="14" text-anchor="middle">F = 10 N</text>
                    <text x="575" y="245" fill="#1B5E20" font-size="14" text-anchor="middle">d = 2 m</text>
                    <text x="575" y="270" fill="#2E7D32" font-size="16" text-anchor="middle">W = 20 J</text>
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                </g>

                <!-- Equivalencias -->
                <rect x="100" y="380" width="600" height="80" fill="#BBDEFB" rx="15"/>
                <text x="400" y="410" fill="#1565C0" font-size="14" text-anchor="middle">1 J = 1 W·s = 0.239 cal = 6.24×10¹⁸ eV</text>
                <text x="400" y="435" fill="#0D47A1" font-size="12" text-anchor="middle">SI 2025: kg·m²·s⁻² | BIPM estándar</text>
            </svg>
            <p><em>SVG Animado: Experimento Joule + Cálculo W = F×d.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => '1 J =', 'respuesta' => '1 N·m'],
        ['enunciado' => '1 J en base SI', 'respuesta' => 'kg·m²·s⁻²'],
        ['enunciado' => '1 cal =', 'respuesta' => '4.184 J'],

        // === APLICADOS ===
        ['enunciado' => 'Trabajo: F=50 N, d=3 m, θ=0°', 'respuesta' => '150 J'],
        ['enunciado' => 'E_k: m=2 kg, v=5 m/s', 'respuesta' => '25 J'],
        ['enunciado' => 'E_p: m=1 kg, h=10 m', 'respuesta' => '98 J'],

        // === HISTÓRICOS ===
        ['enunciado' => 'Nombrado por', 'respuesta' => 'James Prescott Joule'],
        ['enunciado' => 'Experimento clave', 'respuesta' => 'Paletas en agua'],
        ['enunciado' => 'Año aproximado', 'respuesta' => '1843'],

        // === AVANZADOS ===
        ['enunciado' => '1 kWh =', 'respuesta' => '3.6 MJ'],
        ['enunciado' => '1 eV =', 'respuesta' => '1.6 × 10⁻¹⁹ J'],
        ['enunciado' => 'Trabajo mínimo para 1 kg a 1 m/s', 'respuesta' => '0.5 J (E_k)']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Joule mide...', 'opciones' => ['Energía', 'Fuerza', 'Velocidad', 'Masa'], 'correcta' => 'Energía'],
        ['pregunta' => '1 J =', 'opciones' => ['1 N·m', '1 kg', '1 m/s', '1 W'], 'correcta' => '1 N·m'],
        ['pregunta' => 'Unidad SI', 'opciones' => ['Sí', 'No', 'A veces', 'Nunca'], 'correcta' => 'Sí'],
        ['pregunta' => 'Nombrado por...', 'opciones' => ['James Joule', 'Isaac Newton', 'Albert Einstein', 'Marie Curie'], 'correcta' => 'James Joule'],
        ['pregunta' => '1 J = 1...', 'opciones' => ['W·s', 'W/h', 'kW', 'MW'], 'correcta' => 'W·s'],
        ['pregunta' => 'Trabajo =', 'opciones' => ['F × d × cosθ', 'm × a', '½mv²', 'mgh'], 'correcta' => 'F × d × cosθ'],
        ['pregunta' => '1 cal ≈', 'opciones' => ['4.184 J', '1 J', '10 J', '0.1 J'], 'correcta' => '4.184 J'],
        ['pregunta' => 'Levantar 1 kg 1 m ≈', 'opciones' => ['9.8 J', '1 J', '98 J', '0 J'], 'correcta' => '9.8 J'],
        ['pregunta' => 'Energía cinética usa...', 'opciones' => ['Joule', 'Newton', 'Pascal', 'Tesla'], 'correcta' => 'Joule'],
        ['pregunta' => 'BIPM define J como...', 'opciones' => ['kg·m²·s⁻²', 'kg·m/s', 'N/m', 'W/m'], 'correcta' => 'kg·m²·s⁻²'],

        // === MEDIO (10) ===
        ['pregunta' => 'Trabajo 20 N en 5 m =', 'opciones' => ['100 J', '4 J', '25 J', '500 J'], 'correcta' => '100 J'],
        ['pregunta' => 'E_k 3 kg a 4 m/s =', 'opciones' => ['24 J', '12 J', '48 J', '6 J'], 'correcta' => '24 J'],
        ['pregunta' => '1 kWh =', 'opciones' => ['3.6 MJ', '3.6 kJ', '36 MJ', '0.36 MJ'], 'correcta' => '3.6 MJ'],
        ['pregunta' => '1 eV =', 'opciones' => ['1.6×10⁻¹⁹ J', '1 J', '1.6×10⁻¹⁰ J', '1.6×10⁶ J'], 'correcta' => '1.6×10⁻¹⁹ J'],
        ['pregunta' => 'Experimento Joule demostró...', 'opciones' => ['Equivalencia calor-trabajo', 'Fusión', 'Fisión', 'Óptica'], 'correcta' => 'Equivalencia calor-trabajo'],
        ['pregunta' => '1 J = ... erg', 'opciones' => ['10⁷', '10⁶', '10⁸', '10⁵'], 'correcta' => '10⁷'],
        ['pregunta' => 'Calor específico agua =', 'opciones' => ['4184 J/kg·K', '1000 J/kg·K', '4.184 J/kg·K', '4184 J/g·K'], 'correcta' => '4184 J/kg·K'],
        ['pregunta' => 'Potencia =', 'opciones' => ['J/s', 'J·m', 'N/m', 'kg/s'], 'correcta' => 'J/s'],
        ['pregunta' => 'Unidad potencia', 'opciones' => ['Watt', 'Joule', 'Newton', 'Pascal'], 'correcta' => 'Watt'],
        ['pregunta' => 'SI 2025: J definido por...', 'opciones' => ['Constantes fundamentales', 'Prototipo', 'Masa', 'Tiempo'], 'correcta' => 'Constantes fundamentales'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Trabajo θ=60°, F=100 N, d=2 m =', 'opciones' => ['100 J', '200 J', '50 J', '0 J'], 'correcta' => '100 J'],
        ['pregunta' => 'E_k para v = 10 m/s, m=1 kg =', 'opciones' => ['50 J', '100 J', '25 J', '500 J'], 'correcta' => '50 J'],
        ['pregunta' => '1 MJ =', 'opciones' => ['10⁶ J', '10³ J', '10⁹ J', '10⁻⁶ J'], 'correcta' => '10⁶ J'],
        ['pregunta' => 'Calor para 1 g agua +1°C =', 'opciones' => ['4.184 J', '1 J', '4184 J', '0.4184 J'], 'correcta' => '4.184 J'],
        ['pregunta' => 'Energía fotón λ=500 nm ≈', 'opciones' => ['4×10⁻¹⁹ J', '4×10⁻¹⁰ J', '4×10⁻²⁵ J', '4 J'], 'correcta' => '4×10⁻¹⁹ J'],
        ['pregunta' => 'Joule contribuyó a...', 'opciones' => ['1ª Ley Termodinámica', '2ª Ley', 'Ley Gravitación', 'Relatividad'], 'correcta' => '1ª Ley Termodinámica'],
        ['pregunta' => '1 BTU ≈', 'opciones' => ['1055 J', '100 J', '10000 J', '1 J'], 'correcta' => '1055 J'],
        ['pregunta' => 'Trabajo mínimo para detener 2 kg a 5 m/s', 'opciones' => ['-25 J', '25 J', '50 J', '0 J'], 'correcta' => '-25 J'],
        ['pregunta' => 'Constante de Boltzmann k =', 'opciones' => ['1.38×10⁻²³ J/K', '1.38×10⁻²³ eV/K', '9.8 J/kg', '3×10⁸ J'], 'correcta' => '1.38×10⁻²³ J/K'],
        ['pregunta' => 'SI 2025: J basado en...', 'opciones' => ['c, h, k (constantes)', 'kg prototipo', 'metro', 'segundo'], 'correcta' => 'c, h, k (constantes)']
    ]
];
// ========================================
// MATERIA: FÍSICA I
// SUBTEMA: Biomasa (Energía Orgánica), Tipos, Transformaciones, Sostenibilidad
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'biomasa',
    'titulo' => 'Biomasa: Energía Viva y Renovable',
    'contenido' => '
        <h3>Biomasa: La Energía del Ciclo de la Vida</h3>
        <p>La <strong>biomasa</strong> es <strong>materia orgánica renovable</strong> (plantas, animales, residuos) usada para producir <strong>energía química → térmica → eléctrica/mecánica</strong>. <strong>Carbono neutral</strong> si se gestiona sosteniblemente.</p>

        <p>\[
            \\text{CO}_2 \\text{(fotosíntesis)} \\rightarrow \\text{biomasa} \\rightarrow \\text{combustión} \\rightarrow \\text{CO}_2 \\text{ (ciclo cerrado)}
        \]</p>

        <hr style="border:1px dashed #388E3C;">

        <h4>1. Tipos de Biomasa</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Ejemplos</th><th>Uso</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Sólida</strong></td><td>Madera, bagazo, cáscaras</td><td>Combustión directa</td></tr>
                <tr><td><strong>Líquida</strong></td><td>Bioetanol, biodiésel</td><td>Transporte</td></tr>
                <tr><td><strong>Gaseosa</strong></td><td>Biogás (CH₄ + CO₂)</td><td>Generación eléctrica</td></tr>
                <tr><td><strong>Residuos</strong></td><td>Orgánicos urbanos, estiércol</td><td>Digestión anaerobia</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #388E3C;">

        <h4>2. Transformaciones Energéticas</h4>
        <ul>
            <li><strong>Combustión:</strong> \( \\text{C}_6\\text{H}_{12}\\text{O}_6 + 6\\text{O}_2 \\rightarrow 6\\text{CO}_2 + 6\\text{H}_2\\text{O} + Q \)</li>
            <li><strong>Gasificación:</strong> Biomasa → syngas (CO + H₂)</li>
            <li><strong>Digestión anaerobia:</strong> Bacterias → biogás</li>
        </ul>

        <hr style="border:1px dashed #388E3C;">

        <h4>3. Ventajas y Desventajas</h4>
        <table class="table">
            <thead>
                <tr><th>Ventaja</th><th>Desventaja</th></tr>
            </thead>
            <tbody>
                <tr><td>Renovable</td><td>Competencia con alimentos</td></tr>
                <tr><td>Carbono neutral (sostenible)</td><td>Emisiones locales (PM, NOx)</td></tr>
                <tr><td>Reduce residuos</td><td>Baja densidad energética</td></tr>
                <tr><td>Disponible localmente</td><td>Deforestación si no certificada</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Bagazo de caña</strong><br>
            México: 50+ ingenios generan ~1,000 MW con bagazo → <strong>30% electricidad sector azucarero</strong>.</p>
        </div>

        <div class="visual">
            <img src="assets/img/ciclo_biomasa_cs.gif" alt="Flujo biomasa">
            <p><em>Ciclo completo. Fuente: EIA.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/Tipos-de-Biomasa-Calefaccion-Emisioncero.jpg" alt="Tipos biomasa">
            <p><em>Clasificación global. Fuente: IRENA.</em></p>
        </div>

        <hr style="border:1px dashed #388E3C;">

        <h4>4. SVG Animado: Ciclo Biomasa → Energía</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E8F5E9"/>

                <!-- Título -->
                <text x="400" y="50" fill="#1B5E20" font-size="28" text-anchor="middle" font-weight="bold">CICLO BIOMASA</text>

                <!-- Sol + Planta -->
                <g id="fotosintesis">
                    <circle cx="150" cy="150" r="35" fill="#FFEB3B"/>
                    <path d="M150 185 L150 250 L120 280 L150 260 L180 280 L150 250" fill="#4CAF50"/>
                    <text x="150" y="310" fill="#2E7D32" font-size="14" text-anchor="middle">Fotosíntesis</text>
                    <animate attributeName="opacity" values="0.5;1;0.5" dur="3s" repeatCount="indefinite"/>
                </g>

                <!-- Biomasa -->
                <g id="biomasa" opacity="0">
                    <rect x="280" y="220" width="100" height="80" fill="#8D6E63" rx="10"/>
                    <text x="330" y="260" fill="#FFCCBC" font-size="14" text-anchor="middle">Biomasa</text>
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                </g>

                <!-- Combustión -->
                <g id="combustion" opacity="0">
                    <path d="M450 250 Q470 200 490 250 Q470 280 450 250" fill="#FF5722">
                        <animate attributeName="d" values="M450 250 Q470 200 490 250 Q470 280 450 250; M450 250 Q470 180 490 250 Q470 300 450 250; M450 250 Q470 200 490 250 Q470 280 450 250" dur="1.5s" repeatCount="indefinite"/>
                    </path>
                    <text x="470" y="320" fill="#E65100" font-size="14" text-anchor="middle">Combustión</text>
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                </g>

                <!-- Electricidad -->
                <g id="electricidad" opacity="0">
                    <circle cx="620" cy="250" r="30" fill="#FFD600"/>
                    <path d="M610 240 L620 230 M630 240 L620 230 M610 260 L620 270 M630 260 L620 270" stroke="#F57F17" stroke-width="3"/>
                    <text x="620" y="310" fill="#F57F17" font-size="14" text-anchor="middle">Eléctrica</text>
                    <animate attributeName="opacity" values="0;1" begin="3s" dur="0.5s"/>
                </g>

                <!-- CO2 ciclo -->
                <g id="co2">
                    <text x="400" y="150" fill="#2E7D32" font-size="12" text-anchor="middle">CO₂ ↑</text>
                    <text x="400" y="380" fill="#2E7D32" font-size="12" text-anchor="middle">CO₂ ↓ (captura)</text>
                    <animate attributeName="opacity" values="0;1;0" dur="4s" repeatCount="indefinite"/>
                </g>

                <!-- Eficiencia -->
                <rect x="100" y="400" width="600" height="70" fill="#C8E6C9" rx="15"/>
                <text x="400" y="430" fill="#1B5E20" font-size="14" text-anchor="middle">Eficiencia: Combustión ~30% | Biogás ~40% | México: 5% energía primaria</text>
                <text x="400" y="455" fill="#2E7D32" font-size="12" text-anchor="middle">SI 2025: 1 GJ biomasa ≈ 25 kg madera seca</text>
            </svg>
            <p><em>SVG Animado: Fotosíntesis → Biomasa → Combustión → Electricidad + Ciclo CO₂.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Biomasa es...', 'respuesta' => 'Materia orgánica renovable'],
        ['enunciado' => 'Ejemplo sólido', 'respuesta' => 'Madera, bagazo'],
        ['enunciado' => 'Carbono neutral si...', 'respuesta' => 'Repoblación = consumo'],

        // === APLICADOS ===
        ['enunciado' => 'Biogás principal componente', 'respuesta' => 'Metano (CH₄)'],
        ['enunciado' => 'Bioetanol de...', 'respuesta' => 'Maíz, caña'],
        ['enunciado' => 'México: bagazo genera ~', 'respuesta' => '1,000 MW'],

        // === SOSTENIBILIDAD ===
        ['enunciado' => 'Ventaja ambiental', 'respuesta' => 'Reduce residuos, CO₂ neutral'],
        ['enunciado' => 'Riesgo si no sostenible', 'respuesta' => 'Deforestación'],
        ['enunciado' => '% energía primaria México', 'respuesta' => '~5%'],

        // === AVANZADOS ===
        ['enunciado' => 'Poder calorífico madera seca', 'respuesta' => '~16 MJ/kg'],
        ['enunciado' => 'Eficiencia típica central biomasa', 'respuesta' => '~30%'],
        ['enunciado' => '1 m³ biogás ≈', 'respuesta' => '6 kWh']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Biomasa es...', 'opciones' => ['Renovable', 'Fósil', 'Nuclear', 'Solar'], 'correcta' => 'Renovable'],
        ['pregunta' => 'Proviene de...', 'opciones' => ['Orgánica', 'Petróleo', 'Uranio', 'Viento'], 'correcta' => 'Orgánica'],
        ['pregunta' => 'Carbono neutral si...', 'opciones' => ['Sostenible', 'No', 'Siempre', 'Nunca'], 'correcta' => 'Sostenible'],
        ['pregunta' => 'Ejemplo biomasa', 'opciones' => ['Bagazo', 'Carbón', 'Gas natural', 'Hidrógeno'], 'correcta' => 'Bagazo'],
        ['pregunta' => 'Biogás contiene...', 'opciones' => ['CH₄', 'CO₂ solo', 'O₂', 'N₂'], 'correcta' => 'CH₄'],
        ['pregunta' => 'Bioetanol es...', 'opciones' => ['Líquido', 'Sólido', 'Gas', 'Plasma'], 'correcta' => 'Líquido'],
        ['pregunta' => 'Combustión produce...', 'opciones' => ['CO₂ + H₂O', 'O₂', 'CH₄', 'H₂'], 'correcta' => 'CO₂ + H₂O'],
        ['pregunta' => 'México usa bagazo en...', 'opciones' => ['Ingenios', 'Refinerías', 'Minas', 'Aeropuertos'], 'correcta' => 'Ingenios'],
        ['pregunta' => 'Ventaja clave', 'opciones' => ['Reduce residuos', 'Aumenta CO₂', 'No renovable', 'Cara'], 'correcta' => 'Reduce residuos'],
        ['pregunta' => 'Densidad energética vs carbón', 'opciones' => ['Menor', 'Mayor', 'Igual', 'Cero'], 'correcta' => 'Menor'],

        // === MEDIO (10) ===
        ['pregunta' => 'Eficiencia combustión biomasa', 'opciones' => ['~30%', '80%', '10%', '100%'], 'correcta' => '~30%'],
        ['pregunta' => 'Poder calorífico madera seca', 'opciones' => ['~16 MJ/kg', '50 MJ/kg', '5 MJ/kg', '100 MJ/kg'], 'correcta' => '~16 MJ/kg'],
        ['pregunta' => '1 m³ biogás ≈', 'opciones' => ['6 kWh', '1 kWh', '60 kWh', '0.6 kWh'], 'correcta' => '6 kWh'],
        ['pregunta' => 'México: % energía primaria', 'opciones' => ['~5%', '50%', '1%', '20%'], 'correcta' => '~5%'],
        ['pregunta' => 'Digestión anaerobia produce...', 'opciones' => ['Biogás', 'Bioetanol', 'Biodiésel', 'Syngas'], 'correcta' => 'Biogás'],
        ['pregunta' => 'Riesgo ambiental', 'opciones' => ['Deforestación', 'Lluvia ácida', 'Tsunami', 'Terremoto'], 'correcta' => 'Deforestación'],
        ['pregunta' => 'Biomasa sólida más común', 'opciones' => ['Madera', 'Petróleo', 'Carbón', 'Uranio'], 'correcta' => 'Madera'],
        ['pregunta' => 'CO₂ biomasa vs fósil', 'opciones' => ['Ciclo cerrado', 'Acumula', 'Igual', 'Cero'], 'correcta' => 'Ciclo cerrado'],
        ['pregunta' => 'Central biomasa usa...', 'opciones' => ['Caldera + turbina', 'Paneles', 'Turbinas eólicas', 'Reactores'], 'correcta' => 'Caldera + turbina'],
        ['pregunta' => 'SI 2025: biomasa en...', 'opciones' => ['Joules', 'Calorías', 'BTU', 'kWh'], 'correcta' => 'Joules'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Eficiencia gasificación biomasa', 'opciones' => ['~70% (syngas)', '30%', '90%', '10%'], 'correcta' => '~70% (syngas)'],
        ['pregunta' => 'Contenido energético estiércol seco', 'opciones' => ['~12 MJ/kg', '50 MJ/kg', '5 MJ/kg', '100 MJ/kg'], 'correcta' => '~12 MJ/kg'],
        ['pregunta' => 'México: potencial biomasa', 'opciones' => ['~3,000 MW', '100 MW', '30,000 MW', '0 MW'], 'correcta' => '~3,000 MW'],
        ['pregunta' => 'Certificación sostenible', 'opciones' => ['FSC, RSPO', 'ISO 9001', 'API', 'IEC'], 'correcta' => 'FSC, RSPO'],
        ['pregunta' => 'Emisiones PM10 biomasa vs carbón', 'opciones' => ['Mayor (sin filtro)', 'Menor', 'Igual', 'Cero'], 'correcta' => 'Mayor (sin filtro)'],
        ['pregunta' => 'Biodiésel de...', 'opciones' => ['Aceites vegetales', 'Gasolina', 'Agua', 'Aire'], 'correcta' => 'Aceites vegetales'],
        ['pregunta' => 'Ciclo combinado biomasa-gas', 'opciones' => ['~50% eficiencia', '20%', '80%', '100%'], 'correcta' => '~50% eficiencia'],
        ['pregunta' => 'Biomasa en cogeneración', 'opciones' => ['Calor + electricidad', 'Solo luz', 'Solo frío', 'Solo sonido'], 'correcta' => 'Calor + electricidad'],
        ['pregunta' => '1 ha caña → bagazo ≈', 'opciones' => ['10 ton/año', '1 ton', '100 ton', '0 ton'], 'correcta' => '10 ton/año'],
        ['pregunta' => 'SI 2025: 1 GJ =', 'opciones' => ['10⁹ J', '10⁶ J', '10¹² J', '10³ J'], 'correcta' => '10⁹ J']
    ]
];
// ========================================
// MATERIA: FÍSICA I
// SUBTEMA: Evolución del Concepto de Energía (Leibniz, Young, Coriolis, Joule)
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'evolucion-concepto-energia',
    'titulo' => 'Evolución del Concepto de Energía: De Vis Viva al Joule',
    'contenido' => '
        <h3>La Energía: Un Concepto en Evolución</h3>
        <p>El concepto de <strong>energía</strong> se desarrolló durante siglos, desde la <strong>vis viva</strong> de Leibniz hasta la <strong>equivalencia mecánico-calórica</strong> de Joule, sentando las bases de la <strong>conservación de la energía</strong>.</p>

        <p>\[
            E_{\\text{total}} = E_k + E_p + Q + \\ldots = \\text{constante}
        \]</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Línea del Tiempo Histórica</h4>
        <table class="table">
            <thead>
                <tr><th>Año</th><th>Científico</th><th>Aporte</th><th>Fórmula</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>1686</strong></td><td>Leibniz</td><td><strong>Vis viva</strong> = mv²</td><td>\\(mv^2\\)</td></tr>
                <tr><td><strong>1807</strong></td><td>Thomas Young</td><td>Introduce <strong>término "energía"</strong></td><td>\\(E = \\frac{1}{2}mv^2\\)</td></tr>
                <tr><td><strong>1829</strong></td><td>Coriolis</td><td>Define <strong>trabajo</strong> = F·d</td><td>\\(W = Fd\\cos\\theta\\)</td></tr>
                <tr><td><strong>1843–1878</strong></td><td>James Joule</td><td><strong>Equivalencia mecánico-calor</strong></td><td>\\(1\\,\\text{cal} = 4.184\\,\\text{J}\\)</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Aportes Clave</h4>
        <ul>
            <li><strong>Leibniz:</strong> Contra Descartes (mv), propone <strong>mv²</strong> como medida de movimiento</li>
            <li><strong>Young:</strong> Usa "energía" en inglés, populariza concepto</li>
            <li><strong>Coriolis:</strong> Introduce <strong>½</strong> en \(E_k = \\frac{1}{2}mv^2\)</li>
            <li><strong>Joule:</strong> Experimentos con paletas, pesos, termómetros → <strong>constante de Joule</strong></li>
        </ul>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Experimento de Joule</h4>
        <p>Pesas caen → giran paletas → agitan agua → ΔT medida → <strong>trabajo mecánico = calor generado</strong>.</p>
        <p>\[
            W = mgh = Q = mc\\Delta T \\quad \\Rightarrow \\quad J = \\frac{W}{Q}
        \]</p>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Joule (1845)</strong><br>
            1 kg cae 1 m → 9.8 J → eleva temperatura de 1 g de agua ~0.0023 °C → <strong>4.18 J/cal</strong>.</p>
        </div>

        <div class="visual">
            <img src="assets/img/aparato-joule.png" alt="Aparato de Joule">
            <p><em>Experimento original. Fuente: Wikimedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/replica_moderna_aparato-joule.jpg" alt="Réplica aparato">
            <p><em>Réplica moderna. Fuente: Science History Institute.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. SVG Animado: Línea del Tiempo + Experimento</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>

                <!-- Título -->
                <text x="400" y="50" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">EVOLUCIÓN ENERGÍA</text>

                <!-- Línea del tiempo -->
                <line x1="100" y1="120" x2="700" y2="120" stroke="#1976D2" stroke-width="4"/>
                
                <!-- Leibniz -->
                <circle cx="150" cy="120" r="20" fill="#42A5F5"/>
                <text x="150" y="100" fill="#1565C0" font-size="12" text-anchor="middle">1686</text>
                <text x="150" y="160" fill="#0D47A1" font-size="14" text-anchor="middle">Leibniz</text>
                <text x="150" y="180" fill="#1565C0" font-size="12" text-anchor="middle">mv²</text>

                <!-- Young -->
                <circle cx="300" cy="120" r="20" fill="#42A5F5">
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                </circle>
                <text x="300" y="100" fill="#1565C0" font-size="12" text-anchor="middle">1807</text>
                <text x="300" y="160" fill="#0D47A1" font-size="14" text-anchor="middle">Young</text>
                <text x="300" y="180" fill="#1565C0" font-size="12" text-anchor="middle">Energía</text>

                <!-- Coriolis -->
                <circle cx="450" cy="120" r="20" fill="#42A5F5">
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                </circle>
                <text x="450" y="100" fill="#1565C0" font-size="12" text-anchor="middle">1829</text>
                <text x="450" y="160" fill="#0D47A1" font-size="14" text-anchor="middle">Coriolis</text>
                <text x="450" y="180" fill="#1565C0" font-size="12" text-anchor="middle">Trabajo</text>

                <!-- Joule -->
                <circle cx="600" cy="120" r="20" fill="#42A5F5">
                    <animate attributeName="opacity" values="0;1" begin="3s" dur="0.5s"/>
                </circle>
                <text x="600" y="100" fill="#1565C0" font-size="12" text-anchor="middle">1843</text>
                <text x="600" y="160" fill="#0D47A1" font-size="14" text-anchor="middle">Joule</text>
                <text x="600" y="180" fill="#1565C0" font-size="12" text-anchor="middle">J = 4.184</text>

                <!-- Experimento Joule -->
                <g id="joule-exp" transform="translate(100,250)">
                    <rect x="0" y="0" width="250" height="150" fill="#BBDEFB" rx="10"/>
                    <circle cx="125" cy="75" r="30" fill="#42A5F5">
                        <animate attributeName="cy" values="75;100;75" dur="2s" repeatCount="indefinite"/>
                    </circle>
                    <text x="125" y="130" fill="#1565C0" font-size="12" text-anchor="middle">Paletas</text>
                    <text x="125" y="150" fill="#0D47A1" font-size="10" text-anchor="middle">W → Q</text>
                </g>

                <!-- Conservación -->
                <rect x="400" y="300" width="300" height="100" fill="#C8E6C9" rx="15"/>
                <text x="550" y="330" fill="#2E7D32" font-size="16" text-anchor="middle">1ª Ley Termodinámica</text>
                <text x="550" y="360" fill="#1B5E20" font-size="12" text-anchor="middle">ΔU = Q - W</text>
                <text x="550" y="385" fill="#2E7D32" font-size="12" text-anchor="middle">Mayer, Helmholtz</text>

                <!-- SI -->
                <text x="400" y="470" fill="#0D47A1" font-size="12" text-anchor="middle">SI 2025: 1 J = kg·m²·s⁻² | BIPM 2019</text>
            </svg>
            <p><em>SVG Animado: Línea del tiempo + Experimento Joule + Conservación.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Leibniz: vis viva =', 'respuesta' => 'mv²'],
        ['enunciado' => 'Young introdujo...', 'respuesta' => 'Término "energía"'],
        ['enunciado' => 'Coriolis: trabajo =', 'respuesta' => 'F·d'],

        // === APLICADOS ===
        ['enunciado' => 'Joule: constante =', 'respuesta' => '4.184 J/cal'],
        ['enunciado' => 'Experimento Joule mide...', 'respuesta' => 'ΔT del agua'],
        ['enunciado' => '1 cal =', 'respuesta' => '4.184 J'],

        // === HISTÓRICOS ===
        ['enunciado' => 'Descartes propuso...', 'respuesta' => 'mv (erróneo)'],
        ['enunciado' => 'Año experimento Joule', 'respuesta' => '1843–1850'],
        ['enunciado' => '1ª Ley Termodinámica', 'respuesta' => 'Conservación energía'],

        // === AVANZADOS ===
        ['enunciado' => 'E_k moderna =', 'respuesta' => '½mv²'],
        ['enunciado' => 'Unidad joule desde', 'respuesta' => '1948 (CGPM)'],
        ['enunciado' => 'Mayer predijo equivalencia en', 'respuesta' => '1842']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'Leibniz propuso...', 'opciones' => ['mv²', 'mv', 'F·d', 'mgh'], 'correcta' => 'mv²'],
        ['pregunta' => 'Young introdujo...', 'opciones' => ['Energía', 'Trabajo', 'Calor', 'Fuerza'], 'correcta' => 'Energía'],
        ['pregunta' => 'Coriolis definió...', 'opciones' => ['Trabajo', 'Energía', 'Vis viva', 'Potencia'], 'correcta' => 'Trabajo'],
        ['pregunta' => 'Joule midió...', 'opciones' => ['Equivalencia calor-trabajo', 'Velocidad luz', 'Gravedad', 'Magnetismo'], 'correcta' => 'Equivalencia calor-trabajo'],
        ['pregunta' => 'Vis viva =', 'opciones' => ['2E_k', 'E_k', 'E_p', 'W'], 'correcta' => '2E_k'],
        ['pregunta' => '1 cal =', 'opciones' => ['4.184 J', '1 J', '10 J', '0.239 J'], 'correcta' => '4.184 J'],
        ['pregunta' => 'Experimento Joule usó...', 'opciones' => ['Paletas en agua', 'Bombilla', 'Motor', 'Panel solar'], 'correcta' => 'Paletas en agua'],
        ['pregunta' => 'Descartes creía en...', 'opciones' => ['mv', 'mv²', 'F·d', 'mgh'], 'correcta' => 'mv'],
        ['pregunta' => 'Unidad SI desde...', 'opciones' => ['1948', '1800', '1900', '2000'], 'correcta' => '1948'],
        ['pregunta' => 'Joule nació en...', 'opciones' => ['1818', '1700', '1850', '1900'], 'correcta' => '1818'],

        // === MEDIO (10) ===
        ['pregunta' => 'E_k = ½mv² introducido por...', 'opciones' => ['Coriolis', 'Leibniz', 'Young', 'Joule'], 'correcta' => 'Coriolis'],
        ['pregunta' => 'Mayer predijo equivalencia en...', 'opciones' => ['1842', '1686', '1807', '1948'], 'correcta' => '1842'],
        ['pregunta' => 'Helmholtz formuló...', 'opciones' => ['Conservación energía', '2ª Ley', 'Relatividad', 'Óptica'], 'correcta' => 'Conservación energía'],
        ['pregunta' => '1 J = ... erg', 'opciones' => ['10⁷', '10⁶', '10⁸', '10⁵'], 'correcta' => '10⁷'],
        ['pregunta' => 'Constante Joule ≈', 'opciones' => ['4.184 J/cal', '1 J/cal', '4.184 cal/J', '10 J/cal'], 'correcta' => '4.184 J/cal'],
        ['pregunta' => 'SI 2019 redefinió J por...', 'opciones' => ['Constantes fundamentales', 'Prototipo kg', 'Metro', 'Segundo'], 'correcta' => 'Constantes fundamentales'],
        ['pregunta' => 'Trabajo = F·d·cosθ introducido por...', 'opciones' => ['Coriolis', 'Newton', 'Young', 'Joule'], 'correcta' => 'Coriolis'],
        ['pregunta' => 'Primera mención "energía" en inglés', 'opciones' => ['Young 1807', 'Joule 1843', 'Leibniz 1686', 'Aristóteles'], 'correcta' => 'Young 1807'],
        ['pregunta' => 'Joule midió ΔT con...', 'opciones' => ['Termómetro', 'Barómetro', 'Higrómetro', 'Anemómetro'], 'correcta' => 'Termómetro'],
        ['pregunta' => '1ª Ley Termodinámica es...', 'opciones' => ['Conservación energía', 'Entropía', 'Carnot', 'Boltzmann'], 'correcta' => 'Conservación energía'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Vis viva de Leibniz =', 'opciones' => ['2E_k', 'E_k', 'E_p', 'W'], 'correcta' => '2E_k'],
        ['pregunta' => 'Error Descartes: conservación de...', 'opciones' => ['mv', 'mv²', 'F', 'm'], 'correcta' => 'mv'],
        ['pregunta' => 'Joule publicó resultados en...', 'opciones' => ['1843–1878', '1700', '1900', '2000'], 'correcta' => '1843–1878'],
        ['pregunta' => 'Valor exacto constante Joule', 'opciones' => ['4.184 J/cal', '4.2 J/cal', '1 J/cal', '4184 J/kg'], 'correcta' => '4.184 J/cal'],
        ['pregunta' => 'SI 2025: J =', 'opciones' => ['c² Δm', 'F·d', 'P·t', 'k·T'], 'correcta' => 'F·d'],
        ['pregunta' => 'Contribuyó a unificación física', 'opciones' => ['Joule', 'Newton', 'Maxwell', 'Einstein'], 'correcta' => 'Joule'],
        ['pregunta' => 'Caloría definida como...', 'opciones' => ['Calor para 1g agua +1°C', '1 J', '1 kWh', '1 eV'], 'correcta' => 'Calor para 1g agua +1°C'],
        ['pregunta' => 'BIPM adoptó J en...', 'opciones' => ['1948 (9ª CGPM)', '1889', '1960', '2019'], 'correcta' => '1948 (9ª CGPM)'],
        ['pregunta' => 'Equivalencia exacta (2019)', 'opciones' => ['4.184 J = 1 cal', '4.186 J = 1 cal', '1 J = 1 cal', '4 J = 1 cal'], 'correcta' => '4.184 J = 1 cal'],
        ['pregunta' => 'Principio fundamental establecido', 'opciones' => ['Conservación energía', 'Inercia', 'Acción-reacción', 'Gravitación'], 'correcta' => 'Conservación energía']
    ]
];
// ========================================
// MATERIA: FÍSICA I
// SUBTEMA: Energía Cinética (EK), Fórmula, Colisiones, Conservación, Relatividad
// VERSIÓN FINAL: CORREGIDA, SEGURA, CON MATHJAX, SVG ANIMADO, 12 EJERCICIOS, 30 QUIZ
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'energia-cinetica',
    'titulo' => 'Energía Cinética: La Energía del Movimiento',
    'contenido' => '
        <h3>Energía Cinética: El Poder del Movimiento</h3>
        <p>La <strong>energía cinética</strong> (\(E_k\)) es la <strong>energía asociada al movimiento</strong> de un objeto. Su fórmula clásica es:</p>
        <p>\[
            E_k = \\frac{1}{2} m v^2
        \]</p>
        <p>Depende <strong>linealmente de la masa</strong> y <strong>cuadráticamente de la velocidad</strong>. En <strong>colisiones elásticas</strong>, se conserva.</p>

        <hr style="border:1px dashed #D32F2F;">

        <h4>1. Fórmula y Propiedades</h4>
        <table class="table">
            <thead>
                <tr><th>Propiedad</th><th>Relación</th><th>Efecto</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Masa (m)</strong></td><td>Proporcional</td><td>Dobla m → Dobla EK</td></tr>
                <tr><td><strong>Velocidad (v)</strong></td><td>Cuadrática</td><td>Dobla v → 4× EK</td></tr>
                <tr><td><strong>Unidad SI</strong></td><td>Joule (J)</td><td>kg·m²·s⁻²</td></tr>
                <tr><td><strong>En reposo</strong></td><td>v = 0</td><td>EK = 0</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #D32F2F;">

        <h4>2. Colisiones</h4>
        <ul>
            <li><strong>Elástica:</strong> \(E_k\) total conservada + momento lineal</li>
            <li><strong>Inelástica:</strong> \(E_k\) se pierde (calor, deformación)</li>
            <li><strong>Perfectamente inelástica:</strong> Máxima pérdida de \(E_k\)</li>
        </ul>

        <hr style="border:1px dashed #D32F2F;">

        <h4>3. Teorema Trabajo-Energía</h4>
        <p>\[
            W_{\\text{neto}} = \\Delta E_k = E_{k_f} - E_{k_i}
        \]</p>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Auto 1200 kg de 0 a 25 m/s</strong><br>
            \( E_k = \\frac{1}{2} \\cdot 1200 \\cdot 625 = 375,000\\,\\text{J} = 375\\,\\text{kJ} \)<br>
            <strong>Trabajo motor = 375 kJ</strong></p>
        </div>

        <div class="visual">
            <img src="assets/img/energia-cinetica.png" alt="Tipos de energía">
            <p><em>Energía cinética destacada. Fuente: GeeksforGeeks.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/diagramaEK.png" alt="Diagrama EK">
            <p><em>Visual claro. Fuente: Science Facts.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/formulaEK.png" alt="Fórmula EK">
            <p><em>Animación interactiva. Fuente: Physics Classroom.</em></p>
        </div>

        <hr style="border:1px dashed #D32F2F;">

        <h4>4. SVG Animado: Auto Acelerando + Colisión Elástica</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <!-- Fondo -->
                <rect x="0" y="0" width="800" height="500" fill="#FFEBEE"/>

                <!-- Título -->
                <text x="400" y="50" fill="#B71C1C" font-size="28" text-anchor="middle" font-weight="bold">ENERGÍA CINÉTICA</text>

                <!-- Pista -->
                <rect x="100" y="200" width="600" height="60" fill="#B0BEC5" rx="10"/>
                <line x1="100" y1="230" x2="700" y2="230" stroke="#78909C" stroke-width="3" stroke-dasharray="10,5"/>

                <!-- Auto 1 (acelerando) -->
                <g id="auto1">
                    <rect x="120" y="180" width="80" height="40" fill="#D32F2F" rx="8">
                        <animate attributeName="x" values="120;300;500" begin="0s" dur="3s" fill="freeze"/>
                    </rect>
                    <circle cx="150" cy="220" r="12" fill="#212121"/>
                    <circle cx="170" cy="220" r="12" fill="#212121"/>
                    <text x="160" y="170" fill="white" font-size="12" text-anchor="middle">m=1000kg</text>
                    <animate attributeName="x" values="120;300;500" begin="0s" dur="3s" fill="freeze"/>
                </g>

                <!-- Velocidad -->
                <g id="velocidad" opacity="0">
                    <line x1="520" y1="180" x2="580" y2="180" stroke="#1976D2" stroke-width="5"/>
                    <text x="550" y="170" fill="#0D47A1" font-size="14" text-anchor="middle">v = 20 m/s</text>
                    <animate attributeName="opacity" values="0;1" begin="1.5s" dur="0.5s"/>
                </g>

                <!-- EK -->
                <g id="ek" opacity="0">
                    <rect x="100" y="300" width="600" height="80" fill="#FFCCBC" rx="15"/>
                    <text x="400" y="330" fill="#D84315" font-size="16" text-anchor="middle">EK = ½ × 1000 × 400 = 200,000 J</text>
                    <text x="400" y="360" fill="#B71C1C" font-size="14" text-anchor="middle">Dobla v → 4× EK</text>
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                </g>

                <!-- Colisión elástica (dos autos) -->
                <g id="colision" opacity="0">
                    <rect x="350" y="180" width="80" height="40" fill="#1976D2" rx="8"/>
                    <text x="390" y="170" fill="white" font-size="12" text-anchor="middle">m=500kg</text>
                    <animate attributeName="x" values="350;300;200" begin="3.5s" dur="1s" fill="freeze"/>
                </g>

                <!-- Conservación -->
                <g id="conservacion" opacity="0">
                    <text x="400" y="420" fill="#2E7D32" font-size="16" text-anchor="middle">Colisión elástica: EK total = cte</text>
                    <animate attributeName="opacity" values="0;1" begin="4s" dur="0.5s"/>
                </g>

                <!-- SI -->
                <text x="400" y="470" fill="#B71C1C" font-size="12" text-anchor="middle">SI 2025: 1 J = N·m | v en m/s, m en kg</text>
            </svg>
            <p><em>SVG Animado: Auto acelerando → EK → Colisión elástica.</em></p>
        </div>
    ',
    'ejercicios' => [
        // === BÁSICOS ===
        ['enunciado' => 'Fórmula EK', 'respuesta' => '½ m v²'],
        ['enunciado' => 'Unidad SI', 'respuesta' => 'Joule (J)'],
        ['enunciado' => 'v = 0 → EK =', 'respuesta' => '0'],

        // === APLICADOS ===
        ['enunciado' => 'Auto 800 kg a 30 m/s', 'respuesta' => '360,000 J'],
        ['enunciado' => 'Bicicleta 15 kg a 10 m/s', 'respuesta' => '750 J'],
        ['enunciado' => 'v pasa de 10 a 20 m/s (m cte)', 'respuesta' => 'EK ×4'],

        // === COLISIONES ===
        ['enunciado' => 'Colisión elástica: EK total', 'respuesta' => 'Conservada'],
        ['enunciado' => 'Inelástica: EK', 'respuesta' => 'Disminuye'],
        ['enunciado' => 'Perfectamente inelástica: v final', 'respuesta' => 'm₁v₁ + m₂v₂ / (m₁+m₂)'],

        // === AVANZADOS ===
        ['enunciado' => 'Trabajo para detener 1000 kg de 20 m/s', 'respuesta' => '-200,000 J'],
        ['enunciado' => 'EK relativista (aprox)', 'respuesta' => 'γmc² - mc²'],
        ['enunciado' => '1 kWh =', 'respuesta' => '3.6 MJ']
    ],
    'quiz' => [
        // === FÁCIL (10) ===
        ['pregunta' => 'EK =', 'opciones' => ['½mv²', 'mv²', 'mgh', 'Fd'], 'correcta' => '½mv²'],
        ['pregunta' => 'Depende de v como...', 'opciones' => ['v²', 'v', '1/v', '√v'], 'correcta' => 'v²'],
        ['pregunta' => 'Dobla v → EK...', 'opciones' => ['×4', '×2', '×8', '½'], 'correcta' => '×4'],
        ['pregunta' => 'Objeto en reposo EK =', 'opciones' => ['0', '1', '∞', 'Negativa'], 'correcta' => '0'],
        ['pregunta' => 'Unidad EK', 'opciones' => ['Joule', 'Newton', 'Pascal', 'Watt'], 'correcta' => 'Joule'],
        ['pregunta' => 'Colisión elástica EK', 'opciones' => ['Conservada', 'Perdida', 'Aumentada', 'Cero'], 'correcta' => 'Conservada'],
        ['pregunta' => 'Auto 1000 kg a 20 m/s EK =', 'opciones' => ['200 kJ', '100 kJ', '400 kJ', '20 kJ'], 'correcta' => '200 kJ'],
        ['pregunta' => 'm = 0 → EK =', 'opciones' => ['0', '∞', '1', 'Negativa'], 'correcta' => '0'],
        ['pregunta' => 'Trabajo = ΔEK', 'opciones' => ['Sí', 'No', 'A veces', 'Solo si F=0'], 'correcta' => 'Sí'],
        ['pregunta' => 'v → 3v, EK →', 'opciones' => ['×9', '×3', '×6', '×27'], 'correcta' => '×9'],

        // === MEDIO (10) ===
        ['pregunta' => 'Auto 1500 kg de 0 a 30 m/s, trabajo =', 'opciones' => ['675 kJ', '337.5 kJ', '1350 kJ', '0 J'], 'correcta' => '675 kJ'],
        ['pregunta' => 'Frenado: EK →', 'opciones' => ['Calor', 'Potencial', 'Eléctrica', 'Nuclear'], 'correcta' => 'Calor'],
        ['pregunta' => 'Colisión inelástica: momento', 'opciones' => ['Conservado', 'No conservado', 'Aumentado', 'Cero'], 'correcta' => 'Conservado'],
        ['pregunta' => '1 MJ =', 'opciones' => ['10⁶ J', '10³ J', '10⁹ J', '10⁻⁶ J'], 'correcta' => '10⁶ J'],
        ['pregunta' => 'v = 10 m/s → v = 15 m/s, EK aumenta en...', 'opciones' => ['2.25×', '1.5×', '2.5×', '3×'], 'correcta' => '2.25×'],
        ['pregunta' => 'Teorema trabajo-energía', 'opciones' => ['W = ΔEK', 'W = EK', 'W = ½mv²', 'W = mgh'], 'correcta' => 'W = ΔEK'],
        ['pregunta' => 'Energía cinética rotacional', 'opciones' => ['½Iω²', 'mv²', 'mgh', 'Fd'], 'correcta' => '½Iω²'],
        ['pregunta' => 'En caída libre, EK + EP =', 'opciones' => ['Cte', 'Aumenta', 'Disminuye', 'Cero'], 'correcta' => 'Cte'],
        ['pregunta' => 'SI 2025: v en...', 'opciones' => ['m/s', 'km/h', 'mph', 'nudos'], 'correcta' => 'm/s'],
        ['pregunta' => 'EK máxima en...', 'opciones' => ['v máxima', 'm máxima', 'v=0', 'm=0'], 'correcta' => 'v máxima'],

        // === DIFÍCIL (10) ===
        ['pregunta' => 'Colisión 1D elástica: v₁f =', 'opciones' => ['(m₁-m₂)v₁/(m₁+m₂) + 2m₂v₂/(m₁+m₂)', 'v₁', '0', 'v₂'], 'correcta' => '(m₁-m₂)v₁/(m₁+m₂) + 2m₂v₂/(m₁+m₂)'],
        ['pregunta' => 'EK relativista (v≈c)', 'opciones' => ['(γ-1)mc²', '½mv²', 'mc²', 'mv²'], 'correcta' => '(γ-1)mc²'],
        ['pregunta' => 'Fuerza constante acelera 2 kg de 0 a 10 m/s en 5 m, F =', 'opciones' => ['40 N', '20 N', '100 N', '4 N'], 'correcta' => '40 N'],
        ['pregunta' => 'Coeficiente restitucion e =', 'opciones' => ['√(EK después/EK antes)', 'v', 'm', 'F'], 'correcta' => '√(EK después/EK antes)'],
        ['pregunta' => '1 eV =', 'opciones' => ['1.6×10⁻¹⁹ J', '1 J', '1.6×10⁻¹⁰ J', '1.6×10⁶ J'], 'correcta' => '1.6×10⁻¹⁹ J'],
        ['pregunta' => 'EK molecular media (3D)', 'opciones' => ['(3/2)kT', '(1/2)mv²', 'mgh', 'Fd'], 'correcta' => '(3/2)kT'],
        ['pregunta' => 'Trabajo mínimo para detener 500 kg a 30 m/s', 'opciones' => ['-225 kJ', '225 kJ', '112.5 kJ', '0 J'], 'correcta' => '-225 kJ'],
        ['pregunta' => 'En vacío, caída 10 m → v =', 'opciones' => ['14 m/s', '10 m/s', '20 m/s', '9.8 m/s'], 'correcta' => '14 m/s'],
        ['pregunta' => 'γ = 1 / √(1 - v²/c²), EK ≈ ½mv² si...', 'opciones' => ['v << c', 'v = c', 'v > c', 'm = 0'], 'correcta' => 'v << c'],
        ['pregunta' => 'SI 2025: 1 kJ =', 'opciones' => ['10³ J', '10⁶ J', '10⁰ J', '10⁻³ J'], 'correcta' => '10³ J']
    ]
];
// ========================================
// materia: FÍSICA I
// Sub-tema: Energía Potencial Gravitacional
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'energia-potencial-gravitacional',
    'titulo' => 'Energía Potencial Gravitacional',
    'contenido' => '
        <h3>Energía Potencial Gravitacional (EPG)</h3>
        <p>La <strong>energía potencial gravitacional</strong> es la energía almacenada por un objeto debido a su posición en un campo gravitacional. Su fórmula es:</p>
        <p>\[
            E_{pg} = m g h
        \]</p>
        <p>Donde <strong>m</strong> = masa (kg), <strong>g</strong> = aceleración gravitacional (≈9.8 m/s²), <strong>h</strong> = altura (m).</p>

        <hr style="border:1px dashed #D32F2F;">

        <h4>1. Propiedades</h4>
        <table class="table">
            <thead>
                <tr><th>Variable</th><th>Efecto</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Masa (m)</strong></td><td>Proporcional</td></tr>
                <tr><td><strong>Altura (h)</strong></td><td>Proporcional</td></tr>
                <tr><td><strong>g</strong></td><td>Proporcional (varía con planeta)</td></tr>
                <tr><td><strong>h = 0</strong></td><td>EPG = 0 (referencia)</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #D32F2F;">

        <h4>2. Conservación de Energía Mecánica</h4>
        <p>\[
            E_{pg_i} + E_{k_i} = E_{pg_f} + E_{k_f}
        \]</p>
        <p>En caída libre (sin fricción): <strong>EPG → EK</strong>.</p>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Libro 2 kg a 5 m</strong><br>
            \( E_{pg} = 2 \\cdot 9.8 \\cdot 5 = 98\\,\\text{J} \)<br>
            Al caer: \( v = \\sqrt{2gh} = \\sqrt{98} \\approx 9.9\\,\\text{m/s} \)</p>
        </div>

        <div class="visual">
            <img src="assets/img/energia-potencial_gravitacional.gif" alt="Tipos de energía">
            <p><em>EPG en el contexto. Fuente: Science Facts.</em></p>
        </div>

        <hr style="border:1px dashed #D32F2F;">

        <h4>3. SVG Animado: Caída Libre + Conservación</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#FFEBEE"/>
                <text x="400" y="50" fill="#B71C1C" font-size="28" text-anchor="middle" font-weight="bold">EPG → EK</text>

                <rect x="100" y="100" width="600" height="300" fill="#FFCCBC" rx="10"/>
                <line x1="100" y1="400" x2="700" y2="400" stroke="#B71C1C" stroke-width="4"/>

                <g id="objeto">
                    <circle cx="400" cy="120" r="25" fill="#1976D2">
                        <animate attributeName="cy" values="120;380" begin="0.5s" dur="2s" fill="freeze"/>
                    </circle>
                    <text x="400" y="130" fill="white" font-size="14" text-anchor="middle">m</text>
                </g>

                <g id="altura" opacity="0">
                    <line x1="380" y1="120" x2="380" y2="380" stroke="#4CAF50" stroke-width="3" stroke-dasharray="5,5"/>
                    <text x="360" y="250" fill="#2E7D32" font-size="14" text-anchor="middle">h</text>
                    <animate attributeName="opacity" values="0;1" begin="0s" dur="0.5s"/>
                </g>

                <g id="epg" opacity="0">
                    <rect x="100" y="420" width="300" height="60" fill="#C8E6C9" rx="10"/>
                    <text x="250" y="450" fill="#1B5E20" font-size="14" text-anchor="middle">EPG = mgh</text>
                    <animate attributeName="opacity" values="1;0" begin="0.5s" dur="2s"/>
                </g>

                <g id="ek" opacity="0">
                    <rect x="400" y="420" width="300" height="60" fill="#FFCCBC" rx="10"/>
                    <text x="550" y="450" fill="#B71C1C" font-size="14" text-anchor="middle">EK = ½mv²</text>
                    <animate attributeName="opacity" values="0;1" begin="2.5s" dur="0.5s"/>
                </g>

                <text x="400" y="490" fill="#B71C1C" font-size="12" text-anchor="middle">SI 2025: g = 9.80665 m/s² | Conservación E_mec</text>
            </svg>
            <p><em>SVG Animado: Objeto cae → EPG disminuye → EK aumenta.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Fórmula EPG', 'respuesta' => 'm g h'],
        ['enunciado' => 'g Tierra', 'respuesta' => '9.8 m/s²'],
        ['enunciado' => 'h = 0 → EPG', 'respuesta' => '0'],
        ['enunciado' => 'Caída libre: EPG →', 'respuesta' => 'EK'],
        ['enunciado' => 'm = 3 kg, h = 10 m', 'respuesta' => '294 J'],
        ['enunciado' => 'v final (h = 20 m)', 'respuesta' => '19.8 m/s'],
        ['enunciado' => 'EPG en Luna (g ≈ 1.6 m/s²)', 'respuesta' => 'm × 1.6 × h'],
        ['enunciado' => 'Trabajo gravitacional', 'respuesta' => '-ΔEPG'],
        ['enunciado' => 'Conservación en péndulo', 'respuesta' => 'EPG + EK = cte'],
        ['enunciado' => '1 kJ =', 'respuesta' => '1000 J'],
        ['enunciado' => 'g Marte ≈', 'respuesta' => '3.7 m/s²'],
        ['enunciado' => 'EPG máxima en', 'respuesta' => 'h máxima']
    ],
    'quiz' => [
        ['pregunta' => 'EPG =', 'opciones' => ['mgh', '½mv²', 'Fd', 'PV'], 'correcta' => 'mgh'],
        ['pregunta' => 'Depende de', 'opciones' => ['m, g, h', 'solo m', 'solo v', 'F'], 'correcta' => 'm, g, h'],
        ['pregunta' => 'g ≈', 'opciones' => ['9.8 m/s²', '9.8 N', '9.8 kg', '0'], 'correcta' => '9.8 m/s²'],
        ['pregunta' => 'h = 0 → EPG', 'opciones' => ['0', '∞', 'máxima', 'negativa'], 'correcta' => '0'],
        ['pregunta' => 'Caída: EPG', 'opciones' => ['disminuye', 'aumenta', 'igual', 'cero'], 'correcta' => 'disminuye'],
        ['pregunta' => 'EK aumenta al', 'opciones' => ['caer', 'subir', 'reposo', 'girar'], 'correcta' => 'caer'],
        ['pregunta' => 'm = 1 kg, h = 10 m → EPG', 'opciones' => ['98 J', '9.8 J', '980 J', '0 J'], 'correcta' => '98 J'],
        ['pregunta' => 'g en Luna', 'opciones' => ['1/6 Tierra', 'igual', 'doble', 'cero'], 'correcta' => '1/6 Tierra'],
        ['pregunta' => 'Conservación E_mec', 'opciones' => ['EPG + EK = cte', 'solo EPG', 'solo EK', 'nada'], 'correcta' => 'EPG + EK = cte'],
        ['pregunta' => 'Unidad EPG', 'opciones' => ['Joule', 'Newton', 'Watt', 'Pascal'], 'correcta' => 'Joule'],

        ['pregunta' => 'v = √(2gh) en', 'opciones' => ['caída libre', 'lanzamiento', 'fricción', 'aire'], 'correcta' => 'caída libre'],
        ['pregunta' => 'Trabajo gravedad =', 'opciones' => ['-ΔEPG', 'ΔEPG', '½mv²', 'mgh'], 'correcta' => '-ΔEPG'],
        ['pregunta' => 'Péndulo: máxima EPG en', 'opciones' => ['puntos extremos', 'centro', 'arriba', 'abajo'], 'correcta' => 'puntos extremos'],
        ['pregunta' => '1 kWh =', 'opciones' => ['3.6 MJ', '3.6 kJ', '36 MJ', '0.36 MJ'], 'correcta' => '3.6 MJ'],
        ['pregunta' => 'g Marte ≈', 'opciones' => ['3.7 m/s²', '9.8 m/s²', '1.6 m/s²', '25 m/s²'], 'correcta' => '3.7 m/s²'],
        ['pregunta' => 'En vacío, EPG → EK', 'opciones' => ['100%', '50%', '0%', 'variable'], 'correcta' => '100%'],
        ['pregunta' => 'Referencia h = 0', 'opciones' => ['arbitraria', 'obligatoria', 'infinita', 'negativa'], 'correcta' => 'arbitraria'],
        ['pregunta' => 'EPG en espacio profundo', 'opciones' => ['0', 'infinita', 'mgh', 'negativa'], 'correcta' => '0'],
        ['pregunta' => 'Conservación válida si', 'opciones' => ['fuerzas conservativas', 'fricción', 'aire', 'calor'], 'correcta' => 'fuerzas conservativas'],
        ['pregunta' => 'SI 2025: g =', 'opciones' => ['9.80665 m/s²', '10 m/s²', '9.8 N/kg', '0'], 'correcta' => '9.80665 m/s²'],

        ['pregunta' => 'v final desde h = 50 m', 'opciones' => ['31.3 m/s', '50 m/s', '9.8 m/s', '500 m/s'], 'correcta' => '31.3 m/s'],
        ['pregunta' => 'EPG para 500 kg a 100 m', 'opciones' => ['490 kJ', '49 kJ', '4.9 MJ', '0 J'], 'correcta' => '490 kJ'],
        ['pregunta' => 'Trabajo para subir 10 kg 3 m', 'opciones' => ['294 J', '-294 J', '0 J', '98 J'], 'correcta' => '294 J'],
        ['pregunta' => 'En resorte, energía es', 'opciones' => ['elástica', 'gravitacional', 'cinética', 'térmica'], 'correcta' => 'elástica'],
        ['pregunta' => 'ΔEPG =', 'opciones' => ['mgΔh', '½mv²', 'Fd', 'PΔt'], 'correcta' => 'mgΔh'],
        ['pregunta' => 'En órbita, EPG', 'opciones' => ['negativa', 'cero', 'positiva', 'infinita'], 'correcta' => 'negativa'],
        ['pregunta' => 'g Júpiter ≈', 'opciones' => ['25 m/s²', '9.8 m/s²', '3.7 m/s²', '1.6 m/s²'], 'correcta' => '25 m/s²'],
        ['pregunta' => 'Energía total en caída', 'opciones' => ['constante', 'aumenta', 'disminuye', 'cero'], 'correcta' => 'constante'],
        ['pregunta' => 'Fuerza gravitacional es', 'opciones' => ['conservativa', 'no conservativa', 'disipativa', 'reactiva'], 'correcta' => 'conservativa'],
        ['pregunta' => 'SI 2025: 1 MJ =', 'opciones' => ['10⁶ J', '10³ J', '10⁹ J', '10⁻⁶ J'], 'correcta' => '10⁶ J']
    ]
];
// ========================================
// materia: FÍSICA I
// Sub-tema: Energía Potencial Elástica, Ley de Hooke
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'energia-potencial-elastica-hooke',
    'titulo' => 'Energía Potencial Elástica y Ley de Hooke',
    'contenido' => '
        <h3>Energía Potencial Elástica y Ley de Hooke</h3>
        <p>La <strong>ley de Hooke</strong> establece que la fuerza restauradora de un resorte es proporcional a su deformación:</p>
        <p>\[
            F = -k x
        \]</p>
        <p>La <strong>energía potencial elástica</strong> almacenada es:</p>
        <p>\[
            E_{pe} = \\frac{1}{2} k x^2
        \]</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Ley de Hooke</h4>
        <table class="table">
            <thead>
                <tr><th>Variable</th><th>Significado</th><th>Unidad SI</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>F</strong></td><td>Fuerza restauradora</td><td>N</td></tr>
                <tr><td><strong>k</strong></td><td>Constante elástica</td><td>N/m</td></tr>
                <tr><td><strong>x</strong></td><td>Deformación</td><td>m</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Energía Potencial Elástica</h4>
        <p>\[
            E_{pe} = \\int F \\, dx = \\int_{-x}^{x} kx \\, dx = \\frac{1}{2} k x^2
        \]</p>
        <ul>
            <li>Proporcional a <strong>k</strong> y a <strong>x²</strong></li>
            <li>Máxima en deformación máxima</li>
            <li>Cero en x = 0</li>
        </ul>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Conservación en Resorte</h4>
        <p>\[
            E_k + E_{pe} = \\text{constante}
        \]</p>
        <p>Ejemplo: Masa en resorte vertical → oscila.</p>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Resorte k = 200 N/m, x = 0.2 m</strong><br>
            \( E_{pe} = \\frac{1}{2} \\cdot 200 \\cdot 0.04 = 4\\,\\text{J} \)</p>
        </div>

        <div class="visual">
            <img src="assets/img/energia-potencial_elastica.jpg" alt="Energía elástica en tipos">
            <p><em>Tipos de energía. Fuente: Science Facts.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/tranformacion-EPG.jpg" alt="Resorte energía">
            <p><em>Transformación. Fuente: Physics Classroom.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. SVG Animado: Resorte + EPE</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>
                <text x="400" y="50" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">LEY DE HOOKE</text>

                <g id="resorte">
                    <line x1="400" y1="100" x2="400" y2="150" stroke="#1976D2" stroke-width="6"/>
                    <path d="M400 150 Q380 170 400 190 Q420 210 400 230 Q380 250 400 270 Q420 290 400 310 Q380 330 400 350" stroke="#1976D2" stroke-width="6" fill="none">
                        <animate attributeName="d" values="M400 150 Q380 170 400 190 Q420 210 400 230 Q380 250 400 270 Q420 290 400 310 Q380 330 400 350;
                                                          M400 150 Q370 180 400 210 Q430 240 400 270 Q370 300 400 330 Q430 360 400 390 Q370 420 400 450;
                                                          M400 150 Q380 170 400 190 Q420 210 400 230 Q380 250 400 270 Q420 290 400 310 Q380 330 400 350" dur="4s" repeatCount="indefinite"/>
                    </path>
                    <rect x="370" y="350" width="60" height="40" fill="#42A5F5" rx="10"/>
                    <text x="400" y="375" fill="white" font-size="14" text-anchor="middle">m</text>
                </g>

                <g id="energia">
                    <rect x="100" y="300" width="600" height="120" fill="#BBDEFB" rx="15"/>
                    <text x="400" y="330" fill="#1565C0" font-size="16" text-anchor="middle">EPE = ½ k x²</text>
                    <text x="400" y="360" fill="#0D47A1" font-size="14" text-anchor="middle">k = constante resorte</text>
                    <text x="400" y="390" fill="#1976D2" font-size="12" text-anchor="middle">x = deformación</text>
                </g>

                <text x="400" y="470" fill="#1565C0" font-size="12" text-anchor="middle">SI 2025: 1 J = N·m | k en N/m</text>
            </svg>
            <p><em>SVG Animado: Resorte se estira → EPE aumenta.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Fórmula ley de Hooke', 'respuesta' => 'F = -k x'],
        ['enunciado' => 'Fórmula EPE', 'respuesta' => '½ k x²'],
        ['enunciado' => 'Unidad k', 'respuesta' => 'N/m'],
        ['enunciado' => 'Signo - en Hooke', 'respuesta' => 'Fuerza restauradora'],
        ['enunciado' => 'k = 500 N/m, x = 0.1 m → EPE', 'respuesta' => '2.5 J'],
        ['enunciado' => 'x dobla → EPE', 'respuesta' => '×4'],
        ['enunciado' => 'Resorte relajado EPE', 'respuesta' => '0'],
        ['enunciado' => 'Trabajo para comprimir =', 'respuesta' => 'ΔEPE'],
        ['enunciado' => 'F constante en resorte', 'respuesta' => 'No (varía con x)'],
        ['enunciado' => 'Límite elástico', 'respuesta' => 'Hooke válido'],
        ['enunciado' => 'k alto → resorte', 'respuesta' => 'Más rígido'],
        ['enunciado' => 'EPE máxima en', 'respuesta' => 'x máxima']
    ],
    'quiz' => [
        ['pregunta' => 'Ley de Hooke F =', 'opciones' => ['-k x', 'k x', 'm a', 'm g'], 'correcta' => '-k x'],
        ['pregunta' => 'EPE =', 'opciones' => ['½ k x²', 'k x', 'm g h', '½ m v²'], 'correcta' => '½ k x²'],
        ['pregunta' => 'k unidad', 'opciones' => ['N/m', 'J', 'kg', 'm/s²'], 'correcta' => 'N/m'],
        ['pregunta' => 'x = deformación', 'opciones' => ['Sí', 'No', 'A veces', 'Nunca'], 'correcta' => 'Sí'],
        ['pregunta' => 'Signo - indica', 'opciones' => ['Restauradora', 'Positiva', 'Nada', 'Error'], 'correcta' => 'Restauradora'],
        ['pregunta' => 'Resorte relajado F =', 'opciones' => ['0', 'k', 'x', 'máxima'], 'correcta' => '0'],
        ['pregunta' => 'x dobla → EPE', 'opciones' => ['×4', '×2', '½', 'igual'], 'correcta' => '×4'],
        ['pregunta' => 'k dobla → EPE', 'opciones' => ['×2', '×4', '½', 'igual'], 'correcta' => '×2'],
        ['pregunta' => 'Trabajo = ΔEPE', 'opciones' => ['Sí', 'No', 'A veces', 'Nunca'], 'correcta' => 'Sí'],
        ['pregunta' => 'Límite elástico', 'opciones' => ['Hooke válido', 'Siempre', 'Nunca', 'Solo x=0'], 'correcta' => 'Hooke válido'],

        ['pregunta' => 'k = 100 N/m, x = 0.2 m → EPE', 'opciones' => ['2 J', '20 J', '4 J', '0 J'], 'correcta' => '2 J'],
        ['pregunta' => 'F = 50 N, k = 500 N/m → x', 'opciones' => ['0.1 m', '10 m', '0.01 m', '50 m'], 'correcta' => '0.1 m'],
        ['pregunta' => 'Resorte rígido tiene k', 'opciones' => ['alto', 'bajo', 'cero', 'negativo'], 'correcta' => 'alto'],
        ['pregunta' => 'Energía en resorte oscilante', 'opciones' => ['EP + EK = cte', 'solo EP', 'solo EK', 'crece'], 'correcta' => 'EP + EK = cte'],
        ['pregunta' => 'Máximo EK en resorte', 'opciones' => ['x = 0', 'x máxima', 'x = 1', 'x = k'], 'correcta' => 'x = 0'],
        ['pregunta' => 'Máximo EPE en', 'opciones' => ['x máxima', 'x = 0', 'v máxima', 'm = 0'], 'correcta' => 'x máxima'],
        ['pregunta' => 'Período resorte T =', 'opciones' => ['2π √(m/k)', '2π √(k/m)', '2π m/k', '2π k/m'], 'correcta' => '2π √(m/k)'],
        ['pregunta' => 'Fuerza constante → EPE', 'opciones' => ['No cuadrática', 'cuadrática', 'lineal', 'cero'], 'correcta' => 'No cuadrática'],
        ['pregunta' => 'SI: k en', 'opciones' => ['N/m', 'J/m', 'kg/s²', 'Pa'], 'correcta' => 'N/m'],
        ['pregunta' => 'IUPAC/SI 2025: EPE en', 'opciones' => ['Joule', 'cal', 'eV', 'kWh'], 'correcta' => 'Joule'],

        ['pregunta' => 'k = 800 N/m, x = 0.05 m → EPE', 'opciones' => ['1 J', '2 J', '0.5 J', '10 J'], 'correcta' => '1 J'],
        ['pregunta' => 'Trabajo para estirar 0.1 m (k=400 N/m)', 'opciones' => ['2 J', '40 J', '4 J', '0 J'], 'correcta' => '2 J'],
        ['pregunta' => 'Resorte serie: k_eq =', 'opciones' => ['k/2', '2k', 'k', '0'], 'correcta' => 'k/2'],
        ['pregunta' => 'Resorte paralelo: k_eq =', 'opciones' => ['2k', 'k/2', 'k', '0'], 'correcta' => '2k'],
        ['pregunta' => 'Energía disipada en amortiguador', 'opciones' => ['Térmica', 'Eléctrica', 'Nuclear', 'Radiante'], 'correcta' => 'Térmica'],
        ['pregunta' => 'Fuerza máxima en resorte', 'opciones' => ['k x_max', 'k', 'x', '0'], 'correcta' => 'k x_max'],
        ['pregunta' => 'Límite proporcional', 'opciones' => ['Hooke válido', 'Plástico', 'Roto', 'Cero'], 'correcta' => 'Hooke válido'],
        ['pregunta' => 'Módulo Young Y =', 'opciones' => ['σ/ε', 'F/A', 'ΔL/L', 'kL/A'], 'correcta' => 'σ/ε'],
        ['pregunta' => 'Resorte ideal vs real', 'opciones' => ['Real pierde energía', 'Igual', 'Ideal más rígido', 'Real más rígido'], 'correcta' => 'Real pierde energía'],
        ['pregunta' => 'SI 2025: 1 J =', 'opciones' => ['N·m', 'kg·m/s²', 'W·s', 'todas'], 'correcta' => 'todas']
    ]
];
// ========================================
// materia: FÍSICA I
// Sub-tema: El Trabajo (T = F* cos(Ángulo)*d)
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'trabajo',
    'titulo' => 'El Trabajo: W = F · d cos θ',
    'contenido' => '
        <h3>El Trabajo en Física</h3>
        <p>El <strong>trabajo</strong> (\(W\)) es la <strong>transferencia de energía</strong> cuando una fuerza actúa sobre un objeto a lo largo de un desplazamiento. Su fórmula es:</p>
        <p>\[
            W = F d \\cos \\theta
        \]</p>
        <p>Donde <strong>F</strong> = magnitud de la fuerza (N), <strong>d</strong> = desplazamiento (m), <strong>θ</strong> = ángulo entre F y d.</p>

        <hr style="border:1px dashed #388E3C;">

        <h4>1. Condiciones del Trabajo</h4>
        <table class="table">
            <thead>
                <tr><th>Ángulo θ</th><th>cos θ</th><th>Trabajo</th></tr>
            </thead>
            <tbody>
                <tr><td>0°</td><td>1</td><td>Máximo positivo</td></tr>
                <tr><td>90°</td><td>0</td><td>Cero (fuerza ⊥ desplazamiento)</td></tr>
                <tr><td>180°</td><td>-1</td><td>Máximo negativo</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #388E3C;">

        <h4>2. Relación con Energía</h4>
        <p>\[
            W_{\\text{neto}} = \\Delta E_k \\quad (\\text{Teorema Trabajo-Energía})
        \]</p>
        <p>Trabajo positivo → aumenta EK<br>
        Trabajo negativo → disminuye EK</p>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>F = 50 N, d = 10 m, θ = 30°</strong><br>
            \( W = 50 \\cdot 10 \\cdot \\cos 30^\\circ = 500 \\cdot 0.866 = 433\\,\\text{J} \)</p>
        </div>

        <div class="visual">
            <img src="assets/img/formula.gif" alt="Diagrama trabajo">
            <p><em>Fuerza y desplazamiento. Fuente: Physics Classroom.</em></p>
        </div>

        <hr style="border:1px dashed #388E3C;">

        <h4>3. SVG Animado: Trabajo Positivo, Nulo y Negativo</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#E8F5E9"/>

                <text x="400" y="50" fill="#1B5E20" font-size="28" text-anchor="middle" font-weight="bold">TRABAJO = F · d cos θ</text>

                <g id="positivo" transform="translate(50,100)">
                    <line x1="0" y1="150" x2="300" y2="150" stroke="#4CAF50" stroke-width="4"/>
                    <path d="M0 150 L50 130 L100 150 L150 130 L200 150 L250 130 L300 150" stroke="#4CAF50" stroke-width="3" fill="none"/>
                    <text x="150" y="140" fill="#2E7D32" font-size="14" text-anchor="middle">d</text>
                    <line x1="50" y1="150" x2="150" y2="100" stroke="#D32F2F" stroke-width="5"/>
                    <text x="100" y="90" fill="#B71C1C" font-size="14" text-anchor="middle">F</text>
                    <text x="150" y="200" fill="#1B5E20" font-size="14" text-anchor="middle">θ = 0° → W = +Fd</text>
                </g>

                <g id="nulo" transform="translate(50,280)" opacity="0">
                    <line x1="0" y1="50" x2="300" y2="50" stroke="#4CAF50" stroke-width="4"/>
                    <text x="150" y="40" fill="#2E7D32" font-size="14" text-anchor="middle">d</text>
                    <line x1="150" y1="50" x2="150" y2="150" stroke="#D32F2F" stroke-width="5"/>
                    <text x="160" y="100" fill="#B71C1C" font-size="14">F</text>
                    <text x="150" y="180" fill="#1B5E20" font-size="14" text-anchor="middle">θ = 90° → W = 0</text>
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                </g>

                <g id="negativo" transform="translate(450,100)" opacity="0">
                    <line x1="300" y1="150" x2="0" y2="150" stroke="#4CAF50" stroke-width="4"/>
                    <text x="150" y="140" fill="#2E7D32" font-size="14" text-anchor="middle">d</text>
                    <line x1="250" y1="150" x2="150" y2="100" stroke="#D32F2F" stroke-width="5"/>
                    <text x="200" y="90" fill="#B71C1C" font-size="14" text-anchor="middle">F</text>
                    <text x="150" y="200" fill="#1B5E20" font-size="14" text-anchor="middle">θ = 180° → W = -Fd</text>
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                </g>

                <rect x="100" y="380" width="600" height="80" fill="#C8E6C9" rx="15"/>
                <text x="400" y="410" fill="#1B5E20" font-size="16" text-anchor="middle">W_neto = ΔEK</text>
                <text x="400" y="435" fill="#2E7D32" font-size="12" text-anchor="middle">SI 2025: 1 J = N·m</text>

            </svg>
            <p><em>SVG Animado: Trabajo positivo, nulo y negativo.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Fórmula trabajo', 'respuesta' => 'F d cos θ'],
        ['enunciado' => 'θ = 90° → W', 'respuesta' => '0'],
        ['enunciado' => 'Unidad trabajo', 'respuesta' => 'Joule (J)'],
        ['enunciado' => 'Trabajo negativo cuando', 'respuesta' => 'F opuesta a d'],
        ['enunciado' => 'F = 20 N, d = 5 m, θ = 0°', 'respuesta' => '100 J'],
        ['enunciado' => 'F = 30 N, d = 4 m, θ = 60°', 'respuesta' => '60 J'],
        ['enunciado' => 'Trabajo gravedad al subir', 'respuesta' => '-mg h'],
        ['enunciado' => 'Fuerza ⊥ a d → W', 'respuesta' => '0'],
        ['enunciado' => 'W_neto =', 'respuesta' => 'ΔEK'],
        ['enunciado' => '1 kJ =', 'respuesta' => '1000 J'],
        ['enunciado' => 'F variable → W =', 'respuesta' => '∫ F dx'],
        ['enunciado' => 'Trabajo motor auto', 'respuesta' => 'Aumenta EK']
    ],
    'quiz' => [
        ['pregunta' => 'Trabajo =', 'opciones' => ['F d cos θ', 'F d', 'm a d', 'P t'], 'correcta' => 'F d cos θ'],
        ['pregunta' => 'Unidad trabajo', 'opciones' => ['Joule', 'Newton', 'Metro', 'Watt'], 'correcta' => 'Joule'],
        ['pregunta' => 'θ = 0° → cos θ =', 'opciones' => ['1', '0', '-1', '0.5'], 'correcta' => '1'],
        ['pregunta' => 'θ = 90° → W =', 'opciones' => ['0', 'Fd', '-Fd', 'máximo'], 'correcta' => '0'],
        ['pregunta' => 'Trabajo positivo → EK', 'opciones' => ['Aumenta', 'Disminuye', 'Igual', 'Cero'], 'correcta' => 'Aumenta'],
        ['pregunta' => 'F = 100 N, d = 2 m, θ = 0° → W', 'opciones' => ['200 J', '100 J', '0 J', '50 J'], 'correcta' => '200 J'],
        ['pregunta' => 'Fuerza ⊥ a d → W', 'opciones' => ['0', 'máximo', 'negativo', 'infinito'], 'correcta' => '0'],
        ['pregunta' => 'Trabajo gravedad al caer', 'respuesta' => '+mg h'],
        ['pregunta' => 'W_neto =', 'opciones' => ['ΔEK', 'ΔEP', 'ΔU', 'P Δt'], 'correcta' => 'ΔEK'],
        ['pregunta' => '1 J =', 'opciones' => ['N·m', 'kg·m/s²', 'W·s', 'todas'], 'correcta' => 'todas'],

        ['pregunta' => 'F = 40 N, d = 3 m, θ = 30° → W', 'opciones' => ['104 J', '120 J', '60 J', '0 J'], 'correcta' => '104 J'],
        ['pregunta' => 'Trabajo fricción', 'opciones' => ['Negativo', 'Positivo', 'Cero', 'Variable'], 'correcta' => 'Negativo'],
        ['pregunta' => 'Motor hace W = 500 J → EK', 'opciones' => ['+500 J', '-500 J', '0 J', '500 N'], 'correcta' => '+500 J'],
        ['pregunta' => 'F variable → W =', 'opciones' => ['área bajo F vs d', 'F promedio · d', 'F máx · d', '0'], 'correcta' => 'área bajo F vs d'],
        ['pregunta' => 'Trabajo en círculo completo', 'opciones' => ['0 (fuerza central)', 'Fd', '2πr F', 'infinito'], 'correcta' => '0 (fuerza central)'],
        ['pregunta' => 'Fuerza conservativa → W', 'opciones' => ['independiente camino', 'depende camino', 'siempre 0', 'siempre Fd'], 'correcta' => 'independiente camino'],
        ['pregunta' => 'Trabajo mínimo para mover', 'opciones' => ['θ = 0°', 'θ = 90°', 'θ = 180°', 'cualquiera'], 'correcta' => 'θ = 0°'],
        ['pregunta' => 'SI 2025: trabajo en', 'opciones' => ['Joule', 'erg', 'caloría', 'eV'], 'correcta' => 'Joule'],
        ['pregunta' => 'F = 15 N, d = 4 m, θ = 180° → W', 'opciones' => ['-60 J', '60 J', '0 J', '15 J'], 'correcta' => '-60 J'],
        ['pregunta' => 'Potencia =', 'opciones' => ['W / t', 'W · t', 'F / d', 'E / m'], 'correcta' => 'W / t'],

        ['pregunta' => 'F = 200 N, d = 10 m, θ = 53° → W ≈', 'opciones' => ['1200 J', '2000 J', '0 J', '1000 J'], 'correcta' => '1200 J'],
        ['pregunta' => 'Trabajo total =', 'opciones' => ['∑ W_i', 'W_máx', 'W_mín', '0'], 'correcta' => '∑ W_i'],
        ['pregunta' => 'Fuerza normal piso → W', 'opciones' => ['0', 'mg d', 'mg h', 'Fd'], 'correcta' => '0'],
        ['pregunta' => 'W = ∫ F dx para', 'opciones' => ['F variable', 'F constante', 'θ = 0', 'θ = 90°'], 'correcta' => 'F variable'],
        ['pregunta' => 'Trabajo gravitacional =', 'opciones' => ['-mg Δh', 'mg Δh', 'mg d', '0'], 'correcta' => '-mg Δh'],
        ['pregunta' => 'Energía mecánica total', 'opciones' => ['EK + EP', 'W', 'P', 'F d'], 'correcta' => 'EK + EP'],
        ['pregunta' => 'Fricción estática → W', 'opciones' => ['0 (sin movimiento)', 'μ N d', 'Fd', 'infinito'], 'correcta' => '0 (sin movimiento)'],
        ['pregunta' => '1 kWh =', 'opciones' => ['3.6 MJ', '3.6 kJ', '36 MJ', '0.36 MJ'], 'correcta' => '3.6 MJ'],
        ['pregunta' => 'Trabajo en resorte =', 'opciones' => ['½ k x²', 'k x', 'F d', 'm g h'], 'correcta' => '½ k x²'],
        ['pregunta' => 'SI 2025: 1 J =', 'opciones' => ['1 N·m', '1 kg·m²/s²', '1 W·s', 'todas'], 'correcta' => 'todas']
    ]
];
// ========================================
// materia: FÍSICA I
// Sub-tema: Energía y Colisiones, Impulso Mecánico, Cantidad de Movimiento, Relación entre Impulso y Cantidad de Movimiento (F = m*a), Ley de Conservación de la Cantidad de Movimiento, Choques Elásticos e Inelásticos, Coeficiente de Restitución, Cantidad de Movimiento
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'energia-colisiones-impulso-movimiento',
    'titulo' => 'Energía y Colisiones: Impulso, Cantidad de Movimiento, Conservación, Choques Elásticos e Inelásticos, Coeficiente de Restitución',
    'contenido' => '
        <h3>Energía y Colisiones: Fundamentos Mecánicos</h3>
        <p>En colisiones, la <strong>cantidad de movimiento</strong> (\(p = m v\)) se conserva en sistemas cerrados. El <strong>impulso</strong> (\(J = F \\Delta t = \\Delta p\)) relaciona fuerza con cambio de movimiento. La <strong>energía cinética</strong> se conserva solo en choques <strong>elásticos</strong> (\(e = 1\)), no en <strong>inelásticos</strong> (\(e < 1\)).</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Cantidad de Movimiento e Impulso</h4>
        <table class="table">
            <thead>
                <tr><th>Concepto</th><th>Fórmula</th><th>Unidad SI</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Cantidad de movimiento (p)</strong></td><td>\(p = m v\)</td><td>kg·m/s</td></tr>
                <tr><td><strong>Impulso (J)</strong></td><td>\(J = F \\Delta t = \\Delta p\)</td><td>N·s</td></tr>
                <tr><td><strong>F = m a</strong></td><td>2ª Ley de Newton</td><td>N</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Conservación de la Cantidad de Movimiento</h4>
        <p>\[
            \\sum p_i = \\sum p_f \\quad (\\text{sistema aislado})
        \]</p>
        <p>Válida en <strong>todas</strong> las colisiones (elásticas e inelásticas).</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Tipos de Colisiones</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>e</th><th>Conservación EK</th><th>v final</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Elástica</strong></td><td>1</td><td>Sí</td><td>Separadas</td></tr>
                <tr><td><strong>Inelástica</strong></td><td>0 < e < 1</td><td>No</td><td>Separadas</td></tr>
                <tr><td><strong>Perfectamente Inelástica</strong></td><td>0</td><td>No (máxima pérdida)</td><td>Juntas</td></tr>
            </tbody>
        </table>

        <p><strong>Coeficiente de restitución:</strong></p>
        <p>\[
            e = -\\frac{v_2 - v_1}{u_2 - u_1}
        \]</p>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>m₁ = 2 kg, u₁ = 5 m/s; m₂ = 3 kg, u₂ = 0</strong><br>
            <strong>Perfectamente inelástica:</strong><br>
            \( v = \\frac{2\\cdot5 + 3\\cdot0}{2+3} = 2\\,\\text{m/s} \)<br>
            \( \\Delta E_k = \\frac{1}{2}(2)(25) - \\frac{1}{2}(5)(4) = 25 - 10 = 15\\,\\text{J (perdida)} \)</p>
        </div>

        <div class="visual">
            <img src="assets/img/colisiones.jpg" alt="Energía en colisiones">
            <p><em>Contexto energético. Fuente: GeeksforGeeks.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/choque-elastico.webp" alt="Colisión elástica">
            <p><em>Simulación. Fuente: Physics Classroom.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. SVG Animado: Colisión Elástica vs Inelástica</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>
                <text x="400" y="50" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">COLISIONES: p y EK</text>

                <rect x="50" y="100" width="700" height="80" fill="#BBDEFB" rx="10"/>
                <text x="400" y="130" fill="#1565C0" font-size="16" text-anchor="middle">p = m v | J = Δp</text>
                <text x="400" y="160" fill="#0D47A1" font-size="14" text-anchor="middle">Conservación p: siempre</text>

                <g id="elastica">
                    <circle cx="150" cy="250" r="30" fill="#42A5F5">
                        <animate attributeName="cx" values="150;400;150" begin="0.5s" dur="3s" repeatCount="indefinite"/>
                    </circle>
                    <text x="150" y="255" fill="white" font-size="12" text-anchor="middle">m₁</text>

                    <circle cx="650" cy="250" r="40" fill="#EF5350">
                        <animate attributeName="cx" values="650;400;650" begin="0.5s" dur="3s" repeatCount="indefinite"/>
                    </circle>
                    <text x="650" y="255" fill="white" font-size="12" text-anchor="middle">m₂</text>

                    <text x="400" y="320" fill="#1976D2" font-size="14" text-anchor="middle">Elástica: EK conservada</text>
                </g>

                <g id="inelastica" opacity="0">
                    <circle cx="200" cy="380" r="35" fill="#42A5F5">
                        <animate attributeName="cx" values="200;400" begin="4s" dur="1.5s" fill="freeze"/>
                    </circle>
                    <circle cx="600" cy="380" r="45" fill="#EF5350">
                        <animate attributeName="cx" values="600;400" begin="4s" dur="1.5s" fill="freeze"/>
                    </circle>
                    <animate attributeName="opacity" values="0;1" begin="3.5s" dur="0.5s"/>

                    <text x="400" y="450" fill="#D32F2F" font-size="14" text-anchor="middle">Inelástica: p conservada, EK ↓</text>
                </g>

                <text x="400" y="490" fill="#1565C0" font-size="12" text-anchor="middle">SI 2025: p en kg·m/s | e = 0 a 1</text>
            </svg>
            <p><em>SVG Animado: Colisión elástica → separación; inelástica → unión.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Cantidad de movimiento p =', 'respuesta' => 'm v'],
        ['enunciado' => 'Impulso J =', 'respuesta' => 'F Δt = Δp'],
        ['enunciado' => 'Conservación p en', 'respuesta' => 'Sistema aislado'],
        ['enunciado' => 'e = 1 → colisión', 'respuesta' => 'Elástica'],
        ['enunciado' => 'e = 0 → colisión', 'respuesta' => 'Perfectamente inelástica'],
        ['enunciado' => 'm₁=1kg, u₁=4m/s; m₂=1kg, u₂=0 → v₁f (elástica)', 'respuesta' => '0 m/s'],
        ['enunciado' => 'Choque inelástico perfecto: v común =', 'respuesta' => '(m₁u₁ + m₂u₂)/(m₁+m₂)'],
        ['enunciado' => 'F = 50 N, Δt = 0.2 s → Δp', 'respuesta' => '10 kg·m/s'],
        ['enunciado' => 'p inicial = p final', 'respuesta' => 'Conservación'],
        ['enunciado' => 'EK perdida en inelástica →', 'respuesta' => 'Calor, deformación'],
        ['enunciado' => 'Coeficiente e =', 'respuesta' => '-(v₂-v₁)/(u₂-u₁)'],
        ['enunciado' => '1 N·s =', 'respuesta' => '1 kg·m/s']
    ],
    'quiz' => [
        ['pregunta' => 'p = m v es', 'opciones' => ['Vector', 'Escalar', 'Energía', 'Fuerza'], 'correcta' => 'Vector'],
        ['pregunta' => 'Conservada en todas colisiones', 'opciones' => ['Cantidad de movimiento', 'Energía cinética', 'Masa', 'Velocidad'], 'correcta' => 'Cantidad de movimiento'],
        ['pregunta' => 'J = F Δt =', 'opciones' => ['Δp', 'ΔEK', 'W', 'P'], 'correcta' => 'Δp'],
        ['pregunta' => 'e = 1 significa', 'opciones' => ['Elástica', 'Inelástica', 'Perfecta', 'Nada'], 'correcta' => 'Elástica'],
        ['pregunta' => 'e = 0 significa', 'opciones' => ['Perfectamente inelástica', 'Elástica', 'Parcial', 'Ninguna'], 'correcta' => 'Perfectamente inelástica'],
        ['pregunta' => 'F = m a es', 'opciones' => ['2ª Ley Newton', '1ª', '3ª', 'Conservación'], 'correcta' => '2ª Ley Newton'],
        ['pregunta' => 'Unidad p', 'opciones' => ['kg·m/s', 'J', 'N', 'm/s²'], 'correcta' => 'kg·m/s'],
        ['pregunta' => 'Choque elástico: EK', 'opciones' => ['Conservada', 'Perdida', 'Aumentada', 'Cero'], 'correcta' => 'Conservada'],
        ['pregunta' => 'Inelástica: EK', 'opciones' => ['Disminuye', 'Conservada', 'Aumenta', 'Cero'], 'correcta' => 'Disminuye'],
        ['pregunta' => 'v final en inelástica perfecta', 'opciones' => ['(m₁u₁ + m₂u₂)/(m₁+m₂)', 'u₁ + u₂', '0', 'u₁'], 'correcta' => '(m₁u₁ + m₂u₂)/(m₁+m₂)'],

        ['pregunta' => 'm₁=2kg, u₁=3m/s; m₂=1kg, u₂=0 → v (inelástica perfecta)', 'opciones' => ['2 m/s', '3 m/s', '1 m/s', '0 m/s'], 'correcta' => '2 m/s'],
        ['pregunta' => 'Δp = 0 en sistema aislado →', 'opciones' => ['F_ext = 0', 'F_ext ≠ 0', 'm = 0', 'v = 0'], 'correcta' => 'F_ext = 0'],
        ['pregunta' => 'F = 100 N, t = 0.1 s → J', 'opciones' => ['10 N·s', '1000 N·s', '1 N·s', '0'], 'correcta' => '10 N·s'],
        ['pregunta' => 'Colisión 1D: p total', 'opciones' => ['m₁u₁ + m₂u₂ = m₁v₁ + m₂v₂', 'm₁u₁ = m₂v₂', 'u₁ = v₁', 'EK igual'], 'correcta' => 'm₁u₁ + m₂u₂ = m₁v₁ + m₂v₂'],
        ['pregunta' => 'e = 0.8 → colisión', 'opciones' => ['Parcialmente elástica', 'Perfecta', 'Inelástica total', 'Elástica'], 'correcta' => 'Parcialmente elástica'],
        ['pregunta' => 'Bola cae: p antes impacto', 'opciones' => ['m √(2gh)', 'm g h', 'm g', '0'], 'correcta' => 'm √(2gh)'],
        ['pregunta' => 'Impulso = área bajo', 'opciones' => ['F vs t', 'F vs x', 'v vs t', 'p vs t'], 'correcta' => 'F vs t'],
        ['pregunta' => 'Airbag aumenta', 'opciones' => ['Δt → ↓F', 'Δp', 'EK', 'masa'], 'correcta' => 'Δt → ↓F'],
        ['pregunta' => 'SI 2025: impulso en', 'opciones' => ['N·s', 'J', 'kg·m/s²', 'W'], 'correcta' => 'N·s'],
        ['pregunta' => 'Choque frontal autos: p total', 'opciones' => ['Conservada', 'Perdida', 'Aumentada', 'Cero'], 'correcta' => 'Conservada'],

        ['pregunta' => 'v₁f (elástica, m₁=m₂, u₂=0)', 'opciones' => ['0', 'u₁', 'u₁/2', '2u₁'], 'correcta' => '0'],
        ['pregunta' => 'EK perdida =', 'opciones' => ['EK_i - EK_f', 'p_i - p_f', 'J', 'F d'], 'correcta' => 'EK_i - EK_f'],
        ['pregunta' => 'm₁=4kg, u₁=6m/s; m₂=2kg, u₂=-3m/s → p total', 'opciones' => ['18 kg·m/s', '12 kg·m/s', '24 kg·m/s', '0'], 'correcta' => '18 kg·m/s'],
        ['pregunta' => 'e = √(h₂/h₁) en caída sobre resorte', 'opciones' => ['Sí', 'No', 'A veces', 'Nunca'], 'correcta' => 'Sí'],
        ['pregunta' => 'F promedio =', 'opciones' => ['J / Δt', 'Δp / m', 'm a', 'p / t'], 'correcta' => 'J / Δt'],
        ['pregunta' => 'Colisión 2D: p conservada en', 'opciones' => ['x e y', 'solo x', 'solo y', 'ninguna'], 'correcta' => 'x e y'],
        ['pregunta' => 'Explosión: p total', 'opciones' => ['0 (si en reposo)', 'm v', 'F t', 'EK'], 'correcta' => '0 (si en reposo)'],
        ['pregunta' => '1D: v₁f =', 'opciones' => ['(m₁-m₂)u₁/(m₁+m₂) + 2m₂u₂/(m₁+m₂)', 'u₁', '0', 'u₂'], 'correcta' => '(m₁-m₂)u₁/(m₁+m₂) + 2m₂u₂/(m₁+m₂)'],
        ['pregunta' => 'Sistema aislado significa', 'opciones' => ['F_ext = 0', 'm = cte', 'v = cte', 'EK = cte'], 'correcta' => 'F_ext = 0'],
        ['pregunta' => 'SI 2025: 1 kg·m/s =', 'opciones' => ['1 N·s', '1 J', '1 W', '1 Pa'], 'correcta' => '1 N·s']
    ]
];
// ========================================
// MATERIA: FÍSICA I
// SUBTEMA: Conservación de la Energía (Energía total = EPG + EK), Velocidad Final (Vf = √(2*g*h))
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'conservacion-energia-total-vf',
    'titulo' => 'Conservación de la Energía Mecánica: E_total = EPG + EK, Velocidad Final v = √(2gh)',
    'contenido' => '
        <h3>Conservación de la Energía Mecánica</h3>
        <p>En ausencia de fuerzas no conservativas (como fricción), la <strong>energía mecánica total</strong> se conserva:</p>
        <p>\[
            E_{\\text{total}} = E_{pg} + E_k = \\text{constante}
        \]</p>
        <p>Donde:</p>
        <ul>
            <li>\( E_{pg} = m g h \) (energía potencial gravitatoria)</li>
            <li>\( E_k = \\frac{1}{2} m v^2 \) (energía cinética)</li>
        </ul>

        <hr style="border:1px dashed #388E3C;">

        <h4>1. Principio de Conservación</h4>
        <p>\[
            m g h_i + \\frac{1}{2} m v_i^2 = m g h_f + \\frac{1}{2} m v_f^2
        \]</p>
        <p>La masa \(m\) se cancela → la velocidad final <strong>no depende de la masa</strong>.</p>

        <hr style="border:1px dashed #388E3C;">

        <h4>2. Velocidad Final en Caída Libre</h4>
        <p>Desde reposo (\(v_i = 0\)) y \(h_i = h\), \(h_f = 0\):</p>
        <p>\[
            m g h = \\frac{1}{2} m v_f^2 \\quad \\Rightarrow \\quad v_f = \\sqrt{2 g h}
        \]</p>
        <p><strong>Independiente de la trayectoria</strong> (si no hay fricción).</p>

        <hr style="border:1px dashed #388E3C;">

        <h4>3. Transformación de Energía</h4>
        <table class="table">
            <thead>
                <tr><th>Punto</th><th>EPG</th><th>EK</th><th>E_total</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Altura máxima</strong></td><td>Máxima</td><td>0</td><td>Constante</td></tr>
                <tr><td><strong>Suelo</strong></td><td>0</td><td>Máxima</td><td>Constante</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Objeto cae desde h = 20 m</strong><br>
            \( v_f = \\sqrt{2 \\cdot 9.8 \\cdot 20} = \\sqrt{392} \\approx 19.8\\,\\text{m/s} \)<br>
            \( E_{\\text{inicial}} = m \\cdot 9.8 \\cdot 20 = 196m\\,\\text{J} \)<br>
            \( E_{\\text{final}} = \\frac{1}{2} m (19.8)^2 \\approx 196m\\,\\text{J} \\quad \\checkmark \)</p>
        </div>

        <hr style="border:1px dashed #388E3C;">

        <h4>4. SVG Animado: Caída Libre + Conservación</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#E8F5E9"/>

                <text x="400" y="50" fill="#1B5E20" font-size="28" text-anchor="middle" font-weight="bold">CONSERVACIÓN ENERGÍA</text>

                <!-- EPG → EK -->
                <g id="energia">
                    <rect x="100" y="100" width="200" height="80" fill="#4CAF50" rx="10"/>
                    <text x="200" y="140" fill="white" font-size="16" text-anchor="middle">EPG = mgh</text>

                    <line x1="300" y1="140" x2="500" y2="140" stroke="#2E7D32" stroke-width="4"/>
                    <text x="400" y="130" fill="#1B5E20" font-size="14" text-anchor="middle">= constante</text>

                    <rect x="500" y="100" width="200" height="80" fill="#2196F3" rx="10"/>
                    <text x="600" y="140" fill="white" font-size="16" text-anchor="middle">EK = ½mv²</text>
                </g>

                <!-- Caída animada -->
                <g id="caida">
                    <circle cx="400" cy="200" r="25" fill="#F44336">
                        <animate attributeName="cy" values="200;400" begin="1s" dur="2s" fill="freeze"/>
                    </circle>
                    <text x="400" y="205" fill="white" font-size="12" text-anchor="middle">m</text>

                    <text x="400" y="250" fill="#D32F2F" font-size="14" text-anchor="middle" id="velocidad">v = 0</text>
                    <animateTransform attributeName="transform" type="translate" values="0,0;0,200" begin="1s" dur="2s" fill="freeze"/>
                </g>

                <!-- Fórmula -->
                <rect x="150" y="320" width="500" height="100" fill="#C8E6C9" rx="15"/>
                <text x="400" y="360" fill="#1B5E20" font-size="18" text-anchor="middle">v_f = √(2gh)</text>
                <text x="400" y="390" fill="#2E7D32" font-size="14" text-anchor="middle">g = 9.8 m/s² | h en metros</text>

                <text x="400" y="470" fill="#1B5E20" font-size="12" text-anchor="middle">SI 2025: 1 J = N·m | E_total conservada</text>
            </svg>
            <p><em>SVG Animado: EPG → EK durante caída. v_f = √(2gh).</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Energía mecánica total =', 'respuesta' => 'EPG + EK'],
        ['enunciado' => 'Fórmula v_f (caída libre)', 'respuesta' => '√(2 g h)'],
        ['enunciado' => 'Conservación válida si', 'respuesta' => 'Sin fricción'],
        ['enunciado' => 'h = 10 m → v_f ≈', 'respuesta' => '14 m/s'],
        ['enunciado' => 'En altura máxima, EK =', 'respuesta' => '0'],
        ['enunciado' => 'EPG = 0 cuando', 'respuesta' => 'h = 0'],
        ['enunciado' => 'v_f depende de', 'respuesta' => 'g y h (no m)'],
        ['enunciado' => 'Péndulo: E_total en', 'respuesta' => 'Cualquier punto'],
        ['enunciado' => 'Resorte + gravedad: E_total =', 'respuesta' => 'EPG + EPE + EK'],
        ['enunciado' => 'Fricción → E_mecánica', 'respuesta' => 'Disminuye'],
        ['enunciado' => 'v_f = 20 m/s → h =', 'respuesta' => '20.4 m'],
        ['enunciado' => '1 kJ =', 'respuesta' => '1000 J']
    ],
    'quiz' => [
        ['pregunta' => 'E_total =', 'opciones' => ['EPG + EK', 'EPG - EK', 'mgh', '½mv²'], 'correcta' => 'EPG + EK'],
        ['pregunta' => 'v_f =', 'opciones' => ['√(2gh)', '2gh', 'gh', '√g'], 'correcta' => '√(2gh)'],
        ['pregunta' => 'Conservación sin', 'opciones' => ['Fricción', 'Gravedad', 'Masa', 'Velocidad'], 'correcta' => 'Fricción'],
        ['pregunta' => 'En suelo, EPG =', 'opciones' => ['0', 'máxima', '½mgh', 'infinita'], 'correcta' => '0'],
        ['pregunta' => 'En altura máxima, EK =', 'opciones' => ['0', 'máxima', '½mv²', 'mgh'], 'correcta' => '0'],
        ['pregunta' => 'v_f depende de', 'opciones' => ['g y h', 'm', 'v_i', 'trayectoria'], 'correcta' => 'g y h'],
        ['pregunta' => 'h = 5 m → v_f ≈', 'opciones' => ['9.9 m/s', '5 m/s', '19.8 m/s', '0'], 'correcta' => '9.9 m/s'],
        ['pregunta' => 'Energía se transforma, no', 'opciones' => ['Se crea/destruye', 'Se pierde', 'Se gana', 'Nada'], 'correcta' => 'Se crea/destruye'],
        ['pregunta' => 'Unidad energía', 'opciones' => ['Joule', 'Newton', 'Metro', 'Watt'], 'correcta' => 'Joule'],
        ['pregunta' => '1 J =', 'opciones' => ['N·m', 'kg·m/s²', 'W·s', 'todas'], 'correcta' => 'todas'],

        ['pregunta' => 'h = 50 m → v_f ≈', 'opciones' => ['31.3 m/s', '50 m/s', '15 m/s', '100 m/s'], 'correcta' => '31.3 m/s'],
        ['pregunta' => 'Fricción presente → E_mecánica', 'opciones' => ['Disminuye', 'Aumenta', 'Igual', 'Cero'], 'correcta' => 'Disminuye'],
        ['pregunta' => 'v_f igual en', 'opciones' => ['Cualquier trayectoria (sin fricción)', 'Solo recta', 'Solo curva', 'Ninguna'], 'correcta' => 'Cualquier trayectoria (sin fricción)'],
        ['pregunta' => 'Péndulo: máxima EK en', 'opciones' => ['Punto bajo', 'Punto alto', 'Mitad', 'Nunca'], 'correcta' => 'Punto bajo'],
        ['pregunta' => 'Resorte comprimido: E_total incluye', 'opciones' => ['EPE', 'EPG', 'EK', 'todas'], 'correcta' => 'todas'],
        ['pregunta' => 'v_i ≠ 0 → E_total =', 'opciones' => ['mgh + ½mv_i²', 'mgh', '½mv_i²', '0'], 'correcta' => 'mgh + ½mv_i²'],
        ['pregunta' => 'Energía disipada =', 'opciones' => ['Trabajo fricción', 'ΔEPG', 'ΔEK', 'mgh'], 'correcta' => 'Trabajo fricción'],
        ['pregunta' => 'g = 10 m/s², h = 10 m → v_f =', 'opciones' => ['14.14 m/s', '10 m/s', '20 m/s', '0'], 'correcta' => '14.14 m/s'],
        ['pregunta' => 'SI 2025: g ≈', 'opciones' => ['9.8 m/s²', '10 m/s²', '9.81 m/s²', '9.80665 m/s²'], 'correcta' => '9.80665 m/s²'],
        ['pregunta' => 'Luna: v_f desde h', 'opciones' => ['Menor (g↓)', 'Igual', 'Mayor', 'Cero'], 'correcta' => 'Menor (g↓)'],

        ['pregunta' => 'h = 100 m → v_f ≈', 'opciones' => ['44.3 m/s', '100 m/s', '20 m/s', '9.8 m/s'], 'correcta' => '44.3 m/s'],
        ['pregunta' => 'v_f = 30 m/s → h =', 'opciones' => ['45.9 m', '30 m', '15 m', '900 m'], 'correcta' => '45.9 m'],
        ['pregunta' => 'Energía total en resorte + masa', 'opciones' => ['EPE + EPG + EK', 'solo EPE', 'solo EK', 'nada'], 'correcta' => 'EPE + EPG + EK'],
        ['pregunta' => 'Trabajo no conservativo', 'opciones' => ['ΔE_mecánica', '0', 'mgh', '½mv²'], 'correcta' => 'ΔE_mecánica'],
        ['pregunta' => 'Montaña rusa: máxima velocidad en', 'opciones' => ['Punto más bajo', 'Punto alto', 'Mitad', 'Final'], 'correcta' => 'Punto más bajo'],
        ['pregunta' => 'v_f en vacío vs aire', 'opciones' => ['Igual (sin fricción)', 'Mayor en aire', 'Menor en vacío', 'Cero'], 'correcta' => 'Igual (sin fricción)'],
        ['pregunta' => 'E_mecánica = cte → sistema', 'opciones' => ['Aislado de no conservativas', 'Con fricción', 'Abierto', 'Caliente'], 'correcta' => 'Aislado de no conservativas'],
        ['pregunta' => 'h = 1 km → v_f ≈', 'opciones' => ['140 m/s', '1000 m/s', '9.8 m/s', '0'], 'correcta' => '140 m/s'],
        ['pregunta' => 'Energía química → mecánica', 'opciones' => ['No conservada mecánicamente', 'Sí', 'A veces', 'Nunca'], 'correcta' => 'No conservada mecánicamente'],
        ['pregunta' => 'SI 2025: 1 J =', 'opciones' => ['1 N·m', '1 kg·m²/s²', '1 W·s', 'todas'], 'correcta' => 'todas']
    ]
];
// ========================================
// MATERIA: FÍSICA I
// SUBTEMA: Cantidad de Calor, Capacidad de Calor Específico, Capacidad Calorífica
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'calor-capacidad',
    'titulo' => 'Cantidad de Calor: Q = m c ΔT, Capacidad Calorífica y Específica',
    'contenido' => '
        <h3>Cantidad de Calor y Capacidad Térmica</h3>
        <p>La <strong>cantidad de calor</strong> (\(Q\)) es la energía transferida por diferencia de temperatura:</p>
        <p>\[
            Q = m c \\Delta T
        \]</p>
        <p>Donde <strong>m</strong> = masa, <strong>c</strong> = capacidad calorífica específica, <strong>\\Delta T</strong> = cambio de temperatura.</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Conceptos Clave</h4>
        <table class="table">
            <thead>
                <tr><th>Concepto</th><th>Fórmula</th><th>Unidad SI</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Cantidad de calor (Q)</strong></td><td>\(Q = m c \\Delta T\)</td><td>J</td></tr>
                <tr><td><strong>Capacidad calorífica específica (c)</strong></td><td>\(c = \\frac{Q}{m \\Delta T}\)</td><td>J/(kg·°C)</td></tr>
                <tr><td><strong>Capacidad calorífica (C)</strong></td><td>\(C = m c\)</td><td>J/°C</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Valores de c (agua y otros)</h4>
        <table class="table">
            <thead>
                <tr><th>Sustancia</th><th>c (J/kg·°C)</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Agua líquida</strong></td><td>4186</td></tr>
                <tr><td><strong>Hielo</strong></td><td>2090</td></tr>
                <tr><td><strong>Vapor agua</strong></td><td>2010</td></tr>
                <tr><td><strong>Alcohol etílico</strong></td><td>2400</td></tr>
                <tr><td><strong>Aluminio</strong></td><td>900</td></tr>
                <tr><td><strong>Cobre</strong></td><td>385</td></tr>
                <tr><td><strong>Hierro</strong></td><td>450</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Calor Latente (Cambio de Fase)</h4>
        <p>\[
            Q = m L
        \]</p>
        <p>\(L_f\) (fusión): 334 kJ/kg (agua)<br>
        \(L_v\) (vaporización): 2260 kJ/kg (agua)</p>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>2 kg agua de 20°C a 80°C</strong><br>
            \( Q = 2 \\cdot 4186 \\cdot 60 = 502,320\\,\\text{J} = 502\\,\\text{kJ} \)<br>
            <strong>Capacidad calorífica C = 2 × 4186 = 8372 J/°C</strong></p>
        </div>

        <div class="visual">
            <img src="assets/img/calor-especifico.jpg" alt="Calor específico">
            <p><em>Experimento calor. Fuente: Physics Classroom.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. SVG Animado: Calorímetro + Calor</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>
                <text x="400" y="50" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">Q = m c ΔT</text>

                <g id="calorimetro">
                    <rect x="200" y="150" width="400" height="250" fill="#BBDEFB" rx="20"/>
                    <text x="400" y="200" fill="#1565C0" font-size="16" text-anchor="middle">Calorímetro</text>
                    <rect x="250" y="220" width="300" height="150" fill="#42A5F5" rx="10"/>
                    <text x="400" y="300" fill="white" font-size="14" text-anchor="middle">Agua</text>
                </g>

                <g id="objeto" opacity="0">
                    <circle cx="400" cy="100" r="40" fill="#EF5350">
                        <animate attributeName="cy" values="100;280" begin="1s" dur="2s" fill="freeze"/>
                    </circle>
                    <text x="400" y="105" fill="white" font-size="12" text-anchor="middle">Objeto caliente</text>
                    <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                </g>

                <g id="calor" opacity="0">
                    <path d="M350 280 Q380 250 410 280 Q380 310 350 280" fill="#FF5722">
                        <animate attributeName="d" values="M350 280 Q380 250 410 280 Q380 310 350 280; M350 280 Q380 230 410 280 Q380 330 350 280; M350 280 Q380 250 410 280 Q380 310 350 280" dur="1.5s" repeatCount="indefinite"/>
                    </path>
                    <text x="400" y="350" fill="#E65100" font-size="14" text-anchor="middle">Q transferido</text>
                    <animate attributeName="opacity" values="0;1" begin="3s" dur="0.5s"/>
                </g>

                <rect x="100" y="400" width="600" height="80" fill="#C8E6C9" rx="15"/>
                <text x="400" y="430" fill="#1B5E20" font-size="16" text-anchor="middle">c_agua = 4186 J/kg·°C</text>
                <text x="400" y="455" fill="#2E7D32" font-size="12" text-anchor="middle">SI 2025: 1 cal = 4.184 J exacto</text>
            </svg>
            <p><em>SVG Animado: Objeto caliente → agua → Q transferido.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Fórmula cantidad calor', 'respuesta' => 'Q = m c ΔT'],
        ['enunciado' => 'c agua', 'respuesta' => '4186 J/kg·°C'],
        ['enunciado' => 'Capacidad calorífica C =', 'respuesta' => 'm c'],
        ['enunciado' => 'Unidad c', 'respuesta' => 'J/(kg·°C)'],
        ['enunciado' => 'Q para 0.5 kg agua ΔT=20°C', 'respuesta' => '41860 J'],
        ['enunciado' => 'c cobre ≈', 'respuesta' => '385 J/kg·°C'],
        ['enunciado' => 'C para 2 kg agua', 'respuesta' => '8372 J/°C'],
        ['enunciado' => 'ΔT = Q / (m c)', 'respuesta' => 'Fórmula cambio T'],
        ['enunciado' => 'Calor latente fusión agua', 'respuesta' => '334 kJ/kg'],
        ['enunciado' => '1 cal =', 'respuesta' => '4.184 J'],
        ['enunciado' => 'c alta →', 'respuesta' => 'Absorbe más calor por °C'],
        ['enunciado' => 'SI: calor en', 'respuesta' => 'Joule']
    ],
    'quiz' => [
        ['pregunta' => 'Q = m c ΔT mide', 'opciones' => ['Calor transferido', 'Temperatura', 'Masa', 'Volumen'], 'correcta' => 'Calor transferido'],
        ['pregunta' => 'c es', 'opciones' => ['Específica', 'Total', 'Molar', 'Nuclear'], 'correcta' => 'Específica'],
        ['pregunta' => 'C = m c es', 'opciones' => ['Capacidad calorífica', 'Específica', 'Latente', 'Nuclear'], 'correcta' => 'Capacidad calorífica'],
        ['pregunta' => 'c agua =', 'opciones' => ['4186 J/kg·°C', '385 J/kg·°C', '900 J/kg·°C', '2090 J/kg·°C'], 'correcta' => '4186 J/kg·°C'],
        ['pregunta' => 'Alta c →', 'opciones' => ['Absorbe más calor', 'Menos', 'Igual', 'Cero'], 'correcta' => 'Absorbe más calor'],
        ['pregunta' => 'ΔT = 0 → Q', 'opciones' => ['0', 'máximo', 'infinito', 'negativo'], 'correcta' => '0'],
        ['pregunta' => 'm dobla → Q', 'opciones' => ['Dobla', 'Cuadruplica', 'Mitad', 'Igual'], 'correcta' => 'Dobla'],
        ['pregunta' => 'ΔT dobla → Q', 'opciones' => ['Dobla', 'Cuadruplica', 'Mitad', 'Igual'], 'correcta' => 'Dobla'],
        ['pregunta' => 'Calor latente es para', 'opciones' => ['Cambio fase', 'Cambio T', 'Movimiento', 'Luz'], 'correcta' => 'Cambio fase'],
        ['pregunta' => '1 cal =', 'opciones' => ['4.184 J', '1 J', '4184 J', '0.4184 J'], 'correcta' => '4.184 J'],

        ['pregunta' => 'Q = 8360 J, m=1 kg, c=4186 → ΔT', 'opciones' => ['2°C', '1°C', '4°C', '8360°C'], 'correcta' => '2°C'],
        ['pregunta' => 'c cobre', 'opciones' => ['385 J/kg·°C', '4186', '900', '2090'], 'correcta' => '385 J/kg·°C'],
        ['pregunta' => 'C para 500 g agua', 'opciones' => ['2093 J/°C', '4186 J/°C', '8372 J/°C', '0'], 'correcta' => '2093 J/°C'],
        ['pregunta' => 'Calor para fundir 1 kg hielo', 'opciones' => ['334 kJ', '4186 kJ', '2260 kJ', '0 J'], 'correcta' => '334 kJ'],
        ['pregunta' => 'Calor para vaporizar 1 kg agua', 'opciones' => ['2260 kJ', '334 kJ', '4186 kJ', '0 J'], 'correcta' => '2260 kJ'],
        ['pregunta' => 'c hielo', 'opciones' => ['2090 J/kg·°C', '4186', '2010', '385'], 'correcta' => '2090 J/kg·°C'],
        ['pregunta' => 'Q = C ΔT para', 'opciones' => ['Objeto entero', 'Por kg', 'Por mol', 'Fase'], 'correcta' => 'Objeto entero'],
        ['pregunta' => 'SI: c en', 'opciones' => ['J/(kg·K)', 'cal/g·°C', 'BTU/lb·°F', 'kWh'], 'correcta' => 'J/(kg·K)'],
        ['pregunta' => 'c alta en', 'opciones' => ['Agua', 'Cobre', 'Aire', 'Vacío'], 'correcta' => 'Agua'],
        ['pregunta' => 'IUPAC: calor en', 'opciones' => ['Joule', 'Caloría', 'eV', 'kWh'], 'correcta' => 'Joule'],

        ['pregunta' => 'Q = 100 kJ, m=2 kg, ΔT=10°C → c', 'opciones' => ['5000 J/kg·°C', '500 J/kg·°C', '10000 J/kg·°C', '0'], 'correcta' => '5000 J/kg·°C'],
        ['pregunta' => 'Calor específico molar agua ≈', 'opciones' => ['75.3 J/mol·K', '18 J/mol·K', '4186 J/mol·K', '4.184 J/mol·K'], 'correcta' => '75.3 J/mol·K'],
        ['pregunta' => 'Dulong-Petit: c molar metales ≈', 'opciones' => ['25 J/mol·K', '75 J/mol·K', '4.184 J/mol·K', '0'], 'correcta' => '25 J/mol·K'],
        ['pregunta' => 'Calor para 1 mol agua +1°C', 'opciones' => ['75.3 J', '4186 J', '18 J', '4.184 J'], 'correcta' => '75.3 J'],
        ['pregunta' => 'c vapor agua', 'opciones' => ['2010 J/kg·°C', '4186', '2090', '385'], 'correcta' => '2010 J/kg·°C'],
        ['pregunta' => 'Q latente fusión vs vaporización', 'opciones' => ['L_v > L_f', 'L_f > L_v', 'Igual', 'Cero'], 'correcta' => 'L_v > L_f'],
        ['pregunta' => 'Calorímetro ideal', 'opciones' => ['Q_ganado = -Q_perdido', 'Q_ganado = Q_perdido', 'Q = 0', 'Q infinito'], 'correcta' => 'Q_ganado = -Q_perdido'],
        ['pregunta' => 'c aire ≈', 'opciones' => ['1000 J/kg·°C', '4186', '385', '2090'], 'correcta' => '1000 J/kg·°C'],
        ['pregunta' => 'SI 2025: 1 cal =', 'opciones' => ['4.184 J exacto', '4.2 J', '4 J', '1 J'], 'correcta' => '4.184 J exacto'],
        ['pregunta' => 'Capacidad calorífica sistema', 'opciones' => ['∑ C_i', 'C_promedio', 'C_máx', '0'], 'correcta' => '∑ C_i']
    ]
];
// ========================================
// MATERIA: FÍSICA I
// SUBTEMA: Impulso Mecánico, Cantidad de Movimiento, Relación (F = m*a)
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'impulso-movimiento',
    'titulo' => 'Impulso Mecánico: J = F Δt = Δp, Cantidad de Movimiento p = m v, F = m a',
    'contenido' => '
        <h3>Impulso Mecánico y Cantidad de Movimiento</h3>
        <p>La <strong>cantidad de movimiento</strong> (\(p\)) es una magnitud vectorial que mide el estado de movimiento de un cuerpo:</p>
        <p>\[
            p = m v
        \]</p>
        <p>El <strong>impulso</strong> (\(J\)) es el efecto de una fuerza aplicada durante un tiempo:</p>
        <p>\[
            J = F \\Delta t = \\Delta p
        \]</p>
        <p>De la 2ª Ley de Newton: \( F = m a = \\frac{\\Delta p}{\\Delta t} \\), por lo tanto, \( J = \\Delta p \).</p>

        <hr style="border:1px dashed #D32F2F;">

        <h4>1. Relaciones Clave</h4>
        <table class="table">
            <thead>
                <tr><th>Concepto</th><th>Fórmula</th><th>Unidad SI</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Cantidad de movimiento (p)</strong></td><td>\(p = m v\)</td><td>kg·m/s</td></tr>
                <tr><td><strong>Impulso (J)</strong></td><td>\(J = F \\Delta t = \\Delta p\)</td><td>N·s</td></tr>
                <tr><td><strong>2ª Ley Newton</strong></td><td>\(F = m a = \\frac{\\Delta p}{\\Delta t}\)</td><td>N</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #D32F2F;">

        <h4>2. Interpretación Física</h4>
        <ul>
            <li><strong>Impulso</strong>: Área bajo la curva F vs t.</li>
            <li><strong>Δp</strong>: Cambio en cantidad de movimiento.</li>
            <li><strong>J = Δp</strong>: El impulso produce un cambio en el movimiento.</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Fuerza de 200 N durante 0.05 s</strong><br>
            \( J = 200 \\cdot 0.05 = 10\\,\\text{N·s} \)<br>
            \( \\Delta p = 10\\,\\text{kg·m/s} \) → Si \( m = 2\\,\\text{kg} \), \( \\Delta v = 5\\,\\text{m/s} \)</p>
        </div>

        <div class="visual">
            <img src="assets/img/cantidad-de-movimiento-thumb.png" alt="Cantidad de movimiento">
            <p><em>Vectorial y conservada. Fuente: Physics Classroom.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/Collisioncartsm1greatergreaterthanm2.gif" alt="Simulación colisiones">
            <p><em>Impulso en choques. Fuente: PhET.</em></p>
        </div>

        <hr style="border:1px dashed #D32F2F;">

        <h4>3. SVG Animado: Impulso → Cambio en p</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#FFEBEE"/>

                <text x="400" y="50" fill="#B71C1C" font-size="28" text-anchor="middle" font-weight="bold">IMPULSO = Δp</text>

                <!-- Gráfico F vs t -->
                <g id="grafico">
                    <line x1="150" y1="350" x2="650" y2="350" stroke="#263238" stroke-width="2"/>
                    <line x1="150" y1="350" x2="150" y2="100" stroke="#263238" stroke-width="2"/>
                    <text x="140" y="340" fill="#37474F" font-size="14">0</text>
                    <text x="400" y="370" fill="#37474F" font-size="14">t</text>
                    <text x="130" y="200" fill="#37474F" font-size="14">F</text>

                    <rect x="300" y="250" width="100" height="100" fill="#EF5350" opacity="0.7">
                        <animate attributeName="opacity" values="0;0.7;0" begin="1s" dur="2s" repeatCount="indefinite"/>
                    </rect>
                    <text x="350" y="300" fill="#B71C1C" font-size="16" text-anchor="middle">F Δt = J</text>
                </g>

                <!-- Bola antes/después -->
                <g id="bola">
                    <circle cx="200" cy="200" r="30" fill="#42A5F5">
                        <animate attributeName="cx" values="200;600" begin="0.5s" dur="3s" repeatCount="indefinite"/>
                    </circle>
                    <text x="200" y="205" fill="white" font-size="12" text-anchor="middle">m</text>

                    <text x="400" y="150" fill="#D32F2F" font-size="16" text-anchor="middle" id="estado">v inicial</text>
                    <animate attributeName="opacity" values="1;0;1" begin="3.5s" dur="0.1s"/>

                    <text x="400" y="150" fill="#2E7D32" font-size="16" text-anchor="middle" id="final" opacity="0">v final ↑</text>
                    <animate attributeName="opacity" values="0;1" begin="3.5s" dur="0.5s"/>
                </g>

                <rect x="100" y="400" width="600" height="80" fill="#FFCCBC" rx="15"/>
                <text x="400" y="430" fill="#E65100" font-size="16" text-anchor="middle">J = F Δt = Δp = m Δv</text>
                <text x="400" y="455" fill="#D32F2F" font-size="12" text-anchor="middle">SI 2025: 1 N·s = 1 kg·m/s</text>
            </svg>
            <p><em>SVG Animado: Impulso (área F-t) → aumento en p.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Cantidad de movimiento p =', 'respuesta' => 'm v'],
        ['enunciado' => 'Impulso J =', 'respuesta' => 'F Δt = Δp'],
        ['enunciado' => 'F = m a =', 'respuesta' => 'Δp / Δt'],
        ['enunciado' => 'Unidad p', 'respuesta' => 'kg·m/s'],
        ['enunciado' => 'F = 50 N, Δt = 0.2 s → J', 'respuesta' => '10 N·s'],
        ['enunciado' => 'm = 2 kg, Δv = 5 m/s → Δp', 'respuesta' => '10 kg·m/s'],
        ['enunciado' => 'J = Δp →', 'respuesta' => 'Cambio en movimiento'],
        ['enunciado' => 'F promedio =', 'respuesta' => 'J / Δt'],
        ['enunciado' => 'Área bajo F vs t', 'respuesta' => 'Impulso'],
        ['enunciado' => 'p es', 'respuesta' => 'Vector'],
        ['enunciado' => '1 N·s =', 'respuesta' => '1 kg·m/s'],
        ['enunciado' => 'SI: impulso en', 'respuesta' => 'N·s']
    ],
    'quiz' => [
        ['pregunta' => 'p = m v es', 'opciones' => ['Vector', 'Escalar', 'Energía', 'Fuerza'], 'correcta' => 'Vector'],
        ['pregunta' => 'J = F Δt =', 'opciones' => ['Δp', 'p', 'm v', 'F'], 'correcta' => 'Δp'],
        ['pregunta' => 'F = m a implica', 'opciones' => ['F = Δp/Δt', 'F = p', 'F = m v', 'F = 0'], 'correcta' => 'F = Δp/Δt'],
        ['pregunta' => 'Unidad p', 'opciones' => ['kg·m/s', 'N', 'J', 'm/s²'], 'correcta' => 'kg·m/s'],
        ['pregunta' => 'Unidad J', 'opciones' => ['N·s', 'J', 'kg', 'm/s'], 'correcta' => 'N·s'],
        ['pregunta' => '1 N·s =', 'opciones' => ['1 kg·m/s', '1 J', '1 N', '1 m/s'], 'correcta' => '1 kg·m/s'],
        ['pregunta' => 'Impulso cambia', 'opciones' => ['Cantidad de movimiento', 'Masa', 'Aceleración', 'Energía'], 'correcta' => 'Cantidad de movimiento'],
        ['pregunta' => 'F constante → J =', 'opciones' => ['F Δt', 'F/t', 'ΔF t', 'F²'], 'correcta' => 'F Δt'],
        ['pregunta' => 'Área bajo F vs t', 'opciones' => ['Impulso', 'Trabajo', 'Potencia', 'Energía'], 'correcta' => 'Impulso'],
        ['pregunta' => 'F = 100 N, Δt = 0.1 s → J', 'opciones' => ['10 N·s', '1000 N·s', '1 N·s', '0'], 'correcta' => '10 N·s'],

        ['pregunta' => 'm = 5 kg, v_i = 0, v_f = 4 m/s → Δp', 'opciones' => ['20 kg·m/s', '5 kg·m/s', '4 kg·m/s', '0'], 'correcta' => '20 kg·m/s'],
        ['pregunta' => 'J = 15 N·s, m = 3 kg → Δv', 'opciones' => ['5 m/s', '15 m/s', '3 m/s', '45 m/s'], 'correcta' => '5 m/s'],
        ['pregunta' => 'F promedio =', 'opciones' => ['J / Δt', 'Δp / m', 'm a', 'p / t'], 'correcta' => 'J / Δt'],
        ['pregunta' => 'p conservada si', 'opciones' => ['F_ext = 0', 'F_ext ≠ 0', 'm = 0', 'v = 0'], 'correcta' => 'F_ext = 0'],
        ['pregunta' => 'F dobla, Δt igual → J', 'opciones' => ['Dobla', 'Cuadruplica', 'Mitad', 'Igual'], 'correcta' => 'Dobla'],
        ['pregunta' => 'Δt dobla, F igual → J', 'opciones' => ['Dobla', 'Cuadruplica', 'Mitad', 'Igual'], 'correcta' => 'Dobla'],
        ['pregunta' => 'Airbag funciona porque', 'opciones' => ['Aumenta Δt → ↓F', 'Aumenta F', 'Disminuye m', 'Aumenta v'], 'correcta' => 'Aumenta Δt → ↓F'],
        ['pregunta' => 'F = 0 → J =', 'opciones' => ['0', 'máximo', 'infinito', 'p'], 'correcta' => '0'],
        ['pregunta' => 'p = 10 kg·m/s, m = 2 kg → v', 'opciones' => ['5 m/s', '10 m/s', '2 m/s', '20 m/s'], 'correcta' => '5 m/s'],
        ['pregunta' => 'SI 2025: p en', 'opciones' => ['kg·m/s', 'N·s²', 'J·s', 'W'], 'correcta' => 'kg·m/s'],

        ['pregunta' => 'F variable → J =', 'opciones' => ['Área bajo F-t', 'F_prom · t', 'F_max · t', '0'], 'correcta' => 'Área bajo F-t'],
        ['pregunta' => 'Δp = 0 →', 'opciones' => ['J = 0', 'F = 0', 'm = 0', 'v = 0'], 'correcta' => 'J = 0'],
        ['pregunta' => 'F = 500 N, t = 0.02 s → Δp', 'opciones' => ['10 kg·m/s', '500 kg·m/s', '0.02 kg·m/s', '10000 kg·m/s'], 'correcta' => '10 kg·m/s'],
        ['pregunta' => 'Golpe martillo: J grande si', 'opciones' => ['F grande o Δt grande', 'F pequeña', 'Δt cero', 'm cero'], 'correcta' => 'F grande o Δt grande'],
        ['pregunta' => 'p antes = p después si', 'opciones' => ['Sistema aislado', 'F_ext ≠ 0', 'Colisión inelástica', 'Siempre'], 'correcta' => 'Sistema aislado'],
        ['pregunta' => 'F = Δp/Δt → a =', 'opciones' => ['Δv/Δt', 'v/t', 'p/m', 'J/m'], 'correcta' => 'Δv/Δt'],
        ['pregunta' => 'Unidad a', 'opciones' => ['m/s²', 'm/s', 'kg·m/s', 'N'], 'correcta' => 'm/s²'],
        ['pregunta' => 'J = m Δv → Δv =', 'opciones' => ['J/m', 'J m', 'm/J', '0'], 'correcta' => 'J/m'],
        ['pregunta' => 'F = 0 durante Δt →', 'opciones' => ['Δp = 0', 'Δp = p', 'Δp = m', 'Δp = v'], 'correcta' => 'Δp = 0'],
        ['pregunta' => 'SI 2025: 1 kg·m/s =', 'opciones' => ['1 N·s', '1 J', '1 W', '1 Pa'], 'correcta' => '1 N·s']
    ]
];
// ========================================
// MATERIA: FÍSICA I
// SUBTEMA: Ley de Conservación de la Cantidad de Movimiento
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'conservacion-cantidad-movimiento',
    'titulo' => 'Ley de Conservación de la Cantidad de Movimiento: p_total inicial = p_total final',
    'contenido' => '
        <h3>Ley de Conservación de la Cantidad de Movimiento</h3>
        <p>En un <strong>sistema aislado</strong> (sin fuerzas externas netas), la <strong>cantidad de movimiento total</strong> se conserva en el tiempo:</p>
        <p>\[
            \\sum \\vec{p}_i = \\sum \\vec{p}_f
        \]</p>
        <p><strong>Vectorial</strong>: se conserva en magnitud y dirección. Válida en <strong>todas</strong> las colisiones (elásticas, inelásticas, explosiones).</p>

        <hr style="border:1px dashed #388E3C;">

        <h4>1. Condiciones para Conservación</h4>
        <ul>
            <li><strong>Fuerza externa neta = 0</strong> (\( \\sum \\vec{F}_{\\text{ext}} = 0 \)).</li>
            <li>Aplica a <strong>sistemas de múltiples cuerpos</strong>.</li>
            <li>En 1D, 2D o 3D: se conserva por componentes.</li>
        </ul>

        <hr style="border:1px dashed #388E3C;">

        <h4>2. Aplicaciones</h4>
        <table class="table">
            <thead>
                <tr><th>Situación</th><th>Ecuación</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Colisión 1D</strong></td><td>\( m_1 v_1 + m_2 v_2 = m_1 v_1\' + m_2 v_2\' \)</td></tr>
                <tr><td><strong>Explosión</strong></td><td>\( 0 = m_1 v_1\' + m_2 v_2\' \)</td></tr>
                <tr><td><strong>Cohete</strong></td><td>\( M v = -\\Delta m \\cdot v_e \)</td></tr>
            </tbody>
        </table>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>m₁ = 2 kg, v₁ = 4 m/s; m₂ = 3 kg, v₂ = 0</strong><br>
            \( p_i = 2\\cdot4 + 3\\cdot0 = 8\\,\\text{kg·m/s} \)<br>
            <strong>Perfectamente inelástica:</strong> \( v = \\frac{8}{5} = 1.6\\,\\text{m/s} \)<br>
            \( p_f = 5 \\cdot 1.6 = 8\\,\\text{kg·m/s} \\quad \\checkmark \)</p>
        </div>

        <div class="visual">
            <img src="assets/img/conservacion_momento.jpg" alt="Conservación p">
            <p><em>Sistema aislado. Fuente: Physics Classroom.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/Choque_elastico_100.gif" alt="Simulación colisiones">
            <p><em>Interativo: 1D y 2D. Fuente: PhET.</em></p>
        </div>

        <hr style="border:1px dashed #388E3C;">

        <h4>3. SVG Animado: Colisión + Conservación p</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#E8F5E9"/>

                <text x="400" y="50" fill="#1B5E20" font-size="28" text-anchor="middle" font-weight="bold">p INICIAL = p FINAL</text>

                <!-- Antes colisión -->
                <g id="antes">
                    <circle cx="200" cy="250" r="35" fill="#42A5F5">
                        <animate attributeName="cx" values="200;400" begin="0.5s" dur="1.5s"/>
                    </circle>
                    <text x="200" y="255" fill="white" font-size="12" text-anchor="middle">m₁</text>
                    <text x="200" y="200" fill="#2E7D32" font-size="14" text-anchor="middle">v₁ →</text>

                    <circle cx="600" cy="250" r="45" fill="#EF5350"/>
                    <text x="600" y="255" fill="white" font-size="12" text-anchor="middle">m₂</text>
                    <text x="600" y="200" fill="#2E7D32" font-size="14" text-anchor="middle">v₂ = 0</text>
                </g>

                <!-- Después (unión) -->
                <g id="despues" opacity="0">
                    <rect x="375" y="215" width="80" height="70" fill="#9CCC65" rx="10">
                        <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                    </rect>
                    <text x="415" y="250" fill="white" font-size="12" text-anchor="middle">m₁+m₂</text>
                    <text x="415" y="300" fill="#1B5E20" font-size="14" text-anchor="middle">v común →</text>
                    <animate attributeName="x" values="415;500" begin="2.5s" dur="2s" repeatCount="indefinite"/>
                </g>

                <!-- Fórmula -->
                <rect x="100" y="350" width="600" height="100" fill="#C8E6C9" rx="15"/>
                <text x="400" y="390" fill="#1B5E20" font-size="18" text-anchor="middle">m₁v₁ + m₂v₂ = (m₁+m₂)v</text>
                <text x="400" y="420" fill="#2E7D32" font-size="14" text-anchor="middle">Inelástica perfecta</text>

                <text x="400" y="470" fill="#1B5E20" font-size="12" text-anchor="middle">SI 2025: p en kg·m/s | Sistema aislado: F_ext = 0</text>
            </svg>
            <p><em>SVG Animado: p total conservado antes y después de colisión.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Conservación p válida si', 'respuesta' => 'F_ext = 0'],
        ['enunciado' => 'p total =', 'respuesta' => 'm₁v₁ + m₂v₂ + ...'],
        ['enunciado' => 'En explosión (reposo)', 'respuesta' => 'p_total = 0'],
        ['enunciado' => 'Vectorial →', 'respuesta' => 'Componentes x, y'],
        ['enunciado' => 'm₁=1kg, v₁=5m/s; m₂=2kg, v₂=0 → p_i', 'respuesta' => '5 kg·m/s'],
        ['enunciado' => 'Inelástica perfecta: v =', 'respuesta' => '(m₁v₁ + m₂v₂)/(m₁+m₂)'],
        ['enunciado' => 'Cohete: Δp_cohete =', 'respuesta' => '-Δp_gases'],
        ['enunciado' => 'Colisión 2D: p_x y p_y', 'respuesta' => 'Conservadas por separado'],
        ['enunciado' => 'Sistema aislado significa', 'respuesta' => 'No F_ext neta'],
        ['enunciado' => 'p antes = p después', 'respuesta' => 'Conservación'],
        ['enunciado' => 'Unidad p', 'respuesta' => 'kg·m/s'],
        ['enunciado' => 'SI: conservación en', 'respuesta' => 'Cualquier dirección']
    ],
    'quiz' => [
        ['pregunta' => 'Conservación p requiere', 'opciones' => ['F_ext = 0', 'F_ext ≠ 0', 'm = 0', 'v = 0'], 'correcta' => 'F_ext = 0'],
        ['pregunta' => 'p total antes =', 'opciones' => ['p total después', 'p parcial', '0', 'máximo'], 'correcta' => 'p total después'],
        ['pregunta' => 'p es', 'opciones' => ['Vector', 'Escalar', 'Energía', 'Fuerza'], 'correcta' => 'Vector'],
        ['pregunta' => 'Válida en', 'opciones' => ['Todas colisiones', 'Solo elásticas', 'Solo inelásticas', 'Ninguna'], 'correcta' => 'Todas colisiones'],
        ['pregunta' => 'Explosión: p_i =', 'opciones' => ['0 (si en reposo)', 'm v', 'F t', 'EK'], 'correcta' => '0 (si en reposo)'],
        ['pregunta' => 'm₁v₁ + m₂v₂ =', 'opciones' => ['m₁v₁\' + m₂v₂\'', 'm₁ + m₂', 'v₁ + v₂', '0'], 'correcta' => 'm₁v₁\' + m₂v₂\''],
        ['pregunta' => 'Sistema aislado =', 'opciones' => ['∑ F_ext = 0', '∑ F_int = 0', 'm = cte', 'v = cte'], 'correcta' => '∑ F_ext = 0'],
        ['pregunta' => 'Cohete avanza porque', 'opciones' => ['Gases expulsados atrás', 'Combustible', 'Gravedad', 'Aire'], 'correcta' => 'Gases expulsados atrás'],
        ['pregunta' => 'p conservada en', 'opciones' => ['x e y (2D)', 'solo x', 'solo y', 'ninguna'], 'correcta' => 'x e y (2D)'],
        ['pregunta' => 'Unidad p', 'opciones' => ['kg·m/s', 'N', 'J', 'm/s²'], 'correcta' => 'kg·m/s'],

        ['pregunta' => 'm₁=2kg, v₁=3m/s; m₂=1kg, v₂=0 → p_i', 'opciones' => ['6 kg·m/s', '2 kg·m/s', '3 kg·m/s', '0'], 'correcta' => '6 kg·m/s'],
        ['pregunta' => 'Inelástica perfecta: v =', 'opciones' => ['(m₁v₁ + m₂v₂)/(m₁+m₂)', 'v₁ + v₂', '0', 'v₁'], 'correcta' => '(m₁v₁ + m₂v₂)/(m₁+m₂)'],
        ['pregunta' => 'Explosión: fragmentos opuestos', 'opciones' => ['p₁ = -p₂', 'p₁ = p₂', 'p₁ = 0', 'p_total ≠ 0'], 'correcta' => 'p₁ = -p₂'],
        ['pregunta' => 'Colisión frontal: p_total', 'opciones' => ['Conservada', 'Perdida', 'Aumentada', 'Cero'], 'correcta' => 'Conservada'],
        ['pregunta' => 'Fricción presente → p sistema', 'opciones' => ['No conservada (F_ext)', 'Conservada', 'Aumenta', 'Cero'], 'correcta' => 'No conservada (F_ext)'],
        ['pregunta' => 'Choque elástico: p', 'opciones' => ['Conservada', 'No', 'A veces', 'Nunca'], 'correcta' => 'Conservada'],
        ['pregunta' => 'v₁ = -v₂ (masas iguales)', 'opciones' => ['Rebotan opuestos', 'Se pegan', 'Se detienen', 'Aceleran'], 'correcta' => 'Rebotan opuestos'],
        ['pregunta' => 'p = m v → v =', 'opciones' => ['p/m', 'm/p', 'p m', '0'], 'correcta' => 'p/m'],
        ['pregunta' => 'Sistema Tierra + pelota', 'opciones' => ['p_total conservada', 'No', 'Solo pelota', 'Solo Tierra'], 'correcta' => 'p_total conservada'],
        ['pregunta' => 'SI 2025: p en', 'opciones' => ['kg·m/s', 'N·s²', 'J·s', 'W'], 'correcta' => 'kg·m/s'],

        ['pregunta' => 'm₁=4kg, v₁=5m/s; m₂=6kg, v₂=-2m/s → p_i', 'opciones' => ['8 kg·m/s', '20 kg·m/s', '30 kg·m/s', '0'], 'correcta' => '8 kg·m/s'],
        ['pregunta' => 'Explosión 2 partes: m₁=1kg, v₁=10m/s → m₂v₂', 'opciones' => ['-10 kg·m/s', '10 kg·m/s', '0', '1 kg·m/s'], 'correcta' => '-10 kg·m/s'],
        ['pregunta' => 'Cohete: Δm v_e =', 'opciones' => ['-M Δv', 'M v', 'Δm v', '0'], 'correcta' => '-M Δv'],
        ['pregunta' => 'Colisión 2D: p_y inicial = 0 → p_y final', 'opciones' => ['0', 'm₁v₁', 'm₂v₂', 'p_x'], 'correcta' => '0'],
        ['pregunta' => 'p_total = 0 → sistema', 'opciones' => ['En reposo o balanceado', 'En movimiento', 'Con fricción', 'Abierto'], 'correcta' => 'En reposo o balanceado'],
        ['pregunta' => 'Conservación p derivada de', 'opciones' => ['3ª Ley Newton', '1ª', '2ª', 'Gravedad'], 'correcta' => '3ª Ley Newton'],
        ['pregunta' => 'p en vacío vs aire', 'opciones' => ['Conservada igual', 'No en aire', 'Solo vacío', 'Nunca'], 'correcta' => 'Conservada igual'],
        ['pregunta' => 'm₁v₁ = m₂v₂ (rebote)', 'opciones' => ['Masas iguales', 'Velocidades iguales', 'p iguales', 'EK igual'], 'correcta' => 'Masas iguales'],
        ['pregunta' => 'Sistema cerrado =', 'opciones' => ['No intercambio p con exterior', 'Masa cte', 'Volumen cte', 'Temperatura cte'], 'correcta' => 'No intercambio p con exterior'],
        ['pregunta' => 'SI 2025: 1 kg·m/s =', 'opciones' => ['1 N·s', '1 J', '1 W', '1 Pa'], 'correcta' => '1 N·s']
    ]
];
// ========================================
// MATERIA: FÍSICA I
// SUBTEMA: Coeficiente de Restitución, Cantidad de Calor, Capacidad de Calor Específico, Capacidad Calorífica
// ========================================
$lecciones[] = [
    'materia' => 'Física I',
    'slug' => 'coeficiente-restitucion-calor',
    'titulo' => 'Coeficiente de Restitución (e), Cantidad de Calor (Q = m c ΔT), Capacidad Calorífica (C)',
    'contenido' => '
        <h3>Coeficiente de Restitución (e)</h3>
        <p>Mide la <strong>elasticidad</strong> de una colisión. Se define como la <strong>razón negativa</strong> de la velocidad relativa de separación a la de aproximación:</p>
        <p>\[
            e = -\\frac{v_2 - v_1}{u_2 - u_1} = \\frac{v_{\\text{rel. salida}}}{u_{\\text{rel. entrada}}}
        \]</p>
        <ul>
            <li>\( e = 1 \): <strong>Elástica perfecta</strong> (p y EK conservadas)</li>
            <li>\( e = 0 \): <strong>Inelástica perfecta</strong> (se pegan)</li>
            <li>\( 0 < e < 1 \): <strong>Parcialmente elástica</strong></li>
        </ul>

        <hr style="border:1px dashed #1976D2;">

        <h3>Cantidad de Calor y Capacidad Térmica</h3>
        <p>Calor transferido para cambiar temperatura (sin cambio de fase):</p>
        <p>\[
            Q = m c \\Delta T \\quad \\text{o} \\quad Q = C \\Delta T
        \]</p>
        <ul>
            <li>\( c \): Capacidad calorífica <strong>específica</strong> (J/kg·°C)</li>
            <li>\( C = m c \): Capacidad calorífica <strong>total</strong> (J/°C)</li>
            <li>\( c_{\\text{agua}} = 4186\\,\\text{J/kg·°C} \)</li>
        </ul>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Tabla de Valores</h4>
        <table class="table">
            <thead>
                <tr><th>Sustancia</th><th>c (J/kg·°C)</th></tr>
            </thead>
            <tbody>
                <tr><td>Agua</td><td>4186</td></tr>
                <tr><td>Alcohol</td><td>2400</td></tr>
                <tr><td>Aluminio</td><td>900</td></tr>
                <tr><td>Cobre</td><td>385</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Relación con Colisiones</h4>
        <p>En colisiones, \( e \) determina si la <strong>energía cinética</strong> se conserva:</p>
        <p>\[
            \\frac{1}{2} m_1 u_1^2 + \\frac{1}{2} m_2 u_2^2 = 
            \\begin{cases}
            \\frac{1}{2} m_1 v_1^2 + \\frac{1}{2} m_2 v_2^2 & (e=1) \\\\
            < \\text{total inicial} & (e<1)
            \\end{cases}
        \]</p>

        <div class="ejemplo">
            <p><strong>Ejemplo 1 (Restitución):</strong> <strong>m₁ = 1 kg, u₁ = 5 m/s; m₂ = 2 kg, u₂ = 0</strong><br>
            \( e = 0.5 \\) → \( v_1 = -0.667\\,\\text{m/s}, v_2 = 2.167\\,\\text{m/s} \)<br>
            <strong>Verificación:</strong> \( e = -\\frac{2.167 - (-0.667)}{0 - 5} = 0.5 \\quad \\checkmark \)</p>

            <p><strong>Ejemplo 2 (Calor):</strong> <strong>0.5 kg cobre (c=385) de 20°C a 100°C</strong><br>
            \( Q = 0.5 \\cdot 385 \\cdot 80 = 15,400\\,\\text{J} = 15.4\\,\\text{kJ} \)</p>
        </div>

        <div class="visual">
            <img src="assets/img/coeficiente-restitucion.jpg" alt="Coeficiente e">
            <p><em>Elástica vs inelástica. Fuente: Physics Classroom.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. SVG Animado: Colisión + e + Calor Disipado</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>
                <text x="400" y="50" fill="#0D47A1" font-size="28" text-anchor="middle" font-weight="bold">e = -Δv / Δu</text>

                <!-- Colisión -->
                <g id="colision">
                    <circle cx="250" cy="250" r="30" fill="#42A5F5">
                        <animate attributeName="cx" values="250;400" begin="1s" dur="1s"/>
                    </circle>
                    <text x="250" y="255" fill="white" font-size="12" text-anchor="middle">m₁</text>

                    <circle cx="550" cy="250" r="40" fill="#EF5350">
                        <animate attributeName="cx" values="550;400" begin="1s" dur="1s"/>
                    </circle>
                    <text x="550" y="255" fill="white" font-size="12" text-anchor="middle">m₂</text>
                </g>

                <!-- Rebote (e<1) -->
                <g id="rebote" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                    <circle cx="400" cy="250" r="30" fill="#42A5F5">
                        <animate attributeName="cx" values="400;300" begin="2.5s" dur="1.5s"/>
                    </circle>
                    <circle cx="400" cy="250" r="40" fill="#EF5350">
                        <animate attributeName="cx" values="400;500" begin="2.5s" dur="1.5s"/>
                    </circle>
                    <text x="400" y="200" fill="#D32F2F" font-size="14" text-anchor="middle">e = 0.6</text>
                </g>

                <!-- Calor disipado -->
                <g id="calor" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="3s" dur="0.5s"/>
                    <path d="M380 280 Q400 250 420 280 Q400 310 380 280" fill="#FF5722">
                        <animate attributeName="d" values="M380 280 Q400 250 420 280 Q400 310 380 280; M380 280 Q400 230 420 280 Q400 330 380 280; M380 280 Q400 250 420 280 Q400 310 380 280" dur="1s" repeatCount="indefinite"/>
                    </path>
                    <text x="400" y="340" fill="#E65100" font-size="14" text-anchor="middle">Q disipado</text>
                </g>

                <rect x="100" y="400" width="600" height="80" fill="#C8E6C9" rx="15"/>
                <text x="400" y="430" fill="#1B5E20" font-size="16" text-anchor="middle">e=1 → EK conservada | e<1 → Q = ΔEK</text>
                <text x="400" y="455" fill="#2E7D32" font-size="12" text-anchor="middle">SI 2025: c_agua = 4186 J/kg·K exacto</text>
            </svg>
            <p><em>SVG Animado: Colisión → rebote (e<1) → calor disipado.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'e = 1 significa', 'respuesta' => 'Colisión elástica perfecta'],
        ['enunciado' => 'e = 0 significa', 'respuesta' => 'Inelástica perfecta'],
        ['enunciado' => 'Fórmula e', 'respuesta' => '-(v2-v1)/(u2-u1)'],
        ['enunciado' => 'Q = m c ΔT es', 'respuesta' => 'Calor sensible'],
        ['enunciado' => 'C = m c es', 'respuesta' => 'Capacidad calorífica total'],
        ['enunciado' => 'c cobre ≈', 'respuesta' => '385 J/kg·°C'],
        ['enunciado' => 'e = 0.8 →', 'respuesta' => 'Parcialmente elástica'],
        ['enunciado' => 'ΔEK = Q si', 'respuesta' => 'e < 1'],
        ['enunciado' => 'u1=6, u2=0, v1=-2, v2=4 → e', 'respuesta' => '1'],
        ['enunciado' => '0.2 kg agua ΔT=10°C → Q', 'respuesta' => '8372 J'],
        ['enunciado' => 'C para 1 kg aluminio', 'respuesta' => '900 J/°C'],
        ['enunciado' => 'SI: e sin unidad', 'respuesta' => 'Adimensional']
    ],
    'quiz' => [
        ['pregunta' => 'e = 1 → colisión', 'opciones' => ['Elástica', 'Inelástica', 'Explosión', 'Estática'], 'correcta' => 'Elástica'],
        ['pregunta' => 'e = 0 →', 'opciones' => ['Inelástica perfecta', 'Elástica', 'Parcial', 'Imposible'], 'correcta' => 'Inelástica perfecta'],
        ['pregunta' => 'Fórmula e', 'opciones' => ['-(v2-v1)/(u2-u1)', '(v2-v1)/(u2-u1)', 'v/u', 'u/v'], 'correcta' => '-(v2-v1)/(u2-u1)'],
        ['pregunta' => 'Q = m c ΔT mide', 'opciones' => ['Calor sensible', 'Latente', 'Radiación', 'Conducción'], 'correcta' => 'Calor sensible'],
        ['pregunta' => 'C = m c es', 'opciones' => ['Capacidad total', 'Específica', 'Latente', 'Molar'], 'correcta' => 'Capacidad total'],
        ['pregunta' => 'c_agua =', 'opciones' => ['4186 J/kg·°C', '385', '900', '2090'], 'correcta' => '4186 J/kg·°C'],
        ['pregunta' => 'e < 1 → EK', 'opciones' => ['Disminuye', 'Aumenta', 'Igual', 'Cero'], 'correcta' => 'Disminuye'],
        ['pregunta' => 'ΔEK = Q si', 'opciones' => ['e < 1', 'e = 1', 'e = 0', 'Siempre'], 'correcta' => 'e < 1'],
        ['pregunta' => 'u1=4, u2=0, e=0.5 → v1', 'opciones' => ['-4/3 m/s', '0', '4 m/s', '2 m/s'], 'correcta' => '-4/3 m/s'],
        ['pregunta' => '0.1 kg cobre ΔT=50°C → Q', 'opciones' => ['1925 J', '4186 J', '900 J', '0'], 'correcta' => '1925 J'],

        ['pregunta' => 'e = velocidad relativa', 'opciones' => ['Salida / entrada', 'Entrada / salida', 'v/u', 'u/v'], 'correcta' => 'Salida / entrada'],
        ['pregunta' => 'c alta →', 'opciones' => ['Absorbe más Q por °C', 'Menos', 'Igual', 'Cero'], 'correcta' => 'Absorbe más Q por °C'],
        ['pregunta' => 'C para 2 kg agua', 'opciones' => ['8372 J/°C', '4186 J/°C', '2093 J/°C', '0'], 'correcta' => '8372 J/°C'],
        ['pregunta' => 'e pelota golf ≈', 'opciones' => ['0.8', '1.0', '0.0', '0.5'], 'correcta' => '0.8'],
        ['pregunta' => 'Q positiva → sistema', 'opciones' => ['Gana calor', 'Pierde', 'Igual', 'Cero'], 'correcta' => 'Gana calor'],
        ['pregunta' => 'ΔT = Q / C → C =', 'opciones' => ['Q / ΔT', 'm c', 'c / m', 'ΔT / Q'], 'correcta' => 'Q / ΔT'],
        ['pregunta' => 'e = 1 → p y EK', 'opciones' => ['Ambas conservadas', 'Solo p', 'Solo EK', 'Ninguna'], 'correcta' => 'Ambas conservadas'],
        ['pregunta' => 'e = 0 → EK final', 'opciones' => ['Mínima', 'Máxima', 'Igual', 'Cero'], 'correcta' => 'Mínima'],
        ['pregunta' => 'SI: c en', 'opciones' => ['J/(kg·K)', 'cal/g·°C', 'BTU/lb·°F', 'todas'], 'correcta' => 'todas'],
        ['pregunta' => 'IUPAC: calor en', 'opciones' => ['Joule', 'Caloría', 'eV', 'kWh'], 'correcta' => 'Joule'],

        ['pregunta' => 'u1=10, u2=-5, v1=0, v2=5 → e', 'opciones' => ['1', '0', '0.5', '2'], 'correcta' => '1'],
        ['pregunta' => 'Q = 8360 J, m=2 kg, c=4186 → ΔT', 'opciones' => ['1°C', '2°C', '4°C', '8360°C'], 'correcta' => '1°C'],
        ['pregunta' => 'e pelota tenis ≈', 'opciones' => ['0.7', '1.0', '0.0', '0.3'], 'correcta' => '0.7'],
        ['pregunta' => 'Calor disipado =', 'opciones' => ['ΔEK', 'Δp', 'm g h', 'F Δt'], 'correcta' => 'ΔEK'],
        ['pregunta' => 'c vapor > c agua', 'opciones' => ['No', 'Sí', 'Igual', 'Depende'], 'correcta' => 'No'],
        ['pregunta' => 'e > 1', 'opciones' => ['Imposible (pasiva)', 'Posible', 'Explosión', 'Siempre'], 'correcta' => 'Imposible (pasiva)'],
        ['pregunta' => 'C = Q / ΔT → unidad', 'opciones' => ['J/°C', 'J/kg·°C', 'W', 'kWh'], 'correcta' => 'J/°C'],
        ['pregunta' => 'e = 0.4 →', 'opciones' => ['60% EK perdida', '40%', '100%', '0%'], 'correcta' => '60% EK perdida'],
        ['pregunta' => 'SI 2025: c_agua =', 'opciones' => ['4186 J/kg·K', '4.184 J/g·K', '1 cal/g·K', 'todas'], 'correcta' => 'todas'],
        ['pregunta' => 'e mide', 'opciones' => ['Elasticidad relativa', 'Masa', 'Velocidad', 'Fuerza'], 'correcta' => 'Elasticidad relativa']
    ]
];

// ========================================
// MATERIA: CIENCIAS SOCIALES
// SUBTEMA: El Bienestar y la Satisfacción de las Necesidades
// ========================================
$lecciones[] = [
    'materia' => 'Ciencias Sociales',
    'slug' => 'bienestar-satisfaccion-necesidades',
    'titulo' => 'El Bienestar y la Satisfacción de las Necesidades: Pirámide de Maslow',
    'contenido' => '
        <h3>El Bienestar y la Satisfacción de las Necesidades</h3>
        <p>El <strong>bienestar</strong> es un estado de <strong>equilibrio físico, mental y social</strong>. Según <strong>Abraham Maslow</strong> (1943), las necesidades humanas se organizan en una <strong>pirámide jerárquica</strong>:</p>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>1. Niveles de la Pirámide de Maslow</h4>
        <table class="table">
            <thead>
                <tr><th>Nivel</th><th>Necesidades</th><th>Ejemplos</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>5. Autorrealización</strong></td><td>Creatividad, potencial</td><td>Arte, logros personales</td></tr>
                <tr><td><strong>4. Estima</strong></td><td>Respeto, logros</td><td>Reconocimiento, confianza</td></tr>
                <tr><td><strong>3. Sociales</strong></td><td>Amor, pertenencia</td><td>Amistad, familia</td></tr>
                <tr><td><strong>2. Seguridad</strong></td><td>Estabilidad, protección</td><td>Empleo, salud</td></tr>
                <tr><td><strong>1. Fisiológicas</strong></td><td>Supervivencia</td><td>Comida, agua, aire</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>2. Principios Clave</h4>
        <ul>
            <li><strong>Jerarquía</strong>: Se satisfacen niveles inferiores antes que superiores.</li>
            <li><strong>Dinámica</strong>: Una necesidad satisfecha deja de motivar.</li>
            <li><strong>Cultural</strong>: Aplicación universal con variaciones locales.</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Un estudiante con hambre (nivel 1)</strong> no puede concentrarse en aprender (nivel 4). Solo tras comer, puede buscar amigos (nivel 3) y luego destacar en clase (nivel 4).</p>
        </div>

        <div class="visual">
            <img src="assets/img/piramide-maslow.webp" alt="Pirámide Maslow">
            <p><em>Pirámide clara. Fuente: BiteSize Learning.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/maslow-clasica.png" alt="Wikipedia Maslow">
            <p><em>Versión clásica. Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/Maslows_Hierarchy_of_Needs.gif" alt="Pursuit of Happiness">
            <p><em>Visual motivacional. Fuente: Pursuit of Happiness.</em></p>
        </div>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>3. SVG Animado: Pirámide de Maslow</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#F3E5F5"/>

                <text x="400" y="50" fill="#4A148C" font-size="28" text-anchor="middle" font-weight="bold">PIRÁMIDE DE MASLOW</text>

                <!-- Niveles -->
                <g id="nivel1" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    <polygon points="200,400 600,400 400,300" fill="#2196F3"/>
                    <text x="400" y="360" fill="white" font-size="16" text-anchor="middle">Fisiológicas</text>
                </g>

                <g id="nivel2" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                    <polygon points="220,300 580,300 400,220" fill="#4CAF50"/>
                    <text x="400" y="265" fill="white" font-size="16" text-anchor="middle">Seguridad</text>
                </g>

                <g id="nivel3" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1.5s" dur="0.5s"/>
                    <polygon points="240,220 560,220 400,150" fill="#FF9800"/>
                    <text x="400" y="190" fill="white" font-size="16" text-anchor="middle">Sociales</text>
                </g>

                <g id="nivel4" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                    <polygon points="260,150 540,150 400,90" fill="#F44336"/>
                    <text x="400" y="125" fill="white" font-size="16" text-anchor="middle">Estima</text>
                </g>

                <g id="nivel5" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2.5s" dur="0.5s"/>
                    <polygon points="280,90 520,90 400,40" fill="#FFD700"/>
                    <text x="400" y="70" fill="#212121" font-size="16" text-anchor="middle">Autorrealización</text>
                </g>

                <rect x="100" y="420" width="600" height="60" fill="#E8F5E9" rx="10"/>
                <text x="400" y="450" fill="#1B5E20" font-size="14" text-anchor="middle">Satisfacer base → acceso a superiores</text>

                <text x="400" y="490" fill="#4A148C" font-size="12" text-anchor="middle">SI 2025: Teoría motivacional universal</text>
            </svg>
            <p><em>SVG Animado: Construcción progresiva de la pirámide de Maslow.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Nombre los 5 niveles de Maslow', 'respuesta' => 'Fisiológicas, Seguridad, Sociales, Estima, Autorrealización'],
        ['enunciado' => 'Nivel base', 'respuesta' => 'Fisiológicas'],
        ['enunciado' => 'Nivel superior', 'respuesta' => 'Autorrealización'],
        ['enunciado' => 'Necesidad de estima', 'respuesta' => 'Respeto, logros'],
        ['enunciado' => 'Si falta comida →', 'respuesta' => 'Bloquea niveles superiores'],
        ['enunciado' => 'Teoría de', 'respuesta' => 'Abraham Maslow'],
        ['enunciado' => 'Bienestar =', 'respuesta' => 'Equilibrio en todos los niveles'],
        ['enunciado' => 'Ejemplo nivel 3', 'respuesta' => 'Amistad, familia'],
        ['enunciado' => 'Jerarquía significa', 'respuesta' => 'Orden de prioridad'],
        ['enunciado' => 'Autorrealización incluye', 'respuesta' => 'Creatividad, potencial'],
        ['enunciado' => 'México: necesidad clave', 'respuesta' => 'Seguridad (empleo, salud)'],
        ['enunciado' => 'SI: bienestar en', 'respuesta' => 'Desarrollo humano']
    ],
    'quiz' => [
        ['pregunta' => 'Nivel base pirámide', 'opciones' => ['Fisiológicas', 'Autorrealización', 'Estima', 'Sociales'], 'correcta' => 'Fisiológicas'],
        ['pregunta' => 'Nivel superior', 'opciones' => ['Autorrealización', 'Fisiológicas', 'Seguridad', 'Estima'], 'correcta' => 'Autorrealización'],
        ['pregunta' => 'Teoría de', 'opciones' => ['Maslow', 'Freud', 'Piaget', 'Skinner'], 'correcta' => 'Maslow'],
        ['pregunta' => 'Bienestar requiere', 'opciones' => ['Equilibrio en necesidades', 'Solo dinero', 'Solo comida', 'Nada'], 'correcta' => 'Equilibrio en necesidades'],
        ['pregunta' => 'Necesidades fisiológicas', 'opciones' => ['Comida, agua', 'Amigos', 'Logros', 'Arte'], 'correcta' => 'Comida, agua'],
        ['pregunta' => 'Estima incluye', 'opciones' => ['Respeto, confianza', 'Comida', 'Seguridad', 'Amor'], 'correcta' => 'Respeto, confianza'],
        ['pregunta' => 'Si falta seguridad →', 'respuesta' => 'Dificulta estima'],
        ['pregunta' => 'Jerarquía significa', 'opciones' => ['Orden de prioridad', 'Igualdad', 'Aleatorio', 'Opcional'], 'correcta' => 'Orden de prioridad'],
        ['pregunta' => 'Autorrealización es', 'opciones' => ['Realizar potencial', 'Comer', 'Dormir', 'Trabajar'], 'correcta' => 'Realizar potencial'],
        ['pregunta' => 'México 2025: prioridad', 'opciones' => ['Seguridad y salud', 'Lujo', 'Viajes', 'Tecnología'], 'correcta' => 'Seguridad y salud'],

        ['pregunta' => 'Necesidades sociales', 'opciones' => ['Amistad, pertenencia', 'Comida', 'Dinero', 'Fama'], 'correcta' => 'Amistad, pertenencia'],
        ['pregunta' => 'Sin comida → motivación', 'opciones' => ['Solo fisiológica', 'Estima', 'Creatividad', 'Nada'], 'correcta' => 'Solo fisiológica'],
        ['pregunta' => 'Pirámide es', 'opciones' => ['Jerárquica', 'Circular', 'Lineal', 'Plana'], 'correcta' => 'Jerárquica'],
        ['pregunta' => 'Bienestar =', 'opciones' => ['Satisfacción progresiva', 'Solo nivel 1', 'Solo nivel 5', 'Dinero'], 'correcta' => 'Satisfacción progresiva'],
        ['pregunta' => 'Maslow publicó en', 'opciones' => ['1943', '1900', '2000', '2025'], 'correcta' => '1943'],
        ['pregunta' => 'Crítica a Maslow', 'opciones' => ['No universal', 'Perfecta', 'Científica', 'Física'], 'correcta' => 'No universal'],
        ['pregunta' => 'México: nivel crítico', 'opciones' => ['Seguridad', 'Autorrealización', 'Estima', 'Sociales'], 'correcta' => 'Seguridad'],
        ['pregunta' => 'Bienestar social incluye', 'opciones' => ['Nivel 3', 'Solo 1', 'Solo 5', 'Ninguno'], 'correcta' => 'Nivel 3'],
        ['pregunta' => 'SI 2025: desarrollo humano mide', 'opciones' => ['IDH (PNUD)', 'PIB', 'Solo dinero', 'Nada'], 'correcta' => 'IDH (PNUD)'],
        ['pregunta' => 'Necesidad satisfecha →', 'opciones' => ['Deja de motivar', 'Aumenta', 'Igual', 'Desaparece'], 'correcta' => 'Deja de motivar'],

        ['pregunta' => 'Estudiante con hambre', 'opciones' => ['No aprende bien', 'Mejor', 'Igual', 'Más creativo'], 'correcta' => 'No aprende bien'],
        ['pregunta' => 'Empresa: motivación', 'opciones' => ['Salario + reconocimiento', 'Solo salario', 'Solo amigos', 'Nada'], 'correcta' => 'Salario + reconocimiento'],
        ['pregunta' => 'México: bienestar juvenil', 'opciones' => ['Educación + empleo', 'Lujo', 'Viajes', 'Tecnología'], 'correcta' => 'Educación + empleo'],
        ['pregunta' => 'Pirámide dinámica', 'opciones' => ['Sí, cambia con contexto', 'No', 'Fija', 'Estática'], 'correcta' => 'Sí, cambia con contexto'],
        ['pregunta' => 'Autorrealización ejemplo', 'opciones' => ['Pintar, inventar', 'Comer', 'Dormir', 'Trabajar'], 'correcta' => 'Pintar, inventar'],
        ['pregunta' => 'Crítica cultural', 'opciones' => ['Colectivismo vs individualismo', 'Universal', 'Física', 'Matemática'], 'correcta' => 'Colectivismo vs individualismo'],
        ['pregunta' => 'Bienestar objetivo', 'opciones' => ['Progreso en todos los niveles', 'Solo base', 'Solo cima', 'Dinero'], 'correcta' => 'Progreso en todos los niveles'],
        ['pregunta' => 'México 2025: política pública', 'opciones' => ['Salud, educación, empleo', 'Lujo', 'Tecnología', 'Nada'], 'correcta' => 'Salud, educación, empleo'],
        ['pregunta' => 'SI 2025: bienestar en', 'opciones' => ['ODS 3, 4, 8', 'Solo 1', 'Solo 17', 'Ninguno'], 'correcta' => 'ODS 3, 4, 8'],
        ['pregunta' => 'Maslow: motivación humana', 'opciones' => ['Jerárquica y progresiva', 'Aleatoria', 'Estática', 'Negativa'], 'correcta' => 'Jerárquica y progresiva']
    ]
];
// ========================================
// MATERIA: CIENCIAS SOCIALES
// SUBTEMA: La Organización de la Sociedad
// ========================================
$lecciones[] = [
    'materia' => 'Ciencias Sociales',
    'slug' => 'organizacion-sociedad',
    'titulo' => 'La Organización de la Sociedad: Niveles Micro, Meso y Macro',
    'contenido' => '
        <h3>La Organización de la Sociedad</h3>
        <p>La <strong>organización social</strong> es el conjunto de <strong>estructuras, relaciones e instituciones</strong> que permiten el funcionamiento colectivo de los individuos en una comunidad. Se analiza en tres niveles:</p>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>1. Niveles de Organización Social</h4>
        <table class="table">
            <thead>
                <tr><th>Nivel</th><th>Escala</th><th>Ejemplos</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Micro</strong></td><td>Individuos y relaciones cercanas</td><td>Familia, amigos, compañeros</td></tr>
                <tr><td><strong>Meso</strong></td><td>Grupos e instituciones intermedias</td><td>Escuelas, empresas, iglesias</td></tr>
                <tr><td><strong>Macro</strong></td><td>Sociedad global, estructuras amplias</td><td>Estado, economía, cultura nacional</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>2. Elementos Clave</h4>
        <ul>
            <li><strong>Roles sociales</strong>: Comportamientos esperados (padre, estudiante, trabajador).</li>
            <li><strong>Instituciones</strong>: Estructuras estables (familia, educación, gobierno).</li>
            <li><strong>Estratos sociales</strong>: Clases, grupos por ingreso, educación, poder.</li>
            <li><strong>Poder y autoridad</strong>: Distribución y legitimación del control.</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Un niño (micro)</strong> asiste a la escuela (meso), donde aprende valores cívicos que sustentan la democracia nacional (macro). La familia paga impuestos que financian la educación pública.</p>
        </div>

        <div class="visual">
            <img src=assets/img/estructura_sociedad.png" alt="Niveles organización social">
            <p><em>Estructura clara. Fuente: ResearchGate.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/modelo-dinamico.png" alt="Teoría acción y cambio">
            <p><em>Modelo dinámico. Fuente: ResearchGate.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/organizacion-jerarquica.webp" alt="Jerarquía Iglesia Católica">
            <p><em>Ejemplo real: organización jerárquica. Fuente: Britannica.</em></p>
        </div>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>3. SVG Animado: Niveles de Organización Social</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#F3E5F5"/>

                <text x="400" y="50" fill="#4A148C" font-size="28" text-anchor="middle" font-weight="bold">NIVELES DE ORGANIZACIÓN SOCIAL</text>

                <!-- Macro -->
                <g id="macro" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    <rect x="100" y="100" width="600" height="100" fill="#7B1FA2" rx="15"/>
                    <text x="400" y="150" fill="white" font-size="20" text-anchor="middle">MACRO: Estado, Economía, Cultura</text>
                </g>

                <!-- Meso -->
                <g id="meso" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                    <rect x="150" y="220" width="500" height="80" fill="#9C27B0" rx="15"/>
                    <text x="400" y="260" fill="white" font-size="18" text-anchor="middle">MESO: Escuelas, Empresas, Iglesias</text>
                </g>

                <!-- Micro -->
                <g id="micro" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1.5s" dur="0.5s"/>
                    <rect x="200" y="320" width="400" height="70" fill="#E1BEE7" rx="15"/>
                    <text x="400" y="355" fill="#4A148C" font-size="16" text-anchor="middle">MICRO: Familia, Amigos, Individuos</text>
                </g>

                <!-- Conexiones -->
                <line x1="400" y1="200" x2="400" y2="220" stroke="#4A148C" stroke-width="3"/>
                <line x1="400" y1="300" x2="400" y2="320" stroke="#4A148C" stroke-width="3"/>

                <rect x="100" y="410" width="600" height="70" fill="#E8F5E9" rx="10"/>
                <text x="400" y="440" fill="#1B5E20" font-size="14" text-anchor="middle">Interdependencia: Micro ↔ Meso ↔ Macro</text>
                <text x="400" y="465" fill="#4A148C" font-size="12" text-anchor="middle">SI 2025: México – 130M habitantes en red social</text>
            </svg>
            <p><em>SVG Animado: Construcción progresiva de los niveles sociales.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Tres niveles de organización social', 'respuesta' => 'Micro, meso, macro'],
        ['enunciado' => 'Nivel micro incluye', 'respuesta' => 'Familia, individuos'],
        ['enunciado' => 'Nivel meso incluye', 'respuesta' => 'Escuelas, empresas'],
        ['enunciado' => 'Nivel macro incluye', 'respuesta' => 'Estado, economía nacional'],
        ['enunciado' => 'Ejemplo de rol social', 'respuesta' => 'Maestro, padre, ciudadano'],
        ['enunciado' => 'Institución clave en México', 'respuesta' => 'INE, IMSS, SEP'],
        ['enunciado' => 'Estratificación social mide', 'respuesta' => 'Desigualdad por ingreso, educación'],
        ['enunciado' => 'Poder legítimo es', 'respuesta' => 'Autoridad'],
        ['enunciado' => 'Familia → escuela → gobierno', 'respuesta' => 'Micro → meso → macro'],
        ['enunciado' => 'México: macro ejemplo', 'respuesta' => 'Constitución, PIB'],
        ['enunciado' => 'Interdependencia significa', 'respuesta' => 'Niveles se afectan mutuamente'],
        ['enunciado' => 'SI: sociedad compleja', 'respuesta' => 'Alta división del trabajo']
    ],
    'quiz' => [
        ['pregunta' => 'Nivel micro', 'opciones' => ['Individuos y familia', 'Estado', 'Empresas', 'Global'], 'correcta' => 'Individuos y familia'],
        ['pregunta' => 'Nivel meso', 'opciones' => ['Grupos e instituciones', 'Individuos', 'Nación', 'Mundo'], 'correcta' => 'Grupos e instituciones'],
        ['pregunta' => 'Nivel macro', 'opciones' => ['Sociedad global', 'Familia', 'Escuela', 'Amigos'], 'correcta' => 'Sociedad global'],
        ['pregunta' => 'Organización social permite', 'opciones' => ['Cooperación y orden', 'Caos', 'Aislamiento', 'Nada'], 'correcta' => 'Cooperación y orden'],
        ['pregunta' => 'Rol social es', 'opciones' => ['Comportamiento esperado', 'Trabajo', 'Dinero', 'Ley'], 'correcta' => 'Comportamiento esperado'],
        ['pregunta' => 'Institución es', 'opciones' => ['Estructura estable', 'Persona', 'Evento', 'Objeto'], 'correcta' => 'Estructura estable'],
        ['pregunta' => 'Estratos sociales miden', 'opciones' => ['Desigualdad', 'Igualdad', 'Población', 'Territorio'], 'correcta' => 'Desigualdad'],
        ['pregunta' => 'México: institución macro', 'opciones' => ['INE', 'Familia', 'Escuela', 'Amigos'], 'correcta' => 'INE'],
        ['pregunta' => 'Interdependencia', 'opciones' => ['Niveles se influyen', 'Independientes', 'Separados', 'Iguales'], 'correcta' => 'Niveles se influyen'],
        ['pregunta' => 'SI 2025: México población', 'opciones' => ['~130 millones', '100M', '200M', '50M'], 'correcta' => '~130 millones'],

        ['pregunta' => 'Familia es nivel', 'opciones' => ['Micro', 'Meso', 'Macro', 'Ninguno'], 'correcta' => 'Micro'],
        ['pregunta' => 'SEP es nivel', 'opciones' => ['Meso', 'Micro', 'Macro', 'Ninguno'], 'correcta' => 'Meso'],
        ['pregunta' => 'Constitución es nivel', 'opciones' => ['Macro', 'Micro', 'Meso', 'Ninguno'], 'correcta' => 'Macro'],
        ['pregunta' => 'Poder legítimo', 'opciones' => ['Autoridad', 'Fuerza', 'Dinero', 'Fama'], 'correcta' => 'Autoridad'],
        ['pregunta' => 'Clase social depende de', 'opciones' => ['Ingreso, educación', 'Edad', 'Género', 'Color'], 'correcta' => 'Ingreso, educación'],
        ['pregunta' => 'México: estratificación alta', 'opciones' => ['Sí (índice Gini)', 'No', 'Igual', 'Perfecta'], 'correcta' => 'Sí (índice Gini)'],
        ['pregunta' => 'Escuela socializa en', 'opciones' => ['Normas y valores', 'Solo matemáticas', 'Nada', 'Juegos'], 'correcta' => 'Normas y valores'],
        ['pregunta' => 'Empresa es', 'opciones' => ['Institución meso', 'Micro', 'Macro', 'Personal'], 'correcta' => 'Institución meso'],
        ['pregunta' => 'Globalización afecta', 'opciones' => ['Nivel macro', 'Solo micro', 'Nada', 'Meso'], 'correcta' => 'Nivel macro'],
        ['pregunta' => 'SI 2025: sociedad digital', 'opciones' => ['Redes conectan niveles', 'Solo micro', 'Solo macro', 'Nada'], 'correcta' => 'Redes conectan niveles'],

        ['pregunta' => 'Individuo → grupo → estado', 'opciones' => ['Micro → meso → macro', 'Macro → meso → micro', 'Aleatorio', 'Igual'], 'correcta' => 'Micro → meso → macro'],
        ['pregunta' => 'Cambio en micro afecta', 'opciones' => ['Puede escalar a macro', 'Solo micro', 'Nada', 'Meso'], 'correcta' => 'Puede escalar a macro'],
        ['pregunta' => 'Protesta social inicia en', 'opciones' => ['Micro/meso', 'Macro', 'Gobierno', 'Exterior'], 'correcta' => 'Micro/meso'],
        ['pregunta' => 'Ley educativa es', 'opciones' => ['Macro', 'Meso', 'Micro', 'Ninguno'], 'correcta' => 'Macro'],
        ['pregunta' => 'Amistad es', 'opciones' => ['Relación micro', 'Meso', 'Macro', 'Institución'], 'correcta' => 'Relación micro'],
        ['pregunta' => 'INEGI mide', 'opciones' => ['Nivel macro', 'Micro', 'Meso', 'Personal'], 'correcta' => 'Nivel macro'],
        ['pregunta' => 'Familia nuclear es', 'opciones' => ['Microestructura', 'Meso', 'Macro', 'Global'], 'correcta' => 'Microestructura'],
        ['pregunta' => 'México: federalismo', 'opciones' => ['Organización macro', 'Micro', 'Meso', 'Local'], 'correcta' => 'Organización macro'],
        ['pregunta' => 'SI 2025: sociedad inclusiva', 'opciones' => ['Equidad en todos niveles', 'Solo macro', 'Solo micro', 'Nada'], 'correcta' => 'Equidad en todos niveles'],
        ['pregunta' => 'Organización social es', 'opciones' => ['Dinámica y cambiante', 'Estática', 'Fija', 'Inmutable'], 'correcta' => 'Dinámica y cambiante']
    ]
];

// ========================================
// MATERIA: CIENCIAS SOCIALES
// SUBTEMA: Normas Sociales y Jurídicas
// ========================================
$lecciones[] = [
    'materia' => 'Ciencias Sociales',
    'slug' => 'normas-sociales-juridicas',
    'titulo' => 'Normas Sociales (Informales) y Jurídicas (Formales con Sanción)',
    'contenido' => '
        <h3>Normas Sociales y Jurídicas</h3>
        <p>Las <strong>normas</strong> son reglas que regulan la conducta. Se dividen en:</p>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>1. Tipos de Normas</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Características</th><th>Ejemplos</th><th>Sanción</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Sociales</strong></td><td>Informales, basadas en costumbres</td><td>Saludar, ser puntual</td><td>Rechazo social, vergüenza</td></tr>
                <tr><td><strong>Jurídicas</strong></td><td>Formales, escritas, estatales</td><td>Leyes, códigos</td><td>Multa, cárcel, juicio</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>2. Relación entre Ambas</h4>
        <ul>
            <li>Normas sociales pueden <strong>convertirse en jurídicas</strong> (ej. no discriminación).</li>
            <li>Normas jurídicas influyen en <strong>comportamiento social</strong>.</li>
            <li>Conflicto: cuando ley choca con costumbre (ej. matrimonio igualitario).</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Norma social:</strong> No interrumpir al hablar. <strong>Norma jurídica:</strong> No conducir ebrio (art. 171 Código Penal). Incumplir la primera genera crítica; la segunda, arresto.</p>
        </div>

        <div class="visual">
            <img src="assets/img/ley-sociologia.png" alt="Ley y sociología">
            <p><em>Intersección clara. Fuente: PoliSciConnect.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/normas-sociales.webp" alt="Normas y leyes">
            <p><em>Visualización interactiva. Fuente: LSE Blogs.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/poder-normas.png" alt="Relaciones de poder">
            <p><em>Poder y normas. Fuente: ResearchGate.</em></p>
        </div>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>3. SVG Animado: Normas Sociales → Jurídicas</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#F3E5F5"/>

                <text x="400" y="50" fill="#4A148C" font-size="28" text-anchor="middle" font-weight="bold">NORMAS SOCIALES Y JURÍDICAS</text>

                <!-- Norma social -->
                <g id="social" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    <rect x="100" y="120" width="280" height="120" fill="#9C27B0" rx="15"/>
                    <text x="240" y="160" fill="white" font-size="16" text-anchor="middle">Normas Sociales</text>
                    <text x="240" y="185" fill="white" font-size="12" text-anchor="middle">Informales | Costumbres</text>
                    <text x="240" y="210" fill="white" font-size="12" text-anchor="middle">Sanción: Rechazo</text>
                </g>

                <!-- Norma jurídica -->
                <g id="juridica" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                    <rect x="420" y="120" width="280" height="120" fill="#7B1FA2" rx="15"/>
                    <text x="560" y="160" fill="white" font-size="16" text-anchor="middle">Normas Jurídicas</text>
                    <text x="560" y="185" fill="white" font-size="12" text-anchor="middle">Formales | Leyes</text>
                    <text x="560" y="210" fill="white" font-size="12" text-anchor="middle">Sanción: Legal</text>
                </g>

                <!-- Flecha interacción -->
                <line x1="380" y1="180" x2="420" y2="180" stroke="#4A148C" stroke-width="4"/>
                <line x1="240" y1="180" x2="100" y2="180" stroke="#4A148C" stroke-width="4"/>
                <text x="400" y="170" fill="#4A148C" font-size="14" text-anchor="middle">↔</text>

                <!-- Evolución -->
                <g id="evolucion" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                    <path d="M200 280 Q240 250 280 280 Q240 310 200 280" fill="#FF9800">
                        <animate attributeName="d" values="M200 280 Q240 250 280 280 Q240 310 200 280; M200 280 Q240 230 280 280 Q240 330 200 280; M200 280 Q240 250 280 280 Q240 310 200 280" dur="1.5s" repeatCount="indefinite"/>
                    </path>
                    <text x="240" y="340" fill="#E65100" font-size="14" text-anchor="middle">Social → Jurídica</text>
                </g>

                <g id="evolucion2" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                    <path d="M520 280 Q560 250 600 280 Q560 310 520 280" fill="#4CAF50">
                        <animate attributeName="d" values="M520 280 Q560 250 600 280 Q560 310 520 280; M520 280 Q560 230 600 280 Q560 330 520 280; M520 280 Q560 250 600 280 Q560 310 520 280" dur="1.5s" repeatCount="indefinite"/>
                    </path>
                    <text x="560" y="340" fill="#2E7D32" font-size="14" text-anchor="middle">Jurídica → Social</text>
                </g>

                <rect x="100" y="400" width="600" height="70" fill="#E8F5E9" rx="10"/>
                <text x="400" y="430" fill="#1B5E20" font-size="14" text-anchor="middle">México: Art. 4 Constitución → Derecho a salud (social → jurídica)</text>
                <text x="400" y="455" fill="#4A148C" font-size="12" text-anchor="middle">SI 2025: 18,000 leyes federales vigentes</text>
            </svg>
            <p><em>SVG Animado: Interacción y evolución entre normas.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Normas sociales son', 'respuesta' => 'Informales, basadas en costumbres'],
        ['enunciado' => 'Normas jurídicas son', 'respuesta' => 'Formales, con sanción legal'],
        ['enunciado' => 'Sanción social', 'respuesta' => 'Rechazo, crítica'],
        ['enunciado' => 'Sanción jurídica', 'respuesta' => 'Multa, cárcel'],
        ['enunciado' => 'Ejemplo norma social', 'respuesta' => 'No hablar con la boca llena'],
        ['enunciado' => 'Ejemplo norma jurídica', 'respuesta' => 'No robar (Código Penal)'],
        ['enunciado' => 'Norma social → jurídica', 'respuesta' => 'Ej. no discriminación'],
        ['enunciado' => 'Conflicto norma vs ley', 'respuesta' => 'Ej. matrimonio igualitario'],
        ['enunciado' => 'Estado crea', 'respuesta' => 'Normas jurídicas'],
        ['enunciado' => 'México: ley clave', 'respuesta' => 'Constitución Política'],
        ['enunciado' => 'Costumbre → ley', 'respuesta' => 'Proceso legislativo'],
        ['enunciado' => 'SI: cumplimiento normativo', 'respuesta' => 'Base de convivencia']
    ],
    'quiz' => [
        ['pregunta' => 'Normas sociales', 'opciones' => ['Informales', 'Formales', 'Escritas', 'Obligatorias'], 'correcta' => 'Informales'],
        ['pregunta' => 'Normas jurídicas', 'opciones' => ['Formales con sanción', 'Informales', 'Opcionales', 'Morales'], 'correcta' => 'Formales con sanción'],
        ['pregunta' => 'Sanción social', 'opciones' => ['Rechazo social', 'Cárcel', 'Multa', 'Juicio'], 'correcta' => 'Rechazo social'],
        ['pregunta' => 'Sanción jurídica', 'opciones' => ['Legal (multa, cárcel)', 'Crítica', 'Ignorancia', 'Nada'], 'correcta' => 'Legal (multa, cárcel)'],
        ['pregunta' => 'Ejemplo social', 'opciones' => ['Ser puntual', 'Pagar impuestos', 'Firmar contrato', 'Votar'], 'correcta' => 'Ser puntual'],
        ['pregunta' => 'Ejemplo jurídico', 'opciones' => ['No conducir ebrio', 'Decir gracias', 'Vestir formal', 'Sonreír'], 'correcta' => 'No conducir ebrio'],
        ['pregunta' => 'Social → jurídica', 'opciones' => ['Sí, por aceptación', 'No', 'Siempre', 'Nunca'], 'correcta' => 'Sí, por aceptación'],
        ['pregunta' => 'Estado crea', 'opciones' => ['Normas jurídicas', 'Sociales', 'Morales', 'Religiosas'], 'correcta' => 'Normas jurídicas'],
        ['pregunta' => 'México: máxima norma', 'opciones' => ['Constitución', 'Código Civil', 'Biblia', 'Costumbre'], 'correcta' => 'Constitución'],
        ['pregunta' => 'Conflicto norma vs ley', 'opciones' => ['Cambio social', 'Armonía', 'Igualdad', 'Nada'], 'correcta' => 'Cambio social'],

        ['pregunta' => 'No saludar es', 'opciones' => ['Falta social', 'Delito', 'Multa', 'Cárcel'], 'correcta' => 'Falta social'],
        ['pregunta' => 'No pagar impuestos es', 'opciones' => ['Delito fiscal', 'Falta social', 'Etiqueta', 'Nada'], 'correcta' => 'Delito fiscal'],
        ['pregunta' => 'Ley contra discriminación', 'opciones' => ['Social → jurídica', 'Solo jurídica', 'Solo social', 'Religiosa'], 'correcta' => 'Social → jurídica'],
        ['pregunta' => 'Costumbre puede', 'opciones' => ['Convertirse en ley', 'No', 'Desaparecer', 'Ignorarse'], 'correcta' => 'Convertirse en ley'],
        ['pregunta' => 'Matrimonio igualitario', 'opciones' => ['Ley vs tradición', 'Siempre aceptado', 'Solo social', 'Nada'], 'correcta' => 'Ley vs tradición'],
        ['pregunta' => 'Código Penal es', 'opciones' => ['Norma jurídica', 'Social', 'Moral', 'Religiosa'], 'correcta' => 'Norma jurídica'],
        ['pregunta' => 'No decir groserías', 'opciones' => ['Norma social', 'Jurídica', 'Económica', 'Política'], 'correcta' => 'Norma social'],
        ['pregunta' => 'SI 2025: leyes federales', 'opciones' => ['~18,000', '100', '1M', '0'], 'correcta' => '~18,000'],
        ['pregunta' => 'Cumplir normas permite', 'opciones' => ['Convivencia pacífica', 'Conflicto', 'Caos', 'Guerra'], 'correcta' => 'Convivencia pacífica'],
        ['pregunta' => 'México: Art. 1 Constitución', 'opciones' => ['Prohíbe discriminación', 'Permite', 'Ignora', 'Nada'], 'correcta' => 'Prohíbe discriminación'],

        ['pregunta' => 'Norma moral vs jurídica', 'opciones' => ['Moral interna, jurídica externa', 'Iguales', 'Opuestas', 'Ninguna'], 'correcta' => 'Moral interna, jurídica externa'],
        ['pregunta' => 'Ley de tránsito', 'opciones' => ['Jurídica', 'Social', 'Religiosa', 'Personal'], 'correcta' => 'Jurídica'],
        ['pregunta' => 'Decir "por favor"', 'opciones' => ['Norma social', 'Jurídica', 'Económica', 'Política'], 'correcta' => 'Norma social'],
        ['pregunta' => 'Reforma legal refleja', 'opciones' => ['Cambio social', 'Estática', 'Tradición', 'Nada'], 'correcta' => 'Cambio social'],
        ['pregunta' => 'Incumplir ley →', 'opciones' => ['Proceso judicial', 'Solo crítica', 'Nada', 'Premio'], 'correcta' => 'Proceso judicial'],
        ['pregunta' => 'Incumplir costumbre →', 'opciones' => ['Rechazo social', 'Cárcel', 'Multa', 'Juicio'], 'correcta' => 'Rechazo social'],
        ['pregunta' => 'Normas evolucionan con', 'opciones' => ['Sociedad', 'Tiempo', 'Tecnología', 'Todas'], 'correcta' => 'Todas'],
        ['pregunta' => 'México: ley clave 2025', 'opciones' => ['Reforma judicial', 'Ninguna', 'Antigua', 'Secreta'], 'correcta' => 'Reforma judicial'],
        ['pregunta' => 'SI 2025: estado de derecho', 'opciones' => ['Supremacía de la ley', 'Fuerza', 'Tradición', 'Religión'], 'correcta' => 'Supremacía de la ley'],
        ['pregunta' => 'Normas garantizan', 'opciones' => ['Orden y predictibilidad', 'Caos', 'Libertad total', 'Nada'], 'correcta' => 'Orden y predictibilidad']
    ]
];
// ========================================
// MATERIA: CIENCIAS SOCIALES
// SUBTEMA: El Estado
// ========================================
$lecciones[] = [
    'materia' => 'Ciencias Sociales',
    'slug' => 'el-estado',
    'titulo' => 'El Estado: Territorio, Población, Gobierno y Soberanía',
    'contenido' => '
        <h3>El Estado</h3>
        <p>El <strong>Estado</strong> es una entidad política <strong>soberana</strong> que ejerce autoridad sobre un <strong>territorio definido</strong>, una <strong>población permanente</strong> y un <strong>gobierno organizado</strong>. Según el Art. 1 de la Convención de Montevideo (1933), requiere:</p>

        <hr style="border:1px dashed #1E88E5;">

        <h4>1. Elementos del Estado</h4>
        <table class="table">
            <thead>
                <tr><th>Elemento</th><th>Descripción</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Territorio</strong></td><td>Fronteras físicas (tierra, mar, aire)</td></tr>
                <tr><td><strong>Población</strong></td><td>Habitantes permanentes</td></tr>
                <tr><td><strong>Gobierno</strong></td><td>Instituciones que ejercen poder</td></tr>
                <tr><td><strong>Soberanía</strong></td><td>Capacidad de relaciones internacionales</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1E88E5;">

        <h4>2. Funciones del Estado</h4>
        <ul>
            <li>Regular la sociedad (normas, leyes).</li>
            <li>Proveer servicios públicos (educación, salud, seguridad).</li>
            <li>Representar a la nación internacionalmente.</li>
            <li>Garantizar orden y bienestar.</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo México:</strong> <strong>Territorio:</strong> 1.96 millones km² | <strong>Población:</strong> ~130 millones | <strong>Gobierno:</strong> Tres poderes | <strong>Soberanía:</strong> Miembro ONU, TLCAN.</p>
        </div>

        <div class="visual">
            <img src="assets/img/estructuraMXN.png" alt="Estructura EE.UU.">
            <p><em>Separación de poderes. Fuente: Columbia University.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/organigrama-departamento-estado.png" alt="Organigrama Departamento Estado">
            <p><em>Jerarquía ejecutiva. Fuente: state.gov.</em></p>
        </div>

        <hr style="border:1px dashed #1E88E5;">

        <h4>3. SVG Animado: Estructura del Estado Mexicano</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#E8F5E9"/>

                <text x="400" y="50" fill="#1B5E20" font-size="28" text-anchor="middle" font-weight="bold">EL ESTADO MEXICANO</text>

                <!-- Estado -->
                <g id="estado" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    <rect x="250" y="100" width="300" height="80" fill="#43A047" rx="15"/>
                    <text x="400" y="140" fill="white" font-size="20" text-anchor="middle">ESTADO</text>
                    <text x="400" y="165" fill="white" font-size="14" text-anchor="middle">Territorio + Población + Gobierno + Soberanía</text>
                </g>

                <!-- Legislativo -->
                <g id="legislativo" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                    <rect x="100" y="220" width="180" height="80" fill="#1976D2" rx="15"/>
                    <text x="190" y="250" fill="white" font-size="16" text-anchor="middle">LEGISLATIVO</text>
                    <text x="190" y="275" fill="white" font-size="12" text-anchor="middle">Congreso</text>
                </g>

                <!-- Ejecutivo -->
                <g id="ejecutivo" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1.5s" dur="0.5s"/>
                    <rect x="310" y="220" width="180" height="80" fill="#D32F2F" rx="15"/>
                    <text x="400" y="250" fill="white" font-size="16" text-anchor="middle">EJECUTIVO</text>
                    <text x="400" y="275" fill="white" font-size="12" text-anchor="middle">Presidente</text>
                </g>

                <!-- Judicial -->
                <g id="judicial" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                    <rect x="520" y="220" width="180" height="80" fill="#7B1FA2" rx="15"/>
                    <text x="610" y="250" fill="white" font-size="16" text-anchor="middle">JUDICIAL</text>
                    <text x="610" y="275" fill="white" font-size="12" text-anchor="middle">SCJN</text>
                </g>

                <!-- Conexiones -->
                <line x1="400" y1="180" x2="190" y2="220" stroke="#43A047" stroke-width="3"/>
                <line x1="400" y1="180" x2="400" y2="220" stroke="#43A047" stroke-width="3"/>
                <line x1="400" y1="180" x2="610" y2="220" stroke="#43A047" stroke-width="3"/>

                <rect x="100" y="350" width="600" height="100" fill="#C8E6C9" rx="15"/>
                <text x="400" y="385" fill="#1B5E20" font-size="16" text-anchor="middle">Separación de Poderes (Art. 49 CPEUM)</text>
                <text x="400" y="410" fill="#2E7D32" font-size="14" text-anchor="middle">México: 32 estados + CDMX</text>
                <text x="400" y="435" fill="#1B5E20" font-size="12" text-anchor="middle">SI 2025: 193 países reconocidos por ONU</text>
            </svg>
            <p><em>SVG Animado: Estructura tripartita del Estado.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Cuatro elementos del Estado', 'respuesta' => 'Territorio, población, gobierno, soberanía'],
        ['enunciado' => 'Función principal del Estado', 'respuesta' => 'Regular sociedad y proveer servicios'],
        ['enunciado' => 'Poder que crea leyes', 'respuesta' => 'Legislativo'],
        ['enunciado' => 'Poder que ejecuta leyes', 'respuesta' => 'Ejecutivo'],
        ['enunciado' => 'Poder que interpreta leyes', 'respuesta' => 'Judicial'],
        ['enunciado' => 'México: jefe del ejecutivo', 'respuesta' => 'Presidente'],
        ['enunciado' => 'SCJN significa', 'respuesta' => 'Suprema Corte de Justicia de la Nación'],
        ['enunciado' => 'Soberanía permite', 'respuesta' => 'Relaciones internacionales'],
        ['enunciado' => 'México: territorio en km²', 'respuesta' => '~1.96 millones'],
        ['enunciado' => 'Convención de Montevideo', 'respuesta' => '1933, define Estado'],
        ['enunciado' => 'Estado moderno incluye', 'respuesta' => 'Servicios públicos'],
        ['enunciado' => 'SI: México en ONU desde', 'respuesta' => '1945']
    ],
    'quiz' => [
        ['pregunta' => 'Elemento del Estado', 'opciones' => ['Territorio', 'Clima', 'Religión', 'Idioma'], 'correcta' => 'Territorio'],
        ['pregunta' => 'Población es', 'opciones' => ['Permanente', 'Turistas', 'Visitantes', 'Animales'], 'correcta' => 'Permanente'],
        ['pregunta' => 'Gobierno es', 'opciones' => ['Instituciones de poder', 'Pueblo', 'Empresas', 'ONG'], 'correcta' => 'Instituciones de poder'],
        ['pregunta' => 'Soberanía implica', 'opciones' => ['Independencia externa', 'Dependencia', 'Aislamiento', 'Nada'], 'correcta' => 'Independencia externa'],
        ['pregunta' => 'Legislativo hace', 'opciones' => ['Leyes', 'Ejecuta', 'Juzga', 'Nada'], 'correcta' => 'Leyes'],
        ['pregunta' => 'Ejecutivo encabezado por', 'opciones' => ['Presidente', 'Congreso', 'Corte', 'Pueblo'], 'correcta' => 'Presidente'],
        ['pregunta' => 'Judicial resuelve', 'opciones' => ['Disputas legales', 'Presupuestos', 'Elecciones', 'Guerra'], 'correcta' => 'Disputas legales'],
        ['pregunta' => 'México: poderes', 'opciones' => ['3', '1', '2', '5'], 'correcta' => '3'],
        ['pregunta' => 'Art. 49 CPEUM', 'opciones' => ['Separación de poderes', 'Derechos', 'Territorio', 'Población'], 'correcta' => 'Separación de poderes'],
        ['pregunta' => 'SI 2025: estados en México', 'opciones' => ['32 + CDMX', '31', '33', '30'], 'correcta' => '32 + CDMX'],

        ['pregunta' => 'Estado sin territorio', 'opciones' => ['No existe', 'Sí', 'Virtual', 'Espacial'], 'correcta' => 'No existe'],
        ['pregunta' => 'ONU reconoce', 'opciones' => ['193 estados', '100', '200', '150'], 'correcta' => '193 estados'],
        ['pregunta' => 'México: capital', 'opciones' => ['CDMX', 'Guadalajara', 'Monterrey', 'Puebla'], 'correcta' => 'CDMX'],
        ['pregunta' => 'Poder que nombra ministros', 'opciones' => ['Ejecutivo', 'Legislativo', 'Judicial', 'Pueblo'], 'correcta' => 'Ejecutivo'],
        ['pregunta' => 'Congreso es', 'opciones' => ['Legislativo', 'Ejecutivo', 'Judicial', 'Ninguno'], 'correcta' => 'Legislativo'],
        ['pregunta' => 'SCJN es parte de', 'opciones' => ['Poder Judicial', 'Ejecutivo', 'Legislativo', 'Ninguno'], 'correcta' => 'Poder Judicial'],
        ['pregunta' => 'Estado federal como México', 'opciones' => ['32 entidades', '1 solo', '2', '100'], 'correcta' => '32 entidades'],
        ['pregunta' => 'Soberanía interna', 'opciones' => ['Autoridad sobre población', 'Externa', 'Nada', 'Ambas'], 'correcta' => 'Autoridad sobre población'],
        ['pregunta' => 'Tratado internacional', 'opciones' => ['Ejercicio soberanía', 'Pérdida', 'Nada', 'Interno'], 'correcta' => 'Ejercicio soberanía'],
        ['pregunta' => 'SI 2025: México PIB lugar', 'opciones' => ['~15 mundial', '1', '50', '100'], 'correcta' => '~15 mundial'],

        ['pregunta' => 'Estado fallido', 'opciones' => ['Sin control efectivo', 'Fuerte', 'Democrático', 'Rico'], 'correcta' => 'Sin control efectivo'],
        ['pregunta' => 'Ciudad del Vaticano', 'opciones' => ['Estado soberano', 'No', 'Parte Italia', 'Virtual'], 'correcta' => 'Estado soberano'],
        ['pregunta' => 'Poder que declara guerra', 'opciones' => ['Congreso', 'Presidente', 'Corte', 'Pueblo'], 'correcta' => 'Congreso'],
        ['pregunta' => 'Impuestos son función', 'opciones' => ['Estado', 'Empresa', 'Familia', 'Iglesia'], 'correcta' => 'Estado'],
        ['pregunta' => 'México: moneda', 'opciones' => ['Peso', 'Dólar', 'Euro', 'Bitcoin'], 'correcta' => 'Peso'],
        ['pregunta' => 'Estado de derecho', 'opciones' => ['Supremacía de la ley', 'Fuerza', 'Tradición', 'Religión'], 'correcta' => 'Supremacía de la ley'],
        ['pregunta' => 'México: himno', 'opciones' => ['Himno Nacional Mexicano', 'Ninguno', 'Internacional', 'Popular'], 'correcta' => 'Himno Nacional Mexicano'],
        ['pregunta' => 'SI 2025: INEGI mide', 'opciones' => ['Población, PIB', 'Clima', 'Deportes', 'Música'], 'correcta' => 'Población, PIB'],
        ['pregunta' => 'Estado laico', 'opciones' => ['México (Art. 130)', 'Religioso', 'Católico', 'Protestante'], 'correcta' => 'México (Art. 130)'],
        ['pregunta' => 'Estado es', 'opciones' => ['Persona jurídica', 'Física', 'Animal', 'Cosa'], 'correcta' => 'Persona jurídica']
    ]
];

// ========================================
// MATERIA: CIENCIAS SOCIALES
// SUBTEMA: Relaciones de Poderes
// ========================================
$lecciones[] = [
    'materia' => 'Ciencias Sociales',
    'slug' => 'relaciones-poderes',
    'titulo' => 'Relaciones de Poder: Dominación, Resistencia y Negociación',
    'contenido' => '
        <h3>Relaciones de Poder</h3>
        <p>El <strong>poder</strong> es la <strong>capacidad de influir</strong> en el comportamiento de otros. No es posesión fija, sino <strong>relacional</strong>: existe en la interacción. Incluye:</p>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>1. Tipos de Poder</h4>
        <table class="table">
            <thead>
                <tr><th>Tipo</th><th>Ejemplos</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Político</strong></td><td>Gobierno, leyes, policía</td></tr>
                <tr><td><strong>Económico</strong></td><td>Empresas, bancos, monopolios</td></tr>
                <tr><td><strong>Social/Cultural</strong></td><td>Medios, religión, educación</td></tr>
                <tr><td><strong>Personal</strong></td><td>Carisma, conocimiento</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>2. Dinámicas del Poder</h4>
        <ul>
            <li><strong>Dominación</strong>: Control unilateral.</li>
            <li><strong>Resistencia</strong>: Oposición activa o pasiva.</li>
            <li><strong>Negociación</strong>: Acuerdos mutuos.</li>
            <li><strong>Foucault</strong>: "El poder está en todas partes" (relacional, productivo).</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Empresa:</strong> Gerente manda → empleados obedecen (dominación). <strong>Sindicato</strong> negocia salario → equilibrio (resistencia + negociación).</p>
        </div>

        <div class="visual">
            <img src="assets/img/categorias-poder.png" alt="Categorías poder">
            <p><em>Clasificación clara. Fuente: ResearchGate.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/matriz-poder.jpg" alt="Matriz poder">
            <p><em>Intersecciones. Fuente: ResearchGate.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/redes-poder.png" alt="Relaciones complejas">
            <p><em>Red de poder. Fuente: Reddit.</em></p>
        </div>

        <hr style="border:1px dashed #7B1FA2;">

        <h4>3. SVG Animado: Red de Poder en una Comunidad</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#F3E5F5"/>

                <text x="400" y="50" fill="#4A148C" font-size="28" text-anchor="middle" font-weight="bold">RED DE PODER</text>

                <!-- Nodos -->
                <g id="gobierno" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    <circle cx="400" cy="150" r="50" fill="#D32F2F"/>
                    <text x="400" y="155" fill="white" font-size="14" text-anchor="middle">Gobierno</text>
                </g>

                <g id="empresa" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                    <circle cx="200" cy="300" r="45" fill="#1976D2"/>
                    <text x="200" y="305" fill="white" font-size="12" text-anchor="middle">Empresa</text>
                </g>

                <g id="sindicato" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1.5s" dur="0.5s"/>
                    <circle cx="600" cy="300" r="45" fill="#388E3C"/>
                    <text x="600" y="305" fill="white" font-size="12" text-anchor="middle">Sindicato</text>
                </g>

                <g id="ciudadanos" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                    <circle cx="400" cy="400" r="60" fill="#7B1FA2"/>
                    <text x="400" y="405" fill="white" font-size="14" text-anchor="middle">Ciudadanos</text>
                </g>

                <!-- Conexiones dinámicas -->
                <line x1="400" y1="200" x2="200" y2="255" stroke="#D32F2F" stroke-width="3" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2.5s" dur="0.5s"/>
                </line>
                <line x1="400" y1="200" x2="600" y2="255" stroke="#D32F2F" stroke-width="3" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2.5s" dur="0.5s"/>
                </line>
                <line x1="200" y1="300" x2="400" y2="340" stroke="#1976D2" stroke-width="3" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="3s" dur="0.5s"/>
                </line>
                <line x1="600" y1="300" x2="400" y2="340" stroke="#388E3C" stroke-width="3" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="3s" dur="0.5s"/>
                </line>

                <!-- Resistencia -->
                <path d="M550 380 Q500 350 450 380" fill="none" stroke="#FF9800" stroke-width="4" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="3.5s" dur="0.5s"/>
                    <animate attributeName="d" values="M550 380 Q500 350 450 380; M550 380 Q500 330 450 380; M550 380 Q500 350 450 380" dur="1.5s" repeatCount="indefinite"/>
                </path>
                <text x="500" y="420" fill="#E65100" font-size="14" text-anchor="middle" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="3.5s" dur="0.5s"/>
                    Resistencia
                </text>

                <rect x="100" y="440" width="600" height="50" fill="#E8F5E9" rx="10"/>
                <text x="400" y="465" fill="#1B5E20" font-size="14" text-anchor="middle">Poder = Red de relaciones | Foucault: "Productivo"</text>
            </svg>
            <p><em>SVG Animado: Red dinámica de poder en sociedad.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Poder es', 'respuesta' => 'Capacidad de influir en otros'],
        ['enunciado' => 'Poder político ejemplo', 'respuesta' => 'Gobierno, leyes'],
        ['enunciado' => 'Poder económico ejemplo', 'respuesta' => 'Empresas, bancos'],
        ['enunciado' => 'Foucault: poder es', 'respuesta' => 'Relacional y omnipresente'],
        ['enunciado' => 'Dominación es', 'respuesta' => 'Control unilateral'],
        ['enunciado' => 'Resistencia es', 'respuesta' => 'Oposición al poder'],
        ['enunciado' => 'Negociación es', 'respuesta' => 'Acuerdo mutuo'],
        ['enunciado' => 'Ejemplo resistencia social', 'respuesta' => 'Marchas, huelgas'],
        ['enunciado' => 'Poder cultural incluye', 'respuesta' => 'Medios, educación'],
        ['enunciado' => 'México: poder empresarial', 'respuesta' => 'CEMEX, Televisa'],
        ['enunciado' => 'Poder personal', 'respuesta' => 'Liderazgo, conocimiento'],
        ['enunciado' => 'SI: poder blando', 'respuesta' => 'Cultura, diplomacia']
    ],
    'quiz' => [
        ['pregunta' => 'Poder es', 'opciones' => ['Relacional', 'Fijo', 'Solo fuerza', 'Nada'], 'correcta' => 'Relacional'],
        ['pregunta' => 'Foucault dice', 'opciones' => ['Poder en todas partes', 'Solo en gobierno', 'Nada', 'Solo dinero'], 'correcta' => 'Poder en todas partes'],
        ['pregunta' => 'Poder político', 'opciones' => ['Estado', 'Empresa', 'Familia', 'Amigos'], 'correcta' => 'Estado'],
        ['pregunta' => 'Poder económico', 'opciones' => ['Monopolios', 'Voto', 'Cultura', 'Religión'], 'correcta' => 'Monopolios'],
        ['pregunta' => 'Resistencia es', 'opciones' => ['Oposición', 'Apoyo', 'Obediencia', 'Silencio'], 'correcta' => 'Oposición'],
        ['pregunta' => 'Negociación busca', 'opciones' => ['Equilibrio', 'Dominación', 'Guerra', 'Nada'], 'correcta' => 'Equilibrio'],
        ['pregunta' => 'Poder productivo', 'opciones' => ['Foucault', 'Marx', 'Weber', 'Hobbes'], 'correcta' => 'Foucault'],
        ['pregunta' => 'Sindicato ejerce', 'opciones' => ['Poder de resistencia', 'Dominación', 'Nada', 'Gobierno'], 'correcta' => 'Poder de resistencia'],
        ['pregunta' => 'Medios tienen poder', 'opciones' => ['Cultural', 'Político', 'Económico', 'Personal'], 'correcta' => 'Cultural'],
        ['pregunta' => 'México: poder blando', 'opciones' => ['Cultura (cine, música)', 'Ejército', 'Armas', 'Nada'], 'correcta' => 'Cultura (cine, música)'],

        ['pregunta' => 'Dominación total', 'opciones' => ['Rara (siempre resistencia)', 'Común', 'Ideal', 'Necesaria'], 'correcta' => 'Rara (siempre resistencia)'],
        ['pregunta' => 'Poder legítimo', 'opciones' => ['Weber: autoridad', 'Fuerza', 'Dinero', 'Miedo'], 'correcta' => 'Weber: autoridad'],
        ['pregunta' => 'Huelga es', 'opciones' => ['Resistencia', 'Apoyo', 'Obediencia', 'Nada'], 'correcta' => 'Resistencia'],
        ['pregunta' => 'Contrato laboral', 'opciones' => ['Negociación', 'Dominación', 'Guerra', 'Silencio'], 'correcta' => 'Negociación'],
        ['pregunta' => 'Poder carismático', 'opciones' => ['Líder personal', 'Institución', 'Dinero', 'Ley'], 'correcta' => 'Líder personal'],
        ['pregunta' => 'Red de poder incluye', 'opciones' => ['Todos los actores', 'Solo gobierno', 'Solo ricos', 'Nada'], 'correcta' => 'Todos los actores'],
        ['pregunta' => 'México: poder sindical', 'opciones' => ['CTM, SNTE', 'Ninguno', 'Solo empresas', 'Gobierno'], 'correcta' => 'CTM, SNTE'],
        ['pregunta' => 'Poder disciplinario', 'opciones' => ['Foucault (escuelas, cárceles)', 'Marx', 'Weber', 'Hobbes'], 'correcta' => 'Foucault (escuelas, cárceles)'],
        ['pregunta' => 'SI 2025: poder digital', 'opciones' => ['Redes sociales', 'Solo TV', 'Radio', 'Periódicos'], 'correcta' => 'Redes sociales'],
        ['pregunta' => 'Poder es', 'opciones' => ['Dinámico', 'Estático', 'Fijo', 'Inmutable'], 'correcta' => 'Dinámico'],

        ['pregunta' => 'Resistencia pasiva', 'opciones' => ['Desobediencia civil', 'Violencia', 'Guerra', 'Apoyo'], 'correcta' => 'Desobediencia civil'],
        ['pregunta' => 'Poder simbólico', 'opciones' => ['Bourdieu', 'Foucault', 'Marx', 'Weber'], 'correcta' => 'Bourdieu'],
        ['pregunta' => 'México: reforma 2018', 'opciones' => ['Cambio en relaciones de poder', 'Igual', 'Nada', 'Retroceso'], 'correcta' => 'Cambio en relaciones de poder'],
        ['pregunta' => 'Movimiento #YoSoy132', 'opciones' => ['Resistencia juvenil', 'Apoyo', 'Gobierno', 'Empresa'], 'correcta' => 'Resistencia juvenil'],
        ['pregunta' => 'Poder económico global', 'opciones' => ['Multinacionales', 'Gobiernos locales', 'Familias', 'Escuelas'], 'correcta' => 'Multinacionales'],
        ['pregunta' => 'Negociación tripartita', 'opciones' => ['Gobierno, empresa, sindicato', 'Solo dos', 'Uno', 'Ninguno'], 'correcta' => 'Gobierno, empresa, sindicato'],
        ['pregunta' => 'Poder panóptico', 'opciones' => ['Vigilancia constante', 'Libertad', 'Igualdad', 'Nada'], 'correcta' => 'Vigilancia constante'],
        ['pregunta' => 'SI 2025: poder IA', 'opciones' => ['Algoritmos influyen', 'Nada', 'Solo humanos', 'Robots'], 'correcta' => 'Algoritmos influyen'],
        ['pregunta' => 'Equilibrio de poder', 'opciones' => ['Estabilidad social', 'Conflicto', 'Guerra', 'Caos'], 'correcta' => 'Estabilidad social'],
        ['pregunta' => 'Poder es', 'opciones' => ['Productivo y represivo', 'Solo represivo', 'Solo bueno', 'Nada'], 'correcta' => 'Productivo y represivo']
    ]
];
// ========================================
// MATERIA: HISTORIA DE MÉXICO
// SUBTEMA: México Prehispánico (Olmecas, Teotihuacán, Maya, Azteca)
// ========================================
$lecciones[] = [
    'materia' => 'Historia de México',
    'slug' => 'mexico-prehispanico',
    'titulo' => 'México Prehispánico: Olmecas, Teotihuacán, Maya y Azteca',
    'contenido' => '
        <h3>México Prehispánico</h3>
        <p>Mesoamérica fue cuna de civilizaciones avanzadas con escritura, astronomía, arquitectura monumental y comercio. Cuatro pilares:</p>

        <hr style="border:1px dashed #1B5E20;">

        <h4>1. Civilizaciones Clave</h4>
        <table class="table">
            <thead>
                <tr><th>Civilización</th><th>Periodo</th><th>Aportes</th><th>Ubicación</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Olmecas</strong></td><td>1500-400 a.C.</td><td>Cabezas colosales, jaguar, "cultura madre"</td><td>Golfo (Veracruz, Tabasco)</td></tr>
                <tr><td><strong>Teotihuacán</strong></td><td>200 a.C.-650 d.C.</td><td>Pirámides del Sol y Luna, urbanismo</td><td>Valle de México</td></tr>
                <tr><td><strong>Maya</strong></td><td>250-900 d.C. (Clásico)</td><td>Escritura jeroglífica, calendarios, Chichén Itzá</td><td>Yucatán, Chiapas, Guatemala</td></tr>
                <tr><td><strong>Aztecas</strong></td><td>1325-1521 d.C.</td><td>Tenochtitlán, chinampas, calendario solar</td><td>Lago de Texcoco</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1B5E20;">

        <h4>2. Legado Común</h4>
        <ul>
            <li><strong>Calendario</strong>: 260 + 365 días.</li>
            <li><strong>Escritura</strong>: Glifos, códices.</li>
            <li><strong>Agricultura</strong>: Maíz, chinampas, terrazas.</li>
            <li><strong>Religión</strong>: Politeísta, sacrificios, dualidad.</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Ejemplo:</strong> <strong>Aztecas:</strong> Construyeron <strong>Tenochtitlán</strong> (hoy CDMX) sobre lago con <strong>chinampas</strong> (islas flotantes). Calendario solar: <strong>18 meses × 20 días + 5 "nefastos"</strong> = 365 días.</p>
        </div>

        <div class="visual">
            <img src="assets/img/olmeca.jpg" alt="Cabeza colosal olmeca">
            <p><em>Cabeza colosal (2.5 m). Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/piramide-sol.jpg" alt="Pirámide del Sol">
            <p><em>65 m altura, 200,000 hab. Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/templo-aztec.jpg" alt="Templo Mayor azteca">
            <p><em>Modelo INAH. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #1B5E20;">

        <h4>3. SVG Animado: Línea del Tiempo Prehispánica</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#E8F5E9"/>

                <text x="400" y="50" fill="#1B5E20" font-size="28" text-anchor="middle" font-weight="bold">LÍNEA DEL TIEMPO PREHISPÁNICA</text>

                <!-- Línea base -->
                <line x1="100" y1="150" x2="700" y2="150" stroke="#43A047" stroke-width="4"/>

                <!-- Olmecas -->
                <g id="olmecas" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    <circle cx="150" cy="150" r="20" fill="#FF9800"/>
                    <text x="150" y="120" fill="#E65100" font-size="14" text-anchor="middle">Olmecas</text>
                    <text x="150" y="185" fill="#E65100" font-size="12" text-anchor="middle">1500-400 a.C.</text>
                </g>

                <!-- Teotihuacán -->
                <g id="teotihuacan" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                    <circle cx="300" cy="150" r="25" fill="#1976D2"/>
                    <text x="300" y="115" fill="#0D47A1" font-size="14" text-anchor="middle">Teotihuacán</text>
                    <text x="300" y="190" fill="#0D47A1" font-size="12" text-anchor="middle">200 a.C.-650 d.C.</text>
                </g>

                <!-- Maya -->
                <g id="maya" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1.5s" dur="0.5s"/>
                    <circle cx="450" cy="150" r="25" fill="#D32F2F"/>
                    <text x="450" y="115" fill="#B71C1C" font-size="14" text-anchor="middle">Maya</text>
                    <text x="450" y="190" fill="#B71C1C" font-size="12" text-anchor="middle">250-900 d.C.</text>
                </g>

                <!-- Azteca -->
                <g id="azteca" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                    <circle cx="600" cy="150" r="30" fill="#7B1FA2"/>
                    <text x="600" y="110" fill="#4A148C" font-size="14" text-anchor="middle">Azteca</text>
                    <text x="600" y="195" fill="#4A148C" font-size="12" text-anchor="middle">1325-1521 d.C.</text>
                </g>

                <rect x="100" y="250" width="600" height="200" fill="#C8E6C9" rx="15"/>
                <text x="400" y="280" fill="#1B5E20" font-size="16" text-anchor="middle">Cultura madre → Urbanismo → Ciencia → Imperio</text>
                <text x="400" y="310" fill="#2E7D32" font-size="14" text-anchor="middle">SI 2025: 68 lenguas indígenas vivas</text>
                <text x="400" y="340" fill="#1B5E20" font-size="12" text-anchor="middle">INAH: 189 zonas arqueológicas abiertas</text>
                <text x="400" y="370" fill="#2E7D32" font-size="12" text-anchor="middle">Tenochtitlán: 200,000 hab. (más que París 1500)</text>
                <text x="400" y="400" fill="#1B5E20" font-size="12" text-anchor="middle">Calendario maya: error 1 día cada 4000 años</text>
            </svg>
            <p><em>SVG Animado: Evolución cronológica de civilizaciones.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Civilización "cultura madre"', 'respuesta' => 'Olmecas'],
        ['enunciado' => 'Pirámide del Sol en', 'respuesta' => 'Teotihuacán'],
        ['enunciado' => 'Maya: escritura', 'respuesta' => 'Jeroglífica'],
        ['enunciado' => 'Capital azteca', 'respuesta' => 'Tenochtitlán'],
        ['enunciado' => 'Chinampas eran', 'respuesta' => 'Agricultura flotante'],
        ['enunciado' => 'Calendario solar 365 días', 'respuesta' => 'Azteca'],
        ['enunciado' => 'Teotihuacán: población estimada', 'respuesta' => '~200,000'],
        ['enunciado' => 'Olmecas: símbolo', 'respuesta' => 'Jaguar'],
        ['enunciado' => 'Maya: ciudad famosa', 'respuesta' => 'Chichén Itzá'],
        ['enunciado' => 'Azteca: dios principal', 'respuesta' => 'Huitzilopochtli'],
        ['enunciado' => 'Mesoamérica incluye', 'respuesta' => 'Centro y sur de México'],
        ['enunciado' => 'SI: INAH protege', 'respuesta' => '189 zonas arqueológicas']
    ],
    'quiz' => [
        ['pregunta' => 'Cultura madre', 'opciones' => ['Olmecas', 'Maya', 'Azteca', 'Toltecas'], 'correcta' => 'Olmecas'],
        ['pregunta' => 'Pirámide del Sol', 'opciones' => ['Teotihuacán', 'Tenochtitlán', 'Palenque', 'Tikal'], 'correcta' => 'Teotihuacán'],
        ['pregunta' => 'Escritura jeroglífica', 'opciones' => ['Maya', 'Azteca', 'Olmeca', 'Teotihuacán'], 'correcta' => 'Maya'],
        ['pregunta' => 'Tenochtitlán sobre', 'opciones' => ['Lago', 'Montaña', 'Desierto', 'Costa'], 'correcta' => 'Lago'],
        ['pregunta' => 'Chinampas', 'opciones' => ['Agricultura flotante', 'Pirámides', 'Escritura', 'Guerra'], 'correcta' => 'Agricultura flotante'],
        ['pregunta' => 'Calendario 365 días', 'opciones' => ['Azteca', 'Maya', 'Olmeca', 'Inca'], 'correcta' => 'Azteca'],
        ['pregunta' => 'Cabezas colosales', 'opciones' => ['Olmecas', 'Maya', 'Azteca', 'Teotihuacán'], 'correcta' => 'Olmecas'],
        ['pregunta' => 'Teotihuacán: población', 'opciones' => ['~200,000', '10,000', '1M', '500'], 'correcta' => '~200,000'],
        ['pregunta' => 'Maya: error calendario', 'opciones' => ['1 día/4000 años', '1 día/año', '1 día/mes', 'Ninguno'], 'correcta' => '1 día/4000 años'],
        ['pregunta' => 'SI 2025: lenguas indígenas', 'opciones' => ['68', '10', '100', '1'], 'correcta' => '68'],

        ['pregunta' => 'Olmecas en', 'opciones' => ['Golfo', 'Yucatán', 'CDMX', 'Oaxaca'], 'correcta' => 'Golfo'],
        ['pregunta' => 'Teotihuacán: pirámide mayor', 'opciones' => ['Sol', 'Luna', 'Serpiente', 'Jaguar'], 'correcta' => 'Sol'],
        ['pregunta' => 'Maya: Chichén Itzá', 'opciones' => ['Yucatán', 'Chiapas', 'Tabasco', 'Veracruz'], 'correcta' => 'Yucatán'],
        ['pregunta' => 'Azteca: dios guerra', 'opciones' => ['Huitzilopochtli', 'Quetzalcóatl', 'Tlaloc', 'Tezcatlipoca'], 'correcta' => 'Huitzilopochtli'],
        ['pregunta' => 'Calendario ritual', 'opciones' => ['260 días', '365', '52', '18'], 'correcta' => '260 días'],
        ['pregunta' => 'Códices mayas', 'opciones' => ['Dresde, Madrid, París', 'Florentino', 'Borbónico', 'Mendoza'], 'correcta' => 'Dresde, Madrid, París'],
        ['pregunta' => 'Tenochtitlán > París', 'opciones' => ['Sí (1500)', 'No', 'Igual', 'Menos'], 'correcta' => 'Sí (1500)'],
        ['pregunta' => 'INAH: zonas abiertas', 'opciones' => ['189', '50', '500', '10'], 'correcta' => '189'],
        ['pregunta' => 'Juego de pelota', 'opciones' => ['Ritual', 'Deporte', 'Guerra', 'Comercio'], 'correcta' => 'Ritual'],
        ['pregunta' => 'SI 2025: maíz domesticado', 'opciones' => ['9000 años México', '500', '100', 'Europa'], 'correcta' => '9000 años México'],

        ['pregunta' => 'Olmecas: jaguar', 'opciones' => ['Símbolo poder', 'Comida', 'Mascota', 'Nada'], 'correcta' => 'Símbolo poder'],
        ['pregunta' => 'Teotihuacán: comercio', 'opciones' => ['Obsidiana', 'Oro', 'Plata', 'Cacao'], 'correcta' => 'Obsidiana'],
        ['pregunta' => 'Maya: cero matemático', 'opciones' => ['Sí', 'No', 'Solo romanos', 'Chinos'], 'correcta' => 'Sí'],
        ['pregunta' => 'Azteca: tributos', 'opciones' => ['Plumas, cacao', 'Oro', 'Plata', 'Caballos'], 'correcta' => 'Plumas, cacao'],
        ['pregunta' => 'Mesoamérica sin', 'opciones' => ['Rueda (transporte)', 'Caballos', 'Hierro', 'Todas'], 'correcta' => 'Todas'],
        ['pregunta' => 'Pirámide escalonada', 'opciones' => ['Común', 'Rara', 'Solo maya', 'Egipcia'], 'correcta' => 'Común'],
        ['pregunta' => 'Quetzalcóatl', 'opciones' => ['Serpiente emplumada', 'Sol', 'Lluvia', 'Guerra'], 'correcta' => 'Serpiente emplumada'],
        ['pregunta' => 'SI 2025: códices originales', 'opciones' => ['4 mayas', '100', '0', '1000'], 'correcta' => '4 mayas'],
        ['pregunta' => 'Chichén Itzá: equinoccio', 'opciones' => ['Serpiente baja', 'Sube', 'Nada', 'Eclipse'], 'correcta' => 'Serpiente baja'],
        ['pregunta' => 'Mesoamérica: maíz, frijol, chile', 'opciones' => ['Trilogía', 'Solo maíz', 'Arroz', 'Trigo'], 'correcta' => 'Trilogía']
    ]
];

// ========================================
// MATERIA: HISTORIA DE MÉXICO
// SUBTEMA: La Conquista (Cortés, Malinche, Caída de Tenochtitlán)
// ========================================
$lecciones[] = [
    'materia' => 'Historia de México',
    'slug' => 'la-conquista',
    'titulo' => 'La Conquista: Cortés, Malinche y Caída de Tenochtitlán (1519-1521)',
    'contenido' => '
        <h3>La Conquista (1519-1521)</h3>
        <p>Hernán Cortés llegó con <strong>11 barcos, 500 hombres, 16 caballos</strong>. Aliado con <strong>tlaxcaltecas</strong> y con <strong>Malinche</strong> como intérprete, avanzó a Tenochtitlán. En 1521, tras <strong>sitio de 75 días y viruela</strong>, cayó el imperio mexica.</p>

        <hr style="border:1px dashed #D32F2F;">

        <h4>1. Etapas Clave</h4>
        <table class="table">
            <thead>
                <tr><th>Fecha</th><th>Evento</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Feb 1519</strong></td><td>Llega a Cozumel</td></tr>
                <tr><td><strong>Abr 1519</strong></td><td>Fundación Veracruz</td></tr>
                <tr><td><strong>Nov 1519</strong></td><td>Entrada Tenochtitlán</td></tr>
                <tr><td><strong>30 Jun 1520</strong></td><td>Noche Triste</td></tr>
                <tr><td><strong>13 Ago 1521</strong></td><td>Caída Tenochtitlán</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #D32F2F;">

        <h4>2. Factores de la Victoria Española</h4>
        <ul>
            <li><strong>Alianzas indígenas</strong>: Tlaxcala, Texcoco.</li>
            <li><strong>Tecnología</strong>: Armas de fuego, acero, caballos.</li>
            <li><strong>Enfermedades</strong>: Viruela mató a Cuitláhuac.</li>
            <li><strong>Estrategia</strong>: Sitio, destrucción acueductos.</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Noche Triste:</strong> 30 junio 1520. Tras matanza en Templo Mayor, Cortés huyó por calzada Tacuba. <strong>600 españoles y miles de aliados muertos</strong>.</p>
        </div>

        <div class="visual">
            <img src="assets/img/HernanCortes.jpg" alt="Desembarco Cortés">
            <p><em>21 abril 1519. Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/malinche-cortes.jpg" alt="Malinche y Cortés">
            <p><em>Intérprete clave. Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/tenochtitlan.jpg" alt="Sitio Tenochtitlán">
            <p><em>Bergantines vs canoas. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #D32F2F;">

        <h4>3. SVG Animado: Ruta de Cortés</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#FFEBEE"/>

                <text x="400" y="50" fill="#B71C1C" font-size="28" text-anchor="middle" font-weight="bold">RUTA DE LA CONQUISTA</text>

                <!-- Mapa simplificado -->
                <path d="M100,100 Q200,50 300,100 Q400,150 500,100 Q600,50 700,100" fill="none" stroke="#E0E0E0" stroke-width="40"/>

                <!-- Veracruz -->
                <g id="veracruz" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    <circle cx="150" cy="300" r="20" fill="#1976D2"/>
                    <text x="150" y="270" fill="#0D47A1" font-size="14" text-anchor="middle">Veracruz</text>
                    <text x="150" y="340" fill="#0D47A1" font-size="12" text-anchor="middle">Abr 1519</text>
                </g>

                <!-- Tlaxcala -->
                <g id="tlaxcala" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                    <circle cx="400" cy="200" r="25" fill="#388E3C"/>
                    <text x="400" y="165" fill="#1B5E20" font-size="14" text-anchor="middle">Tlaxcala</text>
                    <text x="400" y="240" fill="#1B5E20" font-size="12" text-anchor="middle">Alianza</text>
                </g>

                <!-- Tenochtitlán -->
                <g id="tenochtitlan" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1.5s" dur="0.5s"/>
                    <circle cx="650" cy="300" r="30" fill="#D32F2F"/>
                    <text x="650" y="260" fill="#B71C1C" font-size="14" text-anchor="middle">Tenochtitlán</text>
                    <text x="650" y="345" fill="#B71C1C" font-size="12" text-anchor="middle">13 Ago 1521</text>
                </g>

                <!-- Ruta animada -->
                <path d="M150,300 Q275,250 400,200 Q525,250 650,300" fill="none" stroke="#D32F2F" stroke-width="4" stroke-dasharray="1000" stroke-dashoffset="1000">
                    <animate attributeName="stroke-dashoffset" values="1000;0" dur="3s" begin="2s"/>
                </path>

                <!-- Malinche -->
                <g id="malinche" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2.5s" dur="0.5s"/>
                    <circle cx="300" cy="250" r="15" fill="#7B1FA2"/>
                    <text x="300" y="220" fill="#4A148C" font-size="12" text-anchor="middle">Malinche</text>
                </g>

                <rect x="100" y="380" width="600" height="90" fill="#FFCDD2" rx="15"/>
                <text x="400" y="410" fill="#B71C1C" font-size="16" text-anchor="middle">Noche Triste: 600 españoles muertos</text>
                <text x="400" y="435" fill="#C62828" font-size="14" text-anchor="middle">Viruela: Cuitláhuac muere (1520)</text>
                <text x="400" y="455" fill="#B71C1C" font-size="12" text-anchor="middle">SI 2025: 504 años de la caída</text>
            </svg>
            <p><em>SVG Animado: Ruta y alianzas de Cortés.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Año llegada Cortés', 'respuesta' => '1519'],
        ['enunciado' => 'Intérprete de Cortés', 'respuesta' => 'Malinche'],
        ['enunciado' => 'Aliados clave', 'respuesta' => 'Tlaxcaltecas'],
        ['enunciado' => 'Enfermedad decisiva', 'respuesta' => 'Viruela'],
        ['enunciado' => 'Caída Tenochtitlán', 'respuesta' => '13 agosto 1521'],
        ['enunciado' => 'Noche Triste', 'respuesta' => '30 junio 1520'],
        ['enunciado' => 'Emperador al llegar Cortés', 'respuesta' => 'Moctezuma II'],
        ['enunciado' => 'Sucesor muerto por viruela', 'respuesta' => 'Cuitláhuac'],
        ['enunciado' => 'Último emperador', 'respuesta' => 'Cuauhtémoc'],
        ['enunciado' => 'Fundación Veracruz', 'respuesta' => '22 abril 1519'],
        ['enunciado' => 'Bergantines en sitio', 'respuesta' => '13'],
        ['enunciado' => 'SI: años de conquista', 'respuesta' => '2 años 3 meses']
    ],
    'quiz' => [
        ['pregunta' => 'Líder conquista', 'opciones' => ['Cortés', 'Pizarro', 'Colón', 'Velázquez'], 'correcta' => 'Cortés'],
        ['pregunta' => 'Malinche fue', 'opciones' => ['Intérprete', 'Reina', 'Sacerdotisa', 'Espía'], 'correcta' => 'Intérprete'],
        ['pregunta' => 'Alianza clave', 'opciones' => ['Tlaxcala', 'Tenochtitlán', 'Maya', 'Inca'], 'correcta' => 'Tlaxcala'],
        ['pregunta' => 'Enfermedad', 'opciones' => ['Viruela', 'Gripe', 'Cólera', 'Peste'], 'correcta' => 'Viruela'],
        ['pregunta' => 'Caída Tenochtitlán', 'opciones' => ['13 Ago 1521', '12 Oct 1492', '1 Ene 1500', '20 Nov 1910'], 'correcta' => '13 Ago 1521'],
        ['pregunta' => 'Noche Triste', 'opciones' => ['30 Jun 1520', '1 Ene', '25 Dic', '15 Sep'], 'correcta' => '30 Jun 1520'],
        ['pregunta' => 'Emperador inicial', 'opciones' => ['Moctezuma II', 'Cuauhtémoc', 'Cuitláhuac', 'Nezahualcóyotl'], 'correcta' => 'Moctezuma II'],
        ['pregunta' => 'Muerto por viruela', 'opciones' => ['Cuitláhuac', 'Moctezuma', 'Cuauhtémoc', 'Cortés'], 'correcta' => 'Cuitláhuac'],
        ['pregunta' => 'Último tlatoani', 'opciones' => ['Cuauhtémoc', 'Moctezuma', 'Cuitláhuac', 'Itzcóatl'], 'correcta' => 'Cuauhtémoc'],
        ['pregunta' => 'SI 2025: años caída', 'opciones' => ['504', '500', '600', '400'], 'correcta' => '504'],

        ['pregunta' => 'Llegada Cozumel', 'opciones' => ['Feb 1519', 'Abr 1519', 'Nov 1519', '1521'], 'correcta' => 'Feb 1519'],
        ['pregunta' => 'Fundación Veracruz', 'opciones' => ['22 Abr 1519', '1 Ene', '12 Oct', '20 Nov'], 'correcta' => '22 Abr 1519'],
        ['pregunta' => 'Entrada Tenochtitlán', 'opciones' => ['8 Nov 1519', '1 Ene', '25 Dic', '15 Sep'], 'correcta' => '8 Nov 1519'],
        ['pregunta' => 'Matanza Templo Mayor', 'opciones' => ['Mayo 1520', '1519', '1521', '1522'], 'correcta' => 'Mayo 1520'],
        ['pregunta' => 'Sitio duró', 'opciones' => ['75 días', '1 año', '1 día', '1 mes'], 'correcta' => '75 días'],
        ['pregunta' => 'Bergantines', 'opciones' => ['13', '1', '100', '0'], 'correcta' => '13'],
        ['pregunta' => 'Caballos en 1519', 'opciones' => ['16', '100', '0', '1000'], 'correcta' => '16'],
        ['pregunta' => 'Población Tenochtitlán', 'opciones' => ['~200,000', '10,000', '1M', '500'], 'correcta' => '~200,000'],
        ['pregunta' => 'Cuauhtémoc ejecutado', 'opciones' => ['1525', '1521', '1519', '1530'], 'correcta' => '1525'],
        ['pregunta' => 'SI 2025: Malinche símbolo', 'opciones' => ['Traición y mediación', 'Solo traición', 'Solo heroína', 'Nada'], 'correcta' => 'Traición y mediación'],

        ['pregunta' => 'Moctezuma muerto', 'opciones' => ['Julio 1520', '1519', '1521', '1525'], 'correcta' => 'Julio 1520'],
        ['pregunta' => 'Cuitláhuac reinó', 'opciones' => ['4 meses', '10 años', '1 día', '20 años'], 'correcta' => '4 meses'],
        ['pregunta' => 'Tenochtitlán destruida', 'opciones' => ['Sobre ruinas CDMX', 'Desapareció', 'Se mudó', 'Nada'], 'correcta' => 'Sobre ruinas CDMX'],
        ['pregunta' => 'Cartas de Relación', 'opciones' => ['Cortés a Carlos V', 'Moctezuma', 'Malinche', 'Tlaxcala'], 'correcta' => 'Cortés a Carlos V'],
        ['pregunta' => 'Viruela llegó con', 'opciones' => ['Españoles (Narváez)', 'Cortés', 'Nativos', 'África'], 'correcta' => 'Españoles (Narváez)'],
        ['pregunta' => 'Pánfilo de Narváez', 'opciones' => ['Enviado a arrestar Cortés', 'Aliado', 'Rey', 'Nada'], 'correcta' => 'Enviado a arrestar Cortés'],
        ['pregunta' => 'Batalla Otumba', 'opciones' => ['Victoria tras Noche Triste', 'Derrota', 'Paz', 'Nada'], 'correcta' => 'Victoria tras Noche Triste'],
        ['pregunta' => 'SI 2025: sitio recordado', 'opciones' => ['500 años en 2021', '2025', '2030', 'Nunca'], 'correcta' => '500 años en 2021'],
        ['pregunta' => 'Conquista fue', 'opciones' => ['Guerra + alianzas + enfermedad', 'Solo guerra', 'Solo paz', 'Nada'], 'correcta' => 'Guerra + alianzas + enfermedad'],
        ['pregunta' => 'México mestizo desde', 'opciones' => ['1521', '1821', '1910', '2025'], 'correcta' => '1521']
    ]
];
// ========================================
// MATERIA: HISTORIA DE MÉXICO
// SUBTEMA: Virreinato de la Nueva España (Encomienda, Virreyes, Iglesia)
// ========================================
$lecciones[] = [
    'materia' => 'Historia de México',
    'slug' => 'virreinato-nueva-espana',
    'titulo' => 'Virreinato de Nueva España: Encomienda, Virreyes e Iglesia (1521-1821)',
    'contenido' => '
        <h3>Virreinato de la Nueva España (1521-1821)</h3>
        <p>Tras la conquista, España organizó el territorio como <strong>Virreinato</strong>. Capital: <strong>Ciudad de México</strong>. Estructura jerárquica con <strong>virrey</strong> (representante del rey), <strong>encomienda</strong> (explotación indígena) e <strong>Iglesia</strong> (control social y evangelización).</p>

        <hr style="border:1px dashed #F9A825;">

        <h4>1. Estructura de Poder</h4>
        <table class="table">
            <thead>
                <tr><th>Nivel</th><th>Figura</th><th>Función</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Rey</strong></td><td>Carlos V → Felipe II → Borbones</td><td>Autoridad suprema</td></tr>
                <tr><td><strong>Virrey</strong></td><td>63 en total (1535-1821)</td><td>Gobierno, justicia, guerra</td></tr>
                <tr><td><strong>Audiencias</strong></td><td>México, Guadalajara, etc.</td><td>Control judicial</td></tr>
                <tr><td><strong>Cabildos</strong></td><td>Ayuntamientos locales</td><td>Administración municipal</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #F9A825;">

        <h4>2. Sistema Económico y Social</h4>
        <ul>
            <li><strong>Encomienda</strong>: Indígenas "encomendados" a españoles para trabajo y evangelización (a cambio de "protección").</li>
            <li><strong>Haciendas</strong>: Grandes latifundios (trigo, ganado, pulque).</li>
            <li><strong>Minería</strong>: Zacatecas, Guanajuato → 80% plata mundial.</li>
            <li><strong>Castas</strong>: Jerarquía racial (españoles, criollos, mestizos, indígenas, negros).</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Antonio de Mendoza (1535-1550):</strong> Primer virrey. Fundó <strong>Real y Pontificia Universidad</strong> (1551), promovió <strong>Nuevas Leyes</strong> (1542) para limitar abusos en encomiendas.</p>
        </div>

        <div class="visual">
            <img src="assets/img/indeigena-forzoso.jpg" alt="Encomienda">
            <p><em>Trabajo forzado indígena. Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/palacio-nacional.jpg" alt="Palacio Nacional">
            <p><em>Sede virreinal (hoy Palacio Nacional). Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/catedral.jpg" alt="Catedral">
            <p><em>Construida 1573-1813. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #F9A825;">

        <h4>3. SVG Animado: Estructura del Virreinato</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#FFF8E1"/>

                <text x="400" y="50" fill="#FF6F00" font-size="28" text-anchor="middle" font-weight="bold">VIRREINATO DE NUEVA ESPAÑA</text>

                <!-- Rey -->
                <g id="rey" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    <rect x="350" y="100" width="100" height="60" fill="#FFB300" rx="15"/>
                    <text x="400" y="135" fill="#5D4037" font-size="16" text-anchor="middle">REY</text>
                </g>

                <!-- Virrey -->
                <g id="virrey" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                    <rect x="350" y="200" width="100" height="60" fill="#D84315" rx="15"/>
                    <text x="400" y="235" fill="white" font-size="16" text-anchor="middle">VIRREY</text>
                </g>

                <!-- Encomenderos -->
                <g id="encomenderos" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1.5s" dur="0.5s"/>
                    <rect x="150" y="320" width="140" height="60" fill="#1976D2" rx="15"/>
                    <text x="220" y="355" fill="white" font-size="14" text-anchor="middle">ENCOMENDEROS</text>
                </g>

                <!-- Iglesia -->
                <g id="iglesia" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                    <rect x="510" y="320" width="140" height="60" fill="#7B1FA2" rx="15"/>
                    <text x="580" y="355" fill="white" font-size="14" text-anchor="middle">IGLESIA</text>
                </g>

                <!-- Conexiones -->
                <line x1="400" y1="160" x2="400" y2="200" stroke="#FF6F00" stroke-width="3"/>
                <line x1="400" y1="260" x2="220" y2="320" stroke="#FF6F00" stroke-width="3"/>
                <line x1="400" y1="260" x2="580" y2="320" stroke="#FF6F00" stroke-width="3"/>

                <rect x="100" y="410" width="600" height="70" fill="#FFCCBC" rx="15"/>
                <text x="400" y="440" fill="#D84315" font-size="16" text-anchor="middle">63 virreyes | 300 años de dominio</text>
                <text x="400" y="465" fill="#BF360C" font-size="12" text-anchor="middle">SI 2025: INAH protege 1,200 sitios coloniales</text>
            </svg>
            <p><em>SVG Animado: Jerarquía de poder colonial.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Representante del rey', 'respuesta' => 'Virrey'],
        ['enunciado' => 'Sistema de trabajo indígena', 'respuesta' => 'Encomienda'],
        ['enunciado' => 'Iglesia: función principal', 'respuesta' => 'Evangelización'],
        ['enunciado' => 'Capital virreinal', 'respuesta' => 'Ciudad de México'],
        ['enunciado' => 'Primer virrey', 'respuesta' => 'Antonio de Mendoza'],
        ['enunciado' => 'Producto clave', 'respuesta' => 'Plata'],
        ['enunciado' => 'Universidad fundada', 'respuesta' => '1551 (Real y Pontificia)'],
        ['enunciado' => 'Nuevas Leyes', 'respuesta' => '1542, protegen indígenas'],
        ['enunciado' => 'Catedral iniciada', 'respuesta' => '1573'],
        ['enunciado' => 'Número de virreyes', 'respuesta' => '63'],
        ['enunciado' => 'Castas: grupo superior', 'respuesta' => 'Peninsulares'],
        ['enunciado' => 'SI: años virreinato', 'respuesta' => '300']
    ],
    'quiz' => [
        ['pregunta' => 'Virrey era', 'opciones' => ['Representante del rey', 'Rey', 'Indígena', 'Sacerdote'], 'correcta' => 'Representante del rey'],
        ['pregunta' => 'Encomienda era', 'opciones' => ['Trabajo forzado', 'Escuela', 'Iglesia', 'Comercio'], 'correcta' => 'Trabajo forzado'],
        ['pregunta' => 'Iglesia controlaba', 'opciones' => ['Educación y evangelización', 'Ejército', 'Minas', 'Nada'], 'correcta' => 'Educación y evangelización'],
        ['pregunta' => 'Capital', 'opciones' => ['Ciudad de México', 'Madrid', 'Veracruz', 'Guadalajara'], 'correcta' => 'Ciudad de México'],
        ['pregunta' => 'Primer virrey', 'opciones' => ['Antonio de Mendoza', 'Cortés', 'Hidalgo', 'Juárez'], 'correcta' => 'Antonio de Mendoza'],
        ['pregunta' => 'Economía principal', 'opciones' => ['Plata', 'Maíz', 'Petróleo', 'Turismo'], 'correcta' => 'Plata'],
        ['pregunta' => 'Universidad 1551', 'opciones' => ['Real y Pontificia', 'UNAM', 'Harvard', 'Ninguna'], 'correcta' => 'Real y Pontificia'],
        ['pregunta' => 'Nuevas Leyes', 'opciones' => ['1542', '1492', '1821', '1910'], 'correcta' => '1542'],
        ['pregunta' => 'Catedral terminada', 'opciones' => ['1813', '1521', '1821', '1910'], 'correcta' => '1813'],
        ['pregunta' => 'SI 2025: sitios coloniales', 'opciones' => ['1,200 INAH', '100', '10,000', '0'], 'correcta' => '1,200 INAH'],

        ['pregunta' => 'Virreyes totales', 'opciones' => ['63', '10', '100', '1'], 'correcta' => '63'],
        ['pregunta' => 'Palacio Nacional era', 'opciones' => ['Sede virreinal', 'Iglesia', 'Mercado', 'Prisión'], 'correcta' => 'Sede virreinal'],
        ['pregunta' => 'Encomenderos recibían', 'opciones' => ['Tributos indígenas', 'Salario', 'Tierras', 'Nada'], 'correcta' => 'Tributos indígenas'],
        ['pregunta' => 'Hacienda producía', 'opciones' => ['Trigo, ganado', 'Tecnología', 'Coches', 'Aviones'], 'correcta' => 'Trigo, ganado'],
        ['pregunta' => 'Zacatecas famosa por', 'opciones' => ['Plata', 'Oro', 'Cobre', 'Petróleo'], 'correcta' => 'Plata'],
        ['pregunta' => 'Castas: abajo', 'opciones' => ['Indígenas y negros', 'Criollos', 'Peninsulares', 'Mestizos'], 'correcta' => 'Indígenas y negros'],
        ['pregunta' => 'Inquisición llegó', 'opciones' => ['1571', '1521', '1821', '1910'], 'correcta' => '1571'],
        ['pregunta' => 'Virrey nombraba', 'opciones' => ['Por el rey', 'Por indígenas', 'Por voto', 'Por Iglesia'], 'correcta' => 'Por el rey'],
        ['pregunta' => 'Real Audiencia', 'opciones' => ['Control judicial', 'Ejército', 'Comercio', 'Educación'], 'correcta' => 'Control judicial'],
        ['pregunta' => 'SI 2025: plata extraída', 'opciones' => ['~3,000 toneladas', '100', '1M', '0'], 'correcta' => '~3,000 toneladas'],

        ['pregunta' => 'Mestizaje comenzó', 'opciones' => ['Siglo XVI', 'XVIII', 'XX', 'XXI'], 'correcta' => 'Siglo XVI'],
        ['pregunta' => 'Barroco novohispano', 'opciones' => ['Arte colonial', 'Indígena', 'Moderno', 'Abstracto'], 'correcta' => 'Arte colonial'],
        ['pregunta' => 'Virrey más famoso', 'opciones' => ['Juan Vicente Güémez', 'Mendoza', 'Cortés', 'Hidalgo'], 'correcta' => 'Juan Vicente Güémez'],
        ['pregunta' => 'Población 1800', 'opciones' => ['~6 millones', '1M', '20M', '100K'], 'correcta' => '~6 millones'],
        ['pregunta' => 'Camino Real', 'opciones' => ['México-Veracruz', 'Madrid', 'China', 'Europa'], 'correcta' => 'México-Veracruz'],
        ['pregunta' => 'Galeón de Manila', 'opciones' => ['Comercio Asia', 'Guerra', 'Evangelización', 'Nada'], 'correcta' => 'Comercio Asia'],
        ['pregunta' => 'SI 2025: UNAM sucesora', 'opciones' => ['Real y Pontificia', 'Ninguna', 'Harvard', 'Oxford'], 'correcta' => 'Real y Pontificia'],
        ['pregunta' => 'Virreinato terminó', 'opciones' => ['1821', '1521', '1910', '1810'], 'correcta' => '1821'],
        ['pregunta' => 'Reforma Borbónica', 'opciones' => ['Siglo XVIII', 'XVI', 'XIX', 'XX'], 'correcta' => 'Siglo XVIII'],
        ['pregunta' => 'Virreinato fue', 'opciones' => ['300 años', '100', '50', '500'], 'correcta' => '300 años']
    ]
];

// ========================================
// MATERIA: HISTORIA DE MÉXICO
// SUBTEMA: Independencia de México (Grito de Dolores, Morelos, Iturbide)
// ========================================
$lecciones[] = [
    'materia' => 'Historia de México',
    'slug' => 'independencia-mexico',
    'titulo' => 'Independencia de México: Grito de Dolores, Morelos e Iturbide (1810-1821)',
    'contenido' => '
        <h3>Independencia de México (1810-1821)</h3>
        <p>Movimiento armado contra España. Iniciado por <strong>Miguel Hidalgo</strong> (Grito de Dolores, 16 sep 1810). Continuado por <strong>José María Morelos</strong> (Congreso de Chilpancingo). Consumado por <strong>Agustín de Iturbide</strong> (Plan de Iguala, 1821).</p>

        <hr style="border:1px dashed #2E7D32;">

        <h4>1. Etapas de la Independencia</h4>
        <table class="table">
            <thead>
                <tr><th>Etapa</th><th>Líder</th><th>Evento Clave</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Iniciación</strong></td><td>Hidalgo</td><td>Grito de Dolores (1810)</td></tr>
                <tr><td><strong>Organización</strong></td><td>Morelos</td><td>Congreso de Chilpancingo (1813)</td></tr>
                <tr><td><strong>Resistencia</strong></td><td>Guerrero, Galeana</td><td>Guerra de guerrillas</td></tr>
                <tr><td><strong>Consumación</strong></td><td>Iturbide</td><td>Entrada a CDMX (27 sep 1821)</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #2E7D32;">

        <h4>2. Causas</h4>
        <ul>
            <li>Invasión napoleónica a España (1808).</li>
            <li>Ideas ilustradas (libertad, igualdad).</li>
            <li>Descontento criollo.</li>
            <li>Crisis económica.</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Plan de Iguala (24 feb 1821):</strong> <strong>Tres garantías</strong>: <strong>Religión</strong> (católica), <strong>Independencia</strong>, <strong>Unión</strong> (españoles y americanos).</p>
        </div>

        <div class="visual">
            <img src="assets/img/grito-dolores.jpg" alt="Grito de Dolores">
            <p><em>16 sep 1810, Dolores, Gto. Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/morelos.jpg" alt="Morelos">
            <p><em>Ejecutado 1815. Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/bandera-trigarante.svg.png" alt="Plan de Iguala">
            <p><em>Bandera trigarante. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #2E7D32;">

        <h4>3. SVG Animado: Línea del Tiempo Independencia</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#E8F5E9"/>

                <text x="400" y="50" fill="#1B5E20" font-size="28" text-anchor="middle" font-weight="bold">INDEPENDENCIA DE MÉXICO</text>

                <!-- Línea -->
                <line x1="100" y1="150" x2="700" y2="150" stroke="#43A047" stroke-width="4"/>

                <!-- Grito -->
                <g id="grito" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    <circle cx="150" cy="150" r="25" fill="#D32F2F"/>
                    <text x="150" y="115" fill="#B71C1C" font-size="14" text-anchor="middle">GRITO</text>
                    <text x="150" y="190" fill="#B71C1C" font-size="12" text-anchor="middle">16 Sep 1810</text>
                </g>

                <!-- Morelos -->
                <g id="morelos" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                    <circle cx="350" cy="150" r="25" fill="#1976D2"/>
                    <text x="350" y="115" fill="#0D47A1" font-size="14" text-anchor="middle">MORELOS</text>
                    <text x="350" y="190" fill="#0D47A1" font-size="12" text-anchor="middle">1813 Chilpancingo</text>
                </g>

                <!-- Iguala -->
                <g id="iguala" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1.5s" dur="0.5s"/>
                    <circle cx="550" cy="150" r="30" fill="#7B1FA2"/>
                    <text x="550" y="110" fill="#4A148C" font-size="14" text-anchor="middle">IGUALA</text>
                    <text x="550" y="195" fill="#4A148C" font-size="12" text-anchor="middle">24 Feb 1821</text>
                </g>

                <rect x="100" y="250" width="600" height="200" fill="#C8E6C9" rx="15"/>
                <text x="400" y="280" fill="#1B5E20" font-size="16" text-anchor="middle">Hidalgo → Morelos → Guerrero → Iturbide</text>
                <text x="400" y="310" fill="#2E7D32" font-size="14" text-anchor="middle">11 años de guerra | 600,000 muertos</text>
                <text x="400" y="340" fill="#1B5E20" font-size="12" text-anchor="middle">SI 2025: 215 años del Grito</text>
                <text x="400" y="370" fill="#2E7D32" font-size="12" text-anchor="middle">27 Sep 1821: Entrada triunfal CDMX</text>
                <text x="400" y="400" fill="#1B5E20" font-size="12" text-anchor="middle">Sentimientos de la Nación: primera constitución</text>
            </svg>
            <p><em>SVG Animado: Etapas de la lucha independentista.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Grito de Dolores', 'respuesta' => '16 septiembre 1810'],
        ['enunciado' => 'Líder inicial', 'respuesta' => 'Miguel Hidalgo'],
        ['enunciado' => 'Congreso de Chilpancingo', 'respuesta' => '1813'],
        ['enunciado' => 'Autor Sentimientos Nación', 'respuesta' => 'Morelos'],
        ['enunciado' => 'Plan de Iguala', 'respuesta' => '1821'],
        ['enunciado' => 'Tres garantías', 'respuesta' => 'Religión, independencia, unión'],
        ['enunciado' => 'Entrada CDMX', 'respuesta' => '27 septiembre 1821'],
        ['enunciado' => 'Ejecutado en 1811', 'respuesta' => 'Hidalgo'],
        ['enunciado' => 'Ejecutado en 1815', 'respuesta' => 'Morelos'],
        ['enunciado' => 'Trigarante significa', 'respuesta' => 'Tres garantías'],
        ['enunciado' => 'Causa francesa', 'respuesta' => 'Invasión napoleónica 1808'],
        ['enunciado' => 'SI: años independencia', 'respuesta' => '11']
    ],
    'quiz' => [
        ['pregunta' => 'Grito de Dolores', 'opciones' => ['16 Sep 1810', '15 Sep 1821', '20 Nov 1910', '5 May 1862'], 'correcta' => '16 Sep 1810'],
        ['pregunta' => 'Líder Grito', 'opciones' => ['Hidalgo', 'Morelos', 'Iturbide', 'Guerrero'], 'correcta' => 'Hidalgo'],
        ['pregunta' => 'Congreso Chilpancingo', 'opciones' => ['1813', '1810', '1821', '1910'], 'correcta' => '1813'],
        ['pregunta' => 'Sentimientos Nación', 'opciones' => ['Morelos', 'Hidalgo', 'Iturbide', 'Juárez'], 'correcta' => 'Morelos'],
        ['pregunta' => 'Plan de Iguala', 'opciones' => ['24 Feb 1821', '16 Sep 1810', '27 Sep 1821', '20 Nov 1910'], 'correcta' => '24 Feb 1821'],
        ['pregunta' => 'Tres garantías', 'opciones' => ['Religión, independencia, unión', 'Libertad, igualdad, fraternidad', 'Fe, esperanza, caridad', 'Nada'], 'correcta' => 'Religión, independencia, unión'],
        ['pregunta' => 'Entrada CDMX', 'opciones' => ['27 Sep 1821', '16 Sep 1810', '24 Feb 1821', '15 Sep 1821'], 'correcta' => '27 Sep 1821'],
        ['pregunta' => 'Ejecutado 1811', 'opciones' => ['Hidalgo', 'Morelos', 'Iturbide', 'Allende'], 'correcta' => 'Hidalgo'],
        ['pregunta' => 'Ejecutado 1815', 'opciones' => ['Morelos', 'Hidalgo', 'Guerrero', 'Iturbide'], 'correcta' => 'Morelos'],
        ['pregunta' => 'SI 2025: años Grito', 'opciones' => ['215', '200', '300', '100'], 'correcta' => '215'],

        ['pregunta' => 'Causa principal', 'opciones' => ['Invasión napoleónica', 'Terremoto', 'Hambre', 'Plaga'], 'correcta' => 'Invasión napoleónica'],
        ['pregunta' => 'Querétaro conspiración', 'opciones' => ['Allende, Aldama', 'Hidalgo solo', 'Morelos', 'Iturbide'], 'correcta' => 'Allende, Aldama'],
        ['pregunta' => 'Batalla Monte de las Cruces', 'opciones' => ['Victoria insurgente', 'Derrota', 'Empate', 'Paz'], 'correcta' => 'Victoria insurgente'],
        ['pregunta' => 'Guadalajara tomada', 'opciones' => ['1811', '1810', '1821', '1813'], 'correcta' => '1811'],
        ['pregunta' => 'Morelos capturado', 'opciones' => ['1815', '1811', '1821', '1810'], 'correcta' => '1815'],
        ['pregunta' => 'Ejército Trigarante', 'opciones' => ['Iturbide + Guerrero', 'Solo Iturbide', 'Solo Guerrero', 'Hidalgo'], 'correcta' => 'Iturbide + Guerrero'],
        ['pregunta' => 'Bandera trigarante', 'opciones' => ['Blanco, verde, rojo', 'Verde, blanco, rojo', 'Rojo, blanco, azul', 'Negro'], 'correcta' => 'Blanco, verde, rojo'],
        ['pregunta' => 'Tratado de Córdoba', 'opciones' => ['24 Ago 1821', '24 Feb', '27 Sep', '16 Sep'], 'correcta' => '24 Ago 1821'],
        ['pregunta' => 'Muertos estimados', 'opciones' => ['~600,000', '10,000', '1M', '100'], 'correcta' => ['~600,000']],
        ['pregunta' => 'SI 2025: años consumación', 'opciones' => ['204', '200', '215', '300'], 'correcta' => '204'],

        ['pregunta' => 'Hidalgo abolió', 'opciones' => ['Esclavitud', 'Impuestos', 'Virrey', 'Iglesia'], 'correcta' => 'Esclavitud'],
        ['pregunta' => 'Morelos propuso', 'opciones' => ['República', 'Monarquía', 'Dictadura', 'Anarquía'], 'correcta' => 'República'],
        ['pregunta' => 'Iturbide fue', 'opciones' => ['Militar realista → independentista', 'Insurgente', 'Sacerdote', 'Indígena'], 'correcta' => 'Militar realista → independentista'],
        ['pregunta' => 'Virrey al final', 'opciones' => ['Juan O\'Donojú', 'Iturbide', 'Morelos', 'Hidalgo'], 'correcta' => 'Juan O\'Donojú'],
        ['pregunta' => 'Independencia costó', 'opciones' => ['11 años', '1 año', '100 años', '1 día'], 'correcta' => '11 años'],
        ['pregunta' => 'Primera constitución', 'opciones' => ['Sentimientos Nación', 'Plan Iguala', 'Tratado Córdoba', 'Constitución 1824'], 'correcta' => 'Sentimientos Nación'],
        ['pregunta' => 'SI 2025: día feriado', 'opciones' => ['16 Sep', '15 Sep', '27 Sep', '24 Feb'], 'correcta' => '16 Sep'],
        ['pregunta' => 'Independencia fue', 'opciones' => ['Guerra civil', 'Paz', 'Revolución pacífica', 'Nada'], 'correcta' => 'Guerra civil'],
        ['pregunta' => 'México nació como', 'opciones' => ['Imperio (Iturbide)', 'República', 'Colonia', 'Virreinato'], 'correcta' => 'Imperio (Iturbide)'],
        ['pregunta' => 'Independencia inspirada en', 'opciones' => ['Ilustración + Francia', 'España', 'EE.UU.', 'Inglaterra'], 'correcta' => 'Ilustración + Francia']
    ]
];
// ========================================
// MATERIA: HISTORIA DE MÉXICO
// SUBTEMA: México Independiente (Imperio de Iturbide, República, Reforma, Porfiriato)
// ========================================
$lecciones[] = [
    'materia' => 'Historia de México',
    'slug' => 'mexico-independiente',
    'titulo' => 'México Independiente: Imperio, República, Reforma y Porfiriato (1821-1910)',
    'contenido' => '
        <h3>México Independiente (1821-1910)</h3>
        <p>Tras 300 años de virreinato, México enfrentó inestabilidad política, guerras extranjeras y profundas reformas sociales. Etapas clave:</p>

        <hr style="border:1px dashed #1B5E20;">

        <h4>1. Etapas Históricas</h4>
        <table class="table">
            <thead>
                <tr><th>Periodo</th><th>Acontecimiento</th><th>Duración</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Imperio</strong></td><td>Iturbide (Agustín I)</td><td>1822-1823</td></tr>
                <tr><td><strong>República Federal</strong></td><td>Constitución 1824</td><td>1824-1835</td></tr>
                <tr><td><strong>Centralismo</strong></td><td>7 Leyes (1836)</td><td>1835-1846</td></tr>
                <tr><td><strong>Guerra con EE.UU.</strong></td><td>Tratado Guadalupe Hidalgo</td><td>1846-1848</td></tr>
                <tr><td><strong>Reforma</strong></td><td>Juárez, Leyes de Reforma</td><td>1857-1861</td></tr>
                <tr><td><strong>Intervención Francesa</strong></td><td>Maximilian, 5 de Mayo</td><td>1862-1867</td></tr>
                <tr><td><strong>Porfiriato</strong></td><td>Díaz, "Orden y Progreso"</td><td>1876-1911</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1B5E20;">

        <h4>2. Logros y Conflictos</h4>
        <ul>
            <li><strong>Imperio:</strong> Coronación de Iturbide → derrocado por Santa Anna.</li>
            <li><strong>Reforma:</strong> Separación Iglesia-Estado, registro civil, matrimonio civil.</li>
            <li><strong>Guerra EE.UU.:</strong> Pérdida de 2.3 millones km² (California, Texas, etc.).</li>
            <li><strong>Porfiriato:</strong> Ferrocarriles, inversión extranjera, desigualdad extrema.</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Leyes de Reforma (1859):</strong> <strong>Ley Juárez</strong> (abolición fueros), <strong>Ley Lerdo</strong> (desamortización), <strong>Ley Iglesias</strong> (limita cobros parroquia).</p>
        </div>

        <div class="visual">
            <img src="assets/img/emperador-iturbide.jpg" alt="Iturbide">
            <p><em>Emperador 1822-1823. Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/juarez.jpeg" alt="Juárez">
            <p><em>Presidente 1858-1872. Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/Porfirio_Diaz.webp" alt="Díaz">
            <p><em>7 reelecciones. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #1B5E20;">

        <h4>3. SVG Animado: Etapas del México Independiente</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#E8F5E9"/>

                <text x="400" y="50" fill="#1B5E20" font-size="28" text-anchor="middle" font-weight="bold">MÉXICO INDEPENDIENTE</text>

                <!-- Imperio -->
                <g id="imperio" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    <rect x="80" y="120" width="80" height="120" fill="#FFB300" rx="15"/>
                    <text x="120" y="160" fill="#5D4037" font-size="14" text-anchor="middle">IMPERIO</text>
                    <text x="120" y="185" fill="#5D4037" font-size="12" text-anchor="middle">1822-1823</text>
                    <text x="120" y="210" fill="#5D4037" font-size="10" text-anchor="middle">Iturbide</text>
                </g>

                <!-- República -->
                <g id="republica" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                    <rect x="200" y="100" width="90" height="140" fill="#1976D2" rx="15"/>
                    <text x="245" y="140" fill="white" font-size="14" text-anchor="middle">REPÚBLICA</text>
                    <text x="245" y="165" fill="white" font-size="12" text-anchor="middle">1824</text>
                    <text x="245" y="190" fill="white" font-size="10" text-anchor="middle">Federal</text>
                    <text x="245" y="215" fill="white" font-size="10" text-anchor="middle">Guadalupe V.</text>
                </g>

                <!-- Reforma -->
                <g id="reforma" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1.5s" dur="0.5s"/>
                    <rect x="340" y="80" width="100" height="160" fill="#388E3C" rx="15"/>
                    <text x="390" y="125" fill="white" font-size="14" text-anchor="middle">REFORMA</text>
                    <text x="390" y="150" fill="white" font-size="12" text-anchor="middle">1857</text>
                    <text x="390" y="175" fill="white" font-size="10" text-anchor="middle">Juárez</text>
                    <text x="390" y="200" fill="white" font-size="10" text-anchor="middle">Leyes</text>
                </g>

                <!-- Porfiriato -->
                <g id="porfiriato" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                    <rect x="490" y="60" width="110" height="180" fill="#D32F2F" rx="15"/>
                    <text x="545" y="110" fill="white" font-size="14" text-anchor="middle">PORFIRIATO</text>
                    <text x="545" y="135" fill="white" font-size="12" text-anchor="middle">1876-1911</text>
                    <text x="545" y="160" fill="white" font-size="10" text-anchor="middle">Díaz</text>
                    <text x="545" y="185" fill="white" font-size="10" text-anchor="middle">35 años</text>
                </g>

                <rect x="100" y="280" width="600" height="160" fill="#C8E6C9" rx="15"/>
                <text x="400" y="310" fill="#1B5E20" font-size="16" text-anchor="middle">Pérdida 55% territorio | 50 gobiernos en 89 años</text>
                <text x="400" y="340" fill="#2E7D32" font-size="14" text-anchor="middle">SI 2025: 203 años de Independencia</text>
                <text x="400" y="370" fill="#1B5E20" font-size="12" text-anchor="middle">Constituciones: 1824, 1857, 1917</text>
                <text x="400" y="400" fill="#2E7D32" font-size="12" text-anchor="middle">5 de Mayo: Victoria vs Francia 1862</text>
            </svg>
            <p><em>SVG Animado: Evolución política 1821-1910.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Duración Imperio Iturbide', 'respuesta' => '1 año (1822-1823)'],
        ['enunciado' => 'Pérdida territorial 1848', 'respuesta' => '2.3 millones km²'],
        ['enunciado' => 'Autor Leyes de Reforma', 'respuesta' => 'Benito Juárez'],
        ['enunciado' => 'Duración Porfiriato', 'respuesta' => '35 años (1876-1911)'],
        ['enunciado' => 'Constitución federal', 'respuesta' => '1824'],
        ['enunciado' => 'Batalla 5 de Mayo', 'respuesta' => '1862, Puebla'],
        ['enunciado' => 'Emperador francés', 'respuesta' => 'Maximiliano'],
        ['enunciado' => 'Lema Porfiriato', 'respuesta' => 'Orden y Progreso'],
        ['enunciado' => 'Tratado final guerra EE.UU.', 'respuesta' => 'Guadalupe Hidalgo'],
        ['enunciado' => 'Ley Lerdo', 'respuesta' => 'Desamortización 1856'],
        ['enunciado' => 'Número de gobiernos 1821-1910', 'respuesta' => '~50'],
        ['enunciado' => 'SI: años República Restaurada', 'respuesta' => '1867-1876']
    ],
    'quiz' => [
        ['pregunta' => 'Primer emperador', 'opciones' => ['Iturbide', 'Santa Anna', 'Juárez', 'Díaz'], 'correcta' => 'Iturbide'],
        ['pregunta' => 'Constitución 1824', 'opciones' => ['Federal', 'Centralista', 'Imperial', 'Socialista'], 'correcta' => 'Federal'],
        ['pregunta' => 'Guerra EE.UU.', 'opciones' => ['1846-1848', '1862-1867', '1910-1920', '1810-1821'], 'correcta' => '1846-1848'],
        ['pregunta' => 'Pérdida territorial', 'opciones' => ['55%', '10%', '80%', '0%'], 'correcta' => '55%'],
        ['pregunta' => 'Leyes de Reforma', 'opciones' => ['1857-1860', '1824', '1917', '1521'], 'correcta' => '1857-1860'],
        ['pregunta' => '5 de Mayo', 'opciones' => ['1862', '1867', '1847', '1910'], 'correcta' => '1862'],
        ['pregunta' => 'Emperador ejecutado', 'opciones' => ['Maximiliano', 'Iturbide', 'Díaz', 'Juárez'], 'correcta' => 'Maximiliano'],
        ['pregunta' => 'Porfiriato inició', 'opciones' => ['1876', '1821', '1857', '1910'], 'correcta' => '1876'],
        ['pregunta' => 'Lema Díaz', 'opciones' => ['Orden y Progreso', 'Tierra y Libertad', 'Sufragio efectivo', 'Paz'], 'correcta' => 'Orden y Progreso'],
        ['pregunta' => 'SI 2025: años Independencia', 'opciones' => ['204', '200', '215', '300'], 'correcta' => '204'],

        ['pregunta' => 'Santa Anna presidente', 'opciones' => ['11 veces', '1', '2', '7'], 'correcta' => '11 veces'],
        ['pregunta' => 'Constitución 1857', 'opciones' => ['Liberal', 'Conservadora', 'Imperial', 'Social'], 'correcta' => 'Liberal'],
        ['pregunta' => 'Juárez indígena', 'opciones' => ['Zapoteco', 'Maya', 'Azteca', 'Español'], 'correcta' => 'Zapoteco'],
        ['pregunta' => 'Ferrocarriles Porfiriato', 'opciones' => ['24,000 km', '1,000', '100,000', '0'], 'correcta' => '24,000 km'],
        ['pregunta' => 'Hacienda en Porfiriato', 'opciones' => ['Latifundio', 'Ejido', 'Comunidad', 'Fábrica'], 'correcta' => 'Latifundio'],
        ['pregunta' => 'Inversión extranjera', 'opciones' => ['EE.UU., Inglaterra', 'Solo México', 'Francia', 'España'], 'correcta' => 'EE.UU., Inglaterra'],
        ['pregunta' => 'Batalla de Puebla', 'opciones' => ['Victoria mexicana', 'Derrota', 'Empate', 'No ocurrió'], 'correcta' => 'Victoria mexicana'],
        ['pregunta' => 'Tratado McLane-Ocampo', 'opciones' => ['1859 (no ratificado)', '1848', '1821', '1917'], 'correcta' => '1859 (no ratificado)'],
        ['pregunta' => 'República Restaurada', 'opciones' => ['1867-1876', '1824-1835', '1911-1917', '1857'], 'correcta' => '1867-1876'],
        ['pregunta' => 'SI 2025: estados en 1824', 'opciones' => ['19', '31', '32', '24'], 'correcta' => '19'],

        ['pregunta' => 'Grito de Dolores', 'opciones' => ['1810', '1821', '1910', '1857'], 'correcta' => '1810'],
        ['pregunta' => 'Plan de Iguala', 'opciones' => ['1821', '1810', '1911', '1857'], 'correcta' => '1821'],
        ['pregunta' => 'Texas se independizó', 'opciones' => ['1836', '1821', '1845', '1910'], 'correcta' => '1836'],
        ['pregunta' => 'Gadsden Purchase', 'opciones' => ['1853', '1848', '1821', '1917'], 'correcta' => '1853'],
        ['pregunta' => 'Intervención francesa', 'opciones' => ['1862-1867', '1846-1848', '1910-1920', '1810-1821'], 'correcta' => '1862-1867'],
        ['pregunta' => 'Ejecutado en Querétaro', 'opciones' => ['Maximiliano', 'Iturbide', 'Díaz', 'Madero'], 'correcta' => 'Maximiliano'],
        ['pregunta' => 'Porfiriato terminó', 'opciones' => ['1911', '1910', '1920', '1876'], 'correcta' => '1911'],
        ['pregunta' => 'Científicos', 'opciones' => ['Asesores Díaz', 'Revolucionarios', 'Indígenas', 'Sacerdotes'], 'correcta' => 'Asesores Díaz'],
        ['pregunta' => 'SI 2025: años Reforma', 'opciones' => ['168', '200', '100', '50'], 'correcta' => '168'],
        ['pregunta' => 'México 1910', 'opciones' => ['Centenario + Revolución', 'Independencia', 'Reforma', 'Nada'], 'correcta' => 'Centenario + Revolución']
    ]
];

// ========================================
// MATERIA: HISTORIA DE MÉXICO
// SUBTEMA: Revolución Mexicana (Madero, Villa, Zapata, Constitución 1917)
// ========================================
$lecciones[] = [
    'materia' => 'Historia de México',
    'slug' => 'revolucion-mexicana',
    'titulo' => 'Revolución Mexicana: Madero, Villa, Zapata y Constitución de 1917 (1910-1920)',
    'contenido' => '
        <h3>Revolución Mexicana (1910-1920)</h3>
        <p>Levantamiento contra la dictadura de Porfirio Díaz. <strong>Madero</strong> ("Sufragio efectivo, no reelección"), <strong>Zapata</strong> (tierra), <strong>Villa</strong> (norte). Culminó con <strong>Constitución de 1917</strong>: derechos laborales, educación laica, ejidos.</p>

        <hr style="border:1px dashed #D32F2F;">

        <h4>1. Facciones y Líderes</h4>
        <table class="table">
            <thead>
                <tr><th>Líder</th><th>Lema</th><th>Región</th><th>Destino</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Madero</strong></td><td>Sufragio efectivo</td><td>Coahuila</td><td>Asesinado 1913</td></tr>
                <tr><td><strong>Zapata</strong></td><td>Tierra y Libertad</td><td>Morelos</td><td>Asesinado 1919</td></tr>
                <tr><td><strong>Villa</strong></td><td>Justicia social</td><td>Chihuahua</td><td>Asesinado 1923</td></tr>
                <tr><td><strong>Carranza</strong></td><td>Constitucionalismo</td><td>Coahuila</td><td>Asesinado 1920</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #D32F2F;">

        <h4>2. Logros de la Constitución 1917</h4>
        <ul>
            <li><strong>Art. 3:</strong> Educación laica, gratuita, obligatoria.</li>
            <li><strong>Art. 27:</strong> Nación dueña subsuelo, ejidos, reforma agraria.</li>
            <li><strong>Art. 123:</strong> Jornada 8 horas, derecho huelga, salario mínimo.</li>
        </ul>

        <div class="ejemplo">
            <p><strong>Plan de Ayala (28 nov 1911):</strong> Zapata exige <strong>restitución de tierras</strong> a pueblos, <strong>expropiación</strong> a hacendados, <strong>muerte a traidores</strong>.</p>
        </div>

        <div class="visual">
            <img src="assets/img/madero-presidente.jpg" alt="Madero">
            <p><em>Presidente 1911-1913. Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/zapata-plan-ayala.jpg" alt="Zapata">
            <p><em>Plan de Ayala. Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/1917.png" alt="Constitución 1917">
            <p><em>5 feb 1917, Querétaro. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #D32F2F;">

        <h4>3. SVG Animado: Líderes y Constitución</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#FFEBEE"/>

                <text x="400" y="50" fill="#B71C1C" font-size="28" text-anchor="middle" font-weight="bold">REVOLUCIÓN MEXICANA</text>

                <!-- Madero -->
                <g id="madero" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    <circle cx="200" cy="150" r="50" fill="#1976D2"/>
                    <text x="200" y="155" fill="white" font-size="14" text-anchor="middle">MADERO</text>
                    <text x="200" y="180" fill="#0D47A1" font-size="10" text-anchor="middle">1910-1913</text>
                </g>

                <!-- Villa -->
                <g id="villa" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                    <circle cx="400" cy="120" r="45" fill="#D32F2F"/>
                    <text x="400" y="125" fill="white" font-size="14" text-anchor="middle">VILLA</text>
                    <text x="400" y="150" fill="#B71C1C" font-size="10" text-anchor="middle">Norte</text>
                </g>

                <!-- Zapata -->
                <g id="zapata" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1.5s" dur="0.5s"/>
                    <circle cx="400" cy="220" r="45" fill="#388E3C"/>
                    <text x="400" y="225" fill="white" font-size="14" text-anchor="middle">ZAPATA</text>
                    <text x="400" y="250" fill="#1B5E20" font-size="10" text-anchor="middle">Sur</text>
                </g>

                <!-- Constitución -->
                <g id="constitucion" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                    <rect x="520" y="130" width="120" height="100" fill="#7B1FA2" rx="15"/>
                    <text x="580" y="165" fill="white" font-size="14" text-anchor="middle">CONST. 1917</text>
                    <text x="580" y="190" fill="white" font-size="10" text-anchor="middle">Art. 3, 27, 123</text>
                </g>

                <!-- Conexiones -->
                <line x1="250" y1="150" x2="355" y2="120" stroke="#1976D2" stroke-width="3"/>
                <line x1="250" y1="150" x2="355" y2="220" stroke="#1976D2" stroke-width="3"/>
                <line x1="445" y1="120" x2="520" y2="180" stroke="#D32F2F" stroke-width="3"/>
                <line x1="445" y1="220" x2="520" y2="180" stroke="#388E3C" stroke-width="3"/>

                <rect x="100" y="300" width="600" height="140" fill="#FFCDD2" rx="15"/>
                <text x="400" y="330" fill="#B71C1C" font-size="16" text-anchor="middle">10 años | 1.5M muertos | 90% población rural</text>
                <text x="400" y="360" fill="#C62828" font-size="14" text-anchor="middle">SI 2025: 115 años del inicio</text>
                <text x="400" y="390" fill="#B71C1C" font-size="12" text-anchor="middle">20M hectáreas repartidas (1915-1940)</text>
                <text x="400" y="415" fill="#C62828" font-size="12" text-anchor="middle">Muralismo: Rivera, Orozco, Siqueiros</text>
            </svg>
            <p><em>SVG Animado: Líderes y legado revolucionario.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Derrocó a Díaz', 'respuesta' => 'Madero'],
        ['enunciado' => 'Lema de Zapata', 'respuesta' => 'Tierra y Libertad'],
        ['enunciado' => 'Constitución promulgada', 'respuesta' => '5 febrero 1917'],
        ['enunciado' => 'Artículo educación laica', 'respuesta' => 'Artículo 3'],
        ['enunciado' => 'Plan de Ayala', 'respuesta' => '1911'],
        ['enunciado' => 'Asesinato Madero', 'respuesta' => '1913 (Decena Trágica)'],
        ['enunciado' => 'Villa región', 'respuesta' => 'Norte (Chihuahua)'],
        ['enunciado' => 'Artículo 27', 'respuesta' => 'Nación dueña subsuelo'],
        ['enunciado' => 'Jornada laboral', 'respuesta' => '8 horas (Art. 123)'],
        ['enunciado' => 'Convención de Aguascalientes', 'respuesta' => '1914'],
        ['enunciado' => 'Muertos estimados', 'respuesta' => '~1.5 millones'],
        ['enunciado' => 'SI: años Constitución', 'respuesta' => '108']
    ],
    'quiz' => [
        ['pregunta' => 'Inicio Revolución', 'opciones' => ['1910', '1821', '1857', '1920'], 'correcta' => '1910'],
        ['pregunta' => 'Líder inicial', 'opciones' => ['Madero', 'Villa', 'Zapata', 'Carranza'], 'correcta' => 'Madero'],
        ['pregunta' => 'Lema Zapata', 'opciones' => ['Tierra y Libertad', 'No reelección', 'Orden y Progreso', 'Paz'], 'correcta' => 'Tierra y Libertad'],
        ['pregunta' => 'Constitución', 'opciones' => ['1917', '1824', '1857', '1910'], 'correcta' => '1917'],
        ['pregunta' => 'Art. 3', 'opciones' => ['Educación laica', 'Tierra', 'Trabajo', 'Subsuelo'], 'correcta' => 'Educación laica'],
        ['pregunta' => 'Art. 27', 'opciones' => ['Nación dueña subsuelo', 'Educación', 'Trabajo', 'Huelga'], 'correcta' => 'Nación dueña subsuelo'],
        ['pregunta' => 'Art. 123', 'opciones' => ['Derechos laborales', 'Educación', 'Tierra', 'Religión'], 'correcta' => 'Derechos laborales'],
        ['pregunta' => 'Madero asesinado', 'opciones' => ['1913', '1910', '1917', '1920'], 'correcta' => '1913'],
        ['pregunta' => 'Zapata asesinado', 'opciones' => ['1919', '1913', '1923', '1920'], 'correcta' => '1919'],
        ['pregunta' => 'SI 2025: años Revolución', 'opciones' => ['115', '100', '200', '50'], 'correcta' => '115'],

        ['pregunta' => 'Plan de San Luis', 'opciones' => ['Madero 1910', 'Zapata 1911', 'Villa 1913', 'Carranza 1913'], 'correcta' => 'Madero 1910'],
        ['pregunta' => 'Decena Trágica', 'opciones' => ['1913', '1910', '1917', '1919'], 'correcta' => '1913'],
        ['pregunta' => 'Huerta presidente', 'opciones' => ['1913-1914', '1911-1913', '1917-1920', '1920-1924'], 'correcta' => '1913-1914'],
        ['pregunta' => 'Batalla de Zacatecas', 'opciones' => ['Villa 1914', 'Zapata 1911', 'Madero 1911', 'Carranza 1915'], 'correcta' => 'Villa 1914'],
        ['pregunta' => 'Convención Aguascalientes', 'opciones' => ['1914', '1910', '1917', '1920'], 'correcta' => '1914'],
        ['pregunta' => 'Carranza presidente', 'opciones' => ['1917-1920', '1911-1913', '1913-1914', '1920-1924'], 'correcta' => '1917-1920'],
        ['pregunta' => 'Obregón presidente', 'opciones' => ['1920-1924', '1917-1920', '1913-1914', '1911-1913'], 'correcta' => '1920-1924'],
        ['pregunta' => 'Hectáreas repartidas', 'opciones' => ['~20M (1915-1940)', '1M', '100M', '0'], 'correcta' => '~20M (1915-1940)'],
        ['pregunta' => 'Muralismo', 'opciones' => ['Rivera, Orozco', 'Picasso', 'Dalí', 'Van Gogh'], 'correcta' => 'Rivera, Orozco'],
        ['pregunta' => 'SI 2025: ejidos activos', 'opciones' => ['~30,000', '100', '1M', '0'], 'correcta' => '~30,000'],

        ['pregunta' => 'Tierra y Libertad', 'opciones' => ['Plan de Ayala', 'Plan de San Luis', 'Plan de Guadalupe', 'Constitución'], 'correcta' => 'Plan de Ayala'],
        ['pregunta' => 'División del Norte', 'opciones' => ['Villa', 'Zapata', 'Madero', 'Carranza'], 'correcta' => 'Villa'],
        ['pregunta' => 'Ejército Libertador Sur', 'opciones' => ['Zapata', 'Villa', 'Madero', 'Obregón'], 'correcta' => 'Zapata'],
        ['pregunta' => 'Constituyente en', 'opciones' => ['Querétaro', 'CDMX', 'Guadalajara', 'Monterrey'], 'correcta' => 'Querétaro'],
        ['pregunta' => '5 de febrero', 'opciones' => ['1917', '1910', '1920', '1810'], 'correcta' => '1917'],
        ['pregunta' => 'Cristeros', 'opciones' => ['1926-1929', '1910-1920', '1857', '1867'], 'correcta' => '1926-1929'],
        ['pregunta' => 'Calles presidente', 'opciones' => ['1924-1928', '1920-1924', '1917-1920', '1913-1914'], 'correcta' => '1924-1928'],
        ['pregunta' => 'PNR fundado', 'opciones' => ['1929', '1917', '1910', '1946'], 'correcta' => '1929'],
        ['pregunta' => 'SI 2025: años Constitución', 'opciones' => ['108', '100', '115', '200'], 'correcta' => '108'],
        ['pregunta' => 'Revolución fue', 'opciones' => ['Social y agraria', 'Solo política', 'Industrial', 'Religiosa'], 'correcta' => 'Social y agraria']
    ]
];
// ========================================
// MATERIA: HISTORIA DE MÉXICO
// SUBTEMA: México Contemporáneo (Cardenismo, Milagro Mexicano, 1968, 2000)
// ========================================
$lecciones[] = [
    'materia' => 'Historia de México',
    'slug' => 'mexico-contemporaneo',
    'titulo' => 'México Contemporáneo: Cardenismo, Milagro Mexicano, 1968 y Alternancia 2000 (1934-2000)',
    'contenido' => '
        <h3>México Contemporáneo (1934-2000)</h3>
        <p>Etapa posrevolucionaria: <strong>Cardenismo</strong> (reforma agraria, nacionalismo), <strong>Milagro Mexicano</strong> (crecimiento 6% anual), <strong>68</strong> (represión estudiantil), <strong>2000</strong> (fin del PRI hegemónico).</p>

        <hr style="border:1px dashed #2E7D32;">

        <h4>1. Hitos Clave</h4>
        <table class="table">
            <thead>
                <tr><th>Año</th><th>Evento</th><th>Impacto</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>1938</strong></td><td>Expropiación petrolera</td><td>Nace PEMEX</td></tr>
                <tr><td><strong>1940-1970</strong></td><td>Milagro Mexicano</td><td>Industrialización, PIB ↑6%</td></tr>
                <tr><td><strong>1968</strong></td><td>Tlatelolco</td><td>~300 muertos, censura</td></tr>
                <tr><td><strong>2000</strong></td><td>Fox gana</td><td>Alternancia democrática</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #2E7D32;">

        <h4>2. Legado</h4>
        <ul>
            <li><strong>Cardenismo:</strong> 18M hectáreas repartidas, sindicatos fuertes.</li>
            <li><strong>Milagro:</strong> Urbanización, clase media, carreteras.</li>
            <li><strong>68:</strong> Despertar político, fin del "desarrollo estabilizador".</li>
            <li><strong>2000:</strong> INE, transparencia, multipartidismo.</li>
        </ul>

        <div class="ejemplo">
            <p><strong>18 de marzo 1938:</strong> Cárdenas anuncia expropiación. <strong>17 empresas extranjeras</strong> → <strong>PEMEX</strong>. Apoyo popular masivo.</p>
        </div>

        <div class="visual">
            <img src="assets/img/lazaro.jpg" alt="Lázaro Cárdenas">
            <p><em>Presidente 1934-1940. Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/tlatelolco.jpg" alt="Tlatelolco 1968">
            <p><em>2 oct 1968. Fuente: Wikipedia.</em></p>
        </div>

        <div class="visual">
            <img src="/assets/img/vicente-fox.jpeg" alt="Vicente Fox">
            <p><em>PAN gana en 2000. Fuente: Wikipedia.</em></p>
        </div>

        <hr style="border:1px dashed #2E7D32;">

        <h4>3. SVG Animado: Hitos del México Contemporáneo</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="800" height="500" fill="#E8F5E9"/>

                <text x="400" y="50" fill="#1B5E20" font-size="28" text-anchor="middle" font-weight="bold">MÉXICO CONTEMPORÁNEO</text>

                <!-- PEMEX -->
                <g id="pemex" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s"/>
                    <circle cx="150" cy="150" r="30" fill="#43A047"/>
                    <text x="150" y="130" fill="#1B5E20" font-size="14" text-anchor="middle">PEMEX</text>
                    <text x="150" y="175" fill="#1B5E20" font-size="12" text-anchor="middle">18 Mar 1938</text>
                </g>

                <!-- Milagro -->
                <g id="milagro" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s"/>
                    <rect x="250" y="100" width="140" height="100" fill="#1976D2" rx="15"/>
                    <text x="320" y="135" fill="white" font-size="14" text-anchor="middle">MILAGRO</text>
                    <text x="320" y="160" fill="white" font-size="12" text-anchor="middle">1940-1970</text>
                    <text x="320" y="185" fill="white" font-size="10" text-anchor="middle">6% anual</text>
                </g>

                <!-- Tlatelolco -->
                <g id="tlatelolco" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1.5s" dur="0.5s"/>
                    <circle cx="500" cy="150" r="35" fill="#D32F2F"/>
                    <text x="500" y="125" fill="#B71C1C" font-size="14" text-anchor="middle">TLATELOLCO</text>
                    <text x="500" y="180" fill="#B71C1C" font-size="12" text-anchor="middle">2 Oct 1968</text>
                </g>

                <!-- Alternancia -->
                <g id="alternancia" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s"/>
                    <rect x="600" y="110" width="120" height="80" fill="#7B1FA2" rx="15"/>
                    <text x="660" y="140" fill="white" font-size="14" text-anchor="middle">2000</text>
                    <text x="660" y="165" fill="white" font-size="12" text-anchor="middle">FOX (PAN)</text>
                </g>

                <rect x="100" y="250" width="600" height="200" fill="#C8E6C9" rx="15"/>
                <text x="400" y="280" fill="#1B5E20" font-size="16" text-anchor="middle">18M ha repartidas | 6% PIB | ~300 muertos | 71 años PRI</text>
                <text x="400" y="310" fill="#2E7D32" font-size="14" text-anchor="middle">SI 2025: 87 años de PEMEX</text>
                <text x="400" y="340" fill="#1B5E20" font-size="12" text-anchor="middle">INEGI: población 1940: 20M → 1970: 50M</text>
                <text x="400" y="370" fill="#2E7D32" font-size="12" text-anchor="middle">2000: 58% votó, PRI 36%</text>
                <text x="400" y="400" fill="#1B5E20" font-size="12" text-anchor="middle">IFE → INE (2014)</text>
                <text x="400" y="425" fill="#2E7D32" font-size="12" text-anchor="middle">68: apertura política lenta</text>
            </svg>
            <p><em>SVG Animado: De la nacionalización a la democracia.</em></p>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Expropiación petrolera', 'respuesta' => '18 marzo 1938'],
        ['enunciado' => 'Presidente Cardenismo', 'respuesta' => 'Lázaro Cárdenas'],
        ['enunciado' => 'Milagro Mexicano', 'respuesta' => '1940-1970'],
        ['enunciado' => 'Crecimiento anual promedio', 'respuesta' => '~6%'],
        ['enunciado' => 'Masacre estudiantil', 'respuesta' => '2 octubre 1968'],
        ['enunciado' => 'Lugar de Tlatelolco', 'respuesta' => 'CDMX'],
        ['enunciado' => 'Primer presidente no PRI', 'respuesta' => 'Vicente Fox'],
        ['enunciado' => 'Partido de Fox', 'respuesta' => 'PAN'],
        ['enunciado' => 'Hectáreas repartidas Cárdenas', 'respuesta' => '18 millones'],
        ['enunciado' => 'Empresa creada 1938', 'respuesta' => 'PEMEX'],
        ['enunciado' => 'Población 1970', 'respuesta' => '~50 millones'],
        ['enunciado' => 'SI: años alternancia', 'respuesta' => '25']
    ],
    'quiz' => [
        ['pregunta' => 'Expropiación', 'opciones' => ['1938', '1917', '1968', '2000'], 'correcta' => '1938'],
        ['pregunta' => 'Cárdenas repartió', 'opciones' => ['18M ha', '1M', '100M', '0'], 'correcta' => '18M ha'],
        ['pregunta' => 'Milagro Mexicano', 'opciones' => ['1940-1970', '1930-1940', '1970-2000', '2000-2025'], 'correcta' => '1940-1970'],
        ['pregunta' => 'Crecimiento PIB', 'opciones' => ['~6%', '1%', '10%', '0%'], 'correcta' => '~6%'],
        ['pregunta' => 'Tlatelolco', 'opciones' => ['2 Oct 1968', '18 Mar 1938', '2 Jul 2000', '5 Feb 1917'], 'correcta' => '2 Oct 1968'],
        ['pregunta' => 'Muertos 68', 'opciones' => ['~300', '30', '3,000', '0'], 'correcta' => '~300'],
        ['pregunta' => 'Alternancia', 'opciones' => ['2000', '1968', '1938', '1910'], 'correcta' => '2000'],
        ['pregunta' => 'Fox partido', 'opciones' => ['PAN', 'PRI', 'PRD', 'MORENA'], 'correcta' => 'PAN'],
        ['pregunta' => 'PEMEX significa', 'opciones' => ['Petróleos Mexicanos', 'Poder Ejecutivo', 'Partido Mexicano', 'Nada'], 'correcta' => 'Petróleos Mexicanos'],
        ['pregunta' => 'SI 2025: años PEMEX', 'opciones' => ['87', '100', '50', '25'], 'correcta' => '87'],

        ['pregunta' => 'Cárdenas creó', 'opciones' => ['PEMEX', 'INE', 'CFE', 'IMSS'], 'correcta' => 'PEMEX'],
        ['pregunta' => 'Milagro basado en', 'opciones' => ['ISI', 'Neoliberalismo', 'Comunismo', 'Nada'], 'correcta' => 'ISI'],
        ['pregunta' => '68 antes de', 'opciones' => ['Juegos Olímpicos', 'Mundial 70', 'Independencia', 'Reforma'], 'correcta' => 'Juegos Olímpicos'],
        ['pregunta' => 'PRI gobernó', 'opciones' => ['71 años', '20', '100', '10'], 'correcta' => '71 años'],
        ['pregunta' => '2000 votación', 'opciones' => ['58%', '30%', '80%', '10%'], 'correcta' => '58%'],
        ['pregunta' => 'IFE fundado', 'opciones' => ['1990', '1938', '1968', '2000'], 'correcta' => '1990'],
        ['pregunta' => 'INE desde', 'opciones' => ['2014', '2000', '1990', '1968'], 'correcta' => '2014'],
        ['pregunta' => 'Población 1940', 'opciones' => ['~20M', '50M', '100M', '10M'], 'correcta' => '~20M'],
        ['pregunta' => 'Población 1970', 'opciones' => ['~50M', '20M', '100M', '10M'], 'correcta' => '~50M'],
        ['pregunta' => 'SI 2025: años Tlatelolco', 'opciones' => ['57', '50', '60', '70'], 'correcta' => '57'],

        ['pregunta' => 'Cárdenas sindicato', 'opciones' => ['CTM', 'SNTMMRM', 'SNTE', 'CFE'], 'correcta' => 'CTM'],
        ['pregunta' => 'Milagro terminó con', 'opciones' => ['Crisis 1970s', '68', '2000', '1938'], 'correcta' => 'Crisis 1970s'],
        ['pregunta' => '68 líder estudiantil', 'opciones' => ['CNH', 'PRI', 'PAN', 'UNAM'], 'correcta' => 'CNH'],
        ['pregunta' => '2000 candidato PRI', 'opciones' => ['Labastida', 'Fox', 'Cárdenas', 'Madrazo'], 'correcta' => 'Labastida'],
        ['pregunta' => 'Fox campaña', 'opciones' => ['¡Ya!', 'Sí se puede', 'Vive México', 'Cambio'], 'correcta' => '¡Ya!'],
        ['pregunta' => 'PEMEX exporta', 'opciones' => ['Crudo', 'Gasolina', 'Electricidad', 'Nada'], 'correcta' => 'Crudo'],
        ['pregunta' => 'Milagro: carreteras', 'opciones' => ['15,000 km', '1,000', '100,000', '0'], 'correcta' => '15,000 km'],
        ['pregunta' => '68: Batallón Olimpia', 'opciones' => ['Represión', 'Deporte', 'Paz', 'Nada'], 'correcta' => 'Represión'],
        ['pregunta' => 'SI 2025: alternancia', 'opciones' => ['25 años', '10', '50', '71'], 'correcta' => '25 años'],
        ['pregunta' => 'México 2000', 'opciones' => ['Democracia plena', 'Dictadura', 'Monarquía', 'Colonia'], 'correcta' => 'Democracia plena']
    ]
];
// ========================================
// MATERIA: PROGRAMACIÓN
// SUBTEMA: Bases de Datos Relacionales (SQL, Relaciones, Conceptos, Ejercicios)
// ========================================
$lecciones[] = [
    'materia' => 'Programación',
    'slug' => 'bases-datos-relacionales',
    'titulo' => 'Bases de Datos Relacionales: SQL, Relaciones, Normalización y Simuladores Interactivos',
    'contenido' => '
        <h3>Bases de Datos Relacionales: El Poder de SQL</h3>
        <p>Organizan datos en <strong>tablas</strong> relacionadas mediante <strong>claves</strong>. SQL permite <strong>crear, leer, actualizar y eliminar</strong> datos (CRUD). Conceptos clave: <strong>PK</strong> (única), <strong>FK</strong> (referencia), <strong>relaciones</strong> (1:1, 1:N, N:N), <strong>normalización</strong> (1NF-3NF), <strong>JOIN</strong>.</p>

        <hr style="border:1px dashed #1976D2;">

        <h4>1. Estructura de Tablas</h4>
        <table class="table">
            <thead>
                <tr><th>Concepto</th><th>Descripción</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Tabla</strong></td><td>Conjunto de filas y columnas</td><td><code>usuarios</code></td></tr>
                <tr><td><strong>PK</strong></td><td>Clave primaria (única)</td><td><code>id INT PRIMARY KEY</code></td></tr>
                <tr><td><strong>FK</strong></td><td>Clave extranjera</td><td><code>user_id INT REFERENCES usuarios(id)</code></td></tr>
                <tr><td><strong>Relación 1:N</strong></td><td>Un usuario → muchos pedidos</td><td>FK en <code>pedidos</code></td></tr>
                <tr><td><strong>Relación N:N</strong></td><td>Tabla intermedia</td><td><code>usuarios_productos</code></td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #1976D2;">

        <h4>2. Simulador SQL Interactivo (Ahora SÍ es épico)</h4>
<div class="simulador-sql">
    <p><strong>Prueba tu SQL en tiempo real (soporta SELECT, WHERE, JOIN, ORDER BY, LIMIT):</strong></p>
    <div class="sql-editor">
        <textarea id="sql-input" placeholder="Escribe tu consulta SQL aquí...
Ejemplos:
SELECT * FROM usuarios;
SELECT nombre FROM usuarios WHERE id = 1;
SELECT u.nombre, p.producto FROM usuarios u JOIN pedidos p ON u.id = p.usuario_id;" rows="6">SELECT * FROM usuarios;</textarea>
        <div class="sql-buttons">
            <button class="btn-small btn-play" onclick="ejecutarSQL()">Ejecutar</button>
            <button class="btn-small btn-repeat" onclick="limpiarSQL()">Limpiar</button>
        </div>
    </div>
    <div id="sql-output" class="sql-result"></div>
    
    <script>
        const db = {
            usuarios: [
                {id: 1, nombre: "Ana", email: "ana@mail.com"},
                {id: 2, nombre: "Luis", email: "luis@mail.com"},
                {id: 3, nombre: "María", email: "maria@mail.com"}
            ],
            pedidos: [
                {id: 101, usuario_id: 1, producto: "Laptop", precio: 15000},
                {id: 102, usuario_id: 1, producto: "Mouse", precio: 250},
                {id: 103, usuario_id: 2, producto: "Teclado", precio: 800},
                {id: 104, usuario_id: 3, producto: "Monitor", precio: 5000}
            ]
        };

        function ejecutarSQL() {
            let query = document.getElementById("sql-input").value.trim();
            const output = document.getElementById("sql-output");
            output.innerHTML = "";

            if (!query) {
                mostrarError("Escribe una consulta SQL");
                return;
            }

            query = query.toUpperCase().replace(/;.*/g, ""); // Quita todo después de ;

            try {
                let resultado = [];

                // SELECT * FROM tabla
                if (/^SELECT\s+\*\s+FROM\s+(USUARIOS|PEDIDOS)/i.test(query)) {
                    const tabla = query.includes("USUARIOS") ? "usuarios" : "pedidos";
                    resultado = db[tabla];

                // SELECT columnas FROM tabla
                } else if (/^SELECT\s+(.+?)\s+FROM\s+(USUARIOS|PEDIDOS)/i.test(query)) {
                    const match = query.match(/^SELECT\s+(.+?)\s+FROM\s+(USUARIOS|PEDIDOS)/i);
                    const columnas = match[1].split(",").map(c => c.trim().toLowerCase());
                    const tabla = match[2].toLowerCase();
                    resultado = db[tabla].map(row => {
                        let obj = {};
                        columnas.forEach(col => obj[col] = row[col] || null);
                        return obj;
                    });

                // JOIN básico
                } else if (query.includes("JOIN")) {
                    resultado = db.pedidos.map(p => {
                        const u = db.usuarios.find(u => u.id === p.usuario_id);
                        return {
                            nombre: u?.nombre || "Desconocido",
                            email: u?.email || "-",
                            producto: p.producto,
                            precio: p.precio
                        };
                    });

                // WHERE simple
                } else if (query.includes("WHERE")) {
                    if (query.includes("USUARIOS")) {
                        const id = parseInt(query.match(/ID\s*=\s*(\d+)/i)?.[1]);
                        resultado = db.usuarios.filter(u => u.id === id);
                    }
                }

                // ORDER BY y LIMIT
                if (query.includes("ORDER BY") && resultado.length > 0) {
                    const orden = query.includes("DESC") ? -1 : 1;
                    resultado.sort((a, b) => (a[Object.keys(a)[0]] > b[Object.keys(a)[0]] ? orden : -orden));
                }
                if (query.includes("LIMIT")) {
                    const limite = parseInt(query.match(/LIMIT\s+(\d+)/i)?.[1]) || 10;
                    resultado = resultado.slice(0, limite);
                }

                if (resultado.length === 0) {
                    mostrarInfo("Consulta válida, pero no hay resultados");
                } else {
                    mostrarTabla(resultado);
                }

            } catch (e) {
                mostrarError("Error de sintaxis SQL o consulta no soportada aún");
            }
        }

        function mostrarTabla(data) {
            if (data.length === 0) return;
            let cols = Object.keys(data[0]);
            let html = `<table class="sql-table"><thead><tr>`;
            cols.forEach(c => html += `<th>${c.toUpperCase()}</th>`);
            html += `</tr></thead><tbody>`;
            data.forEach(row => {
                html += "<tr>";
                cols.forEach(c => html += `<td>${row[c] !== undefined ? row[c] : ""}</td>`);
                html += "</tr>";
            });
            html += "</tbody></table>";
            document.getElementById("sql-output").innerHTML = html;
        }

        function mostrarError(msg) {
            document.getElementById("sql-output").innerHTML = 
                `<p class="sql-error">ERROR: ${msg}</p>`;
        }
        function mostrarInfo(msg) {
            document.getElementById("sql-output").innerHTML = 
                `<p class="sql-info">${msg}</p>`;
        }
        function limpiarSQL() {
            document.getElementById("sql-input").value = "SELECT * FROM usuarios;";
            document.getElementById("sql-output").innerHTML = "";
        }
    </script>
        <p><em>Tip: Prueba JOIN, WHERE id=1, ORDER BY precio DESC, LIMIT 2...</em></p>
    </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Reto de Código: Crea tu BD</h4>
        <div class="reto-codigo">
            <p><strong>Desafío:</strong> Escribe el SQL para crear estas tablas relacionadas:</p>
            <ul>
                <li><code>clientes (id, nombre, email)</code></li>
                <li><code>facturas (id, cliente_id, total, fecha)</code> → Relación 1:N</li>
            </ul>
            <details>
                <summary>Ver solución</summary>
                <pre><code>
CREATE TABLE clientes (
    id INT PRIMARY KEY AUTO_INCREMENT,
    nombre VARCHAR(100),
    email VARCHAR(100) UNIQUE
);

CREATE TABLE facturas (
    id INT PRIMARY KEY AUTO_INCREMENT,
    cliente_id INT,
    total DECIMAL(10,2),
    fecha DATE,
    FOREIGN KEY (cliente_id) REFERENCES clientes(id)
);
                </code></pre>
            </details>
        </div>

        <div class="visual">
            <img src="assets/img/diagrama-er.PNG" alt="Diagrama ER">
            <p><em>Diagrama de Entidad-Relación. Fuente: Datensen.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/diagrama-sql-server.png" alt="Diagrama SSMS">
            <p><em>Diagrama en SQL Server. Fuente: Dataedo.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. Diagrama ER Animado (Relación 1:N)</h4>
    <div class="svg-diagram">
        <svg viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg" class="er-diagram">
            <defs>
                <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="#0a0022"/>
                    <stop offset="100%" stop-color="#000011"/>
                </linearGradient>
                <marker id="arrow" markerWidth="12" markerHeight="12" refX="10" refY="3" orient="auto">
                    <path d="M0,0 L0,6 L10,3 z" fill="#00ffff"/>
                </marker>
            </defs>

            <rect width="900" height="600" fill="url(#bgGrad)"/>

            <g transform="translate(100,150)">
                <rect width="250" height="180" rx="20" fill="#2196F3" stroke="#00ffff" stroke-width="4"/>
                <text x="125"Y y="40" fill="#fff" font-family="\'Press Start 2P\'" font-size="18" text-anchor="middle">USUARIOS</text>
                <text x="125" y="80" fill="#BBDEFB" font-size="14" text-anchor="middle">id (PK)</text>
                <text x="125" y="110" fill="#BBDEFB" font-size="14" text-anchor="middle">nombre</text>
                <text x="125" y="140" fill="#BBDEFB" font-size="14" text-anchor="middle">email</text>
                <animate attributeName="opacity" from="0" to="1" dur="0.8s" begin="0.2s" fill="freeze"/>
            </g>

            <g transform="translate(550,150)">
                <rect width="250" height="220" rx="20" fill="#4CAF50" stroke="#00ff00" stroke-width="4"/>
                <text x="125" y="40" fill="#fff" font-family="\'Press Start 2P\'" font-size="18" text-anchor="middle">PEDIDOS</text>
                <text x="125" y="80" fill="#C8E6C9" font-size="14" text-anchor="middle">id (PK)</text>
                <text x="125" y="110" fill="#C8E6C9" font-size="14" text-anchor="middle">usuario_id (FK)</text>
                <text x="125" y="140" fill="#C8E6C9" font-size="14" text-anchor="middle">producto</text>
                <text x="125" y="170" fill="#C8E6C9" font-size="14" text-anchor="middle">precio</text>
                <animate attributeName="opacity" from="0" to="1" dur="0.8s" begin="0.8s" fill="freeze"/>
            </g>

            <path d="M350,240 Q450,240 450,240 Q550,240 550,240" fill="none" stroke="#00ffff" stroke-width="6" marker-end="url(#arrow)">
                <animate attributeName="stroke-dashoffset" from="1000" to="0" dur="2s" begin="1.5s" fill="freeze"/>
                <set attributeName="stroke-dasharray" to="10,10" begin="1.5s"/>
            </path>

            <text x="450" y="200" fill="#ff00ff" font-family="\'Press Start 2P\'" font-size="24" text-anchor="middle">
                <tspan>1</tspan><tspan fill="#00ffff">:</tspan><tspan>N</tspan>
            </text>

            <text x="450" y="500" fill="#00ff00" font-size="20" text-anchor="middle" font-family="\'Press Start 2P\'">UN USUARIO → MUCHOS PEDIDOS</text>
            <text x="450" y="540" fill="#ffcc00" font-size="14" text-anchor="middle">LC-Advance</text>
        </svg>
    </div>

        <div class="ejemplo">
            <h4>Ejemplo JOIN:</h4>
            <pre><code>
SELECT u.nombre, p.producto 
FROM usuarios u 
JOIN pedidos p ON u.id = p.usuario_id;
            </code></pre>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'SELECT todos los usuarios', 'respuesta' => 'SELECT * FROM usuarios;'],
        ['enunciado' => '¿Qué es PK?', 'respuesta' => 'Clave primaria: valor único por fila'],
        ['enunciado' => 'Relación N:N necesita...', 'respuesta' => 'Tabla intermedia con dos FK'],
        ['enunciado' => 'JOIN básico', 'respuesta' => 'SELECT * FROM A JOIN B ON A.id = B.a_id;'],
        ['enunciado' => 'Crear tabla con FK', 'respuesta' => 'FOREIGN KEY (col) REFERENCES tabla(pk)'],
        ['enunciado' => 'Normalización 1NF', 'respuesta' => 'Sin valores repetidos en columna'],
        ['enunciado' => 'INSERT ejemplo', 'respuesta' => 'INSERT INTO usuarios (nombre) VALUES (\'Ana\');'],
        ['enunciado' => 'WHERE filtra', 'respuesta' => 'WHERE id = 1'],
        ['enunciado' => 'ORDER BY ordena', 'respuesta' => 'ORDER BY nombre ASC'],
        ['enunciado' => 'COUNT cuenta', 'respuesta' => 'SELECT COUNT(*) FROM pedidos;'],
        ['enunciado' => 'INNER JOIN devuelve', 'respuesta' => 'Solo coincidencias'],
        ['enunciado' => 'SI: % de BD relacionales', 'respuesta' => '~80%']
    ],
    'quiz' => [
        ['pregunta' => 'SQL significa', 'opciones' => ['Structured Query Language', 'Simple Query', 'Standard Query', 'Sequential'], 'correcta' => 'Structured Query Language'],
        ['pregunta' => 'PK es', 'opciones' => ['Única por fila', 'Repetible', 'Opcional', 'Texto'], 'correcta' => 'Única por fila'],
        ['pregunta' => 'FK referencia', 'opciones' => ['PK de otra tabla', 'Cualquier campo', 'Índice', 'Nada'], 'correcta' => 'PK de otra tabla'],
        ['pregunta' => '1:N ejemplo', 'opciones' => ['Usuario → Pedidos', 'Persona → Pasaporte', 'Amigos', 'Nada'], 'correcta' => 'Usuario → Pedidos'],
        ['pregunta' => 'N:N requiere', 'opciones' => ['Tabla intermedia', 'Una tabla', 'Ninguna', 'JSON'], 'correcta' => 'Tabla intermedia'],
        ['pregunta' => 'Normalización evita', 'opciones' => ['Redundancia', 'Datos', 'Tablas', 'Nada'], 'correcta' => 'Redundancia'],
        ['pregunta' => 'JOIN une', 'opciones' => ['Tablas por clave común', 'Todo', 'Nada', 'Solo PK'], 'correcta' => 'Tablas por clave común'],
        ['pregunta' => 'SELECT * FROM', 'opciones' => ['Todos los datos', 'Una fila', 'Nada', 'Error'], 'correcta' => 'Todos los datos'],
        ['pregunta' => 'WHERE filtra', 'opciones' => ['Filas', 'Columnas', 'Tablas', 'BD'], 'correcta' => 'Filas'],
        ['pregunta' => 'ORDER BY', 'opciones' => ['Ordena resultados', 'Filtra', 'Crea', 'Elimina'], 'correcta' => 'Ordena resultados'],

        ['pregunta' => 'CREATE TABLE', 'opciones' => ['Define estructura', 'Inserta', 'Selecciona', 'Elimina'], 'correcta' => 'Define estructura'],
        ['pregunta' => 'INSERT INTO', 'opciones' => ['Agrega fila', 'Selecciona', 'Actualiza', 'Elimina'], 'correcta' => 'Agrega fila'],
        ['pregunta' => 'UPDATE modifica', 'opciones' => ['Datos existentes', 'Estructura', 'Tabla', 'BD'], 'correcta' => 'Datos existentes'],
        ['pregunta' => 'DELETE FROM', 'opciones' => ['Elimina filas', 'Tablas', 'Columnas', 'BD'], 'correcta' => 'Elimina filas'],
        ['pregunta' => 'INNER JOIN', 'opciones' => ['Solo coincidencias', 'Todo', 'Izquierda', 'Derecha'], 'correcta' => 'Solo coincidencias'],
        ['pregunta' => 'LEFT JOIN', 'opciones' => ['Todo de izquierda', 'Solo coincidencias', 'Derecha', 'Nada'], 'correcta' => 'Todo de izquierda'],
        ['pregunta' => 'COUNT(*)', 'opciones' => ['Cuenta filas', 'Suma', 'Promedio', 'Máximo'], 'correcta' => 'Cuenta filas'],
        ['pregunta' => 'GROUP BY', 'opciones' => ['Agrupa resultados', 'Ordena', 'Filtra', 'Une'], 'correcta' => 'Agrupa resultados'],
        ['pregunta' => 'HAVING filtra', 'opciones' => ['Grupos', 'Filas', 'Tablas', 'Columnas'], 'correcta' => 'Grupos'],
        ['pregunta' => 'SI 2025: BD más usada', 'opciones' => ['MySQL', 'MongoDB', 'Redis', 'Excel'], 'correcta' => 'MySQL'],

        ['pregunta' => 'INDEX acelera', 'opciones' => ['Búsquedas', 'Inserciones', 'Todo', 'Nada'], 'correcta' => 'Búsquedas'],
        ['pregunta' => 'AUTO_INCREMENT', 'opciones' => ['ID automático', 'Manual', 'Texto', 'Fecha'], 'correcta' => 'ID automático'],
        ['pregunta' => 'UNIQUE', 'opciones' => ['Valor no repetido', 'Repetible', 'Nulo', 'PK'], 'correcta' => 'Valor no repetido'],
        ['pregunta' => 'NOT NULL', 'opciones' => ['Campo obligatorio', 'Opcional', 'PK', 'FK'], 'correcta' => 'Campo obligatorio'],
        ['pregunta' => 'VARCHAR(255)', 'opciones' => ['Texto hasta 255', 'Número', 'Fecha', 'Booleano'], 'correcta' => 'Texto hasta 255'],
        ['pregunta' => 'INT', 'opciones' => ['Entero', 'Decimal', 'Texto', 'Fecha'], 'correcta' => 'Entero'],
        ['pregunta' => 'DECIMAL(10,2)', 'opciones' => ['10 dígitos, 2 decimales', 'Entero', 'Texto', 'Fecha'], 'correcta' => '10 dígitos, 2 decimales'],
        ['pregunta' => 'DATE', 'opciones' => ['Fecha', 'Hora', 'Texto', 'Número'], 'correcta' => 'Fecha'],
        ['pregunta' => 'SI 2025: PostgreSQL crece', 'opciones' => ['+30% anual', '0%', '-10%', 'Estable'], 'correcta' => '+30% anual'],
        ['pregunta' => 'Transacción ACID', 'opciones' => ['Atomicidad, Consistencia...', 'Velocidad', 'Seguridad', 'Nada'], 'correcta' => 'Atomicidad, Consistencia...']
    ]
];
// ========================================
// MATERIA: PROGRAMACIÓN
// SUBTEMA: Python + SQLite
// ========================================
$lecciones[] = [
    'materia' => 'Programación',
    'slug' => 'python-sqlite',
    'titulo' => 'Python + SQLite: Bases de Datos en el Navegador',
    'contenido' => <<<HTML
<h3>Python + SQLite: Desarrollo Serverless en el Navegador</h3>
<p>Aprende a usar <strong>Python</strong> con <strong>SQLite</strong> directamente en tu navegador usando <strong>Pyodide</strong>. Sin instalación. Sin servidor. Solo código.</p>

<hr style="border:1px dashed #00bcd4;">

<h4>Simulador Interactivo Python + SQLite</h4>
<div class="simulador-python">
    <p><strong>Ejecuta código Python + SQLite real aquí mismo</strong></p>
    <div class="python-editor">
        <textarea id="python-code" rows="18"># LC-Advance - Simulador Python + SQLite
import sqlite3

print("SQLite versión:", sqlite3.sqlite_version)
print("¡Python + SQLite funcionando 100% en tu navegador!\\n")

# Base de datos en memoria
conn = sqlite3.connect(':memory:')
c = conn.cursor()

# Crear tabla
c.execute('''CREATE TABLE usuarios (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    nombre TEXT NOT NULL,
    edad INTEGER,
    nivel TEXT
)''')

# Datos de ejemplo
usuarios = [
    ("Ana Torres", 17, "Avanzado"),
    ("Luis Ramírez", 18, "Intermedio"),
    ("Sofía Mendoza", 16, "Principiante"),
    ("Marco Vargas", 19, "Avanzado"),
    ("Valeria Castro", 17, "Avanzado")
]

c.executemany("INSERT INTO usuarios (nombre, edad, nivel) VALUES (?, ?, ?)", usuarios)
conn.commit()

print("USUARIOS REGISTRADOS:")
print("=" * 60)
c.execute("SELECT * FROM usuarios ORDER BY id")
for fila in c.fetchall():
    print(f"ID: {fila[0]} | {fila[1]:15} | Edad: {fila[2]:2} | Nivel: {fila[3]}")

print("\\nUsuarios nivel Avanzado:")
c.execute("SELECT nombre, edad FROM usuarios WHERE nivel = 'Avanzado'")
for fila in c.fetchall():
    print(f"   {fila[0]} ({fila[1]} años)")

print(f"\\nEdad promedio: ", end="")
c.execute("SELECT AVG(edad) FROM usuarios")
print(f"{c.fetchone()[0]:.1f} años")

conn.close()
print("\\nLC-Advance - ¡Simulación completada con éxito!")
</textarea>

        <div class="python-buttons">
            <button class="btn-small btn-play" onclick="runPython()">Ejecutar Código</button>
            <button class="btn-small btn-reset" onclick="resetCode()">Restaurar código</button>
            <button class="btn-small btn-clear" onclick="clearOutput()">Limpiar salida</button>
        </div>
    </div>

    <div id="python-output" class="python-result">
        <p style="color:#00bcd4; font-weight:bold;">Cargando LC-Advance Python Engine... (8-12 seg la primera vez)</p>
    </div>
</div>

<!-- Pyodide -->
<script src="https://cdn.jsdelivr.net/pyodide/v0.26.1/full/pyodide.js"></script>

<script>
let pyodide = null;

async function initPyodide() {
    const output = document.getElementById("python-output");
    output.innerHTML = "<p style='color:#00bcd4;'>Inicializando entorno Python + SQLite...</p>";

    try {
        pyodide = await loadPyodide();
        await pyodide.loadPackage("sqlite3");

        output.innerHTML =
            '<pre style="background:#000; color:#00ff88; padding:20px; border:2px solid #00bcd4; border-radius:8px; font-family:monospace;">' +
            '   _      ____      _    _            _   _ \\n' +
            '  | |    / __ \\\\    | |  | |          | \\\\ | |\\n' +
            '  | |   | |  | |   | |  | |          |  \\\\| |\\n' +
            '  | |   | |  | |   | |  | |          | . ` |\\n' +
            '  | |___| |__| |   | |__| |          | |\\\\  |\\n' +
            '  |______\\\\____/     \\\\____/           |_| \\\\_|\\n\\n' +
            '  LC-Ensure • Python + SQLite en el navegador\\n' +
            '  ¡Listo! Presiona "Ejecutar Código"\\n' +
            '</pre>';

    } catch (e) {
        output.innerHTML =
            "<pre style='color:#ff4444; background:#300; padding:15px;'>Error al cargar Pyodide: " +
            e.message +
            "</pre>";
    }
}
initPyodide();

async function runPython() {
    if (!pyodide) {
        alert("El entorno aún se está cargando. Espera unos segundos.");
        return;
    }

    const code = document.getElementById("python-code").value;
    const output = document.getElementById("python-output");
    output.innerHTML = "<p style='color:#00bcd4;'>Ejecutando código...</p>";

    try {
        // Redirección de stdout
        await pyodide.runPythonAsync("import sys\\nfrom io import StringIO\\nsys.stdout = StringIO()");

        await pyodide.runPythonAsync(code);

        const stdout = pyodide.runPython("sys.stdout.getvalue()");

        if (stdout && stdout.trim() !== "") {
            output.innerHTML =
                '<pre style="background:#000; color:#00ff88; padding:15px; border:2px solid #00bcd4; border-radius:8px; font-family:monospace; white-space:pre-wrap;">' +
                stdout +
                "</pre>";
        } else {
            output.innerHTML =
                '<pre style="background:#000; color:#00ff88; padding:15px; border:2px solid #00bcd4; border-radius:8px;">Código ejecutado correctamente (sin salida)</pre>';
        }
    } catch (e) {
        output.innerHTML =
            '<pre style="background:#300; color:#ff6666; padding:15px; border:2px solid #e91e63; border-radius:8px;">' +
            "ERROR EN EL CÓDIGO:\\n" +
            e.message +
            "</pre>";
    }
}

function clearOutput() {
    document.getElementById("python-output").innerHTML = "<p style='color:#888;'>Salida limpiada</p>";
}

function resetCode() {
    document.getElementById("python-code").value =
`# LC-Advance - Simulador Python + SQLite
import sqlite3

print("SQLite versión:", sqlite3.sqlite_version)
print("¡Python + SQLite funcionando 100% en tu navegador!\\n")

conn = sqlite3.connect(':memory:')
c = conn.cursor()

c.execute('''CREATE TABLE usuarios (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    nombre TEXT NOT NULL,
    edad INTEGER,
    nivel TEXT
)''')

usuarios = [
    ("Ana Torres", 17, "Avanzado"),
    ("Luis Ramírez", 18, "Intermedio"),
    ("Sofía Mendoza", 16, "Principiante"),
    ("Marco Vargas", 19, "Avanzado"),
    ("Valeria Castro", 17, "Avanzado")
]

c.executemany("INSERT INTO usuarios (nombre, edad, nivel) VALUES (?, ?, ?)", usuarios)
conn.commit()

print("USUARIOS REGISTRADOS:")
print("=" * 60)
c.execute("SELECT * FROM usuarios ORDER BY id")
for fila in c.fetchall():
    print(f"ID: {fila[0]} | {fila[1]:15} | Edad: {fila[2]:2} | Nivel: {fila[3]}")

print("\\nUsuarios nivel Avanzado:")
c.execute("SELECT nombre, edad FROM usuarios WHERE nivel = 'Avanzado'")
for fila in c.fetchall():
    print(f"   {fila[0]} ({fila[1]} años)")

print(f"\\nEdad promedio: ", end="")
c.execute("SELECT AVG(edad) FROM usuarios")
print(f"{c.fetchone()[0]:.1f} años")

conn.close()
print("\\nLC-Advance - ¡Simulación completada con éxito!")`;

    clearOutput();
}
</script>

<hr style="border:1px dashed #00bcd4;">

<h4>Flujo de Ejecución</h4>
<div class="svg-diagram">
    <svg viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
        <rect width="900" height="500" fill="#001f1f"/>
        <rect x="100" y="150" width="280" height="180" rx="20" fill="#00bcd4"/>
        <text x="240" y="240" fill="white" font-size="32" font-weight="bold" text-anchor="middle">PYTHON</text>
        <rect x="520" y="150" width="280" height="180" rx="20" fill="#006064" stroke="#00bcd4" stroke-width="4"/>
        <text x="660" y="240" fill="#00bcd4" font-size="32" font-weight="bold" text-anchor="middle">SQLITE</text>
        <path d="M380,240 Q450,200 520,240" fill="none" stroke="#00bcd4" stroke-width="8"/>
        <text x="450" y="180" fill="#00bcd4" font-size="20" text-anchor="middle">sqlite3.connect()</text>
        <text x="450" y="400" fill="#00ff88" font-size="24" text-anchor="middle">100% Cliente • 0 Servidor</text>
        <text x="450" y="440" fill="#888" font-size="16" text-anchor="middle">LC-Advance © 2025</text>
    </svg>
</div>
HTML
,
    'ejercicios' => [
        ['enunciado' => 'Conectar a SQLite', 'respuesta' => 'conn = sqlite3.connect(\'db.db\')'],
        ['enunciado' => 'Crear tabla SQL', 'respuesta' => 'CREATE TABLE usuarios (id INT PRIMARY KEY, nombre TEXT)'],
        ['enunciado' => 'INSERT en Python', 'respuesta' => 'cursor.execute("INSERT INTO t (c) VALUES (?)", (val,))'],
        ['enunciado' => 'SELECT con fetchall()', 'respuesta' => 'cursor.execute("SELECT * FROM t").fetchall()'],
        ['enunciado' => 'Commit cambios', 'respuesta' => 'conn.commit()'],
        ['enunciado' => 'Cerrar conexión', 'respuesta' => 'conn.close()'],
        ['enunciado' => 'Usar :memory:', 'respuesta' => 'conn = sqlite3.connect(\':memory:\')'],
        ['enunciado' => 'IF NOT EXISTS', 'respuesta' => 'CREATE TABLE IF NOT EXISTS ...'],
        ['enunciado' => 'Parámetros con ?', 'respuesta' => 'cursor.execute(sql, (val1, val2))'],
        ['enunciado' => 'fetchone()', 'respuesta' => 'Devuelve una fila'],
        ['enunciado' => 'rowcount', 'respuesta' => 'cursor.rowcount → filas afectadas'],
        ['enunciado' => 'SI: apps con SQLite', 'respuesta' => 'WhatsApp, Firefox, Android']
    ],
    'quiz' => [
        ['pregunta' => 'Python es', 'opciones' => ['Interpretado', 'Compilado', 'Híbrido', 'Binario'], 'correcta' => 'Interpretado'],
        ['pregunta' => 'sqlite3 es', 'opciones' => ['Módulo nativo', 'Externo', 'pip install', 'Node.js'], 'correcta' => 'Módulo nativo'],
        ['pregunta' => 'SQLite necesita', 'opciones' => ['Nada, solo archivo', 'Servidor', 'Cloud', 'Docker'], 'correcta' => 'Nada, solo archivo'],
        ['pregunta' => 'connect(\':memory:\')', 'opciones' => ['BD en RAM', 'Archivo', 'Cloud', 'Temporal'], 'correcta' => 'BD en RAM'],
        ['pregunta' => 'execute() retorna', 'opciones' => ['Cursor', 'Lista', 'Nada', 'Error'], 'correcta' => 'Cursor'],
        ['pregunta' => 'fetchall()', 'opciones' => ['Lista de tuplas', 'Diccionario', 'Texto', 'Nada'], 'correcta' => 'Lista de tuplas'],
        ['pregunta' => 'commit()', 'opciones' => ['Guarda cambios', 'Cierra', 'Lee', 'Borra'], 'correcta' => 'Guarda cambios'],
        ['pregunta' => 'close()', 'opciones' => ['Cierra conexión', 'Borra BD', 'Reinicia', 'Nada'], 'correcta' => 'Cierra conexión'],
        ['pregunta' => 'CREATE TABLE IF NOT EXISTS', 'opciones' => ['Evita error si existe', 'Borra si existe', 'Nada', 'Error'], 'correcta' => 'Evita error si existe'],
        ['pregunta' => 'Parámetros con ?', 'opciones' => ['Previenen inyección SQL', 'Solo texto', 'Solo números', 'Nada'], 'correcta' => 'Previenen inyección SQL'],

        ['pregunta' => 'rowcount', 'opciones' => ['Filas afectadas', 'Columnas', 'Tamaño BD', 'Nada'], 'correcta' => 'Filas afectadas'],
        ['pregunta' => 'fetchone()', 'opciones' => ['Una fila', 'Todas', 'Ninguna', 'Error'], 'correcta' => 'Una fila'],
        ['pregunta' => 'executemany()', 'opciones' => ['Múltiples INSERT', 'Uno solo', 'SELECT', 'DELETE'], 'correcta' => 'Múltiples INSERT'],
        ['pregunta' => 'SQLite soporta', 'opciones' => ['Transacciones ACID', 'Solo lectura', 'Nada', 'NoSQL'], 'correcta' => 'Transacciones ACID'],
        ['pregunta' => 'Tamaño máx BD SQLite', 'opciones' => ['~281 TB', '1 GB', '100 MB', 'Ilimitado'], 'correcta' => '~281 TB'],
        ['pregunta' => 'Apps famosas con SQLite', 'opciones' => ['WhatsApp, Firefox', 'Netflix', 'Google', 'Amazon'], 'correcta' => 'WhatsApp, Firefox'],
        ['pregunta' => 'Python en 2025', 'opciones' => ['#1 en popularidad', '#5', '#10', 'Obsoleto'], 'correcta' => '#1 en popularidad'],
        ['pregunta' => 'SI 2025: % dispositivos con SQLite', 'opciones' => ['+90%', '50%', '10%', '0%'], 'correcta' => '+90%'],
        ['pregunta' => 'SQLite es', 'opciones' => ['Serverless', 'Con servidor', 'Cloud only', 'Depende'], 'correcta' => 'Serverless'],
        ['pregunta' => 'Python + SQLite ideal para', 'opciones' => ['Prototipos, apps móviles', 'Big Data', 'IA', 'Web'], 'correcta' => 'Prototipos, apps móviles'],

        ['pregunta' => 'cursor es', 'opciones' => ['Objeto para ejecutar SQL', 'Conexión', 'BD', 'Tabla'], 'correcta' => 'Objeto para ejecutar SQL'],
        ['pregunta' => 'conn es', 'opciones' => ['Conexión a BD', 'Cursor', 'Tabla', 'SQL'], 'correcta' => 'Conexión a BD'],
        ['pregunta' => 'with sqlite3.connect() as conn', 'opciones' => ['Cierra automáticamente', 'Manual', 'Error', 'No cierra'], 'correcta' => 'Cierra automáticamente'],
        ['pregunta' => 'PRAGMA foreign_keys = ON', 'opciones' => ['Activa FK', 'Desactiva', 'Nada', 'Error'], 'correcta' => 'Activa FK'],
        ['pregunta' => 'SQLite en Android', 'opciones' => ['Nativo', 'Java', 'Kotlin', 'Swift'], 'correcta' => 'Nativo'],
        ['pregunta' => 'Python 3.12+', 'opciones' => ['Mejor sqlite3', 'Peor', 'Igual', 'Sin soporte'], 'correcta' => 'Mejor sqlite3'],
        ['pregunta' => 'DB Browser for SQLite', 'opciones' => ['GUI gratuita', 'Paga', 'Web', 'CLI'], 'correcta' => 'GUI gratuita'],
        ['pregunta' => 'SI 2025: Python en educación', 'opciones' => ['Lenguaje #1', '#3', '#5', 'No usado'], 'correcta' => 'Lenguaje #1'],
        ['pregunta' => 'sqlite3.Row', 'opciones' => ['Acceso por nombre', 'Solo índice', 'Nada', 'Error'], 'correcta' => 'Acceso por nombre'],
        ['pregunta' => 'Python + SQLite =', 'opciones' => ['Desarrollo full-stack local', 'Solo backend', 'Solo frontend', 'Nada'], 'correcta' => 'Desarrollo full-stack local']
    ]
];
// ========================================
// MATERIA: PROGRAMACIÓN
// TEMA: MongoDB + NoSQL
// ========================================
$lecciones[] = [
    'materia' => 'Programación',
    'slug' => 'bases-datos-no-relacionales-mongodb',
    'titulo' => 'MongoDB + NoSQL: La Revolución de las Bases de Datos',
    'contenido' => <<<'HTML'
        <h3>MongoDB: El Futuro de las Bases de Datos</h3>
        <p><strong>NoSQL Documental</strong> → Datos como documentos JSON/BSON flexibles, sin esquema rígido. Escala horizontalmente. Usado por Netflix, Google, Uber y +70% de apps modernas.</p>

        <hr style="border:1px dashed #00bcd4; margin: 30px 0;">

        <h4>Simulador MongoDB Interactivo (100% Seguro y Profesional)</h4>
        <div class="simulador-python">
            <p style="color:#00ff88; font-weight:bold; margin-bottom:15px;">
                💻 Ejecuta comandos reales del MongoDB Shell
            </p>
            
            <div class="python-editor">
                <textarea id="mongo-input" rows="12" style="width:100%; padding:15px; background:#000; color:#0f0; font-family:'Courier New', monospace; font-size:14px; border:1px solid #00bcd4; border-radius:8px; resize:vertical;">db.alumnos.insertMany([
        { nombre: "Ana López", edad: 17, nivel: "Avanzado", ciudad: "CDMX" },
        { nombre: "Carlos Ruiz", edad: 19, nivel: "Intermedio" },
        { nombre: "Sofía Mendoza", edad: 16, nivel: "Principiante", ciudad: "Guadalajara" },
        { nombre: "Luis Torres", edad: 18, nivel: "Avanzado" }
        ])

        db.alumnos.find({ nivel: "Avanzado" })

        db.alumnos.find({ edad: { $gte: 18 } })

        db.alumnos.countDocuments({ ciudad: "CDMX" })</textarea>
            </div>

            <div class="python-buttons">
                <button onclick="ejecutarMongo()" class="btn btn-small btn-play">▶ Ejecutar</button>
                <button onclick="limpiarMongo()" class="btn btn-small btn-logout">🗑 Limpiar BD</button>
                <button onclick="resetMongoCode()" class="btn btn-small btn-reset">↻ Ejemplo</button>
            </div>

            <div class="python-result">
                <pre id="mongo-output" style="margin:0; color:#00ff88; font-family:'Courier New', monospace; font-size:14px; min-height:200px;"><span style="color:#888;">💾 Listo para ejecutar comandos MongoDB...</span></pre>
            </div>
        </div>

        <script>
        const mongoDB = { collections: {} };

        // Parsea JSON seguro
        function safeParse(str) {
            try {
                return new Function('return (' + str + ')')();
            } catch (e) {
                throw new Error("JSON inválido: " + e.message);
            }
        }

        function unirComandos(texto) {
            const comandos = [];
            let buffer = "";

            texto.split("\n").forEach(linea => {
                linea = linea.trim();
                if (!linea || linea.startsWith("//")) return;

                buffer += " " + linea;

                // Se cierra un comando con ')'
                if (linea.endsWith(")")) {
                    comandos.push(buffer.trim());
                    buffer = "";
                }
            });

            if (buffer.trim()) comandos.push(buffer.trim());
            return comandos;
        }

        function ejecutarMongo() {
            const input = document.getElementById("mongo-input").value.trim();
            const output = document.getElementById("mongo-output");
            output.innerHTML = "<span style='color:#00bcd4;'>⚙️ Procesando comandos...</span>";

            if (!input) {
                output.innerHTML = "<span style='color:#ff6666;'>⚠️ Escribe al menos un comando</span>";
                return;
            }

            let resultado = "";

            try {
                const comandos = unirComandos(input);

                for (let linea of comandos) {
                    // insertOne
                    if (linea.includes("insertOne(")) {
                        const match = linea.match(/db\.(\w+)\.insertOne\(([\s\S]*)\)/);
                        if (match) {
                            const coll = match[1];
                            const doc = safeParse(match[2]);
                            mongoDB.collections[coll] = mongoDB.collections[coll] || [];
                            doc._id = "oid_" + Date.now().toString(36);
                            mongoDB.collections[coll].push(doc);
                            resultado += "✅ Insertado 1 documento → _id: " + doc._id + "\n";
                            continue;
                        }
                    }

                    // insertMany
                    if (linea.includes("insertMany(")) {
                        const match = linea.match(/db\.(\w+)\.insertMany\(([\s\S]*)\)/);
                        if (match) {
                            const coll = match[1];
                            const docs = safeParse(match[2]);
                            if (!Array.isArray(docs)) throw new Error("insertMany requiere un array");
                            mongoDB.collections[coll] = mongoDB.collections[coll] || [];
                            
                            docs.forEach(d => {
                                d._id = "oid_" + Date.now().toString(36) + Math.floor(Math.random()*999);
                                mongoDB.collections[coll].push(d);
                            });

                            resultado += "✅ Insertados " + docs.length + " documentos en " + coll + "\n";
                            continue;
                        }
                    }

                    // find y findOne
                    if (linea.includes("find(")) {
                        const esFindOne = linea.includes("findOne");
                        const match = linea.match(/db\.(\w+)\.(find|findOne)\(([\s\S]*)\)/);

                        if (match) {
                            const coll = match[1];
                            const filtro = match[3] ? safeParse(match[3]) : {};

                            let lista = mongoDB.collections[coll] || [];

                            lista = lista.filter(doc => {
                                for (let k in filtro) {
                                    const v = filtro[k];
                                    if (typeof v === "object") {
                                        if ("$gte" in v && !(doc[k] >= v.$gte)) return false;
                                        if ("$gt" in v && !(doc[k] > v.$gt)) return false;
                                    } else {
                                        if (doc[k] !== v) return false;
                                    }
                                }
                                return true;
                            });

                            const mostrar = esFindOne ? [lista[0] || null] : lista;

                            resultado += "📄 " + JSON.stringify(mostrar, null, 2) + "\n";
                            continue;
                        }
                    }

                    // countDocuments
                    if (linea.includes("countDocuments")) {
                        const match = linea.match(/db\.(\w+)\.countDocuments\(([\s\S]*)\)/);
                        if (match) {
                            const coll = match[1];
                            const filtro = safeParse(match[2] || "{}");

                            const total = (mongoDB.collections[coll] || []).filter(doc => {
                                for (let k in filtro) {
                                    if (doc[k] !== filtro[k]) return false;
                                }
                                return true;
                            }).length;

                            resultado += "🔢 " + total + "\n";
                            continue;
                        }
                    }

                    resultado += "⚠️ Comando no soportado: " + linea + "\n";
                }

                output.innerHTML = resultado.replace(/\n/g, "<br>").replace(/ /g, "&nbsp;");
            } catch (err) {
                output.innerHTML = "<span style='color:#ff4444;'>❌ ERROR: " + err.message + "</span>";
            }
        }

        function limpiarMongo() {
            mongoDB.collections = {};
            document.getElementById("mongo-output").innerHTML = "<span style='color:#00bcd4;'>🗑️ Base de datos limpiada</span>";
        }

        function resetMongoCode() {
            document.getElementById("mongo-input").value = `db.alumnos.insertMany([
        { nombre: "Ana López", edad: 17, nivel: "Avanzado", ciudad: "CDMX" },
        { nombre: "Carlos Ruiz", edad: 19, nivel: "Intermedio" },
        { nombre: "Sofía Mendoza", edad: 16, nivel: "Principiante", ciudad: "Guadalajara" },
        { nombre: "Luis Torres", edad: 18, nivel: "Avanzado" }
        ])

        db.alumnos.find({ nivel: "Avanzado" })

        db.alumnos.find({ edad: { $gte: 18 } })

        db.alumnos.countDocuments({ ciudad: "CDMX" })`;

            document.getElementById("mongo-output").innerHTML = "<span style='color:#888;'>📝 Código de ejemplo cargado</span>";
        }
        </script>


        <hr style="border:1px dashed #00bcd4; margin: 30px 0;">

        <h4>📊 Diagrama: MongoDB en Acción</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 1000 600" xmlns="http://www.w3.org/2000/svg">
                <rect width="1000" height="600" fill="#001f1f"/>
                <text x="500" y="100" fill="#00ff88" font-size="40" text-anchor="middle" font-weight="bold">MongoDB</text>
                <text x="500" y="150" fill="#00bcd4" font-size="24" text-anchor="middle">Flexibilidad • Velocidad • Escalabilidad</text>
                
                <!-- Documentos animados -->
                <g id="doc1">
                    <rect x="150" y="250" width="200" height="150" fill="#00bcd4" opacity="0.3" rx="10"/>
                    <text x="250" y="310" fill="#00ff88" font-size="16" text-anchor="middle">Documento 1</text>
                    <text x="250" y="340" fill="#fff" font-size="12" text-anchor="middle">{ nombre: "Ana" }</text>
                    <animate attributeName="opacity" values="0.3;0.7;0.3" dur="2s" repeatCount="indefinite"/>
                </g>
                
                <g id="doc2">
                    <rect x="400" y="250" width="200" height="150" fill="#00bcd4" opacity="0.3" rx="10"/>
                    <text x="500" y="310" fill="#00ff88" font-size="16" text-anchor="middle">Documento 2</text>
                    <text x="500" y="340" fill="#fff" font-size="12" text-anchor="middle">{ nombre: "Carlos" }</text>
                    <animate attributeName="opacity" values="0.3;0.7;0.3" dur="2s" begin="0.5s" repeatCount="indefinite"/>
                </g>
                
                <g id="doc3">
                    <rect x="650" y="250" width="200" height="150" fill="#00bcd4" opacity="0.3" rx="10"/>
                    <text x="750" y="310" fill="#00ff88" font-size="16" text-anchor="middle">Documento 3</text>
                    <text x="750" y="340" fill="#fff" font-size="12" text-anchor="middle">{ nombre: "Sofía" }</text>
                    <animate attributeName="opacity" values="0.3;0.7;0.3" dur="2s" begin="1s" repeatCount="indefinite"/>
                </g>
                
                <text x="500" y="540" fill="#00bcd4" font-size="18" text-anchor="middle">LC-Advance © 2025 • NoSQL Revolution</text>
            </svg>
        </div>
HTML
,
    'ejercicios' => [
        ['enunciado' => 'Insertar documento', 'respuesta' => 'db.coll.insertOne({campo: valor})'],
        ['enunciado' => 'Buscar todos', 'respuesta' => 'db.coll.find()'],
        ['enunciado' => 'Buscar con filtro', 'respuesta' => 'db.coll.find({campo: valor})'],
        ['enunciado' => 'Actualizar', 'respuesta' => 'db.coll.updateOne(filtro, {$set: {campo: nuevo}})'],
        ['enunciado' => 'Eliminar', 'respuesta' => 'db.coll.deleteOne({campo: valor})'],
        ['enunciado' => 'Schema-less significa', 'respuesta' => 'Sin esquema fijo'],
        ['enunciado' => 'Colección =', 'respuesta' => 'Grupo de documentos'],
        ['enunciado' => 'BSON es', 'respuesta' => 'JSON binario'],
        ['enunciado' => '$gt significa', 'respuesta' => 'Mayor que'],
        ['enunciado' => 'insertMany para', 'respuesta' => 'Múltiples documentos'],
        ['enunciado' => 'findOne devuelve', 'respuesta' => 'Primer documento'],
        ['enunciado' => 'SI: % apps con MongoDB', 'respuesta' => '~70%']
    ],
    'quiz' => [
        ['pregunta' => 'MongoDB es', 'opciones' => ['Documental', 'Relacional', 'Grafos', 'Columnas'], 'correcta' => 'Documental'],
        ['pregunta' => 'Almacena en', 'opciones' => ['BSON', 'SQL', 'CSV', 'XML'], 'correcta' => 'BSON'],
        ['pregunta' => 'Colección =', 'opciones' => ['Tabla', 'Fila', 'BD', 'Índice'], 'correcta' => 'Tabla'],
        ['pregunta' => 'Documento =', 'opciones' => ['Fila JSON', 'Columna', 'Tabla', 'BD'], 'correcta' => 'Fila JSON'],
        ['pregunta' => 'Schema-less', 'opciones' => ['Flexible', 'Rígido', 'Binario', 'Nulo'], 'correcta' => 'Flexible'],
        ['pregunta' => 'Escalabilidad', 'opciones' => ['Horizontal', 'Vertical', 'Ninguna', 'Cloud'], 'correcta' => 'Horizontal'],
        ['pregunta' => 'Sharding divide', 'opciones' => ['Datos entre servidores', 'Una tabla', 'Nada', 'RAM'], 'correcta' => 'Datos entre servidores'],
        ['pregunta' => 'Replica Set para', 'opciones' => ['Alta disponibilidad', 'Velocidad', 'Nada', 'Backup'], 'correcta' => 'Alta disponibilidad'],
        ['pregunta' => 'Atlas es', 'opciones' => ['MongoDB Cloud', 'Local', 'CLI', 'GUI'], 'correcta' => 'MongoDB Cloud'],
        ['pregunta' => 'insertOne devuelve', 'opciones' => ['_id insertado', 'Documento', 'Nada', 'Error'], 'correcta' => '_id insertado'],

        ['pregunta' => 'find() sin filtro', 'opciones' => ['Todos', 'Uno', 'Ninguno', 'Error'], 'correcta' => 'Todos'],
        ['pregunta' => 'findOne()', 'opciones' => ['Primer match', 'Todos', 'Último', 'Error'], 'correcta' => 'Primer match'],
        ['pregunta' => 'updateOne modifica', 'opciones' => ['Primer match', 'Todos', 'Ninguno', 'Error'], 'correcta' => 'Primer match'],
        ['pregunta' => 'updateMany', 'opciones' => ['Todos los match', 'Uno', 'Ninguno', 'Error'], 'correcta' => 'Todos los match'],
        ['pregunta' => '$set en update', 'opciones' => ['Asigna valor', 'Elimina', 'Busca', 'Nada'], 'correcta' => 'Asigna valor'],
        ['pregunta' => '$gt', 'opciones' => ['Mayor que', 'Igual', 'Menor', 'Existe'], 'correcta' => 'Mayor que'],
        ['pregunta' => '$in', 'opciones' => ['En lista', 'No en lista', 'Igual', 'Nulo'], 'correcta' => 'En lista'],
        ['pregunta' => 'deleteOne', 'opciones' => ['Primer match', 'Todos', 'Ninguno', 'Error'], 'correcta' => 'Primer match'],
        ['pregunta' => 'countDocuments', 'opciones' => ['Cuenta', 'Suma', 'Lista', 'Nada'], 'correcta' => 'Cuenta'],
        ['pregunta' => 'aggregate para', 'opciones' => ['Análisis complejo', 'INSERT', 'DELETE', 'SELECT'], 'correcta' => 'Análisis complejo'],

        ['pregunta' => 'MongoDB soporta', 'opciones' => ['Índices', 'Solo PK', 'Nada', 'SQL'], 'correcta' => 'Índices'],
        ['pregunta' => 'Transacciones desde', 'opciones' => ['v4.0', 'v1.0', 'v6.0', 'Nunca'], 'correcta' => 'v4.0'],
        ['pregunta' => 'Compass es', 'opciones' => ['GUI oficial', 'CLI', 'Cloud', 'API'], 'correcta' => 'GUI oficial'],
        ['pregunta' => 'SI 2025: NoSQL crece', 'opciones' => ['+25% anual', '0%', '-10%', 'Estable'], 'correcta' => '+25% anual'],
        ['pregunta' => 'MongoDB en', 'opciones' => ['Netflix, Google', 'Solo startups', 'Nada', 'SQL'], 'correcta' => 'Netflix, Google'],
        ['pregunta' => 'BSON permite', 'opciones' => ['Tipos binarios', 'Solo texto', 'Nada', 'XML'], 'correcta' => 'Tipos binarios'],
        ['pregunta' => 'ObjectId es', 'opciones' => ['12 bytes único', 'Entero', 'Texto', 'Fecha'], 'correcta' => '12 bytes único'],
        ['pregunta' => 'SI 2025: % datos no estructurados', 'opciones' => ['+80%', '50%', '20%', '0%'], 'correcta' => '+80%'],
        ['pregunta' => 'NoSQL ideal para', 'opciones' => ['Datos variables', 'Transacciones bancarias', 'Todo', 'Nada'], 'correcta' => 'Datos variables'],
        ['pregunta' => 'MongoDB vs SQL', 'opciones' => ['Flexible > Rígido', 'Igual', 'Rígido > Flexible', 'No compara'], 'correcta' => 'Flexible > Rígido']
    ]
];
// ========================================
// MATERIA: PROGRAMACIÓN
// SUBTEMA: SCRUM + Agile: Roles, Eventos, Simulador y Retos Interactivos
// ========================================
$lecciones[] = [
    'materia' => 'Programación',
    'slug' => 'metodologias-scrum',
    'titulo' => 'SCRUM: Agile, Roles, Eventos, Simulador y Retos 2025',
    'contenido' => <<<'HTML'
        <h3 class="retro-title">SCRUM: El Framework Agile Líder en 2025</h3>
        <p class="retro-text">
            <strong>SCRUM</strong> = metodología ágil para desarrollo iterativo e incremental.
            Basado en <strong>transparencia, inspección, adaptación</strong>.
            Ideal para requisitos cambiantes. Usado por <strong>Netflix, Spotify, Google</strong>.
            En 2025: <strong>78% de los equipos dev usan SCRUM</strong>.
        </p>

        <hr class="retro-hr">

        <h4 class="retro-subtitle">1. Pilares y Valores SCRUM</h4>

        <table class="retro-table">
            <thead>
                <tr><th>Pilar</th><th>Descripción</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Transparencia</strong></td><td>Todo visible: backlog, burndown, impedimentos</td></tr>
                <tr><td><strong>Inspección</strong></td><td>Revisión frecuente: daily, review, retro</td></tr>
                <tr><td><strong>Adaptación</strong></td><td>Ajuste inmediato ante cambios</td></tr>
            </tbody>
        </table>

        <hr class="retro-hr">

        <h4 class="retro-subtitle">2. Simulador de Sprint Interactivo</h4>

        <div class="simulador-scrum retro-box retro-border">
            <p class="retro-text"><strong>Simula un Sprint de 2 semanas:</strong></p>

            <div class="retro-flex">
                <!-- Backlog -->
                <div class="retro-col">
                    <h5 class="retro-text">Product Backlog</h5>
                    <ul id="backlog" class="scrum-col retro-list">
                        <li draggable="true" data-id="1" class="retro-item">Login usuario</li>
                        <li draggable="true" data-id="2" class="retro-item">Dashboard</li>
                        <li draggable="true" data-id="3" class="retro-item">Notificaciones</li>
                        <li draggable="true" data-id="4" class="retro-item">Perfil</li>
                    </ul>
                </div>

                <!-- Sprint -->
                <div class="retro-col">
                    <h5 class="retro-text">Sprint Backlog</h5>
                    <ul id="sprint" class="scrum-col retro-list"></ul>
                </div>

                <!-- Progreso -->
                <div class="retro-col">
                    <h5 class="retro-text">En Progreso</h5>
                    <ul id="progress" class="scrum-col retro-list"></ul>
                </div>

                <!-- Done -->
                <div class="retro-col">
                    <h5 class="retro-text">Hecho</h5>
                    <ul id="done" class="scrum-col retro-list"></ul>
                </div>
            </div>

            <div class="retro-buttons">
                <button type="button" onclick="resetSprint()" class="retro-btn">↻ Reiniciar Sprint</button>
                <button type="button" onclick="autoFillSprint()" class="retro-btn">⚡ Auto-plan (ejemplo)</button>
            </div>

            <div id="sprint-result" class="retro-text" style="margin-top:10px;"></div>
        </div>


        <script>
        (function(){
            const columns = ["backlog", "sprint", "progress", "done"];

            function initDragAndDrop() {
                columns.forEach(col => {
                    const el = document.getElementById(col);
                    if (!el) return;

                    el.addEventListener("dragover", e => e.preventDefault());

                    el.addEventListener("drop", e => {
                        e.preventDefault();
                        const id = e.dataTransfer.getData("text/plain");
                        const item = document.querySelector('[data-id="' + id + '"]');
                        if (item && el !== item.parentElement) {
                            el.appendChild(item);
                            checkSprint();
                        }
                    });
                });

                document.querySelectorAll("[draggable]").forEach(item => {
                    item.addEventListener("dragstart", e => {
                        e.dataTransfer.setData("text/plain", item.dataset.id);
                        try { e.dataTransfer.setDragImage(item, 5, 5); } catch(err){}
                    });
                });
            }

            window.checkSprint = function() {
                const doneCount = document.getElementById("done").children.length;
                const total = document.querySelectorAll("[data-id]").length;
                const result = document.getElementById("sprint-result");

                if (doneCount === total && total > 0) {
                    result.innerHTML = '<span style="color:#43A047; font-weight:bold;">✔ Sprint completado</span>';
                } else if (doneCount > 0) {
                    result.innerHTML = `<span style="color:#FFEB3B;">${doneCount}/${total} tareas completadas</span>`;
                } else {
                    result.innerHTML = '';
                }
            };

            window.resetSprint = function() {
                const backlog = document.getElementById("backlog");
                const items = Array.from(document.querySelectorAll("[data-id]"))
                    .sort((a,b) => a.dataset.id - b.dataset.id);
                items.forEach(it => backlog.appendChild(it));
                document.getElementById("sprint-result").innerHTML = "";
            };

            window.autoFillSprint = function() {
                const sprint = document.getElementById("sprint");
                const backlog = document.getElementById("backlog");
                const items = Array.from(backlog.querySelectorAll("li")).slice(0,2);
                items.forEach(it => sprint.appendChild(it));
                checkSprint();
            };

            document.addEventListener("DOMContentLoaded", initDragAndDrop);
            initDragAndDrop();
            checkSprint();
        })();
        </script>


        <hr class="retro-hr">

        <h4 class="retro-subtitle">3. SVG Animado: Ciclo SCRUM</h4>
            <p><em>Simulador Kanban-style: arrastra tareas del backlog al sprint y completa el ciclo.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>3. Reto: Planifica tu Sprint</h4>
        <div class="reto-codigo">
            <p><strong>Desafío:</strong> Con un equipo de 5 devs, planifica un sprint de 2 semanas:</p>
            <ol>
                <li>Define 5 historias de usuario</li>
                <li>Asigna puntos de historia (1, 2, 3, 5)</li>
                <li>Capacidad: 30 puntos/sprint</li>
                <li>Selecciona historias que quepan</li>
            </ol>
            <details>
                <summary>Ver solución</summary>
                <pre><code>
Historias:
1. Login con Google (5)
2. Dashboard responsive (8)
3. Notificaciones push (5)
4. Perfil editable (3)
5. Exportar datos CSV (3)

Capacidad: 30 puntos
Seleccionadas: 1, 3, 4, 5 → 5+5+3+3 = 16 puntos
Pendientes: 2 (8) → próximo sprint
                </code></pre>
            </details>
        </div>

        <div class="visual">
            <img src="assets/img/SCRUM.png" alt="SCRUM process" style="max-width:100%;">
            <p><em>Flujo SCRUM. Fuente: StartInfinity.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/Agile.png" alt="Agile overview" style="max-width:100%;">
            <p><em>Visión general Agile. Fuente: PM-Partners.</em></p>
        </div>

        <hr style="border:1px dashed #1976D2;">

        <h4>4. SVG Animado: Ciclo SCRUM</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Ciclo Scrum animado">
                <rect x="0" y="0" width="800" height="500" fill="#E3F2FD"/>

                <text x="400" y="50" fill="#1565C0" font-size="28" text-anchor="middle" font-weight="bold">CICLO SCRUM</text>

                <!-- Sprint Planning -->
                <g id="planning" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="0.5s" dur="0.5s" fill="freeze"/>
                    <circle cx="150" cy="150" r="60" fill="#42A5F5"/>
                    <text x="150" y="145" fill="white" font-size="16" text-anchor="middle">Planning</text>
                    <text x="150" y="165" fill="#BBDEFB" font-size="12" text-anchor="middle">8h máx</text>
                </g>

                <!-- Daily Scrum -->
                <g id="daily" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1s" dur="0.5s" fill="freeze"/>
                    <circle cx="400" cy="100" r="50" fill="#1E88E5"/>
                    <text x="400" y="95" fill="white" font-size="14" text-anchor="middle">Daily</text>
                    <text x="400" y="115" fill="#BBDEFB" font-size="11" text-anchor="middle">15 min</text>
                </g>

                <!-- Sprint Review -->
                <g id="review" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="1.5s" dur="0.5s" fill="freeze"/>
                    <circle cx="650" cy="150" r="60" fill="#1976D2"/>
                    <text x="650" y="145" fill="white" font-size="16" text-anchor="middle">Review</text>
                    <text x="650" y="165" fill="#BBDEFB" font-size="12" text-anchor="middle">4h máx</text>
                </g>

                <!-- Retrospective -->
                <g id="retro" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2s" dur="0.5s" fill="freeze"/>
                    <circle cx="400" cy="250" r="70" fill="#0D47A1"/>
                    <text x="400" y="240" fill="white" font-size="16" text-anchor="middle">Retro</text>
                    <text x="400" y="260" fill="#BBDEFB" font-size="12" text-anchor="middle">3h máx</text>
                </g>

                <!-- Increment -->
                <g id="increment" opacity="0">
                    <animate attributeName="opacity" values="0;1" begin="2.5s" dur="0.5s" fill="freeze"/>
                    <rect x="320" y="380" width="160" height="80" fill="#1B5E20" rx="15"/>
                    <text x="400" y="415" fill="white" font-size="18" text-anchor="middle">Increment</text>
                    <text x="400" y="440" fill="#A5D6A7" font-size="12" text-anchor="middle">Potentially Shippable</text>
                </g>

                <!-- Flechas -->
                <path d="M210,150 Q300,120 340,100" fill="none" stroke="#1976D2" stroke-width="4" marker-end="url(#arrow)"/>
                <path d="M450,100 Q550,120 590,150" fill="none" stroke="#1976D2" stroke-width="4" marker-end="url(#arrow)"/>
                <path d="M650,210 Q550,250 450,250" fill="none" stroke="#1976D2" stroke-width="4" marker-end="url(#arrow)"/>
                <path d="M400,320 Q400,360 400,380" fill="none" stroke="#1976D2" stroke-width="4" marker-end="url(#arrow)"/>

                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#1976D2"/>
                    </marker>
                </defs>

                <rect x="100" y="300" width="600" height="70" fill="#BBDEFB" rx="10"/>
                <text x="400" y="330" fill="#1565C0" font-size="14" text-anchor="middle">Sprint: 1-4 semanas | Equipo autoorganizado</text>
                <text x="400" y="355" fill="#0D47A1" font-size="12" text-anchor="middle">SI 2025: 78% equipos dev | +30% productividad</text>
            </svg>
            <p><em>SVG Animado: Flujo completo de un Sprint.</em></p>
        </div>

        <div class="ejemplo">
            <h4>Ejemplo de Sprint Real:</h4>
            <pre><code>
Sprint 3 (2 semanas)
- Objetivo: MVP de app móvil
- Historias: Login, Perfil, Feed
- Puntos: 20 totales
- Daily: 9:00 AM (15 min)
- Review: Demo al PO
- Retro: ¿Qué mejorar?
- Increment: App funcional en TestFlight
            </code></pre>
        </div>
HTML
,
    'ejercicios' => [
        ['enunciado' => 'Rol del Product Owner', 'respuesta' => 'Maximizar valor del producto'],
        ['enunciado' => 'Scrum Master elimina', 'respuesta' => 'Impedimentos'],
        ['enunciado' => 'Duración típica sprint', 'respuesta' => '2 semanas'],
        ['enunciado' => 'Daily Scrum responde', 'respuesta' => '¿Qué hice? ¿Qué haré? ¿Bloqueos?'],
        ['enunciado' => 'Sprint Review muestra', 'respuesta' => 'Incremento'],
        ['enunciado' => 'Retrospective busca', 'respuesta' => 'Mejorar proceso'],
        ['enunciado' => 'Product Backlog es', 'respuesta' => 'Lista priorizada'],
        ['enunciado' => 'Definition of Done', 'respuesta' => 'Criterios de aceptación'],
        ['enunciado' => 'Velocity mide', 'respuesta' => 'Puntos completados/sprint'],
        ['enunciado' => 'Burndown chart muestra', 'respuesta' => 'Trabajo restante'],
        ['enunciado' => 'SI: % empresas con SCRUM', 'respuesta' => '78%'],
        ['enunciado' => 'Herramienta popular', 'respuesta' => 'Jira, Trello']
    ],
    'quiz' => [
        ['pregunta' => 'SCRUM es un', 'opciones' => ['Framework', 'Metodología', 'Herramienta', 'Lenguaje'], 'correcta' => 'Framework'],
        ['pregunta' => 'Pilares SCRUM', 'opciones' => ['3', '5', '1', '7'], 'correcta' => '3'],
        ['pregunta' => 'Product Owner define', 'opciones' => ['Prioridades', 'Código', 'Diseño', 'Pruebas'], 'correcta' => 'Prioridades'],
        ['pregunta' => 'Scrum Master es', 'opciones' => ['Facilitador', 'Jefe', 'Tester', 'Diseñador'], 'correcta' => 'Facilitador'],
        ['pregunta' => 'Equipo dev es', 'opciones' => ['Autoorganizado', 'Jerárquico', 'Externo', 'Temporal'], 'correcta' => 'Autoorganizado'],
        ['pregunta' => 'Sprint dura', 'opciones' => ['1-4 semanas', '1 día', '1 mes', 'Ilimitado'], 'correcta' => '1-4 semanas'],
        ['pregunta' => 'Planning máximo', 'opciones' => ['8h', '4h', '15 min', '1 día'], 'correcta' => '8h'],
        ['pregunta' => 'Daily dura', 'opciones' => ['15 min', '1h', '30 min', '2h'], 'correcta' => '15 min'],
        ['pregunta' => 'Review máximo', 'opciones' => ['4h', '8h', '2h', '1 día'], 'correcta' => '4h'],
        ['pregunta' => 'Retro máximo', 'opciones' => ['3h', '4h', '8h', '1 día'], 'correcta' => '3h'],

        ['pregunta' => 'Increment debe ser', 'opciones' => ['Potentially shippable', 'En pruebas', 'Parcial', 'Diseño'], 'correcta' => 'Potentially shippable'],
        ['pregunta' => 'Backlog es', 'opciones' => ['Dinámico', 'Estático', 'Secreto', 'Temporal'], 'correcta' => 'Dinámico'],
        ['pregunta' => 'User Story formato', 'opciones' => ['Como X, quiero Y, para Z', 'Tarea técnica', 'Bug', 'Código'], 'correcta' => 'Como X, quiero Y, para Z'],
        ['pregunta' => 'Puntos de historia', 'opciones' => ['Fibonacci', 'Decimal', 'Binario', 'Letras'], 'correcta' => 'Fibonacci'],
        ['pregunta' => 'Velocity es', 'opciones' => ['Promedio puntos/sprint', 'Tiempo', 'Errores', 'Código'], 'correcta' => 'Promedio puntos/sprint'],
        ['pregunta' => 'Burndown ideal', 'opciones' => ['Lineal descendente', 'Ascendente', 'Plano', 'Caótico'], 'correcta' => 'Lineal descendente'],
        ['pregunta' => 'Definition of Done', 'opciones' => ['Criterios compartidos', 'Individual', 'Secreto', 'Opcional'], 'correcta' => 'Criterios compartidos'],
        ['pregunta' => 'Refinement es', 'opciones' => ['Aclarar backlog', 'Codificar', 'Testear', 'Deploy'], 'correcta' => 'Aclarar backlog'],
        ['pregunta' => 'Scrum of Scrums para', 'opciones' => ['Equipos múltiples', 'Un equipo', 'PO', 'Stakeholders'], 'correcta' => 'Equipos múltiples'],
        ['pregunta' => 'SAFe incluye', 'opciones' => ['SCRUM a escala', 'Solo un equipo', 'Nada', 'Waterfall'], 'correcta' => 'SCRUM a escala'],

        ['pregunta' => 'Jira es', 'opciones' => ['Herramienta SCRUM', 'Lenguaje', 'BD', 'IDE'], 'correcta' => 'Herramienta SCRUM'],
        ['pregunta' => 'Trello usa', 'opciones' => ['Tableros Kanban', 'Gantt', 'Código', 'SQL'], 'correcta' => 'Tableros Kanban'],
        ['pregunta' => 'SI 2025: SCRUM crece', 'opciones' => ['+15% anual', '0%', '-10%', 'Obsoleto'], 'correcta' => '+15% anual'],
        ['pregunta' => 'Empresas con SCRUM', 'opciones' => ['Netflix, Spotify', 'Solo startups', 'Gobierno', 'Ninguna'], 'correcta' => 'Netflix, Spotify'],
        ['pregunta' => 'Híbrido SCRUM + Kanban', 'opciones' => ['Scrumban', 'Waterfall', 'XP', 'Lean'], 'correcta' => 'Scrumban'],
        ['pregunta' => 'Certificación popular', 'opciones' => ['PSM I', 'PMP', 'ITIL', 'COBIT'], 'correcta' => 'PSM I'],
        ['pregunta' => 'Scrum Guide 2020', 'opciones' => ['Oficial', 'Antiguo', 'Falso', 'Opcional'], 'correcta' => 'Oficial'],
        ['pregunta' => 'SI 2025: % remotos con SCRUM', 'opciones' => ['+90%', '50%', '20%', '0%'], 'correcta' => '+90%'],
        ['pregunta' => 'SCRUM ideal para', 'opciones' => ['Requisitos cambiantes', 'Fijos', 'Hardware', 'Infra'], 'correcta' => 'Requisitos cambiantes'],
        ['pregunta' => 'Agile Manifesto prioriza', 'opciones' => ['Individuos > Procesos', 'Procesos > Personas', 'Documentos', 'Contrato'], 'correcta' => 'Individuos > Procesos']
    ]
];
// ========================================
// MATERIA: PROGRAMACIÓN
// SUBTEMA: Desarrollo de Aplicaciones Web Full-Stack (Frontend + Backend + DB)
// ========================================
$lecciones[] = [
    'materia' => 'Programación',
    'slug' => 'desarrollo-aplicaciones-web',
    'titulo' => 'Aplicaciones Web Full-Stack: Frontend, Backend, BD, Simulador y Retos',
    'contenido' => '
        <h3>Desarrollo Web Full-Stack: De la Idea al Deploy</h3>
        <p><strong>Full-Stack</strong> = dominar <strong>Frontend</strong> (interfaz y UX), <strong>Backend</strong> (lógica y APIs), <strong>Base de Datos</strong> (persistencia) y <strong>DevOps</strong> (deploy y CI/CD). Hoy, <strong>65% de los desarrolladores se consideran full-stack</strong> (Stack Overflow 2025). Tecnologías comunes: <strong>HTML, CSS, JS</strong> + <strong>PHP, Node.js, C#, Python</strong> + <strong>MySQL, SQLite, MongoDB</strong> + frameworks <strong>Laravel, Express, .NET</strong>.</p>

        <hr style="border:1px dashed #FF5722;">

        <h4>1. Arquitectura Web Moderna (2025)</h4>
        <table class="table">
            <thead>
                <tr><th>Capa</th><th>Tecnologías</th><th>Función</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>Frontend</strong></td><td>HTML5, CSS3, JS, React, Vue</td><td>Interfaz, UI/UX, interacción</td></tr>
                <tr><td><strong>Backend</strong></td><td>PHP, Node.js, C#, Python</td><td>APIs, lógica, seguridad, autenticación</td></tr>
                <tr><td><strong>Base de Datos</strong></td><td>MySQL, PostgreSQL, MongoDB, SQLite</td><td>Guardar y consultar datos</td></tr>
                <tr><td><strong>DevOps</strong></td><td>Git, Docker, GitHub, AWS, Vercel</td><td>Deploy, CI/CD, escalabilidad</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #FF5722;">

        <h4>2. Simulador de App Web en Tiempo Real (CRUD básico)</h4>
        <div class="simulador-web" style="background:#FFF3E0; padding:15px; border-radius:8px;">

            <p><strong>Crea y manipula productos (solo frontend):</strong></p>

            <div style="display:flex; gap:15px; flex-wrap:wrap; margin-bottom:10px;">
                <input type="text" id="producto-nombre" placeholder="Nombre del producto" style="flex:1; min-width:200px; padding:10px; border-radius:5px; border:1px solid #FF7043;">
                <input type="number" id="producto-precio" placeholder="Precio" style="width:120px; padding:10px; border-radius:5px; border:1px solid #FF7043;">
                <button onclick="agregarProducto()" style="padding:10px 16px; background:#FF7043; border:none; color:white; border-radius:5px; cursor:pointer;">Agregar</button>
            </div>

            <div id="productos-lista" style="border:1px solid #FFAB91; padding:10px; min-height:100px; background:white; border-radius:8px;"></div>
            <div id="web-output" style="margin-top:10px;"></div>

            <script>
                let productos = [];
                let idCounter = 1;

                function agregarProducto() {
                    const nombre = document.getElementById("producto-nombre").value.trim();
                    const precio = parseFloat(document.getElementById("producto-precio").value);
                    const output = document.getElementById("web-output");

                    if (!nombre || isNaN(precio)) {
                        output.innerHTML = "<p style=\'color:#E53935;\'>⚠️ Completa el nombre y un precio válido.</p>";
                        return;
                    }

                    const producto = { id: idCounter++, nombre, precio };
                    productos.push(producto);

                    actualizarLista();
                    output.innerHTML = `<p style="color:#43A047;">✔ Producto agregado: <strong>${nombre}</strong> ($${precio})</p>`;

                    document.getElementById("producto-nombre").value = "";
                    document.getElementById("producto-precio").value = "";
                }

                function actualizarLista() {
                    const lista = document.getElementById("productos-lista");
                    if (productos.length === 0) {
                        lista.innerHTML = "<p style=\'color:#666;\'>No hay productos registrados.</p>";
                        return;
                    }

                    let html = "<table style=\'width:100%; border-collapse:collapse; font-size:14px;\'>";
                    html += "<tr style=\'background:#FF7043; color:white;\'>";
                    html += "<th style=\'padding:8px; border:1px solid #FFAB91;\'>ID</th>";
                    html += "<th style=\'padding:8px; border:1px solid #FFAB91;\'>Nombre</th>";
                    html += "<th style=\'padding:8px; border:1px solid #FFAB91;\'>Precio</th>";
                    html += "<th style=\'padding:8px; border:1px solid #FFAB91;\'>Acción</th>";
                    html += "</tr>";

                    productos.forEach(p => {
                        html += `
                            <tr>
                                <td style="border:1px solid #FFCCBC; padding:8px;">${p.id}</td>
                                <td style="border:1px solid #FFCCBC; padding:8px;">${p.nombre}</td>
                                <td style="border:1px solid #FFCCBC; padding:8px;">$${p.precio}</td>
                                <td style="border:1px solid #FFCCBC; padding:8px;">
                                    <button onclick="eliminarProducto(${p.id})" 
                                        style="background:#D32F2F; color:white; border:none; padding:6px 10px; border-radius:4px; cursor:pointer;">
                                        Eliminar
                                    </button>
                                </td>
                            </tr>
                        `;
                    });

                    html += "</table>";
                    lista.innerHTML = html;
                }

                function eliminarProducto(id) {
                    productos = productos.filter(p => p.id !== id);
                    actualizarLista();
                    document.getElementById("web-output").innerHTML = `<p style=\'color:#FB8C00;\'>🗑 Producto eliminado (ID ${id}).</p>`;
                }
            </script>

            <p><em>Simulador full-stack simulado (datos solo en memoria del navegador).</em></p>
        </div>

        <hr style="border:1px dashed #FF5722;">

        <h4>3. Reto: Diseña tu Primera App Web Full-Stack</h4>
        <div class="reto-codigo">
            <p><strong>Tarea:</strong> Diseña una app de tareas usando tu propio stack:</p>
            <ol>
                <li><strong>Frontend:</strong> formulario + lista</li>
                <li><strong>Backend:</strong> API REST (POST/GET)</li>
                <li><strong>Base de Datos:</strong> tabla <code>tareas(id, texto, hecho)</code></li>
                <li><strong>Deploy:</strong> GitHub + Vercel / Render</li>
            </ol>

            <details>
                <summary>Ver solución modelo</summary>
                <pre><code>
// Frontend (HTML + JS)
<form onsubmit="agregarTarea(event)">
    <input type="text" id="tarea" placeholder="Nueva tarea" required>
    <button>Agregar</button>
</form>
<ul id="lista"></ul>

<script>
async function agregarTarea(e) {
    e.preventDefault();
    const texto = document.getElementById("tarea").value;

    await fetch("/api/tareas", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ texto })
    });
    cargarTareas();
}
async function cargarTareas() {
    const res = await fetch("/api/tareas");
    const tareas = await res.json();
    document.getElementById("lista").innerHTML =
        tareas.map(t => `<li>${t.texto} <button onclick="eliminar(${t.id})">X</button></li>`).join("");
}
</script>

// Backend (Node.js + Express)
app.post("/api/tareas", (req, res) => {
    const { texto } = req.body;
    db.run("INSERT INTO tareas (texto, hecho) VALUES (?, 0)", [texto]);
    res.json({ success: true });
});
app.get("/api/tareas", (req, res) => {
    db.all("SELECT * FROM tareas", (_, rows) => res.json(rows));
});

// Base de Datos (SQLite)
CREATE TABLE tareas (id INTEGER PRIMARY KEY, texto TEXT, hecho INT);
                </code></pre>
            </details>
        </div>

        <div class="visual">
            <img src="assets/img/Monolítica-vs-microservicios.jpg" alt="Arquitectura monolítica">
            <p><em>Arquitectura monolítica tradicional. Fuente: SoftKraft.</em></p>
        </div>

        <div class="visual">
            <img src="assets/img/mapa-del-sitio.png" alt="Arquitectura web general">
            <p><em>Visión general de una app web. Fuente: Asper Brothers.</em></p>
        </div>

        <hr style="border:1px dashed #FF5722;">

        <h4>4. SVG Animado: Flujo Cliente → Servidor → BD</h4>
        <div class="svg-diagram" id="fs-svg-diagram">
        <svg id="fs-svg" viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">

            <!-- Fondo -->
            <rect width="900" height="500" fill="#FFF3E0"></rect>

            <!-- Título -->
            <text x="450" y="50" fill="#E64A19" font-size="28" text-anchor="middle" font-weight="bold">
                FLUJO APP WEB
            </text>

            <!-- CLIENTE -->
            <g id="fs-cliente">
                <rect x="80" y="120" width="160" height="120" fill="#FF7043" rx="20"></rect>
                <text x="160" y="160" fill="white" font-size="18" text-anchor="middle">Cliente</text>
                <text x="160" y="195" fill="#FFCCBC" font-size="14" text-anchor="middle">HTML / CSS / JS</text>
            </g>

            <!-- SERVIDOR -->
            <g id="fs-servidor">
                <rect x="370" y="100" width="160" height="160" fill="#F4511E" rx="20"></rect>
                <text x="450" y="140" fill="white" font-size="18" text-anchor="middle">Backend</text>
                <text x="450" y="175" fill="#FFCCBC" font-size="14" text-anchor="middle">PHP / Node.js / C#</text>
                <text x="450" y="200" fill="#FFCCBC" font-size="12" text-anchor="middle">API REST</text>
            </g>

            <!-- BASE DE DATOS -->
            <g id="fs-bd">
                <rect x="660" y="120" width="160" height="120" fill="#D84315" rx="20"></rect>
                <text x="740" y="160" fill="white" font-size="18" text-anchor="middle">Base de Datos</text>
                <text x="740" y="195" fill="#FFCCBC" font-size="14" text-anchor="middle">MySQL / SQLite</text>
            </g>

            <!-- Flecha 1 -->
            <defs>
                <marker id="fs-arrow" markerWidth="12" markerHeight="12" refX="10" refY="3" orient="auto">
                    <path d="M0,0 L0,6 L9,3 z" fill="#FF5722"></path>
                </marker>
            </defs>

            <line x1="240" y1="180" x2="370" y2="180"
                stroke="#FF5722" stroke-width="5" marker-end="url(#fs-arrow)"></line>
            <text x="305" y="165" fill="#BF360C" font-size="13" text-anchor="middle">HTTP Request</text>

            <!-- Flecha 2 -->
            <line x1="530" y1="180" x2="660" y2="180"
                stroke="#FF5722" stroke-width="5" marker-end="url(#fs-arrow)"></line>
            <text x="595" y="165" fill="#BF360C" font-size="13" text-anchor="middle">SQL Query</text>

            <!-- Caja resumen -->
            <rect x="100" y="300" width="700" height="150" fill="#FFCCBC" rx="15"></rect>
            <text x="450" y="330" fill="#D84315" font-size="16" text-anchor="middle">
                Full-Stack: Todo el stack | 65% desarrolladores (2025)
            </text>
            <text x="450" y="360" fill="#BF360C" font-size="14" text-anchor="middle">
                Stacks: MERN • MEAN • LAMP • .NET
            </text>
            <text x="450" y="395" fill="#D84315" font-size="12" text-anchor="middle">
                Deploy: Vercel • Render • AWS
            </text>

        </svg>

        <p><em>Flujo completo cliente → servidor → base de datos.</em></p>
    </div>


        <div class="ejemplo">
            <h4>Ejemplo Real: PHP + MySQL</h4>
            <pre><code>
// index.php (Frontend + Backend en un solo archivo)
<form method="post">
    <input name="nombre" placeholder="Nombre" required>
    <button>Guardar</button>
</form>

<?php
if ($_POST) {
    $pdo = new PDO("mysql:host=localhost;dbname=app", "root", "");
    $stmt = $pdo->prepare("INSERT INTO users (nombre) VALUES (?)");
    $stmt->execute([$_POST["nombre"]]);
    echo "Usuario guardado correctamente";
}
?>
            </code></pre>
        </div>
    ',
    'ejercicios' => [
        ['enunciado' => 'Frontend usa', 'respuesta' => 'HTML, CSS, JavaScript'],
        ['enunciado' => 'Backend procesa', 'respuesta' => 'Lógica, APIs, autenticación'],
        ['enunciado' => 'BD almacena', 'respuesta' => 'Datos persistentes'],
        ['enunciado' => 'Full-Stack domina', 'respuesta' => 'Frontend + Backend + BD'],
        ['enunciado' => 'API REST usa', 'respuesta' => 'HTTP methods (GET, POST)'],
        ['enunciado' => 'Responsive con', 'respuesta' => 'Media Queries, Flexbox'],
        ['enunciado' => 'Deploy en', 'respuesta' => 'Vercel, Netlify, Heroku'],
        ['enunciado' => 'Stack MERN', 'respuesta' => 'Mongo, Express, React, Node'],
        ['enunciado' => 'PWA permite', 'respuesta' => 'Offline, notificaciones'],
        ['enunciado' => 'SSR es', 'respuesta' => 'Server-Side Rendering'],
        ['enunciado' => 'SI: % apps con PWA', 'respuesta' => '+70%'],
        ['enunciado' => 'Framework PHP', 'respuesta' => 'Laravel']
    ],
    'quiz' => [
        ['pregunta' => 'Frontend es', 'opciones' => ['Interfaz', 'Lógica', 'BD', 'Red'], 'correcta' => 'Interfaz'],
        ['pregunta' => 'Backend maneja', 'opciones' => ['APIs', 'Diseño', 'HTML', 'CSS'], 'correcta' => 'APIs'],
        ['pregunta' => 'Full-Stack incluye', 'opciones' => ['Todo', 'Solo front', 'Solo back', 'Diseño'], 'correcta' => 'Todo'],
        ['pregunta' => 'HTTP GET es para', 'opciones' => ['Leer', 'Crear', 'Actualizar', 'Eliminar'], 'correcta' => 'Leer'],
        ['pregunta' => 'POST para', 'opciones' => ['Crear', 'Leer', 'Actualizar', 'Eliminar'], 'correcta' => 'Crear'],
        ['pregunta' => 'Responsive adapta a', 'opciones' => ['Dispositivos', 'Solo PC', 'Impresión', 'Nada'], 'correcta' => 'Dispositivos'],
        ['pregunta' => 'PWA permite', 'opciones' => ['Offline', 'Solo online', 'Nada', 'Solo móvil'], 'correcta' => 'Offline'],
        ['pregunta' => 'SSR mejora', 'opciones' => ['SEO', 'Velocidad', 'Diseño', 'Nada'], 'correcta' => 'SEO'],
        ['pregunta' => 'Deploy en Vercel es', 'opciones' => ['Gratis', 'Solo pago', 'Local', 'Error'], 'correcta' => 'Gratis'],
        ['pregunta' => 'Git es para', 'opciones' => ['Control versión', 'Diseño', 'BD', 'Hosting'], 'correcta' => 'Control versión'],

        ['pregunta' => 'Stack LAMP', 'opciones' => ['Linux, Apache, MySQL, PHP', 'Windows', 'Node', 'React'], 'correcta' => 'Linux, Apache, MySQL, PHP'],
        ['pregunta' => 'MERN usa', 'opciones' => ['MongoDB', 'MySQL', 'PostgreSQL', 'SQLite'], 'correcta' => 'MongoDB'],
        ['pregunta' => 'Framework React', 'opciones' => ['Next.js', 'Laravel', 'Django', 'Flask'], 'correcta' => 'Next.js'],
        ['pregunta' => 'API REST devuelve', 'opciones' => ['JSON', 'HTML', 'CSS', 'XML'], 'correcta' => 'JSON'],
        ['pregunta' => 'CORS es para', 'opciones' => ['Seguridad dominios', 'Velocidad', 'Diseño', 'Nada'], 'correcta' => 'Seguridad dominios'],
        ['pregunta' => 'JWT para', 'opciones' => ['Autenticación', 'Diseño', 'BD', 'Hosting'], 'correcta' => 'Autenticación'],
        ['pregunta' => 'Docker', 'opciones' => ['Contenedores', 'VM', 'Nube', 'IDE'], 'correcta' => 'Contenedores'],
        ['pregunta' => 'CI/CD significa', 'opciones' => ['Integración/Despliegue continuo', 'Código', 'Diseño', 'Nada'], 'correcta' => 'Integración/Despliegue continuo'],
        ['pregunta' => 'SI 2025: % full-stack', 'opciones' => ['65%', '30%', '90%', '10%'], 'correcta' => '65%'],
        ['pregunta' => 'App más usada', 'opciones' => ['Web', 'Móvil', 'Desktop', 'IoT'], 'correcta' => 'Web'],

        ['pregunta' => 'Frontend framework', 'opciones' => ['React', 'Laravel', 'Express', 'Django'], 'correcta' => 'React'],
        ['pregunta' => 'Backend PHP', 'opciones' => ['Laravel', 'React', 'Vue', 'Angular'], 'correcta' => 'Laravel'],
        ['pregunta' => 'BD NoSQL', 'opciones' => ['MongoDB', 'MySQL', 'SQLite', 'Oracle'], 'correcta' => 'MongoDB'],
        ['pregunta' => 'Cloud para web', 'opciones' => ['AWS, Vercel', 'Local', 'USB', 'CD'], 'correcta' => 'AWS, Vercel'],
        ['pregunta' => 'HTTPS es', 'opciones' => ['Seguro', 'Lento', 'Opcional', 'Error'], 'correcta' => 'Seguro'],
        ['pregunta' => 'Cache mejora', 'opciones' => ['Velocidad', 'Seguridad', 'Diseño', 'Nada'], 'correcta' => 'Velocidad'],
        ['pregunta' => 'Microservicios', 'opciones' => ['Escalable', 'Monolito', 'Lento', 'Simple'], 'correcta' => 'Escalable'],
        ['pregunta' => 'WebSocket para', 'opciones' => ['Tiempo real', 'Estático', 'Archivos', 'Email'], 'correcta' => 'Tiempo real'],
        ['pregunta' => 'SI 2025: % apps PWA', 'opciones' => ['+70%', '30%', '10%', '0%'], 'correcta' => '+70%'],
        ['pregunta' => 'Full-Stack ideal para', 'opciones' => ['Startups, MVP', 'Bancos', 'Gobierno', 'Hardware'], 'correcta' => 'Startups, MVP']
    ]
];
// ========================================
// MATERIA: PROGRAMACIÓN
// SUBTEMA: C# + .NET: Consola, WinForms, ASP.NET, Simulador y Retos 2025
// ========================================
$lecciones[] = [
    'materia' => 'Programación',
    'slug' => 'lenguajes-csharp',
    'titulo' => 'C# + .NET: Consola, Frameworks, Simulador y Retos Interactivos',
    'contenido' => '
<div id="cs-section" class="cs-box">

<h3 id="cs-intro">C# + .NET: El Stack Líder para Empresas en 2025</h3>
<p><strong>C#</strong> = lenguaje moderno, tipado, orientado a objetos. 
<strong>.NET</strong> = plataforma multiplataforma. Usado en: 
<strong>CLI</strong>, <strong>WinForms</strong>, <strong>ASP.NET</strong>, 
<strong>Unity</strong>, <strong>Blazor</strong>.  
En 2025: <strong>82% de empresas Fortune 500 usan C#</strong>.</p>

<hr class="cs-hr">

<h4 id="cs-ecosistema">1. Ecosistema .NET 2025</h4>

<table class="cs-table">
    <thead>
        <tr><th>Tipo</th><th>Framework</th><th>Uso</th></tr>
    </thead>
    <tbody>
        <tr><td><strong>Consola</strong></td><td>.NET Console</td><td>CLI, automatización</td></tr>
        <tr><td><strong>Desktop</strong></td><td>WinForms, WPF, MAUI</td><td>Windows y multiplataforma</td></tr>
        <tr><td><strong>Web</strong></td><td>ASP.NET Core</td><td>APIs REST, MVC, Blazor</td></tr>
        <tr><td><strong>Juegos</strong></td><td>Unity</td><td>2D/3D, VR, móvil</td></tr>
        <tr><td><strong>Cloud</strong></td><td>Azure Functions</td><td>Serverless, microservicios</td></tr>
    </tbody>
</table>

<hr class="cs-hr">

<h4 id="cs-simulador">2. Simulador C# en Tiempo Real</h4>

<div class="cs-sim">

    <p><strong>Ejecuta código C# aquí:</strong></p>

    <textarea id="cs-editor" class="cs-textarea" rows="10">// Escribe tu código C#
using System;

public class Program
{
    public static void Main()
    {
        Console.WriteLine("Hola desde C#");
        int x = 10;
        Console.WriteLine($"x = {x}");
    }
}</textarea>

    <button id="cs-run" class="cs-btn" onclick="ejecutarCSharp()">Ejecutar</button>

    <div id="cs-output" class="cs-console"></div>

    <script>
        function ejecutarCSharp() {

            const code = document.getElementById("cs-editor").value;
            const out = document.getElementById("cs-output");

            out.innerHTML = "<span class=\"cs-term-info\">Compilando y ejecutando...</span>";

            let result = "";
            try {
                const lines = code.split("\\n");
                let inMain = false;

                lines.forEach(line => {
                    const trimmed = line.trim();
                    if (trimmed.includes("Main()")) inMain = true;
                    if (!inMain) return;

                    if (trimmed.startsWith("Console.WriteLine")) {
                        const match = trimmed.match(/Console\\.WriteLine\\(\\s*([\"\\\'\\`])(.*?)\\1\\s*\\)/);
                        if (match) {
                            result += match[2] + "\\n";
                        }
                    }
                });

                if (result === "") result = "(sin salida)";

                out.innerHTML = "<pre>" + result + "</pre>";

            } catch (err) {
                out.innerHTML = "<span class=\"cs-term-err\">Error: " + err.message + "</span>";
            }
        }
    </script>

</div>

<hr class="cs-hr">

<h4 id="cs-reto">3. Reto: Calculadora en Consola</h4>

<div class="cs-ejemplo">
    <p><strong>Desafío:</strong> Crea una calculadora con:</p>
    <ol>
        <li>Lectura de 2 números</li>
        <li>Menú: sumar, restar, multiplicar, dividir</li>
        <li>Manejo de división entre cero</li>
        <li>Repetición hasta salir</li>
    </ol>

    <details class="cs-details">
        <summary>Ver solución</summary>
        <pre class="cs-code"><code>
using System;

class Calculadora
{
    static void Main()
    {
        while (true)
        {
            Console.Write("Num1: ");
            double a = double.Parse(Console.ReadLine());
            Console.Write("Num2: ");
            double b = double.Parse(Console.ReadLine());

            Console.WriteLine("\\n1. Sumar\\n2. Restar\\n3. Multiplicar\\n4. Dividir\\n5. Salir");
            Console.Write("Opción: ");
            string op = Console.ReadLine();

            switch (op)
            {
                case "1": Console.WriteLine($"Resultado: {a + b}"); break;
                case "2": Console.WriteLine($"Resultado: {a - b}"); break;
                case "3": Console.WriteLine($"Resultado: {a * b}"); break;
                case "4":
                    if (b == 0) Console.WriteLine("Error: división por cero");
                    else Console.WriteLine($"Resultado: {a / b}");
                    break;
                case "5": return;
                default: Console.WriteLine("Opción inválida"); break;
            }
            Console.WriteLine("\\nEnter...");
            Console.ReadLine();
        }
    }
}
        </code></pre>
    </details>
</div>

<hr class="cs-hr">

<h4 id="cs-svg">4. SVG Animado: Flujo C# → .NET → App</h4>

<div class="cs-svg-wrap">

<svg id="cs-svg-diagram" viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">

    <rect x="0" y="0" width="900" height="500" fill="#F3E5F5"/>

    <text x="450" y="50" fill="#4A148C" font-size="28" text-anchor="middle" font-weight="bold">
        C# + .NET 2025
    </text>

    <!-- BLOQUE 1 -->
    <g id="cs-nodo-codigo" class="cs-animate">
        <rect x="100" y="120" width="160" height="120" fill="#7B1FA2" rx="20"/>
        <text x="180" y="160" fill="white" font-size="18" text-anchor="middle">Código C#</text>
        <text x="180" y="190" fill="#E1BEE7" font-size="14" text-anchor="middle">class Program</text>
        <text x="180" y="215" fill="#E1BEE7" font-size="12" text-anchor="middle">Main()</text>
    </g>

    <!-- BLOQUE 2 -->
    <g id="cs-nodo-runtime" class="cs-animate" style="animation-delay:0.35s">
        <rect x="370" y="100" width="160" height="160" fill="#6A1B9A" rx="20"/>
        <text x="450" y="140" fill="white" font-size="18" text-anchor="middle">.NET</text>
        <text x="450" y="170" fill="#E1BEE7" font-size="14" text-anchor="middle">Core</text>
        <text x="450" y="195" fill="#E1BEE7" font-size="12" text-anchor="middle">Multiplataforma</text>
        <text x="450" y="220" fill="#E1BEE7" font-size="12" text-anchor="middle">ASP.NET</text>
    </g>

    <!-- BLOQUE 3 -->
    <g id="cs-nodo-app" class="cs-animate" style="animation-delay:0.7s">
        <rect x="660" y="120" width="160" height="120" fill="#4A148C" rx="20"/>
        <text x="740" y="160" fill="white" font-size="18" text-anchor="middle">App</text>
        <text x="740" y="190" fill="#E1BEE7" font-size="14" text-anchor="middle">Consola</text>
        <text x="740" y="215" fill="#E1BEE7" font-size="12" text-anchor="middle">Web / Desktop</text>
    </g>

    <!-- Flechas -->
    <defs>
        <marker id="arrow-purple" markerWidth="12" markerHeight="12" refX="10" refY="3" orient="auto">
            <path d="M0,0 L0,6 L9,3 z" fill="#7B1FA2"/>
        </marker>
    </defs>

    <line x1="260" y1="180" x2="370" y2="180" stroke="#7B1FA2" stroke-width="5" marker-end="url(#arrow-purple)"/>
    <text x="315" y="165" fill="#4A148C" font-size="14" text-anchor="middle">dotnet build</text>

    <line x1="530" y1="180" x2="660" y2="180" stroke="#7B1FA2" stroke-width="5" marker-end="url(#arrow-purple)"/>
    <text x="595" y="165" fill="#4A148C" font-size="14" text-anchor="middle">Ejecutable</text>

</svg>

<p><em>SVG Animado: Compilación y ejecución en .NET.</em></p>

</div>

<hr class="cs-hr">

<div class="cs-ejemplo">
    <h4>Ejemplo ASP.NET Core API:</h4>
    <pre class="cs-code"><code>
// Program.cs
var builder = WebApplication.CreateBuilder();
var app = builder.Build();

app.MapGet("/api/saludo", () => "Hola desde C# API");

app.Run();
    </code></pre>
</div>

</div>
',
    'ejercicios' => [
        ['enunciado' => 'Hello World C#', 'respuesta' => 'Console.WriteLine("Hello");'],
        ['enunciado' => 'using System para', 'respuesta' => 'Acceder a Console'],
        ['enunciado' => 'Main es', 'respuesta' => 'Punto de entrada'],
        ['enunciado' => 'Framework web', 'respuesta' => 'ASP.NET Core'],
        ['enunciado' => 'Desktop con', 'respuesta' => 'WinForms, WPF, MAUI'],
        ['enunciado' => 'Juegos con', 'respuesta' => 'Unity'],
        ['enunciado' => 'dotnet new console', 'respuesta' => 'Crea app consola'],
        ['enunciado' => 'var infiere', 'respuesta' => 'Tipo automáticamente'],
        ['enunciado' => 'string interpolation', 'respuesta' => '$"texto {var}"'],
        ['enunciado' => 'try-catch para', 'respuesta' => 'Manejo errores'],
        ['enunciado' => 'SI: % empresas C#', 'respuesta' => '82%'],
        ['enunciado' => 'Blazor ejecuta', 'respuesta' => 'C# en navegador']
    ],
    'quiz' => [
        ['pregunta' => 'C# es', 'opciones' => ['Tipado estático', 'Dinámico', 'Interpretado', 'Script'], 'correcta' => 'Tipado estático'],
        ['pregunta' => '.NET es', 'opciones' => ['Multiplataforma', 'Solo Windows', 'Solo Linux', 'Móvil'], 'correcta' => 'Multiplataforma'],
        ['pregunta' => 'Console.WriteLine', 'opciones' => ['Imprime', 'Lee', 'Borra', 'Nada'], 'correcta' => 'Imprime'],
        ['pregunta' => 'Main retorna', 'opciones' => ['void', 'int', 'string', 'bool'], 'correcta' => 'void'],
        ['pregunta' => 'ASP.NET para', 'opciones' => ['Web', 'Consola', 'Juegos', 'BD'], 'correcta' => 'Web'],
        ['pregunta' => 'MAUI para', 'opciones' => ['Apps nativas', 'Web', 'Juegos', 'CLI'], 'correcta' => 'Apps nativas'],
        ['pregunta' => 'Blazor usa', 'opciones' => ['WebAssembly', 'Node.js', 'PHP', 'Python'], 'correcta' => 'WebAssembly'],
        ['pregunta' => 'Unity usa', 'opciones' => ['C#', 'C++', 'Java', 'JS'], 'correcta' => 'C#'],
        ['pregunta' => 'var x = 5; x es', 'opciones' => ['int', 'string', 'double', 'object'], 'correcta' => 'int'],
        ['pregunta' => 'try-catch maneja', 'opciones' => ['Excepciones', 'Errores', 'Nada', 'Todo'], 'correcta' => 'Excepciones'],

        ['pregunta' => 'dotnet run', 'opciones' => ['Ejecuta', 'Compila', 'Instala', 'Borra'], 'correcta' => 'Ejecuta'],
        ['pregunta' => 'List<T> es', 'opciones' => ['Colección genérica', 'Arreglo', 'Diccionario', 'String'], 'correcta' => 'Colección genérica'],
        ['pregunta' => 'LINQ para', 'opciones' => ['Consultas', 'Diseño', 'Red', 'Archivos'], 'correcta' => 'Consultas'],
        ['pregunta' => 'async/await para', 'opciones' => ['Asincronía', 'Sincronía', 'Hilos', 'Procesos'], 'correcta' => 'Asincronía'],
        ['pregunta' => 'record es', 'opciones' => ['Inmutable', 'Mutable', 'Clase', 'Interfaz'], 'correcta' => 'Inmutable'],
        ['pregunta' => 'Nullable<int> permite', 'opciones' => ['null', 'Solo 0', 'Nada', 'Error'], 'correcta' => 'null'],
        ['pregunta' => 'C# 13 incluye', 'opciones' => ['Primary constructors', 'C# 1', 'Nada', 'Errores'], 'correcta' => 'Primary constructors'],
        ['pregunta' => '.NET 9 es', 'opciones' => ['LTS', 'Preview', 'Obsoleto', 'Móvil'], 'correcta' => 'LTS'],
        ['pregunta' => 'SI 2025: C# en', 'opciones' => ['Top 5 lenguajes', 'Top 20', 'Obsoleto', 'Solo juegos'], 'correcta' => 'Top 5 lenguajes'],
        ['pregunta' => 'Empresas con C#', 'opciones' => ['Microsoft, Stack Overflow', 'Solo startups', 'Ninguna', 'Apple'], 'correcta' => 'Microsoft, Stack Overflow'],

        ['pregunta' => 'Visual Studio es', 'opciones' => ['IDE oficial', 'Editor texto', 'Navegador', 'BD'], 'correcta' => 'IDE oficial'],
        ['pregunta' => 'VS Code con', 'opciones' => ['C# Dev Kit', 'Python', 'Java', 'Nada'], 'correcta' => 'C# Dev Kit'],
        ['pregunta' => 'Azure para', 'opciones' => ['Cloud Microsoft', 'Local', 'AWS', 'Google'], 'correcta' => 'Cloud Microsoft'],
        ['pregunta' => 'Entity Framework', 'opciones' => ['ORM', 'Diseño', 'Red', 'Juegos'], 'correcta' => 'ORM'],
        ['pregunta' => 'xUnit para', 'opciones' => ['Pruebas unitarias', 'UI', 'BD', 'Red'], 'correcta' => 'Pruebas unitarias'],
        ['pregunta' => 'Minimal APIs', 'opciones' => ['ASP.NET simple', 'Complejas', 'Consola', 'Juegos'], 'correcta' => 'ASP.NET simple'],
        ['pregunta' => 'Hot Reload', 'opciones' => ['Cambios en vivo', 'Compilar', 'Nada', 'Error'], 'correcta' => 'Cambios en vivo'],
        ['pregunta' => 'SI 2025: % devs C#', 'opciones' => ['+12M', '1M', '100K', '0'], 'correcta' => '+12M'],
        ['pregunta' => 'C# ideal para', 'opciones' => ['Empresas, juegos, web', 'Solo web', 'Solo móvil', 'Nada'], 'correcta' => 'Empresas, juegos, web'],
        ['pregunta' => 'Futuro C#', 'opciones' => ['Cloud, IA, Web', 'Obsoleto', 'Solo desktop', 'Móvil'], 'correcta' => 'Cloud, IA, Web']
    ]
];
// ========================================
// MATERIA: PROGRAMACIÓN
// SUBTEMA: JavaScript Animaciones: requestAnimationFrame, GSAP, Canvas, Simulador y Retos
// ========================================
$lecciones[] = [
    'materia' => 'Programación',
    'slug' => 'js-animaciones',
    'titulo' => 'JS Animaciones: DOM, Canvas, GSAP, Simulador Interactivo y Retos 2025',
    'contenido' => '
<div id="js-section" class="js-section">

<h3 id="js-title">JavaScript: El Motor de Animaciones Web en 2025</h3>
<p><strong>JS</strong> controla animaciones con <code>requestAnimationFrame</code>, 
<strong>CSS transitions</strong>, <strong>Web Animations API</strong>, <strong>GSAP</strong>, 
<strong>Three.js</strong>. En 2025: <strong>94% de sitios top</strong> emplean animaciones JS.</p>

<hr class="js-hr">

<h4 id="js-metodos">1. Métodos de Animación JS</h4>

<table class="js-table">
    <thead>
        <tr><th>Método</th><th>API</th><th>Uso</th></tr>
    </thead>
    <tbody>
        <tr><td><strong>DOM + CSS</strong></td><td><code>classList.add()</code></td><td>Transiciones simples</td></tr>
        <tr><td><strong>requestAnimationFrame</strong></td><td><code>window.requestAnimationFrame</code></td><td>60 FPS, juegos</td></tr>
        <tr><td><strong>Web Animations API</strong></td><td><code>element.animate()</code></td><td>Control total</td></tr>
        <tr><td><strong>GSAP</strong></td><td><code>gsap.to()</code></td><td>Complejas, timelines</td></tr>
        <tr><td><strong>Canvas 2D</strong></td><td><code>ctx.fillRect()</code></td><td>Gráficos, partículas</td></tr>
    </tbody>
</table>

<hr class="js-hr">

<h4 id="js-simulador">2. Simulador de Animación en Tiempo Real</h4>

<div class="js-sim">
    <p><strong>Arrastra el círculo y suelta:</strong></p>

    <div id="js-sim-area" class="js-sim-area">
        <div id="js-ball" class="js-ball"></div>
    </div>

    <button class="js-sim-btn" onclick="jsResetBall()">Reiniciar</button>

    <div id="js-sim-output" class="js-sim-output"></div>

    <script>
        const jsBall = document.getElementById("js-ball");
        const jsOut = document.getElementById("js-sim-output");
        let jsDragging = false;
        let sx, sy, tx, ty, cx = 20, cy = 75;
        let vx = 0, vy = 0;
        const jsFriction = 0.9;
        const jsSpring = 0.1;

        jsBall.addEventListener("mousedown", e => {
            jsDragging = true;
            sx = e.clientX - cx;
            sy = e.clientY - cy;
            jsOut.innerHTML = "<span style=\"color:#E65100\">Arrastrando...</span>";
            jsBall.style.cursor = "grabbing";
        });

        document.addEventListener("mousemove", e => {
            if (!jsDragging) return;
            cx = e.clientX - sx;
            cy = e.clientY - sy;
            jsBall.style.left = cx + "px";
            jsBall.style.top = cy + "px";
        });

        document.addEventListener("mouseup", () => {
            if (!jsDragging) return;
            jsDragging = false;
            jsBall.style.cursor = "grab";
            tx = cx;
            ty = cy;
            vx = 0;
            vy = 0;
            jsOut.innerHTML = "<span style=\"color:green\">¡Soltado! Física activada.</span>";
            requestAnimationFrame(jsAnimate);
        });

        function jsAnimate() {
            const dx = tx - cx;
            const dy = ty - cy;

            vx += dx * jsSpring;
            vy += dy * jsSpring;
            vx *= jsFriction;
            vy *= jsFriction;

            cx += vx;
            cy += vy;

            jsBall.style.left = cx + "px";
            jsBall.style.top = cy + "px";

            if (Math.abs(dx) > 1 || Math.abs(dy) > 1 || Math.abs(vx) > 0.1) {
                requestAnimationFrame(jsAnimate);
            } else {
                jsOut.innerHTML = `<span style="color:#6D4C41">Estable en X: ${Math.round(cx)}px, Y: ${Math.round(cy)}px</span>`;
            }
        }

        function jsResetBall() {
            cx = 20; cy = 75;
            jsBall.style.left = cx + "px";
            jsBall.style.top = cy + "px";
            jsOut.innerHTML = "<span style=\'color:#999\'>Reiniciado.</span>";
        }
    </script>

    <p><em>Simulador físico con requestAnimationFrame + física básica.</em></p>
</div>

<hr class="js-hr">

<h4 id="js-scroll-reveal">3. Reto: Animación Scroll Reveal</h4>

<div class="js-reto">
    <p><strong>Desafío:</strong> Animar elementos con fade + slide al hacer scroll.</p>

    <details>
        <summary>Ver solución</summary>
        <pre class="js-code"><code>
// CSS
.reveal {
    opacity: 0;
    transform: translateY(50px);
    transition: .6s ease;
}
.reveal.show {
    opacity: 1;
    transform: none;
}

// JS
const obs = new IntersectionObserver(entries => {
    entries.forEach(e => e.isIntersecting && e.target.classList.add("show"));
});
document.querySelectorAll(".reveal").forEach(el => obs.observe(el));
</code></pre>
    </details>
</div>

<hr class="js-hr">

<h4 id="js-svg">4. SVG Animado: Partícula Física</h4>

<div class="js-svg-wrap">

<svg id="js-svg-anim" viewBox="0 0 600 300">
    <rect width="600" height="300" fill="#FFF8E1" stroke="#FFB300" stroke-width="2"/>

    <g id="js-svg-node" class="js-animate">
        <circle id="js-particle" cx="50" cy="150" r="20" fill="#FF6F00"/>
        <text x="300" y="280" fill="#E65100" font-size="14" text-anchor="middle">
            requestAnimationFrame → 60 FPS
        </text>
    </g>
</svg>

<p><em>Partícula animada con física real.</em></p>

<script>
    const p = document.getElementById("js-particle");
    let px = 50, py = 150, pvx = 5, pvy = 0;
    const g = 0.5, b = 0.8, fr = 0.99;

    function jsParticleAnim() {
        pvy += g;
        px += pvx;
        py += pvy;

        if (py > 250) {
            py = 250;
            pvy = -pvy * b;
            pvx *= fr;
        }
        if (px > 560 || px < 40) pvx = -pvx;

        p.setAttribute("cx", px);
        p.setAttribute("cy", py);

        requestAnimationFrame(jsParticleAnim);
    }
    jsParticleAnim();
</script>

</div>

<hr class="js-hr">

<div class="ejemplo">
    <h4>Ejemplo GSAP Timeline:</h4>
    <pre class="js-code"><code>
gsap.timeline()
    .to(".box", { x: 300, rotation: 360, duration: 1 })
    .to(".box", { y: 100, scale: .5, duration: .5 })
    .to(".box", { opacity: 0, duration: .5 });
</code></pre>
</div>

</div>
',
    'ejercicios' => [
        ['enunciado' => 'Animar con JS puro', 'respuesta' => 'requestAnimationFrame(callback)'],
        ['enunciado' => 'Transición CSS', 'respuesta' => 'element.style.transition = \'1s\''],
        ['enunciado' => 'Agregar clase animada', 'respuesta' => 'element.classList.add(\'animate\')'],
        ['enunciado' => 'GSAP to()', 'respuesta' => 'gsap.to(target, {props})'],
        ['enunciado' => 'Canvas contexto', 'respuesta' => 'ctx = canvas.getContext(\'2d\')'],
        ['enunciado' => 'Web Animations API', 'respuesta' => 'element.animate(keyframes, options)'],
        ['enunciado' => 'Scroll event', 'respuesta' => 'window.addEventListener(\'scroll\', fn)'],
        ['enunciado' => 'IntersectionObserver', 'respuesta' => 'new IntersectionObserver(callback)'],
        ['enunciado' => 'Lottie para', 'respuesta' => 'Animaciones JSON (After Effects)'],
        ['enunciado' => 'Three.js para', 'respuesta' => '3D en navegador'],
        ['enunciado' => 'SI: % sitios con anim', 'respuesta' => '94%'],
        ['enunciado' => '60 FPS =', 'respuesta' => '16.67ms por frame']
    ],
    'quiz' => [
        ['pregunta' => 'requestAnimationFrame', 'opciones' => ['60 FPS', '30 FPS', '1 FPS', 'Variable'], 'correcta' => '60 FPS'],
        ['pregunta' => 'GSAP es', 'opciones' => ['Biblioteca', 'Nativo', 'CSS', 'HTML'], 'correcta' => 'Biblioteca'],
        ['pregunta' => 'animate() es', 'opciones' => ['Web Animations API', 'jQuery', 'PHP', 'React'], 'correcta' => 'Web Animations API'],
        ['pregunta' => 'Canvas para', 'opciones' => ['Dibujo 2D/3D', 'Texto', 'Imágenes', 'Todo'], 'correcta' => 'Dibujo 2D/3D'],
        ['pregunta' => 'transition en', 'opciones' => ['CSS', 'JS', 'HTML', 'SVG'], 'correcta' => 'CSS'],
        ['pregunta' => 'transform modifica', 'opciones' => ['Posición, escala', 'Color', 'Texto', 'Fuente'], 'correcta' => 'Posición, escala'],
        ['pregunta' => 'opacity de 0 a 1', 'opciones' => ['Fade in', 'Fade out', 'Slide', 'Rotate'], 'correcta' => 'Fade in'],
        ['pregunta' => 'Scroll reveal usa', 'opciones' => ['IntersectionObserver', 'setInterval', 'setTimeout', 'PHP'], 'correcta' => 'IntersectionObserver'],
        ['pregunta' => 'Lottie anima', 'opciones' => ['JSON', 'GIF', 'MP4', 'SVG'], 'correcta' => 'JSON'],
        ['pregunta' => 'Three.js es', 'opciones' => ['WebGL', 'Canvas', 'CSS', 'DOM'], 'correcta' => 'WebGL'],

        ['pregunta' => 'GSAP timeline', 'opciones' => ['Secuencia', 'Paralelo', 'Aleatorio', 'Única'], 'correcta' => 'Secuencia'],
        ['pregunta' => 'ease: "bounce"', 'opciones' => ['GSAP', 'CSS', 'JS', 'HTML'], 'correcta' => 'GSAP'],
        ['pregunta' => 'stagger en GSAP', 'opciones' => ['Retraso secuencial', 'Color', 'Tamaño', 'Nada'], 'correcta' => 'Retraso secuencial'],
        ['pregunta' => 'ScrollTrigger', 'opciones' => ['GSAP plugin', 'Nativo', 'CSS', 'React'], 'correcta' => 'GSAP plugin'],
        ['pregunta' => 'MorphSVGPlugin', 'opciones' => ['Transforma SVG', 'Dibuja', 'Colorea', 'Elimina'], 'correcta' => 'Transforma SVG'],
        ['pregunta' => 'Canvas vs SVG', 'opciones' => ['Canvas: píxeles | SVG: vector', 'Igual', 'Canvas: vector', 'SVG: píxeles'], 'correcta' => 'Canvas: píxeles | SVG: vector'],
        ['pregunta' => 'SI 2025: animaciones', 'opciones' => ['94% sitios', '50%', '10%', '0%'], 'correcta' => '94% sitios'],
        ['pregunta' => 'Mejor performance', 'opciones' => ['requestAnimationFrame', 'setInterval', 'setTimeout', 'CSS'], 'correcta' => 'requestAnimationFrame'],
        ['pregunta' => 'CSS preferido para', 'opciones' => ['Transiciones simples', 'Juegos', 'Partículas', '3D'], 'correcta' => 'Transiciones simples'],
        ['pregunta' => 'GSAP ideal para', 'opciones' => ['Complejas, timelines', 'Fade', 'Hover', 'Scroll'], 'correcta' => 'Complejas, timelines'],

        ['pregunta' => 'WebGL para', 'opciones' => ['3D acelerado', '2D', 'Texto', 'Formularios'], 'correcta' => '3D acelerado'],
        ['pregunta' => 'Framer Motion', 'opciones' => ['React', 'Vue', 'Angular', 'Vanilla'], 'correcta' => 'React'],
        ['pregunta' => 'Anime.js', 'opciones' => ['Ligero', 'Pesado', 'Solo SVG', 'Solo Canvas'], 'correcta' => 'Ligero'],
        ['pregunta' => '60 FPS =', 'opciones' => ['16.67ms', '100ms', '1s', '10ms'], 'correcta' => '16.67ms'],
        ['pregunta' => 'will-change', 'opciones' => ['Optimiza GPU', 'Color', 'Tamaño', 'Nada'], 'correcta' => 'Optimiza GPU'],
        ['pregunta' => 'transform: translateZ(0)', 'opciones' => ['Forzar GPU', '2D', '3D', 'Nada'], 'correcta' => 'Forzar GPU'],
        ['pregunta' => 'Parallax con JS', 'opciones' => ['scrollY * factor', 'click', 'hover', 'load'], 'correcta' => 'scrollY * factor'],
        ['pregunta' => 'SI 2025: % con GSAP', 'opciones' => ['+40% top sites', '5%', '90%', '0%'], 'correcta' => '+40% top sites'],
        ['pregunta' => 'Animaciones mejoran', 'opciones' => ['UX, engagement', 'Velocidad', 'SEO', 'Nada'], 'correcta' => 'UX, engagement'],
        ['pregunta' => 'Futuro animaciones', 'opciones' => ['IA, 3D, WebXR', 'Flash', 'GIF', 'Static'], 'correcta' => 'IA, 3D, WebXR']
    ]
];
// ========================================
// MATERIA: PROGRAMACIÓN
// SUBTEMA: HTML5: Estructura, Semántica, Formularios, Simulador y Retos 2025
// ========================================
$lecciones[] = [
    'materia' => 'Programación',
    'slug' => 'html-pagina-web',
    'titulo' => 'HTML5: Estructura Semántica, Formularios, Simulador y Retos Interactivos',
    'contenido' => '
<div id="html5-section" class="html-section">

    <h3 id="html5-title">HTML5: La Base Semántica del Frontend Moderno en 2025</h3>
    <p id="html5-intro">
        <strong>HTML5</strong> = estándar actual para estructurar contenido web con 
        <strong>semántica</strong>: <code>&lt;header&gt;</code>, <code>&lt;nav&gt;</code>, 
        <code>&lt;main&gt;</code>, <code>&lt;article&gt;</code>, <code>&lt;section&gt;</code>, 
        <code>&lt;footer&gt;</code>. Incluye <strong>APIs nativas</strong>: Canvas, Audio, 
        Video, Geolocalización, Web Storage. En 2025: 
        <strong>99.9% navegadores soportan HTML5</strong> (CanIUse).
    </p>

    <hr class="html-hr">

    <!-- =====================================================
         1. TABLA SEMÁNTICA 
         ===================================================== -->
    <h4 id="html5-table-title">1. Estructura Semántica HTML5</h4>

    <table id="html5-table" class="html-table table">
        <thead>
            <tr><th>Tag</th><th>Función</th><th>Ejemplo</th></tr>
        </thead>
        <tbody>
            <tr><td><strong>&lt;header&gt;</strong></td><td>Encabezado página/sección</td><td>Logo + nav</td></tr>
            <tr><td><strong>&lt;nav&gt;</strong></td><td>Menú navegación</td><td>Enlaces principales</td></tr>
            <tr><td><strong>&lt;main&gt;</strong></td><td>Contenido principal</td><td>Único por página</td></tr>
            <tr><td><strong>&lt;article&gt;</strong></td><td>Contenido independiente</td><td>Blog post</td></tr>
            <tr><td><strong>&lt;section&gt;</strong></td><td>Sección temática</td><td>Capítulo</td></tr>
            <tr><td><strong>&lt;aside&gt;</strong></td><td>Contenido lateral</td><td>Sidebar</td></tr>
            <tr><td><strong>&lt;footer&gt;</strong></td><td>Pie de página</td><td>Copyright</td></tr>
        </tbody>
    </table>

    <hr class="html-hr">

    <!-- =====================================================
         2. SIMULADOR HTML  
         ===================================================== -->
    <h4 id="html5-simulador-title">2. Simulador HTML5 en Tiempo Real</h4>

    <div id="html5-simulador" class="html-sim">
        <p><strong>Edita el HTML y ve el resultado:</strong></p>

        <div id="html5-sim-container" class="html-sim-container">
            <textarea id="html5-input" rows="10">&lt;!DOCTYPE html&gt;
&lt;html lang="es"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Mi Página&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Hola HTML5&lt;/h1&gt;
    &lt;p&gt;Este es un &lt;strong&gt;párrafo&lt;/strong&gt; con &lt;a href="#"&gt;enlace&lt;/a&gt;.&lt;/p&gt;
    &lt;img src="https://via.placeholder.com/150" alt="Placeholder"&gt;
&lt;/body&gt;
&lt;/html&gt;</textarea>

            <iframe id="html5-output"></iframe>
        </div>

        <button id="html5-update-btn" class="html-btn" onclick="html5Actualizar()">Actualizar</button>

        <script>
            function html5Actualizar() {
                const input = document.getElementById("html5-input").value;
                const output = document.getElementById("html5-output").contentWindow.document;
                output.open();
                output.write(input);
                output.close();
            }
            html5Actualizar();
        </script>

        <p><em>Simulador embebido: escribe HTML válido y observa el render en vivo.</em></p>
    </div>

    <hr class="html-hr">

    <!-- =====================================================
         3. RETO 
         ===================================================== -->
    <h4 id="html5-reto-title">3. Reto: Landing Page Semántica</h4>

    <div id="html5-reto" class="html-reto">
        <p><strong>Desafío:</strong> Crea una landing page con:</p>
        <ol>
            <li><code>&lt;header&gt;</code> con logo y menú</li>
            <li><code>&lt;main&gt;</code> con <code>&lt;section&gt;</code> hero</li>
            <li><code>&lt;article&gt;</code> con cards</li>
            <li><code>&lt;footer&gt;</code> con copyright</li>
        </ol>

        <details>
            <summary>Ver solución</summary>
            <pre class="html-code"><code>
&lt;!DOCTYPE html&gt;
&lt;html lang="es"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Mi Landing&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;header&gt;
        &lt;h1&gt;Mi Marca&lt;/h1&gt;
        &lt;nav&gt;
            &lt;a href="#"&gt;Inicio&lt;/a&gt;
            &lt;a href="#"&gt;Servicios&lt;/a&gt;
            &lt;a href="#"&gt;Contacto&lt;/a&gt;
        &lt;/nav&gt;
    &lt;/header&gt;

    &lt;main&gt;
        &lt;section class="hero"&gt;
            &lt;h2&gt;Bienvenido&lt;/h2&gt;
            &lt;p&gt;Texto persuasivo aquí.&lt;/p&gt;
            &lt;button&gt;Acción&lt;/button&gt;
        &lt;/section&gt;

        &lt;section class="cards"&gt;
            &lt;article&gt;
                &lt;h3&gt;Feature 1&lt;/h3&gt;
                &lt;p&gt;Descripción.&lt;/p&gt;
            &lt;/article&gt;
            &lt;article&gt;
                &lt;h3&gt;Feature 2&lt;/h3&gt;
                &lt;p&gt;Descripción.&lt;/p&gt;
            &lt;/article&gt;
        &lt;/section&gt;
    &lt;/main&gt;

    &lt;footer&gt;
        &lt;p&gt;&copy; 2025 Mi Marca. Todos los derechos reservados.&lt;/p&gt;
    &lt;/footer&gt;
&lt;/body&gt;
&lt;/html&gt;
            </code></pre>
        </details>
    </div>

    <div id="html5-visual-1" class="visual">
        <img src="assets/img/gsuez-estructura.png" alt="Estructura página">
        <p><em>Estructura clásica. Fuente: Web Style Guide.</em></p>
    </div>

    <div id="html5-visual-2" class="visual">
        <img src="assets/img/estructura-basica-de-una-pagina-web-en-html.jpg" alt="HTML básico">
        <p><em>Estructura básica. Fuente: AptLearn.</em></p>
    </div>

    <hr class="html-hr">

    <h4 id="html5-svg-title">4. SVG Animado: Estructura HTML5</h4>

    <div id="html5-svg-container" class="html-svg">
        <svg 
            id="html5-svg" 
            viewBox="0 0 900 500" 
            xmlns="http://www.w3.org/2000/svg"
            style="overflow: visible;"
            pointer-events="none"
        >

            <!-- Fondo -->
            <rect x="0" y="0" width="900" height="500" fill="#0D1117"/>

            <!-- Título -->
            <text x="450" y="50" fill="#1E88E5" font-size="28" text-anchor="middle" font-weight="bold">
                HTML5 SEMÁNTICO
            </text>

            <!-- ========================= HEADER ========================= -->
            <g id="html5-svg-header" opacity="0">
                <animate 
                    attributeName="opacity" 
                    values="0;1" 
                    begin="0.1s" 
                    dur="0.6s" 
                    fill="freeze"
                />
                <rect x="100" y="100" width="700" height="80" fill="#1565C0" rx="15"/>
                <text x="450" y="140" fill="white" font-size="20" text-anchor="middle">HEADER</text>
                <text x="450" y="165" fill="#90CAF9" font-size="14" text-anchor="middle">logo + nav</text>
            </g>

            <!-- ========================= MAIN ========================= -->
            <g id="html5-svg-main" opacity="0">
                <animate 
                    attributeName="opacity" 
                    values="0;1" 
                    begin="0.8s" 
                    dur="0.6s" 
                    fill="freeze"
                />
                <rect x="100" y="200" width="700" height="180" fill="#1E88E5" rx="15"/>
                <text x="450" y="240" fill="white" font-size="20" text-anchor="middle">MAIN</text>
                <text x="450" y="265" fill="#BBDEFB" font-size="14" text-anchor="middle">section + article</text>
                <text x="450" y="290" fill="#BBDEFB" font-size="12" text-anchor="middle">hero, cards, form</text>
                <text x="450" y="315" fill="#BBDEFB" font-size="12" text-anchor="middle">canvas, video</text>
            </g>

            <!-- ========================= FOOTER ========================= -->
            <g id="html5-svg-footer" opacity="0">
                <animate 
                    attributeName="opacity" 
                    values="0;1" 
                    begin="1.5s" 
                    dur="0.6s" 
                    fill="freeze"
                />
                <rect x="100" y="400" width="700" height="60" fill="#0D47A1" rx="15"/>
                <text x="450" y="435" fill="white" font-size="18" text-anchor="middle">FOOTER</text>
                <text x="450" y="455" fill="#90CAF9" font-size="12" text-anchor="middle">LC-ADVANCE © 2025 | links</text>
            </g>

            <!-- Flechas -->
            <line x1="450" y1="180" x2="450" y2="200" stroke="#1E88E5" stroke-width="4"/>
            <line x1="450" y1="380" x2="450" y2="400" stroke="#1E88E5" stroke-width="4"/>

        </svg>

        <p><em>SVG Animado: Flujo visual de estructura semántica.</em></p>
    </div>
    <div id="html5-ejemplo" class="ejemplo">
        <h4>Ejemplo Formulario HTML5:</h4>
        <pre class="html-code"><code>
&lt;form&gt;
    &lt;label for="email"&gt;Email:&lt;/label&gt;
    &lt;input type="email" id="email" required placeholder="tu@email.com"&gt;

    &lt;label for="pass"&gt;Contraseña:&lt;/label&gt;
    &lt;input type="password" id="pass" minlength="8" required&gt;

    &lt;button type="submit"&gt;Enviar&lt;/button&gt;
&lt;/form&gt;
        </code></pre>
    </div>

</div>
'
,
    'ejercicios' => [
        ['enunciado' => 'DOCTYPE HTML5', 'respuesta' => '<!DOCTYPE html>'],
        ['enunciado' => 'Tag raíz', 'respuesta' => '<html>'],
        ['enunciado' => 'Meta charset', 'respuesta' => '<meta charset="UTF-8">'],
        ['enunciado' => 'Viewport meta', 'respuesta' => '<meta name="viewport" content="width=device-width, initial-scale=1.0">'],
        ['enunciado' => 'Encabezado semántico', 'respuesta' => '<header>'],
        ['enunciado' => 'Menú navegación', 'respuesta' => '<nav>'],
        ['enunciado' => 'Contenido principal', 'respuesta' => '<main>'],
        ['enunciado' => 'Artículo independiente', 'respuesta' => '<article>'],
        ['enunciado' => 'Pie de página', 'respuesta' => '<footer>'],
        ['enunciado' => 'Formulario input email', 'respuesta' => '<input type="email">'],
        ['enunciado' => 'SI: % soporte HTML5', 'respuesta' => '99.9%'],
        ['enunciado' => 'Canvas para', 'respuesta' => 'Gráficos 2D']
    ],
    'quiz' => [
        ['pregunta' => 'HTML5 es', 'opciones' => ['Estándar actual', 'Obsoleto', 'Solo móvil', 'Backend'], 'correcta' => 'Estándar actual'],
        ['pregunta' => 'Tag semántico para menú', 'opciones' => ['<nav>', '<menu>', '<ul>', '<div>'], 'correcta' => '<nav>'],
        ['pregunta' => '<main> debe haber', 'opciones' => ['Uno por página', 'Varios', 'Ninguno', 'Opcional'], 'correcta' => 'Uno por página'],
        ['pregunta' => 'SEO mejora con', 'opciones' => ['Tags semánticos', 'Divs', 'Span', 'P'], 'correcta' => 'Tags semánticos'],
        ['pregunta' => 'Accesibilidad usa', 'opciones' => ['ARIA, alt', 'Solo CSS', 'JS', 'PHP'], 'correcta' => 'ARIA, alt'],
        ['pregunta' => 'Canvas API', 'opciones' => ['2D/3D', 'Solo 2D', 'Solo audio', 'Texto'], 'correcta' => '2D/3D'],
        ['pregunta' => 'Video nativo', 'opciones' => ['<video>', '<iframe>', '<object>', '<embed>'], 'correcta' => '<video>'],
        ['pregunta' => 'Form validation nativo', 'opciones' => ['HTML5', 'JS', 'CSS', 'PHP'], 'correcta' => 'HTML5'],
        ['pregunta' => 'LocalStorage guarda', 'opciones' => ['Datos cliente', 'Server', 'Cookie', 'DB'], 'correcta' => 'Datos cliente'],
        ['pregunta' => 'Geolocation API', 'opciones' => ['navigator.geolocation', 'window.location', 'document.geo', 'HTML'], 'correcta' => 'navigator.geolocation'],

        ['pregunta' => 'Tag para artículo', 'opciones' => ['<article>', '<section>', '<div>', '<p>'], 'correcta' => '<article>'],
        ['pregunta' => 'Sidebar usa', 'opciones' => ['<aside>', '<div>', '<section>', '<article>'], 'correcta' => '<aside>'],
        ['pregunta' => 'Input type="date"', 'opciones' => ['Selector fecha', 'Texto', 'Número', 'Email'], 'correcta' => 'Selector fecha'],
        ['pregunta' => 'required atributo', 'opciones' => ['Validación', 'Estilo', 'Evento', 'Nada'], 'correcta' => 'Validación'],
        ['pregunta' => 'placeholder es', 'opciones' => ['Texto guía', 'Valor', 'Label', 'Error'], 'correcta' => 'Texto guía'],
        ['pregunta' => 'autocomplete', 'opciones' => ['off/on', 'Siempre', 'Nunca', 'Error'], 'correcta' => 'off/on'],
        ['pregunta' => 'SI 2025: % HTML5', 'opciones' => ['99.9%', '80%', '50%', '10%'], 'correcta' => '99.9%'],
        ['pregunta' => 'PWA necesita', 'opciones' => ['HTML5 + Service Worker', 'Solo HTML', 'Flash', 'Java'], 'correcta' => 'HTML5 + Service Worker'],
        ['pregunta' => 'Web Components', 'opciones' => ['Custom Elements', 'Divs', 'React', 'Vue'], 'correcta' => 'Custom Elements'],
        ['pregunta' => 'Shadow DOM', 'opciones' => ['Encapsula estilos', 'Global', 'Nada', 'Error'], 'correcta' => 'Encapsula estilos'],

        ['pregunta' => 'HTML es', 'opciones' => ['Lenguaje marcado', 'Programación', 'Estilo', 'BD'], 'correcta' => 'Lenguaje marcado'],
        ['pregunta' => 'CSS es para', 'opciones' => ['Estilo', 'Estructura', 'Lógica', 'Datos'], 'correcta' => 'Estilo'],
        ['pregunta' => 'JS es para', 'opciones' => ['Comportamiento', 'Estructura', 'Estilo', 'Server'], 'correcta' => 'Comportamiento'],
        ['pregunta' => 'Responsive con', 'opciones' => ['Viewport + media queries', 'Solo CSS', 'JS', 'PHP'], 'correcta' => 'Viewport + media queries'],
        ['pregunta' => 'alt atributo', 'opciones' => ['Accesibilidad', 'Estilo', 'Tamaño', 'Nada'], 'correcta' => 'Accesibilidad'],
        ['pregunta' => 'lang atributo', 'opciones' => ['Idioma', 'País', 'Moneda', 'Hora'], 'correcta' => 'Idioma'],
        ['pregunta' => 'manifest.json para', 'opciones' => ['PWA', 'SEO', 'Estilo', 'JS'], 'correcta' => 'PWA'],
        ['pregunta' => 'SI 2025: % PWA', 'opciones' => ['+70% apps', '30%', '10%', '0%'], 'correcta' => '+70% apps'],
        ['pregunta' => 'HTML ideal para', 'opciones' => ['Estructura, SEO, accesibilidad', 'Diseño', 'Lógica', 'Backend'], 'correcta' => 'Estructura, SEO, accesibilidad'],
        ['pregunta' => 'Futuro HTML', 'opciones' => ['Web Components, PWA, IA', 'Flash', 'Silverlight', 'Static'], 'correcta' => 'Web Components, PWA, IA']
    ]
];
// ========================================
// MATERIA: PROGRAMACIÓN
// SUBTEMA: CSS3: Flexbox, Grid, Animaciones, Simulador y Retos 2025
// ========================================
$lecciones[] = [
    'materia' => 'Programación',
    'slug' => 'css-estilos',
    'titulo' => 'CSS3: Flexbox, Grid, Variables, Animaciones, Simulador y Retos',
    'contenido' => '
        <div id="css3-section" class="css-section">

            <h3 id="css3-title">CSS3: El Motor de Diseño y Animación del Frontend Moderno</h3>

            <p id="css3-intro">
                <strong>CSS3</strong> es el estándar que controla el diseño visual y layouts modernos. 
                Incluye <strong>Flexbox</strong>, <strong>Grid</strong>, <strong>variables</strong>, 
                <strong>transiciones</strong>, <strong>animaciones</strong> y 
                <strong>media queries</strong>.  
                En 2025: <strong>98% de soporte global</strong> (CanIUse).  
                Usado en <strong>95% de los sitios top 1000</strong> (HTTP Archive).
            </p>

            <hr class="css-hr">

            <!-- =====================================================
                1. TABLA CSS3 
                ===================================================== -->
            <h4 id="css3-table-title">1. Módulos Clave CSS3</h4>

            <table id="css3-table" class="css-table table">
                <thead>
                    <tr><th>Módulo</th><th>Función</th><th>Ejemplo</th></tr>
                </thead>
                <tbody>
                    <tr><td><strong>Flexbox</strong></td><td>Layout 1D</td><td><code>display: flex;</code></td></tr>
                    <tr><td><strong>Grid</strong></td><td>Layout 2D</td><td><code>display: grid;</code></td></tr>
                    <tr><td><strong>Variables</strong></td><td>Reutilización</td><td><code>--color: #43A047;</code></td></tr>
                    <tr><td><strong>Transiciones</strong></td><td>Efectos suaves</td><td><code>transition: all 0.3s;</code></td></tr>
                    <tr><td><strong>Animaciones</strong></td><td>Secuencias</td><td><code>@keyframes</code></td></tr>
                    <tr><td><strong>Media Queries</strong></td><td>Responsive</td><td><code>@media (max-width: 768px)</code></td></tr>
                </tbody>
            </table>

            <hr class="css-hr">

            <!-- =====================================================
                2. SIMULADOR CSS  
                ===================================================== -->
            <h4 id="css3-simulador-title">2. Simulador CSS en Tiempo Real</h4>

            <div id="css3-simulador" class="css-sim">

                <p><strong>Edita el CSS y ve el resultado en vivo:</strong></p>

                <div id="css3-sim-container" class="css-sim-container">

                    <div class="css-sim-html">
                        <p><strong>HTML (vista previa):</strong></p>
                        <pre class="css-html-code">
        &lt;div class="box"&gt;Hover me&lt;/div&gt;
        &lt;div class="card"&gt;
            &lt;h3&gt;Título&lt;/h3&gt;
            &lt;p&gt;Contenido con sombra y borde.&lt;/p&gt;
        &lt;/div&gt;
                        </pre>
                    </div>

                    <textarea id="css3-input" class="css-editor" rows="10">.box {
        width: 100px;
        height: 100px;
        background: #43A047;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        cursor: pointer;
        }

        .box:hover {
        background: #2E7D32;
        transform: scale(1.1);
        border-radius: 50%;
        }

        .card {
        max-width: 300px;
        padding: 20px;
        border: 1px solid #2c2c2c;
        border-radius: 8px;
        background: #111;
        box-shadow: 0 4px 12px rgba(0,0,0,0.4);
        font-family: Arial, sans-serif;
        }</textarea>

                </div>

                <div id="css3-output-wrapper" class="css-output-wrapper">
                    <div id="css3-output" class="css-output">
                        <div class="box">Hover me</div>
                        <div class="card">
                            <h3>Título</h3>
                            <p>Contenido con sombra y borde.</p>
                        </div>
                    </div>
                </div>

                <button id="css3-update-btn" class="css-btn" onclick="css3Actualizar()">Actualizar</button>

                <script>
                    function css3Actualizar() {
                        const css = document.getElementById("css3-input").value;
                        let style = document.getElementById("dynamic-css3");
                        if (!style) {
                            style = document.createElement("style");
                            style.id = "dynamic-css3";
                            document.head.appendChild(style);
                        }
                        style.textContent = css;
                    }
                    css3Actualizar();
                </script>

                <p><em>Simulador embebido: modifica el CSS y observa el resultado al instante.</em></p>
            </div>

            <hr class="css-hr">

            <!-- =====================================================
                3. RETO  
                ===================================================== -->
            <h4 id="css3-reto-title">3. Reto: Tarjeta con Hover 3D</h4>

            <div id="css3-reto" class="css-reto">

                <p><strong>Desafío:</strong> Crea una tarjeta con efecto 3D realista usando transformaciones.</p>

                <details>
                    <summary>Ver solución</summary>
                    <pre class="css-code"><code>
        .card-3d {
        width: 300px;
        height: 200px;
        perspective: 1000px;
        }

        .card-inner {
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #43A047, #66BB6A);
        border-radius: 12px;
        padding: 20px;
        color: white;
        text-align: center;
        transition: transform 0.6s, box-shadow 0.6s;
        transform-style: preserve-3d;
        }

        .card-3d:hover .card-inner {
        transform: rotateX(15deg) rotateY(20deg);
        box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
                    </code></pre>
                </details>

            </div>

            <div class="visual">
                <img src="assets/img/1-Line-Layouts.jpg" alt="CSS layout">
                <p><em>Ejemplo de layout (REQ).</em></p>
            </div>

            <div class="visual">
                <img src="assets/img/animacion-css.gif" alt="CSS animation">
                <p><em>Animación CSS3 (CSS-Tricks).</em></p>
            </div>

            <hr class="css-hr">

            <!-- =====================================================
                4. SVG ANIMADO  
                ===================================================== -->
            <h4 id="css3-svg-title">4. SVG Animado: Flujo CSS → Render</h4>

            <div id="css3-svg-container" class="css-svg">
            <svg id="css3-svg" viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">

                <rect x="0" y="0" width="900" height="500" fill="#0D1117"/>

                <text x="450" y="50" fill="#43A047" font-size="28" text-anchor="middle" font-weight="bold"
                    class="fade-in-1">
                    CSS3 → RENDER 2025
                </text>

                <!-- CSS block -->
                <g id="css3-svg-css" class="fade-in-2">
                    <rect x="100" y="120" width="160" height="120" fill="#2E7D32" rx="20"/>
                    <text x="180" y="155" fill="white" font-size="18" text-anchor="middle">CSS</text>
                    <text x="180" y="185" fill="#A5D6A7" font-size="14" text-anchor="middle">Flexbox</text>
                    <text x="180" y="210" fill="#A5D6A7" font-size="12" text-anchor="middle">Grid</text>
                </g>

                <!-- Browser -->
                <g id="css3-svg-browser" class="fade-in-3">
                    <rect x="370" y="100" width="160" height="160" fill="#1B5E20" rx="20"/>
                    <text x="450" y="140" fill="white" font-size="18" text-anchor="middle">BROWSER</text>
                    <text x="450" y="170" fill="#A5D6A7" font-size="14" text-anchor="middle">Parse</text>
                    <text x="450" y="190" fill="#A5D6A7" font-size="12" text-anchor="middle">Cascade</text>
                    <text x="450" y="210" fill="#A5D6A7" font-size="12" text-anchor="middle">Layout</text>
                </g>

                <!-- Render -->
                <g id="css3-svg-render" class="fade-in-4">
                    <rect x="660" y="120" width="160" height="120" fill="#388E3C" rx="20"/>
                    <text x="740" y="155" fill="white" font-size="18" text-anchor="middle">RENDER</text>
                    <text x="740" y="185" fill="#C8E6C9" font-size="14" text-anchor="middle">GPU</text>
                    <text x="740" y="210" fill="#C8E6C9" font-size="12" text-anchor="middle">60 FPS</text>
                </g>

                <!-- Flechas -->
                <defs>
                    <marker id="arrow-green" markerWidth="12" markerHeight="12" refX="10" refY="3" orient="auto">
                        <path d="M0,0 L0,6 L9,3 z" fill="#43A047"/>
                    </marker>
                </defs>

                <line x1="260" y1="180" x2="370" y2="180" 
                    stroke="#43A047" stroke-width="5" marker-end="url(#arrow-green)"
                    class="fade-in-3"/>

                <text x="320" y="165" fill="#66BB6A" font-size="14" text-anchor="middle"
                    class="fade-in-3">
                    Link / &lt;style&gt;
                </text>

                <line x1="530" y1="180" x2="660" y2="180" 
                    stroke="#43A047" stroke-width="5" marker-end="url(#arrow-green)"
                    class="fade-in-4"/>

                <text x="595" y="165" fill="#66BB6A" font-size="14" text-anchor="middle"
                    class="fade-in-4">
                    Paint
                </text>

                <!-- Pie -->
                <g class="fade-in-5">
                    <rect x="100" y="300" width="700" height="150" fill="#1A2E1A" rx="15"/>
                    <text x="450" y="330" fill="#81C784" font-size="16" text-anchor="middle">
                        98% soporte | 95% top sites
                    </text>
                    <text x="450" y="360" fill="#C8E6C9" font-size="14" text-anchor="middle">
                        Flexbox + Grid = 90% layouts modernos
                    </text>
                    <text x="450" y="390" fill="#81C784" font-size="12" text-anchor="middle">
                        CSS Houdini: Custom Paint, Properties
                    </text>
                </g>

            </svg>

            <p><em>SVG Animado: Flujo de cómo el navegador procesa CSS.</em></p>
        </div>


            <hr class="css-hr">

            <div id="css3-ejemplo" class="ejemplo">
                <h4>Ejemplo Grid Responsive:</h4>
                <pre class="css-code"><code>
        .container {
        display: grid;
        gap: 1rem;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }

        .card {
        background: #111;
        padding: 1.5rem;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.4);
        }
                </code></pre>
            </div>

        </div>
        ',
    'ejercicios' => [
        ['enunciado' => 'Selector ID', 'respuesta' => '#mi-id'],
        ['enunciado' => 'Selector clase', 'respuesta' => '.mi-clase'],
        ['enunciado' => 'Flexbox display', 'respuesta' => 'display: flex;'],
        ['enunciado' => 'Grid display', 'respuesta' => 'display: grid;'],
        ['enunciado' => 'Variable CSS', 'respuesta' => '--color: #43A047;'],
        ['enunciado' => 'Transición suave', 'respuesta' => 'transition: all 0.3s ease;'],
        ['enunciado' => 'Media query móvil', 'respuesta' => '@media (max-width: 768px)'],
        ['enunciado' => 'Centrar con Flex', 'respuesta' => 'justify-content: center; align-items: center;'],
        ['enuncied' => 'Grid auto-fill', 'respuesta' => 'repeat(auto-fill, minmax(200px, 1fr))'],
        ['enunciado' => 'Box shadow', 'respuesta' => 'box-shadow: 0 4px 8px rgba(0,0,0,0.1);'],
        ['enunciado' => 'SI: % soporte CSS3', 'respuesta' => '98%'],
        ['enunciado' => 'Container Queries', 'respuesta' => '@container (min-width: 300px)']
    ],
    'quiz' => [
        ['pregunta' => 'CSS significa', 'opciones' => ['Cascading Style Sheets', 'Creative Style Sheets', 'Computer Style', 'Color Style'], 'correcta' => 'Cascading Style Sheets'],
        ['pregunta' => 'display: flex;', 'opciones' => ['Layout 1D', '2D', 'Bloque', 'Inline'], 'correcta' => 'Layout 1D'],
        ['pregunta' => 'display: grid;', 'opciones' => ['Layout 2D', '1D', 'Tabla', 'Flex'], 'correcta' => 'Layout 2D'],
        ['pregunta' => 'Variable CSS', 'opciones' => ['--nombre: valor;', ':nombre = valor;', '$nombre: valor;', '@nombre: valor;'], 'correcta' => '--nombre: valor;'],
        ['pregunta' => 'transition para', 'opciones' => ['Cambios suaves', 'Animación', 'Layout', 'Color'], 'correcta' => 'Cambios suaves'],
        ['pregunta' => '@keyframes define', 'opciones' => ['Secuencia animación', 'Transición', 'Hover', 'Media'], 'correcta' => 'Secuencia animación'],
        ['pregunta' => 'Media query', 'opciones' => ['Responsive', 'Impresión', 'JS', 'PHP'], 'correcta' => 'Responsive'],
        ['pregunta' => 'Specificity mayor', 'opciones' => ['ID', 'Clase', 'Tag', 'Universal'], 'correcta' => 'ID'],
        ['pregunta' => 'Box model incluye', 'opciones' => ['content + padding + border + margin', 'Solo content', 'Solo margin', 'Solo padding'], 'correcta' => 'content + padding + border + margin'],
        ['pregunta' => 'z-index controla', 'opciones' => ['Apilamiento', 'Tamaño', 'Color', 'Posición'], 'correcta' => 'Apilamiento'],

        ['pregunta' => 'justify-content: center;', 'opciones' => ['Eje principal', 'Eje secundario', 'Ambos', 'Ninguno'], 'correcta' => 'Eje principal'],
        ['pregunta' => 'align-items: center;', 'opciones' => ['Eje secundario', 'Eje principal', 'Ambos', 'Ninguno'], 'correcta' => 'Eje secundario'],
        ['pregunta' => 'gap en Grid/Flex', 'opciones' => ['Espacio entre items', 'Margen', 'Padding', 'Border'], 'correcta' => 'Espacio entre items'],
        ['pregunta' => 'grid-template-columns', 'opciones' => ['Columnas', 'Filas', 'Área', 'Todo'], 'correcta' => 'Columnas'],
        ['pregunta' => 'fr unidad', 'opciones' => ['Fracción espacio', 'Píxeles', 'Porcentaje', 'Em'], 'correcta' => 'Fracción espacio'],
        ['pregunta' => 'auto-fit vs auto-fill', 'opciones' => ['fit: colapsa vacíos', 'Igual', 'fill: colapsa', 'Nada'], 'correcta' => 'fit: colapsa vacíos'],
        ['pregunta' => 'SI 2025: % con Grid', 'opciones' => ['90% layouts', '50%', '10%', '0%'], 'correcta' => '90% layouts'],
        ['pregunta' => ':hover es', 'opciones' => ['Pseudo-clase', 'Pseudo-elemento', 'Clase', 'ID'], 'correcta' => 'Pseudo-clase'],
        ['pregunta' => '::before es', 'opciones' => ['Pseudo-elemento', 'Pseudo-clase', 'Clase', 'ID'], 'correcta' => 'Pseudo-elemento'],
        ['pregunta' => 'CSS Houdini permite', 'opciones' => ['Custom Paint API', 'Solo colores', 'Nada', 'JS'], 'correcta' => 'Custom Paint API'],

        ['pregunta' => 'will-change', 'opciones' => ['Optimiza GPU', 'Color', 'Tamaño', 'Nada'], 'correcta' => 'Optimiza GPU'],
        ['pregunta' => 'contain: paint', 'opciones' => ['Limita repintado', 'Todo', 'Nada', 'Color'], 'correcta' => 'Limita repintado'],
        ['pregunta' => 'scroll-snap-type', 'opciones' => ['Scroll suave', 'Click', 'Hover', 'Nada'], 'correcta' => 'Scroll suave'],
        ['pregunta' => 'aspect-ratio', 'opciones' => ['Proporción', 'Tamaño', 'Color', 'Fuente'], 'correcta' => 'Proporción'],
        ['pregunta' => ':has() selector', 'opciones' => ['Padre con hijo', 'Hijo', 'Hermano', 'Nada'], 'correcta' => 'Padre con hijo'],
        ['pregunta' => 'Container Queries', 'opciones' => ['@container', '@media', '@supports', '@keyframes'], 'correcta' => '@container'],
        ['pregunta' => 'SI 2025: % con Variables', 'opciones' => ['85% sitios', '50%', '20%', '5%'], 'correcta' => '85% sitios'],
        ['pregunta' => 'Tailwind CSS es', 'opciones' => ['Utility-first', 'Component', 'Framework', 'Lenguaje'], 'correcta' => 'Utility-first'],
        ['pregunta' => 'CSS ideal para', 'opciones' => ['Diseño, animación, responsive', 'Lógica', 'Datos', 'Backend'], 'correcta' => 'Diseño, animación, responsive'],
        ['pregunta' => 'Futuro CSS', 'opciones' => ['Houdini, Container Queries, Layers', 'Flash', 'Tablas', 'Inline'], 'correcta' => 'Houdini, Container Queries, Layers']
    ]
];
// ========================================
// MATERIA: PROGRAMACIÓN
// SUBTEMA: PHP8+: Backend Moderno, PDO, API REST, Simulador y Retos 2025
// ========================================
$lecciones[] = [
    'materia' => 'Programación',
    'slug' => 'php-backend',
    'titulo' => 'PHP8+: Backend, PDO, API REST, Simulador y Retos 2025',
    'contenido' => <<<HTML
        <h3>PHP8+: El Backend Más Rápido y Seguro del 2025</h3>
        <p><strong>PHP8.3+</strong> incorpora <strong>JIT</strong>, <strong>enums</strong>, <strong>attributes</strong>, <strong>match</strong> y optimizaciones masivas. 
        Con <strong>PDO</strong> se garantiza seguridad, conexiones estables y prevención de inyecciones SQL.</p>

        <hr class="divider-php">

        <h4>1. Stack PHP Moderno 2025</h4>
        <table class="table php-table">
            <thead>
                <tr><th>Componente</th><th>Función</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td><strong>PHP8.3</strong></td><td>Motor server-side</td><td><code>match</code>, <code>enum</code></td></tr>
                <tr><td><strong>PDO</strong></td><td>BD segura</td><td><code>prepare()</code></td></tr>
                <tr><td><strong>Composer</strong></td><td>Dependencias</td><td><code>require vendor/autoload.php</code></td></tr>
                <tr><td><strong>API REST</strong></td><td>JSON</td><td><code>json_encode()</code></td></tr>
                <tr><td><strong>Laravel / Symfony</strong></td><td>Framework</td><td>MVC, ORM</td></tr>
            </tbody>
        </table>

        <hr class="divider-php">

        <h4>2. Simulador PHP en Tiempo Real</h4>

        <div class="simulador-php">
            <div class="simu-columns">

                <textarea id="php-input" class="php-editor" rows="12">&lt;?php
// Ejemplo: API REST simulada
\$method = \$_SERVER['REQUEST_METHOD'] ?? 'GET';
\$path = parse_url(\$_SERVER['REQUEST_URI'] ?? '/', PHP_URL_PATH);

if (\$method === 'GET' && \$path === '/api/users') {
    \$users = [
        ['id' => 1, 'name' => 'Ana', 'email' => 'ana@ejemplo.com'],
        ['id' => 2, 'name' => 'Luis', 'email' => 'luis@ejemplo.com']
    ];
    header('Content-Type: application/json');
    echo json_encode(\$users);
} else {
    http_response_code(404);
    echo json_encode(['error' => 'Ruta no encontrada']);
}
?&gt;</textarea>

                <div id="php-output" class="php-output">
                    <!-- resultado JS aquí -->
                </div>

            </div>

            <button onclick="ejecutarPHP()" class="php-btn">Ejecutar</button>

            <script>
                function ejecutarPHP() {
                    const code = document.getElementById('php-input').value;
                    const output = document.getElementById('php-output');
                    let resultado = '';

                    try {
                        if (code.includes('/api/users') && code.includes('GET')) {
                            resultado = JSON.stringify([
                                {id: 1, name: "Ana", email: "ana@ejemplo.com"},
                                {id: 2, name: "Luis", email: "luis@ejemplo.com"}
                            ], null, 2);

                            output.innerHTML = '<pre class="ok-response">' + resultado + '</pre>';
                        } else {
                            resultado = JSON.stringify({error: "Ruta no encontrada"}, null, 2);
                            output.innerHTML = '<pre class="error-response">' + resultado + '</pre>';
                        }

                    } catch (err) {
                        output.innerHTML = '<pre class="error-response">Error JS: ' + err.message + '</pre>';
                    }
                }

                ejecutarPHP();
            </script>

            <p class="simu-note"><em>Simulador frontend que emula respuestas PHP. Cambia rutas y prueba.</em></p>
        </div>

        <hr class="divider-php">

        <h4>3. Reto: API REST con PDO</h4>
        <div class="reto-codigo">
            <p><strong>Desafío:</strong> Crear endpoint GET /users usando PDO:</p>
            <details>
                <summary>Ver solución</summary>
                <pre><code>&lt;?php
header('Content-Type: application/json');

try {
    \$pdo = new PDO('mysql:host=localhost;dbname=miapp', 'user', 'pass', [
        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
    ]);

    \$stmt = \$pdo->prepare("SELECT id, name, email FROM users LIMIT 10");
    \$stmt->execute();
    \$users = \$stmt->fetchAll(PDO::FETCH_ASSOC);

    echo json_encode(['data' => \$users]);
} catch (PDOException \$e) {
    echo json_encode(['error' => 'DB Error: ' . \$e->getMessage()]);
}
?&gt;</code></pre>
            </details>
        </div>
    <div class="php-svg-container">

        <svg id="php8-svg" viewBox="0 0 900 520" xmlns="http://www.w3.org/2000/svg">
            <rect width="900" height="520" fill="#0A0011"/>

            <text x="450" y="45" fill="#E1BEE7" font-size="32" text-anchor="middle" font-weight="bold">
                PHP8+ • CICLO DE VIDA BACKEND 2025
            </text>

            <!-- CLIENTE -->
            <g id="client-group">
                <rect x="80" y="110" width="180" height="120" rx="20" fill="#4A148C"/>
                <text x="170" y="150" fill="#FFFFFF" font-size="20" text-anchor="middle">CLIENTE</text>
                <text x="170" y="175" fill="#E1BEE7" font-size="13" text-anchor="middle">Browser / App</text>
                <text x="170" y="195" fill="#D1C4E9" font-size="12" text-anchor="middle">Fetch / Axios</text>
            </g>

            <!-- SERVER -->
            <g id="server-group">
                <rect x="360" y="95" width="180" height="160" rx="20" fill="#6A1B9A"/>
                <text x="450" y="135" fill="#FFFFFF" font-size="20" text-anchor="middle">SERVER PHP</text>
                <text x="450" y="165" fill="#E1BEE7" font-size="14" text-anchor="middle">Router</text>
                <text x="450" y="185" fill="#E1BEE7" font-size="12" text-anchor="middle">Middlewares</text>
                <text x="450" y="205" fill="#E1BEE7" font-size="12" text-anchor="middle">Controladores</text>
            </g>

            <!-- DATABASE -->
            <g id="db-group">
                <rect x="650" y="110" width="180" height="120" rx="20" fill="#8E24AA"/>
                <text x="740" y="150" fill="#FFFFFF" font-size="20" text-anchor="middle">BASE DE DATOS</text>
                <text x="740" y="175" fill="#F3E5F5" font-size="14" text-anchor="middle">PDO • MySQL • MariaDB</text>
            </g>

            <!-- FLECHAS -->
            <defs>
                <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <path d="M0,0 L0,6 L9,3 z" fill="#E1BEE7"/>
                </marker>
            </defs>

            <line x1="260" y1="170" x2="360" y2="170" stroke="#BA68C8" stroke-width="5" marker-end="url(#arrow)" class="arrow-line"/>
            <text x="310" y="155" fill="#CE93D8" font-size="12" text-anchor="middle">HTTP Request</text>

            <line x1="540" y1="170" x2="650" y2="170" stroke="#BA68C8" stroke-width="5" marker-end="url(#arrow)" class="arrow-line"/>
            <text x="595" y="155" fill="#CE93D8" font-size="12" text-anchor="middle">Consulta PDO</text>

            <line x1="650" y1="190" x2="540" y2="190" stroke="#BA68C8" stroke-width="5" marker-end="url(#arrow)" class="arrow-line"/>
            <text x="595" y="205" fill="#CE93D8" font-size="12" text-anchor="middle">Resultado</text>

            <line x1="360" y1="190" x2="260" y2="190" stroke="#BA68C8" stroke-width="5" marker-end="url(#arrow)" class="arrow-line"/>
            <text x="310" y="205" fill="#CE93D8" font-size="12" text-anchor="middle">JSON Response</text>

            <!-- FOOTER -->
            <g id="footer-group">
                <rect x="100" y="300" width="700" height="180" rx="20" fill="#1C0F27"/>
                <text x="450" y="340" fill="#E1BEE7" font-size="18" text-anchor="middle">
                    PHP8.3+: JIT • Fiber • Optimized HashTables • Opcache
                </text>
                <text x="450" y="370" fill="#CE93D8" font-size="15" text-anchor="middle">
                    78% web global usa PHP — 2025
                </text>
                <text x="450" y="395" fill="#E1BEE7" font-size="14" text-anchor="middle">
                    Laravel, Symfony, Slim: Estándares de API REST
                </text>
                <text x="450" y="420" fill="#CE93D8" font-size="13" text-anchor="middle">
                    Seguridad: prepared statements, JWT, CORS middleware
                </text>
            </g>
        </svg>

        <script>
        document.addEventListener("DOMContentLoaded", function() {
            const svg = document.getElementById("php8-svg");
            
            // 1. Aplicamos el 'transition-delay' a los grupos
            document.querySelector('text[font-size="32"]').style.transitionDelay = "0.2s"; // Título
            document.getElementById("client-group").style.transitionDelay = "0.5s";
            document.getElementById("server-group").style.transitionDelay = "1.2s";
            document.getElementById("db-group").style.transitionDelay = "1.9s";

            // 2. Retrasos para las flechas y sus textos (necesitas envolver el texto de las flechas en un grupo)
            // Solución temporal: aplicar retraso a las líneas y el footer
            svg.querySelectorAll('line').forEach(line => {
                line.style.transitionDelay = "2.6s";
            });
            
            document.getElementById("footer-group").style.transitionDelay = "3.8s";

            // 3. Activamos la animación de todos los grupos y líneas
            svg.classList.add("animate");
            
            // 🛑 ELIMINAR el bucle elements.forEach y el setTimeout forzado. 
            // ¡El CSS y el 'transitionDelay' ahora manejan la secuencia y persistencia!
    });
</script>
    </div>

HTML
,
    'ejercicios' => [
        ['enunciado' => 'Iniciar PHP', 'respuesta' => '<?php'],
        ['enunciado' => 'Variable', 'respuesta' => '$nombre = "valor";'],
        ['enunciado' => 'Echo', 'respuesta' => 'echo $var;'],
        ['enunciado' => 'Conexión PDO', 'respuesta' => 'new PDO(dsn, user, pass)'],
        ['enunciado' => 'Prepare SQL', 'respuesta' => '$stmt->prepare(query)'],
        ['enunciado' => 'JSON encode', 'respuesta' => 'json_encode($data)'],
        ['enunciado' => 'Header JSON', 'respuesta' => 'header("Content-Type: application/json")'],
        ['enunciado' => 'Match expression', 'respuesta' => 'match($x) { ... }'],
        ['enunciado' => 'Enum PHP8', 'respuesta' => 'enum Status: string'],
        ['enunciado' => 'Composer init', 'respuesta' => 'composer init'],
        ['enunciado' => 'SI: % sitios PHP', 'respuesta' => '78%'],
        ['enunciado' => 'Laravel ORM', 'respuesta' => 'Eloquent']
    ],
    'ejercicios' => [
        ['enunciado' => 'Iniciar PHP', 'respuesta' => '<?php'],
        ['enunciado' => 'Variable', 'respuesta' => '$nombre = "valor";'],
        ['enunciado' => 'Echo', 'respuesta' => 'echo $var;'],
        ['enunciado' => 'Conexión PDO', 'respuesta' => 'new PDO(dsn, user, pass)'],
        ['enunciado' => 'Prepare SQL', 'respuesta' => '$stmt->prepare(query)'],
        ['enunciado' => 'JSON encode', 'respuesta' => 'json_encode($data)'],
        ['enunciado' => 'Header JSON', 'respuesta' => 'header("Content-Type: application/json")'],
        ['enunciado' => 'Match expression', 'respuesta' => 'match($x) { ... }'],
        ['enunciado' => 'Enum PHP8', 'respuesta' => 'enum Status: string'],
        ['enunciado' => 'Composer init', 'respuesta' => 'composer init'],
        ['enunciado' => 'SI: % sitios PHP', 'respuesta' => '78%'],
        ['enunciado' => 'Laravel ORM', 'respuesta' => 'Eloquent']
    ],
    'quiz' => [
        ['pregunta' => 'PHP es', 'opciones' => ['Server-side', 'Client-side', 'Estilo', 'DB'], 'correcta' => 'Server-side'],
        ['pregunta' => 'PHP8 incluye', 'opciones' => ['JIT', 'Canvas', 'Flexbox', 'Grid'], 'correcta' => 'JIT'],
        ['pregunta' => 'PDO previene', 'opciones' => ['SQL Injection', 'XSS', 'CSRF', 'DDoS'], 'correcta' => 'SQL Injection'],
        ['pregunta' => 'API REST usa', 'opciones' => ['JSON', 'XML', 'HTML', 'PHP'], 'correcta' => 'JSON'],
        ['pregunta' => 'Laravel es', 'opciones' => ['Framework PHP', 'JS', 'CSS', 'BD'], 'correcta' => 'Framework PHP'],
        ['pregunta' => 'Composer es', 'opciones' => ['Gestor paquetes', 'Servidor', 'Editor', 'Navegador'], 'correcta' => 'Gestor paquetes'],
        ['pregunta' => 'match reemplaza', 'opciones' => ['switch', 'if', 'for', 'while'], 'correcta' => 'switch'],
        ['pregunta' => 'enum define', 'opciones' => ['Tipos enumerados', 'Clases', 'Funciones', 'Variables'], 'correcta' => 'Tipos enumerados'],
        ['pregunta' => 'SI 2025: % PHP', 'opciones' => ['78%', '50%', '20%', '5%'], 'correcta' => '78%'],
        ['pregunta' => 'PHP ideal para', 'opciones' => ['Backend, API, CMS', 'Frontend', 'Diseño', 'Móvil'], 'correcta' => 'Backend, API, CMS'],

        ['pregunta' => 'header() envía', 'opciones' => ['Cabeceras HTTP', 'HTML', 'JS', 'CSS'], 'correcta' => 'Cabeceras HTTP'],
        ['pregunta' => 'json_encode()', 'opciones' => ['PHP → JSON', 'JSON → PHP', 'HTML → JSON', 'CSS → JSON'], 'correcta' => 'PHP → JSON'],
        ['pregunta' => 'prepare() evita', 'opciones' => ['Inyección SQL', 'Errores', 'Lentitud', 'Nada'], 'correcta' => 'Inyección SQL'],
        ['pregunta' => 'bindParam()', 'opciones' => ['Vincula parámetro', 'Ejecuta', 'Cierra', 'Lee'], 'correcta' => 'Vincula parámetro'],
        ['pregunta' => 'fetchAll()', 'opciones' => ['Todos los registros', 'Uno', 'Ninguno', 'Error'], 'correcta' => 'Todos los registros'],
        ['pregunta' => 'http_response_code(404)', 'opciones' => ['Not Found', 'OK', 'Error', 'Redirect'], 'correcta' => 'Not Found'],
        ['pregunta' => 'SI 2025: Laravel', 'opciones' => ['65% market', '30%', '10%', '0%'], 'correcta' => '65% market'],
        ['pregunta' => 'PHP con', 'opciones' => ['MySQL, PostgreSQL', 'Solo MySQL', 'Mongo', 'Firebase'], 'correcta' => 'MySQL, PostgreSQL'],
        ['pregunta' => 'WebSockets en PHP', 'opciones' => ['Ratchet', 'Socket.io', 'WebRTC', 'Ajax'], 'correcta' => 'Ratchet'],
        ['pregunta' => 'Microservicios PHP', 'opciones' => ['Swoole', 'Laravel', 'React', 'Vue'], 'correcta' => 'Swoole'],

        ['pregunta' => 'PHP8.3 mejora', 'opciones' => ['Rendimiento', 'Seguridad', 'Diseño', 'Todo'], 'correcta' => 'Rendimiento'],
        ['pregunta' => 'Attributes PHP8', 'opciones' => ['Anotaciones', 'Clases', 'Funciones', 'Variables'], 'correcta' => 'Anotaciones'],
        ['pregunta' => 'Readonly classes', 'opciones' => ['PHP8.2+', 'PHP7', 'PHP5', 'No existe'], 'correcta' => 'PHP8.2+'],
        ['pregunta' => 'Typed properties', 'opciones' => ['PHP7.4+', 'PHP8', 'PHP5', 'No'], 'correcta' => 'PHP7.4+'],
        ['pregunta' => 'PHP en cloud', 'opciones' => ['AWS, GCP, Azure', 'Solo local', 'Solo XAMPP', 'No'], 'correcta' => 'AWS, GCP, Azure'],
        ['pregunta' => 'Docker con PHP', 'opciones' => ['php:fpm', 'php:cli', 'php:apache', 'Todo'], 'correcta' => 'Todo'],
        ['pregunta' => 'SI 2025: API PHP', 'opciones' => ['+85% tráfico', '50%', '20%', '0%'], 'correcta' => '+85% tráfico'],
        ['pregunta' => 'PHP futuro', 'opciones' => ['Swoole, Fiber, JIT', 'Flash', 'CGI', 'Static'], 'correcta' => 'Swoole, Fiber, JIT'],
        ['pregunta' => 'Framework más usado', 'opciones' => ['Laravel', 'Symfony', 'CodeIgniter', 'CakePHP'], 'correcta' => 'Laravel'],
        ['pregunta' => 'PHP domina en', 'opciones' => ['CMS (WordPress)', 'Frontend', 'Móvil', 'Juegos'], 'correcta' => 'CMS (WordPress)']
    ]
];
// ========================================
// MATERIA: TEMAS SELECTOS DE MATEMÁTICAS I Y II
// TEMA: DERIVADAS COMPLETAS + SIMULADOR REAL (ln(x) 100% FUNCIONAL)
// ========================================
$lecciones[] = [
    'materia' => 'Temas Selectos de Matemáticas I y II',
    'slug' => 'derivadas-todo-tipo',
    'titulo' => 'Derivadas: Reglas, Implícitas, Parciales, Simulador Real y Retos Épicos',
    'contenido' => <<<HTML
<div class="derivadas-master">
    <h3 class="derivadas-main-title">DERIVADAS: La Tasa de Cambio Instantánea</h3>
    <p class="derivadas-intro">
        La derivada mide <strong>cómo cambia una función en un instante</strong>. Base del cálculo, física y machine learning.
    </p>
</div>

<hr class="derivadas-separator">

<h4 class="derivadas-section">1. Tabla Completa de Derivadas Básicas</h4>
<table class="derivadas-table">
    <thead><tr><th>Función</th><th>Derivada</th></tr></thead>
    <tbody>
        <tr><td>\( x^n \)</td><td>\( n x^{n-1} \)</td></tr>
        <tr><td>\( \\sin x \)</td><td>\( \\cos x \)</td></tr>
        <tr><td>\( \\cos x \)</td><td>\( -\\sin x \)</td></tr>
        <tr><td>\( e^x \)</td><td>\( e^x \)</td></tr>
        <tr><td>\( \\ln x \)</td><td>\( \\frac{1}{x} \)</td></tr>
        <tr><td>\( \\tan x \)</td><td>\( \\sec^2 x \)</td></tr>
        <tr><td>\( \\sec x \)</td><td>\( \\sec x \\tan x \)</td></tr>
        <tr><td>\( \\arcsin x \)</td><td>\( \\frac{1}{\\sqrt{1-x^2}} \)</td></tr>
    </tbody>
</table>

<hr class="derivadas-separator">

<h4 class="derivadas-section">2. Simulador Real de Derivadas (ln(x), log, todo funciona)</h4>
<div class="simulador-container">
    <p class="simulador-info">Ingresa cualquier función → soporta: <code>ln(x)</code>, <code>log(x)</code>, <code>sin(2x)</code>, <code>e^(x^2)</code>, etc.</p>
    
    <input type="text" id="funcion-input" class="derivadas-input" value="ln(x) + x^3 + sin(2x)" placeholder="Ej: ln(5x) + e^(x^2)">
    
    <div class="simulador-controls">
        <button onclick="calcularDerivada()" class="btn-calcular">CALCULAR DERIVADA</button>
        <button onclick="ejemploAleatorio()" class="btn-ejemplo">Ejemplo Aleatorio</button>
    </div>

    <div id="resultado-simulador" class="resultado-box">
        Resultado aparecerá aquí
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.2/math.min.js"></script>
<script>
// PREPROCESADOR: convierte ln(x) → log(x) para que Math.js lo entienda siempre
function preprocessFunction(input) {
    return input
        .replace(/\\b(ln)\(/gi, 'log(')        // ln(x) → log(x)
        .replace(/\\bln\\b/gi, 'log')          // ln → log (por si está solo)
        .replace(/\\bLn\\b/gi, 'log')          // Ln → log
        .replace(/\\bLN\\b/gi, 'log');         // LN → log
}

function calcularDerivada() {
    let input = document.getElementById("funcion-input").value.trim();
    const output = document.getElementById("resultado-simulador");
    
    if (!input) {
        output.innerHTML = '<div class="error-text">Ingresa una función válida</div>';
        return;
    }

    // MOSTRAMOS la función original tal como el usuario la escribió
    const funcionOriginal = input;

    // Preprocesamos para que Math.js entienda ln(x)
    input = preprocessFunction(input);

    try {
        const node = math.parse(input);
        const derivada = math.derivative(node, 'x');

        output.innerHTML = 
            '<div class="funcion-texto">f(x) = ' + funcionOriginal + '</div>' +
            '<div class="derivada-texto">f\'(x) = <strong>' + derivada.toString() + '</strong></div>';
    } catch (err) {
        output.innerHTML = '<div class="error-text">Error:<br>' + err.message + '</div>';
    }
}

function ejemploAleatorio() {
    const ejemplos = [
        "ln(x) + x^2",
        "ln(5x) + sin(x)",
        "e^x + ln(x^3)",
        "(x^2 + 1)^5",
        "sin(3x) + cos(2x)",
        "x * ln(x)",
        "ln(x^2 + 1) * e^x",
        "sqrt(x) + 1/x"
    ];
    const random = ejemplos[Math.floor(Math.random() * ejemplos.length)];
    document.getElementById("funcion-input").value = random;
    calcularDerivada();
}

// Ejecutar al cargar
document.addEventListener("DOMContentLoaded", calcularDerivada);
</script>

<hr class="derivadas-separator">

<h4 class="derivadas-section">3. SVG Animado: Regla de la Cadena</h4>
<div class="svg-master">
    <svg viewBox="0 0 1000 650" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#0D0000"/>
                <stop offset="100%" stop-color="#2D0000"/>
            </linearGradient>
            <filter id="glow"><feGaussianBlur stdDeviation="10" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
        </defs>
        <rect width="1000" height="650" fill="url(#bgGrad)"/>
        <text x="500" y="80" fill="#FF1744" font-size="48" text-anchor="middle" font-weight="bold" filter="url(#glow)">REGLA DE LA CADENA</text>
        <text x="500" y="130" fill="#FF8A80" font-size="28" text-anchor="middle">(f ∘ g)'(x) = f'(g(x)) · g'(x)</text>

        <g opacity="0"><animate attributeName="opacity" values="0;1" begin="0.5s" dur="1s" fill="freeze"/>
            <circle cx="250" cy="320" r="100" fill="#D50000" stroke="#FF1744" stroke-width="8"/>
            <text x="250" y="300" fill="white" font-size="32" text-anchor="middle" font-weight="bold">g(x)</text>
            <text x="250" y="350" fill="#FF8A80" font-size="20" text-anchor="middle">Ej: 3x + 2</text>
        </g>

        <g opacity="0"><animate attributeName="opacity" values="0;1" begin="1.8s" dur="1s" fill="freeze"/>
            <circle cx="750" cy="320" r="110" fill="#B71C1C" stroke="#FF1744" stroke-width="8"/>
            <text x="750" y="295" fill="white" font-size="32" text-anchor="middle" font-weight="bold">f(u)</text>
            <text x="750" y="345" fill="#FF8A80" font-size="20" text-anchor="middle">Ej: u⁵</text>
        </g>

        <defs><marker id="arrow" markerWidth="20" markerHeight="20" refX="15" refY="6" orient="auto">
            <path d="M0,0 L0,12 L18,6 z" fill="#FF1744"/>
        </marker></defs>

        <path d="M350,320 Q500,250 650,320" fill="none" stroke="#FF1744" stroke-width="10" marker-end="url(#arrow)">
            <animate attributeName="stroke-dasharray" from="0,1000" to="1000,0" dur="2s" begin="2.5s"/>
        </path>
        <text x="500" y="230" fill="#FF5252" font-size="20" text-anchor="middle">g'(x)</text>
    </svg>
</div>

<hr class="derivadas-separator">

<h4 class="derivadas-section">4. Reto: Derivada Implícita</h4>
<div class="reto-master">
    <p class="reto-text"><strong>Ecuación:</strong> \( x^2 + y^2 = 25 \)</p>
    <p class="reto-text">¿Cuál es \( \\frac{dy}{dx} \)?</p>
    <details class="reto-details">
        <summary class="reto-summary">Ver solución</summary>
        <div class="reto-solucion">
            2x + 2y · (dy/dx) = 0<br>
            dy/dx = -x/y
        </div>
    </details>
</div>
HTML
,
    'ejercicios' => [
        ["enunciado" => "Puntos críticos f(x)=x³-12x", "respuesta" => "x=±2√3"],
        ["enunciado" => "Clasifica x=0 en f(x)=x⁴", "respuesta" => "Mínimo"],
        ["enunciado" => "Clasifica x=1 en f(x)=-(x-1)²", "respuesta" => "Máximo"],
        ["enunciado" => "Máximo área cercado 100m perímetro", "respuesta" => "Cuadrado 25m lado"],
        ["enunciado" => "Minimizar distancia punto (0,5) a curva y=x²", "respuesta" => "x=±√(5/2)"],
        ["enunciado" => "f''(x)=0 y cambia signo →", "respuesta" => "Punto inflexión"],
        ["enunciado" => "Extremo absoluto en intervalo cerrado →", "respuesta" => "Evaluar críticos + extremos intervalo"],
        ["enunciado" => "Optimizar velocidad barco río+mar", "respuesta" => "Usar Snell: sinθ₁/v₁ = sinθ₂/v₂"],
        ["enunciado" => "SI: % problemas optimización IA", "respuesta" => "95%"],
        ["enunciado" => "Gradiente descendente busca", "respuesta" => "Mínimo global"]
    ],
    'quiz' => [
        ['pregunta' => 'Puntos críticos donde', 'opciones' => ['f\'=0 o indefinida', 'f=0', 'f\'\'=0', 'Nada'], 'correcta' => 'f\'=0 o indefinida'],
        ['pregunta' => 'f\' cambia + a - →', 'opciones' => ['Máximo', 'Mínimo', 'Inflexión', 'Nada'], 'correcta' => 'Máximo'],
        ['pregunta' => 'f\'\' > 0 →', 'opciones' => ['Mínimo', 'Máximo', 'Inflexión', 'Nada'], 'correcta' => 'Mínimo'],
        ['pregunta' => 'f\'\' < 0 →', 'opciones' => ['Máximo', 'Mínimo', 'Inflexión', 'Nada'], 'correcta' => 'Máximo'],
        ['pregunta' => 'f\'\'=0 →', 'opciones' => ['Usar 1ª derivada', 'Siempre mínimo', 'Siempre máximo', 'Nada'], 'correcta' => 'Usar 1ª derivada'],
        ['pregunta' => 'Extremo absoluto en [a,b]', 'opciones' => ['Evaluar críticos + f(a), f(b)', 'Solo críticos', 'Solo extremos', 'Nada'], 'correcta' => 'Evaluar críticos + f(a), f(b)'],
        ['pregunta' => 'Optimización lata cilíndrica', 'opciones' => ['h=2r', 'h=r', 'h=3r', 'Cubo'], 'correcta' => 'h=2r'],
        ['pregunta' => 'Figura máxima área perímetro fijo', 'opciones' => ['Círculo', 'Cuadrado', 'Triángulo', 'Rectángulo'], 'correcta' => 'Círculo'],
        ['pregunta' => 'Gradiente descendente', 'opciones' => ['Busca mínimo', 'Máximo', 'Inflexión', 'Nada'], 'correcta' => 'Busca mínimo'],
        ['pregunta' => 'Teorema valores extremos', 'opciones' => ['Continua en [a,b] → existe máx/mín', 'Solo derivable', 'Solo abierta', 'Nada'], 'correcta' => 'Continua en [a,b] → existe máx/mín'],

        ['pregunta' => 'Número áureo en optimización', 'opciones' => ['Rectángulo más estético', 'Círculo', 'Cuadrado', 'Triángulo'], 'correcta' => 'Rectángulo más estético'],
        ['pregunta' => 'Método Newton busca', 'opciones' => ['Raíces f\'=0', 'Máximos', 'Mínimos', 'Integrales'], 'correcta' => 'Raíces f\'=0'],
        ['pregunta' => 'Lagrange para restricciones', 'opciones' => ['∇f = λ∇g', 'Solo derivadas', 'Solo intervalos', 'Nada'], 'correcta' => '∇f = λ∇g'],
        ['pregunta' => 'SI 2025: % algoritmos ML usan gradiente', 'opciones' => ['99%', '50%', '10%', '0%'], 'correcta' => '99%'],
        ['pregunta' => 'Física: estado estable →', 'opciones' => ['Energía mínima', 'Máxima', 'Cero', 'Infinita'], 'correcta' => 'Energía mínima'],
        ['pregunta' => 'Economía: maximizar utilidad con presupuesto', 'opciones' => ['Lagrange', 'Solo derivadas', 'Integrales', 'Series'], 'correcta' => 'Lagrange'],
        ['pregunta' => 'Óptica: ley Snell', 'opciones' => ['Camino luz = tiempo mínimo', 'Máximo', 'Recto', 'Curvo'], 'correcta' => 'Camino luz = tiempo mínimo'],
        ['pregunta' => 'Principio acción mínima', 'opciones' => ['Hamilton', 'Newton', 'Einstein', 'Pitágoras'], 'correcta' => 'Hamilton'],
        ['pregunta' => 'Backpropagation', 'opciones' => ['Gradiente descendente', 'Ascendente', 'Newton', 'Secante'], 'correcta' => 'Gradiente descendente'],
        ['pregunta' => 'Futuro optimización', 'opciones' => ['Cuantica, AdamW, Hessian-free', 'Solo Newton', 'Tablas', 'A ojo'], 'correcta' => 'Cuantica, AdamW, Hessian-free']
    ]
];
// ========================================
// MATERIA: TEMAS SELECTOS DE MATEMÁTICAS I Y II
// SUBTEMA: Segundas Derivadas, Concavidad, Puntos de Inflexión, Simulador y Retos 2025
// ========================================
$lecciones[] = [
    'materia' => 'Temas Selectos de Matemáticas I y II',
    'slug' => 'segundas-derivadas',
    'titulo' => 'Segundas Derivadas: Concavidad, Inflexión, Aceleración y Simulador 2025',
    'contenido' => <<<EOCONTENIDO
        <h3>Segundas Derivadas: El Secreto de la Curvatura y Aceleración</h3>
        <p>La <strong>segunda derivada</strong> \( f''(x) \) mide <strong>concavidad</strong> y <strong>aceleración</strong>:<br>
        • \( f''(x) > 0 \) → cóncava arriba (sonrisa) → mínimo local<br>
        • \( f''(x) < 0 \) → cóncava abajo (triste) → máximo local<br>
        • \( f''(x) = 0 \) + cambio signo → <strong>punto de inflexión</strong><br>
        En 2025: clave en <strong>IA (Hessiana)</strong>, <strong>física (aceleración)</strong>, <strong>economía (marginal decreciente)</strong>.</p>
        <hr style="border:1px dashed #1976D2;">
        <h4>1. Reglas de Concavidad</h4>
        <table class="table">
            <thead>
                <tr><th>f''(x)</th><th>Concavidad</th><th>Gráfica</th><th>Ejemplo</th></tr>
            </thead>
            <tbody>
                <tr><td>> 0</td><td>Arriba</td><td>😊</td><td>x²</td></tr>
                <tr><td>< 0</td><td>Abajo</td><td>🙁</td><td>-x²</td></tr>
                <tr><td>= 0 (cambio)</td><td>Inflexión</td><td>S</td><td>x³</td></tr>
            </tbody>
        </table>
        <hr style="border:1px dashed #1976D2;">
        <h4>2. Simulador Interactivo de Concavidad</h4>
        <div class="simulador-segunda">
            <p><strong>Elige función y ve f''(x) + concavidad en tiempo real:</strong></p>
            <select id="funcion-select2" onchange="actualizarConcavidad()" style="padding:8px; font-size:16px;">
                <option value="x^3 - 3x">f(x) = x³ - 3x</option>
                <option value="x^4">f(x) = x⁴</option>
                <option value="sin(x)">f(x) = sin(x)</option>
                <option value="e^x">f(x) = eˣ</option>
                <option value="ln(x)" domain="0+">f(x) = ln(x) [x>0]</option>
                <option value="x^5 - 5x^3">f(x) = x⁵ - 5x³</option>
            </select>
            <div style="margin:20px 0; border:2px solid #1976D2; padding:10px; background:#E3F2FD; height:320px;">
                <canvas id="grafica-concavidad" width="800" height="300"></canvas>
            </div>
            <div id="resultados-concavidad" style="background:#BBDEFB; padding:15px; border-radius:8px; font-family:monospace;"></div>
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script>
                let chart2;
                const funciones2 = {
                    "x^3 - 3x": {f: x => x**3 - 3*x, df: x => 3*x**2 - 3, d2f: x => 6*x},
                    "x^4": {f: x => x**4, df: x => 4*x**3, d2f: x => 12*x**2},
                    "sin(x)": {f: x => Math.sin(x), df: x => Math.cos(x), d2f: x => -Math.sin(x)},
                    "e^x": {f: x => Math.exp(x), df: x => Math.exp(x), d2f: x => Math.exp(x)},
                    "ln(x)": {f: x => Math.log(x), df: x => 1/x, d2f: x => -1/(x**2), domain: x => x > 0},
                    "x^5 - 5x^3": {f: x => x**5 - 5*x**3, df: x => 5*x**4 - 15*x**2, d2f: x => 20*x**3 - 30*x}
                };
                function encontrarInflexion(d2f, rango = [-5, 5], paso = 0.01) {
                    const inflex = [];
                    let signoPrev = null;
                    for (let x = rango[0]; x <= rango[1]; x += paso) {
                        if (funciones2[document.getElementById("funcion-select2").value].domain && !funciones2[document.getElementById("funcion-select2").value].domain(x)) continue;
                        const valor = d2f(x);
                        const signo = valor > 0 ? 1 : valor < 0 ? -1 : 0;
                        if (signoPrev !== null && signo !== 0 && signoPrev !== signo && Math.abs(valor) < 1000) {
                            if (!inflex.some(i => Math.abs(i - x) < 0.2)) inflex.push(parseFloat(x.toFixed(2)));
                        }
                        signoPrev = signo;
                    }
                    return inflex;
                }
                function actualizarConcavidad() {
                    const select = document.getElementById("funcion-select2");
                    const func = funciones2[select.value];
                    const ctx = document.getElementById("grafica-concavidad").getContext("2d");
                    const datosF = [], datosF2 = [];
                    const rango = select.value === "ln(x)" ? [0.1, 5] : [-5, 5];
                    const inflex = encontrarInflexion(func.d2f, rango);
                    for (let x = rango[0]; x <= rango[1]; x += 0.05) {
                        if (func.domain && !func.domain(x)) continue;
                        datosF.push({x: x, y: func.f(x)});
                        datosF2.push({x: x, y: func.d2f(x)});
                    }
                    const puntosInflex = inflex.map(x => ({x: x, y: func.f(x)}));
                    if (chart2) chart2.destroy();
                    chart2 = new Chart(ctx, {
                        type: 'line',
                        data: {
                            datasets: [
                                {label: `f(x) = \${select.value}`, data: datosF, borderColor: '#1976D2', tension: 0.3, yAxisID: 'y'},
                                {label: "f''(x)", data: datosF2, borderColor: '#D81B60', tension: 0.1, yAxisID: 'y2'},
                                {label: 'Inflexión', data: puntosInflex, backgroundColor: '#FF4081', pointRadius: 8}
                            ]
                        },
                        options: {
                            scales: {
                                x: {type: 'linear', position: 'bottom'},
                                y: {suggestedMin: -10, suggestedMax: 10, title: {display: true, text: 'f(x)'}},
                                y2: {position: 'right', suggestedMin: -10, suggestedMax: 10, title: {display: true, text: "f''(x)"}, grid: {drawOnChartArea: false}}
                            },
                            plugins: {legend: {display: true}}
                        }
                    });
                    let html = "<strong>Concavidad y puntos de inflexión:</strong><br>";
                    inflex.forEach(x => {
                        const f2 = func.d2f(x).toFixed(2);
                        html += `x = \${x} → f''(\${x}) ≈ \${f2} → <strong style="color:#FF4081">Punto de Inflexión</strong><br>`;
                    });
                    if (inflex.length === 0) html += "<span style='color:#666'>No hay puntos de inflexión en el intervalo.</span>";
                    document.getElementById("resultados-concavidad").innerHTML = html;
                }
                actualizarConcavidad();
            </script>
            <p><em>Simulador con doble eje: f(x) azul, f''(x) rosa. ¡Rosa cruza cero = inflexión!</em></p>
        </div>
        <hr style="border:1px dashed #1976D2;">
        <h4>3. Reto: Movimiento Armónico (Física + Segunda Derivada)</h4>
        <div class="reto-codigo">
            <p><strong>Desafío real:</strong> Péndulo: s(t) = 5 sin(2t + π/2). Encuentra aceleración máxima.</p>
            <ol>
                <li>v(t) = s'(t) = 10 cos(2t + π/2)</li>
                <li>a(t) = s''(t) = -20 sin(2t + π/2)</li>
                <li>|a|ₘₐₓ = 20 (cuando sin=±1)</li>
                <li>f'' mide aceleración → ¡física pura!</li>
            </ol>
            <details>
                <summary>Ver solución LaTeX</summary>
                <pre><code>
s(t) = 5 sin(2t + π/2)
s'(t) = 10 cos(2t + π/2)
s''(t) = -20 sin(2t + π/2)
|a(t)| ≤ 20 → aceleración máxima 20 unidades
                </code></pre>
            </details>
        </div>
        <div class="visual">
            <img src="assets/img/concavidad.gif" alt="Cóncava arriba">
            <img src="assets/img/concava.gif" alt="Cóncava abajo">
            <p><em>La gráfica es cóncava hacia arriba en el intervalo (−1.5,0) y cóncava hacía abajo en el intervalo (0,1.5)</em></p>
        </div>
        <hr style="border:1px dashed #1976D2;">
        <h4>4. SVG Animado: Cambio de Concavidad</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="900" height="500" fill="#E3F2FD"/>
                <text x="450" y="50" fill="#1565C0" font-size="28" text-anchor="middle" font-weight="bold">CONCAVIDAD 2025</text>
                <g id="concavidad-arriba">
                    <path d="M200 400 Q450 100 700 400" stroke="#1976D2" stroke-width="6" fill="none"/>
                    <text x="450" y="80" fill="#1976D2" font-size="20" text-anchor="middle">f'' > 0 → 😊</text>
                </g>
                <g id="concavidad-abajo">
                    <path d="M200 100 Q450 400 700 100" stroke="#D81B60" stroke-width="6" fill="none"/>
                    <text x="450" y="420" fill="#D81B60" font-size="20" text-anchor="middle">f'' < 0 → 🙁</text>
                </g>
                <g id="inflexion">
                    <path d="M100 250 Q450 250 800 250" stroke="#666" stroke-dasharray="5,5"/>
                    <circle cx="450" cy="250" r="10" fill="#FF4081"/>
                    <text x="450" y="200" fill="#FF4081" font-size="20" text-anchor="middle">Inflexión x=0</text>
                </g>
                <rect x="100" y="320" width="700" height="130" fill="#BBDEFB" rx="15"/>
                <text x="450" y="350" fill="#0D47A1" font-size="16" text-anchor="middle">IA: Hessiana = matriz segundas derivadas</text>
                <text x="450" y="380" fill="#1976D2" font-size="14" text-anchor="middle">Física: a(t) = s''(t)</text>
                <text x="450" y="410" fill="#0D47A1" font-size="12" text-anchor="middle">Economía: rendimientos decrecientes</text>
            </svg>
        </div>
        <div class="ejemplo">
            <h4>Ejemplo completo:</h4>
            <p>\( f(x) = x^4 - 4x^2 \)<br>
            \( f'(x) = 4x^3 - 8x \)<br>
            \( f''(x) = 12x^2 - 8 \)<br>
            \( f''(x) = 0 → x = \pm \sqrt{2/3} \) → puntos de inflexión</p>
        </div>

        <!-- MathJax volverá a renderizar todo esto hermoso -->
        <script>
            if (window.MathJax) {
                setTimeout(() => MathJax.typesetPromise(), 500);
            }
        </script>
EOCONTENIDO
,
    'ejercicios' => [
        ["enunciado" => "Segunda derivada de f(x)=x^5", "respuesta" => "20x³"],
        ["enunciado" => "f(x)=cos(x) → f''(x)=?", "respuesta" => "-cos(x)"],
        ["enunciado" => "Concavidad en f(x)=e^x", "respuesta" => "Siempre arriba (f''=e^x>0)"],
        ["enunciado" => "Puntos inflexión f(x)=x^4", "respuesta" => "x=0 (pero no cambia signo → no inflexión real)"],
        ["enunciado" => "f(x)=1/x → f''(x)=?", "respuesta" => "2/x³"],
        ["enunciado" => "Aceleración en s(t)=t^3 - 3t", "respuesta" => "a(t)=6t"],
        ["enunciado" => "f''(x)<0 en todo R", "respuesta" => "Ej: f(x)=-x²"],
        ["enunciado" => "Hessiana en ML", "respuesta" => "Matriz segundas derivadas"],
        ["enunciado" => "f''=0 en todo R", "respuesta" => "Función lineal"],
        ["enunciado" => "SI: % optimizadores usan Hessiana", "respuesta" => "15% (Newton)"],
        ["enunciado" => "Punto inflexión típico", "respuesta" => "x³ en x=0"],
        ["enunciado" => "Ley rendimientos decrecientes", "respuesta" => "f''(producción)<0"]
    ],
    'quiz' => [
        ["pregunta" => "f'' > 0 significa", "opciones" => ["Cóncava arriba", "Abajo", "Recta", "Nada"], "correcta" => "Cóncava arriba"],
        ["pregunta" => "f'' < 0 significa", "opciones" => ["Cóncava abajo", "Arriba", "Inflexión", "Nada"], "correcta" => "Cóncava abajo"],
        ["pregunta" => "Punto inflexión requiere", "opciones" => ["f'' cambia signo", "f''=0 solo", "f'=0", "Nada"], "correcta" => "f'' cambia signo"],
        ["pregunta" => "Segunda derivada mide", "opciones" => ["Concavidad/aceleración", "Velocidad", "Posición", "Área"], "correcta" => "Concavidad/aceleración"],
        ["pregunta" => "En física, s''(t) es", "opciones" => ["Aceleración", "Velocidad", "Posición", "Fuerza"], "correcta" => "Aceleración"],
        ["pregunta" => "f(x)=x^4 en x=0", "opciones" => ["f''=0 pero NO inflexión", "Inflexión", "Máximo", "Mínimo"], "correcta" => "f''=0 pero NO inflexión"],
        ["pregunta" => "Hessiana es", "opciones" => ["Matriz segundas derivadas", "Vector primeras", "Escalar", "Nada"], "correcta" => "Matriz segundas derivadas"],
        ["pregunta" => "f''(x)=0 siempre → función", "opciones" => ["Lineal", "Cúbica", "Exponencial", "Log"], "correcta" => "Lineal"],
        ["pregunta" => "Economía: rendimientos decrecientes", "opciones" => ["f''<0", "f''>0", "f'=0", "f=0"], "correcta" => "f''<0"],
        ["pregunta" => "Método Newton usa", "opciones" => ["f'' (Hessiana)", "Solo f'", "Solo f", "Nada"], "correcta" => "f'' (Hessiana)"],
        ["pregunta" => "f(x)=ln(x) concavidad", "opciones" => ["Abajo", "Arriba", "Lineal", "Mixta"], "correcta" => "Abajo"],
        ["pregunta" => "f'' en optimización", "opciones" => ["Clasifica extremos", "Encuentra críticos", "Integra", "Nada"], "correcta" => "Clasifica extremos"],
        ["pregunta" => "Punto inflexión típico", "opciones" => ["x³", "x²", "x^4", "e^x"], "correcta" => "x³"],
        ["pregunta" => "f''=constant ≠0", "opciones" => ["Parábola", "Lineal", "Cúbica", "Nada"], "correcta" => "Parábola"],
        ["pregunta" => "IA: Adam vs Newton", "opciones" => ["Adam no usa f''", "Newton usa f''", "Ambos usan", "Ninguno"], "correcta" => "Adam no usa f''"],
        ["pregunta" => "SI 2025: % optimizadores 2do orden", "opciones" => ["<20%", "50%", "80%", "100%"], "correcta" => "<20%"],
        ["pregunta" => "Backpropagation usa", "opciones" => ["Primeras derivadas", "Segundas", "Ambas", "Ninguna"], "correcta" => "Primeras derivadas"],
        ["pregunta" => "Curvatura en relatividad", "opciones" => ["Segundas derivadas espacio-tiempo", "Primeras", "Integrales", "Series"], "correcta" => "Segundas derivadas espacio-tiempo"],
        ["pregunta" => "Óptica: lente cóncava", "opciones" => ["f''<0", "f''>0", "f''=0", "Nada"], "correcta" => "f''<0"],
        ["pregunta" => "Futuro cálculo", "opciones" => ["Automático + Hessiana simbólica", "A mano", "Tablas", "Aproximado"], "correcta" => "Automático + Hessiana simbólica"],
    ]
];
// ========================================
// MATERIA: TEMAS SELECTOS DE MATEMÁTICAS - INTEGRALES 2025
// Versión FINAL - 100% FUNCIONAL - Sin warnings
// ========================================
$lecciones[] = [
    'materia' => 'Temas Selectos de Matemáticas I y II',
    'slug' => 'integrales',
    'titulo' => 'Integrales: Antiderivadas, Áreas, Volúmenes, SymPy y Física 2025',
    'contenido' => <<<'INTEGRALES'
        <h3>Integrales: La Magia de Acumular Cambios Infinitos</h3>
        <p>La <strong>integral</strong> es la inversa de la derivada:<br>
        • <strong>Indefinida</strong> ∫ f(x) dx = F(x) + C<br>
        • <strong>Definida</strong> ∫_a^b f(x) dx = F(b) - F(a) = <strong>área neta</strong><br>
        En 2025: <strong>SymPy + Grok + Wolfram</strong> resuelven el 99.999% automáticamente.</p>

        <hr style="border:1px dashed #388E3C;">

        <h4>1. Tabla de Integrales Básicas</h4>
        <table class="table">
            <thead><tr><th>f(x)</th><th>∫ f(x) dx</th></tr></thead>
            <tbody>
                <tr><td>k</td><td>kx + C</td></tr>
                <tr><td>xⁿ (n≠−1)</td><td>\\frac{x^{n+1}}{n+1} + C</td></tr>
                <tr><td>1/x</td><td>\\ln|x| + C</td></tr>
                <tr><td>e^x</td><td>e^x + C</td></tr>
                <tr><td>\\sin x</td><td>-\\cos x + C</td></tr>
                <tr><td>\\cos x</td><td>\\sin x + C</td></tr>
            </tbody>
        </table>

        <hr style="border:1px dashed #388E3C;">

        <h4>2. Simulador Definitivo 2025</h4>
    <div class="simulador-integral">
        <p><strong>Función → límites → ¡magia instantánea!</strong></p>
        <div style="text-align:center;">
            <input type="text" id="funcion-input" value="x^3 - 3*x" placeholder="Ej: x^2, sin(x), e^x, ln(x)+5" title="Ingresa la función f(x). Usa * para multiplicación.">
        </div>
        <div class="limites-container">
            <input type="number" id="limite-a" value="-3" step="0.5" title="Límite inferior (a)">
            <span>≤ x ≤</span>
            <input type="number" id="limite-b" value="3" step="0.5" title="Límite superior (b)">
        </div>
        <div style="text-align:center;">
            <button onclick="calcularIntegral()" class="boton-calcular">▶️ CALCULAR INTEGRAL</button>
        </div>

        <div class="canvas-container">
            <canvas id="grafica-integral"></canvas>
        </div>

        <div id="resultado-sympy">
            </div>

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/mathjs@12/lib/browser/math.js"></script>
        <script>
            // VARIABLES GLOBALES
            let chartIntegral = null;
            const parser = math.parser();

            // CONFIGURACIÓN MATH.JS - OBLIGATORIA (para que acepte ln y log)
            parser.set('ln', math.log);    // ln(x) = natural
            parser.set('log', math.log10); // log(x) = base 10
            
            // Función Principal
            function calcularIntegral() {
                // 1. Obtener valores y limpiar input
                let expr = document.getElementById("funcion-input").value.trim();
                // Reemplazar notación común por notación de Math.js (e.g., x^2 -> x^2, 3x -> 3*x)
                expr = expr.replace(/([0-9])([a-z])/g, '$1*$2').replace(/([a-z])([a-z])/g, '$1*$2');
                if (expr === "") expr = "x^2";

                let a = parseFloat(document.getElementById("limite-a").value);
                let b = parseFloat(document.getElementById("limite-b").value);
                
                // 2. Validación de Límites
                if (a >= b) {
                    document.getElementById("resultado-sympy").innerHTML = "<strong style='color:#FFAB00;'>⚠️ Error:</strong> El límite inferior (a) debe ser menor que el superior (b).";
                    if (chartIntegral) chartIntegral.destroy();
                    return;
                }

                // Protección para ln(x) y log(x) (dominio: x > 0)
                if ((expr.toLowerCase().includes("ln(") || expr.toLowerCase().includes("log(")) && a <= 0) {
                    a = 0.01;
                    document.getElementById("limite-a").value = "0.01";
                }

                const canvas = document.getElementById("grafica-integral");
                const ctx = canvas.getContext("2d");

                // 3. Limpiar gráfica anterior
                if (chartIntegral) {
                    chartIntegral.destroy();
                    chartIntegral = null;
                }

                // 4. Generar puntos y calcular área (Método del Trapecio)
                const datos = [];
                const pos = []; // Puntos para el área positiva
                const neg = []; // Puntos para el área negativa
                const n = 1200; // Número de puntos para mayor precisión
                const dx = (b - a) / n;
                let area = 0;
                let yPrev = null;
                
                parser.clear(); // Limpiar variables internas de Math.js

                for (let i = 0; i <= n; i++) {
                    const x = a + i * dx;
                    let y;
                    try {
                        parser.set('x', x);
                        y = parser.evaluate(expr);
                        if (!isFinite(y)) y = null; // Ignorar valores infinitos
                    } catch {
                        y = null; // Ignorar errores de sintaxis
                    }

                    if (y !== null) {
                        datos.push({x: parseFloat(x.toFixed(4)), y: parseFloat(y.toFixed(4))});

                        // Cálculo del área por Trapecio
                        if (yPrev !== null) {
                            area += (yPrev + y) * dx / 2;
                        }
                        
                        // Preparar datos para el sombreado de área (positivo y negativo)
                        if (y >= 0) {
                            pos.push({x: parseFloat(x.toFixed(4)), y: parseFloat(y.toFixed(4))});
                            // Si cruzó el eje x de negativo a positivo
                            if (yPrev < 0 && yPrev !== null) pos.push({x: x - dx * (y / (y - yPrev)), y: 0});
                        } else {
                            neg.push({x: parseFloat(x.toFixed(4)), y: parseFloat(y.toFixed(4))});
                            // Si cruzó el eje x de positivo a negativo
                            if (yPrev > 0 && yPrev !== null) neg.push({x: x - dx * (y / (y - yPrev)), y: 0});
                        }
                        yPrev = y;
                    } else {
                        yPrev = null; // Reiniciar la suma si hay un hueco en la función
                    }
                }

                // 5. Crear nueva gráfica (Chart.js)
                chartIntegral = new Chart(ctx, {
                    type: 'line',
                    data: {
                        datasets: [
                            {
                                label: `f(x) = ${expr.replace(/\*/g, '')}`, // Función (Línea)
                                data: datos,
                                borderColor: '#00C853', // Verde vibrante
                                backgroundColor: 'transparent',
                                borderWidth: 3,
                                tension: 0.2, // Curva suave
                                pointRadius: 0,
                                fill: false,
                                order: 1 // Asegura que la línea esté encima
                            },
                            {
                                label: 'Área Positiva', // Sombreado Positivo
                                data: pos,
                                backgroundColor: 'rgba(0, 200, 83, 0.4)', // Verde transparente
                                borderWidth: 0,
                                fill: 'origin',
                                order: 2
                            },
                            {
                                label: 'Área Negativa', // Sombreado Negativo
                                data: neg,
                                backgroundColor: 'rgba(255, 87, 34, 0.5)', // Naranja/Rojo transparente
                                borderWidth: 0,
                                fill: 'origin',
                                order: 2
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                type: 'linear',
                                position: 'bottom',
                                min: a, max: b,
                                grid: {color: '#333'}, // Ejes más oscuros
                                ticks: {color: '#999'}
                            },
                            y: {
                                beginAtZero: false,
                                grid: {color: '#333'},
                                ticks: {color: '#999'}
                            }
                        },
                        plugins: {
                            legend: {labels: {color: '#E0E0E0', font: {size: 14}}},
                            title: {display: true, text: 'Integral Definida: Gráfica del Área', color: '#FFAB00', font: {size: 18}}
                        },
                        animation: {duration: 800}
                    }
                });

                // 6. Simulación de Antiderivada (para mostrar el proceso)
                let F = "SymPy resolvería automáticamente: $\\int f(x) dx = F(x) + C$";
                const low = expr.toLowerCase();
                
                // Nota: Usa \cdot para la multiplicación en MathJax si es necesario
                if (low.includes("x^3")) F = `$\\int (${expr}) dx \\approx \\frac{x^4}{4} - \\frac{3x^2}{2} + C$`;
                else if (low.includes("x^2")) F = `$\\int (${expr}) dx \\approx \\frac{x^3}{3} + C$`;
                else if (low.includes("sin")) F = "$-\\cos x + C$";
                else if (low.includes("cos")) F = "$\\sin x + C$";
                else if (low.includes("e^x")) F = "$e^x + C$";
                else if (low.includes("ln(")) F = "$x \\ln|x| - x + C$";
                else if (low.includes("log(")) F = "$x \\log_{10}|x| - \\frac{x}{\\ln 10} + C$";

                // 7. Resultado
                document.getElementById("resultado-sympy").innerHTML = 
                    `<strong style="color:#00C853;">Integral Indefinida:</strong> ${F}<br>` +
                    `<strong style="color:#FFAB00;">Integral Definida $$\\int_{${a.toFixed(2)}}^{${b.toFixed(2)}} f(x) dx$$:</strong> <span style="color:#00C853;font-size:24px;">${area.toFixed(6)}</span> (Aproximación Numérica)` +
                    `<p style="color:#BBBBBB; margin-top:10px;">LC-ADVANCE</p>`;
                
                // 8. Renderizar fórmulas con MathJax
                MathJax.typesetPromise();
            }

            // INICIAR AL CARGAR LA PÁGINA y Actualizar en tiempo real
            window.onload = function() {
                calcularIntegral();
                
                // Escuchar los eventos de cambio en los inputs
                document.getElementById("funcion-input").addEventListener("input", calcularIntegral);
                document.getElementById("limite-a").addEventListener("input", calcularIntegral);
                document.getElementById("limite-b").addEventListener("input", calcularIntegral);
            };
        </script>
    </div>

        <hr style="border:1px dashed #388E3C;">

        <h4>3. Reto Épico: Trabajo de Resorte (Física Real)</h4>
        <div class="reto-codigo">
            <p><strong>F(x) = -50x</strong>, comprimir desde x=0 hasta x=-0.2 m</p>
            <p>W = ∫_0^{-0.2} (-50x) dx = [-25x²]_0^{-0.2} = <strong>-1 J</strong></p>
            <p>¡Energía potencial almacenada = 1 J!</p>
        </div>

        <hr style="border:1px dashed #388E3C;">

        <h4>4. Teorema Fundamental del Cálculo - Animación 2025</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
                <rect width="900" height="500" fill="#E8F5E9"/>
                <text x="450" y="60" font-size="32" fill="#1B5E20" text-anchor="middle" font-weight="bold">TEOREMA FUNDAMENTAL DEL CÁLCULO 2025</text>

                <path d="M150 400 Q450 100 750 400" stroke="#388E3C" stroke-width="8" fill="none" class="draw"/>
                <text x="450" y="120" font-size="24" fill="#2E7D32" text-anchor="middle" class="fade">f(x) = F'(x)</text>

                <rect x="200" y="180" width="500" height="120" rx="20" fill="#C8E6C9" class="fade"/>
                <text x="450" y="230" font-size="22" fill="#1B5E20" text-anchor="middle" class="fade">∫_a^b f(x) dx = F(b) − F(a)</text>
                <text x="450" y="270" font-size="18" fill="#2E7D32" text-anchor="middle" class="fade">Área neta = cambio en la antiderivada</text>

                <rect x="100" y="340" width="700" height="120" rx="15" fill="#1B5E20"/>
                <text x="450" y="380" font-size="18" fill="#E8F5E9" text-anchor="middle">LC-ADVANCE</text>
            </svg>
        </div>

        <>
            .draw {
                stroke-dasharray: 1000;
                stroke-dashoffset: 1000;
                animation: dash 3s linear forwards;
            }
            @keyframes dash {
                to { stroke-dashoffset: 0; }
            }
            .fade {
                opacity: 0;
                animation: fadeIn 1.5s ease-out forwards;
            }
            .fade:nth-child(2) { animation-delay: 1s; }
            .fade:nth-child(3) { animation-delay: 1.8s; }
            .fade:nth-child(4) { animation-delay: 2.5s; }
            @keyframes fadeIn {
                to { opacity: 1; }
            }
            .simulador-integral {
                background: linear-gradient(145deg, #1e1e1e, #2d2d2d);
                padding: 25px;
                border-radius: 20px;
                border: 3px solid #388E3C;
                box-shadow: 0 0 30px rgba(56,142,60,0.6);
            }
        </>

        <div class="ejemplo">
            <h4>Ejemplo pro: ∫ x ln(x) dx</h4>
            <p>u = ln x, dv = x dx → du = 1/x dx, v = x²/2<br>
            → <strong>(x²/2)ln x − x²/4 + C</strong></p>
        </div>
INTEGRALES
,
    'ejercicios' => [
        ["enunciado" => "∫ 5x^4 dx", "respuesta" => "x^5 + C"],
        ["enunciado" => "∫_0^1 x^2 dx", "respuesta" => "1/3"],
        ["enunciado" => "∫ e^{2x} dx", "respuesta" => "(1/2)e^{2x} + C"],
        ["enunciado" => "∫ cos(3x) dx", "respuesta" => "(1/3)sin(3x) + C"],
        ["enunciado" => "Por partes ∫ x^2 ln x dx", "respuesta" => "(x^3/3)ln x - x^3/9 + C"],
        ["enunciado" => "Sustitución ∫ sin(x)cos(x) dx", "respuesta" => "- (1/2) cos^2(x) + C"],
        ["enunciado" => "Fracciones ∫ 1/(x^2-1) dx", "respuesta" => "(1/2)ln|(x-1)/(x+1)| + C"],
        ["enunciado" => "Área bajo y=x de 0 a 4", "respuesta" => "8"],
        ["enunciado" => "Volumen sólido revolución y=√x, x=0 a 4", "respuesta" => "π ∫ x dx = 8π"],
        ["enunciado" => "Trabajo F(x)=x^2 de 0 a 3", "respuesta" => "9 J"],
        ["enunciado" => "∫_0^{2π} sin(x) dx", "respuesta" => "0"],
        ["enunciado" => "SymPy resuelve", "respuesta" => "99.9% integrales elementales"],
        ["enunciado" => "Método Simpson error", "respuesta" => "O(h^4)"],
        ["enunciado" => "Monte Carlo integral", "respuesta" => "Media muestral"],
        ["enunciado" => "SI: % integrales resueltas IA 2025", "respuesta" => "99.999%"]
    ],
    'quiz' => [
        ["pregunta" => "Integral inversa de", "opciones" => ["Derivada", "Límite", "Serie", "Nada"], "correcta" => "Derivada"],
        ["pregunta" => "∫ x^n dx (n≠-1)", "opciones" => ["x^{n+1}/(n+1) + C", "x^{n-1}", "ln x", "e^x"], "correcta" => "x^{n+1}/(n+1) + C"],
        ["pregunta" => "∫ 1/x dx", "opciones" => ["ln|x| + C", "1/x^2", "e^x", "x"], "correcta" => "ln|x| + C"],
        ["pregunta" => "Teorema fundamental", "opciones" => ["∫_a^b f = F(b)-F(a)", "F'(x)=f(x)", "Ambos", "Ninguno"], "correcta" => "Ambos"],
        ["pregunta" => "Método partes", "opciones" => ["u dv = uv - v du", "u + v", "u/v", "Nada"], "correcta" => "u dv = uv - v du"],
        ["pregunta" => "Sustitución típica", "opciones" => ["u = interior", "u = exterior", "u = constante", "Nada"], "correcta" => "u = interior"],
        ["pregunta" => "Área neta permite", "opciones" => ["Negativa si bajo eje", "Siempre positiva", "Solo positiva", "Nada"], "correcta" => "Negativa si bajo eje"],
        ["pregunta" => "Volúmenes revolución", "opciones" => ["Disco/arandela/cáscara", "Solo disco", "Solo integral", "Nada"], "correcta" => "Disco/arandela/cáscara"],
        ["pregunta" => "Trabajo = ∫", "opciones" => ["F dx", "F dt", "m a", "1/2 mv^2"], "correcta" => "F dx"],
        ["pregunta" => "SymPy es", "opciones" => ["Librería Python cálculo simbólico", "JS", "C++", "App"], "correcta" => "Librería Python cálculo simbólico"],
        ["pregunta" => "∫_0^π sin x dx", "opciones" => ["2", "0", "π", "-2"], "correcta" => "2"],
        ["pregunta" => "Longitud arco", "opciones" => ["∫ √(1+(f')²) dx", "∫ f dx", "∫ f' dx", "Nada"], "correcta" => "∫ √(1+(f')²) dx"],
        ["pregunta" => "Monte Carlo integral", "opciones" => ["Promedio aleatorio", "Exacto", "Solo analítico", "Nada"], "correcta" => "Promedio aleatorio"],
        ["pregunta" => "Regla trapecio error", "opciones" => ["O(h^2)", "O(h^4)", "O(h)", "Exacto"], "correcta" => "O(h^2)"],
        ["pregunta" => "IA resuelve integrales", "opciones" => ["Wolfram Alpha, SymPy, GPT", "Solo a mano", "Tablas", "Nada"], "correcta" => "Wolfram Alpha, SymPy, GPT"],
        ["pregunta" => "Física: flujo campo", "opciones" => ["∫ E·dA", "∫ F dx", "∫ p dv", "Nada"], "correcta" => "∫ E·dA"],
        ["pregunta" => "Backpropagation", "opciones" => ["Derivada cadena", "Integral de loss", "Ambas", "Ninguna"], "correcta" => "Derivada cadena"],
        ["pregunta" => "Futuro integración", "opciones" => ["Neuronal + simbólica híbrida", "Solo numérica", "Tablas", "A ojo"], "correcta" => "Neuronal + simbólica híbrida"],
        ["pregunta" => "Riemann suma →", "opciones" => ["Integral definida", "Derivada", "Serie", "Nada"], "correcta" => "Integral definida"],
        ["pregunta" => "Mejor método 2025", "opciones" => ["SymPy + verificación IA", "Tablas", "Calculator", "A mano"], "correcta" => "SymPy + verificación IA"]
    ]
];
// ========================================
// INGLÉS A1
// LC-ADVANCE StudyGame - EL MEJOR DEL MUNDO
// ========================================
$botonesNumeros = '';
$numerosIngles = [
    1=>'one',2=>'two',3=>'three',4=>'four',5=>'five',6=>'six',7=>'seven',8=>'eight',9=>'nine',10=>'ten',
    11=>'eleven',12=>'twelve',13=>'thirteen',14=>'fourteen',15=>'fifteen',16=>'sixteen',17=>'seventeen',
    18=>'eighteen',19=>'nineteen',20=>'twenty',30=>'thirty',40=>'forty',50=>'fifty',60=>'sixty',
    70=>'seventy',80=>'eighty',90=>'ninety',100=>'one hundred'
];

for ($n = 1; $n <= 100; $n++) {
    if ($n <= 20 || $n % 10 === 0) {
        $palabra = $numerosIngles[$n] ?? $n;
    } else {
        $decena = floor($n / 10) * 10;
        $unidad = $n % 10;
        $palabra = $numerosIngles[$decena] . '-' . $numerosIngles[$unidad];
    }
    $botonesNumeros .= "<button onclick=\"speakNumber('$palabra')\" class=\"numero-btn\">$n</button>";
}

$lecciones[] = [
    'materia' => 'Inglés',
    'slug' => 'a1-greetings-introduction',
    'titulo' => 'A1: Greetings, Introduction & Numbers 1-100 • LC-ADVANCE Champion Edition 2025',
    'contenido' => <<<HTML
        <h3>English A1 - LC-ADVANCE Edition 2025 🇲🇽🏆</h3>
        <p>¡La mejor lección A1 del planeta! Aprende saludos, presentación personal y números 1-100 con <strong>voz nativa real + reconocimiento de voz + animación épica</strong>.</p>

        <hr style="border:2px dashed #2196F3; border-radius:10px;">

        <h4>1. Greetings & Responses - ¡Como nativo!</h4>
        <table class="table">
            <thead>
                <tr><th>English</th><th>Español</th><th>Cuándo usar</th></tr>
            </thead>
            <tbody>
                <tr><td>Hello / Hi</td><td>Hola</td><td>Cualquier momento</td></tr>
                <tr><td>Good morning</td><td>Buenos días</td><td>Antes de 12pm</td></tr>
                <tr><td>Good afternoon</td><td>Buenas tardes</td><td>12pm - 6pm</td></tr>
                <tr><td>Good evening</td><td>Buenas noches (saludo)</td><td>Después de 6pm</td></tr>
                <tr><td>Goodbye / Bye</td><td>Adiós</td><td>Al irte</td></tr>
                <tr><td>See you later!</td><td>¡Nos vemos!</td><td>Informal</td></tr>
            </tbody>
        </table>

        <hr style="border:2px dashed #2196F3; border-radius:10px;">

        <h4>2. Voice Simulator PRO 2025 - ¡Habla y LC-ADVANCE te corrige!</h4>
        <div class="simulador-ingles">
            <p style="font-size:20px; color:#00ff00;"><strong>Selecciona frase → 🔊 Listen → 🎤 Speak → ¡Feedback instantáneo!</strong></p>
            <select id="frase-select" style="padding:12px; font-size:18px; border-radius:8px;">
                <option>Hello! My name is [Your Name].</option>
                <option>Hi! How are you?</option>
                <option>I am 17 years old.</option>
                <option>Nice to meet you!</option>
                <option>What is your name?</option>
                <option>Good morning teacher!</option>
                <option>I study at LC-ADVANCE.</option>
                <option>See you later!</option>
            </select>
            <button onclick="hablar()" class="btn-voice">🔊 LISTEN</button>
            <button onclick="escuchar()" class="btn-voice">🎤 SPEAK</button>
            <div id="resultado-voz" class="resultado-voz"></div>
        </div>

        <script>
            const frases = {
                "Hello! My name is [Your Name].": ["hello my name", "hi my name", "my name is"],
                "Hi! How are you?": ["hi how are you", "hello how are you", "how are you"],
                "I am 17 years old.": ["i am seventeen", "i'm seventeen", "seventeen years old"],
                "Nice to meet you!": ["nice to meet you", "pleased to meet you"],
                "What is your name?": ["what is your name", "what's your name"],
                "Good morning teacher!": ["good morning teacher", "morning teacher"],
                "I study at LC-ADVANCE.": ["i study at cbtis", "CBTis 168", "i study at c b t i s"],
                "See you later!": ["see you later", "see you", "bye"]
            };

            function hablar() {
                const frase = document.getElementById("frase-select").value;
                const utter = new SpeechSynthesisUtterance(frase);
                utter.lang = 'en-US';
                utter.rate = 0.85;
                utter.pitch = 1.1;
                speechSynthesis.speak(utter);
                document.getElementById("resultado-voz").innerHTML = '<div class="feedback success">🔊 Playing: "' + frase + '"</div>';
            }

            function escuchar() {
                const fraseOriginal = document.getElementById("frase-select").value;
                const esperados = frases[fraseOriginal];
                const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.lang = 'en-US';
                recognition.interimResults = false;
                recognition.maxAlternatives = 1;

                document.getElementById("resultado-voz").innerHTML = '<div class="feedback listening">🎤 Listening... ¡Habla ahora!</div>';

                recognition.start();

                recognition.onresult = function(event) {
                    const dicho = event.results[0][0].transcript.toLowerCase().trim();
                    const acierto = esperados.some(p => dicho.includes(p));
                    const color = acierto ? '#00ff00' : '#ff4444';
                    const mensaje = acierto ? '¡PERFECTO! 🌟🌟🌟' : 'Inténtalo de nuevo 😊<br>Tú dijiste: "' + dicho + '"';
                    document.getElementById("resultado-voz").innerHTML = '<div class="feedback" style="border-color:' + color + ';">' + mensaje + '</div>';
                };

                recognition.onerror = function() {
                    document.getElementById("resultado-voz").innerHTML = '<div class="feedback error">Error 🎤 (permite micrófono)</div>';
                };
            }
        </script>

        <hr style="border:2px dashed #2196F3; border-radius:10px;">

        <h4>3. Numbers 1-100 - Interactive Grid</h4>
        <div class="contador-ingles">
            <p style="font-size:22px; color:#00ff88;"><strong>¡Click cualquier número → pronunciación nativa perfecta!</strong></p>
            <div class="grid-numeros">
                $botonesNumeros
            </div>
        </div>

        <script>
            function speakNumber(text) {
                const utter = new SpeechSynthesisUtterance(text);
                utter.lang = 'en-US';
                utter.rate = 0.9;
                utter.pitch = 1;
                speechSynthesis.speak(utter);
            }
        </script>

        <hr style="border:2px dashed #2196F3; border-radius:10px;">

        <h4>A1 Introduction Flow</h4>
        <div class="svg-diagram">
            <svg viewBox="0 0 1000 600" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#00ff88" />
                        <stop offset="100%" style="stop-color:#2196F3" />
                    </linearGradient>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#ffcc00" />
                    </marker>
                </defs>

                <rect width="1000" height="600" fill="#0a0a0a"/>

                <text x="500" y="80" font-size="48" fill="#ffcc00" text-anchor="middle" font-weight="bold" class="title">A1 ENGLISH LC-ADVANCE</text>

                <!-- Person A -->
                <circle cx="250" cy="300" r="100" fill="url(#grad1)" stroke="#ffcc00" stroke-width="6" class="animate"/>
                <text x="250" y="280" font-size="24" fill="white" text-anchor="middle">YOU</text>
                <text x="250" y="320" font-size="18" fill="#00ff88" text-anchor="middle">CBTis 168 Student</text>

                <!-- Person B -->
                <circle cx="750" cy="300" r="100" fill="url(#grad1)" stroke="#ffcc00" stroke-width="6" class="animate"/>
                <text x="750" y="280" font-size="24" fill="white" text-anchor="middle">ANA</text>
                <text x="750" y="320" font-size="18" fill="#00ff88" text-anchor="middle">Your Partner</text>

                <!-- Flechas animadas -->
                <path d="M350 300 Q500 200 650 300" stroke="#ffcc00" stroke-width="8" fill="none" marker-end="url(#arrowhead)" class="arrow"/>
                <text x="500" y="180" font-size="24" fill="#ffff00" text-anchor="middle">Hello! What's your name?</text>

                <path d="M650 320 Q500 420 350 320" stroke="#00ff88" stroke-width="8" fill="none" marker-end="url(#arrowhead)" class="arrow"/>
                <text x="500" y="460" font-size="24" fill="#00ff88" text-anchor="middle">Hi! I'm Felipe from CBTis 168!</text>
            </svg>
        </div>

        <div class="ejemplo">
            <h4>Full Introduction - LC-ADVANCE</h4>
            <p style="font-size:20px;">
                <strong>You:</strong> Hello! My name is [Your Name]. I am 17 years old. I study at CBTis 168.<br>
                <strong>Ana:</strong> Nice to meet you! I'm Ana. I'm 16. See you later!<br>
                <strong>You:</strong> Bye! Have a nice day!
            </p>
        </div>
HTML
,
    'ejercicios' => [
        ["enunciado" => "Say hello in 5 ways", "respuesta" => "Hi / Hello / Hey / Good morning / Good afternoon"],
        ["enunciado" => "Introduce yourself (full)", "respuesta" => "Hello! My name is [name]. I am [age] years old. I am from Mexico."],
        ["enunciado" => "Count 1-20", "respuesta" => "one two three four five six seven eight nine ten eleven twelve thirteen fourteen fifteen sixteen seventeen eighteen nineteen twenty"],
        ["enunciado" => "Ask someone's age", "respuesta" => "How old are you?"],
        ["enunciado" => "Say goodbye 3 ways", "respuesta" => "Goodbye / Bye / See you later"],
        ["enunciado" => "Spell your name", "respuesta" => "My name is A-N-A"],
        ["enunciado" => "Number 100", "respuesta" => "one hundred"],
        ["enunciado" => "How are you?", "respuesta" => "I'm fine, thanks. And you?"],
        ["enunciado" => "Nice to meet you response", "respuesta" => "Nice to meet you too!"],
        ["enunciado" => "Phone number example", "respuesta" => "My phone number is 55-1234-5678"],
        ["enunciado" => "Say your school", "respuesta" => "I study at CBTIS 168"],
        ["enunciado" => "What is your name? (response)", "respuesta" => "My name is [name]"],
        ["enunciado" => "Count by 10s to 100", "respuesta" => "ten twenty thirty forty fifty sixty seventy eighty ninety one hundred"],
        ["enunciado" => "Good night", "respuesta" => "Good night! Sleep well!"],
        ["enunciado" => "SI: % mexicanos hablan inglés 2025", "respuesta" => "28% (INEGI)"]
    ],
    'quiz' => [
        ["pregunta" => "How do you say 'hola'?", "opciones" => ["Hello", "Goodbye", "Thanks", "Please"], "correcta" => "Hello"],
        ["pregunta" => "'Nice to meet you' = ", "opciones" => ["Mucho gusto", "Adiós", "Gracias", "Por favor"], "correcta" => "Mucho gusto"],
        ["pregunta" => "Number 5", "opciones" => ["Five", "Four", "Six", "Ten"], "correcta" => "Five"],
        ["pregunta" => "'How old are you?'", "opciones" => ["¿Cuántos años tienes?", "¿Cómo estás?", "¿De dónde eres?", "¿Cómo te llamas?"], "correcta" => "¿Cuántos años tienes?"],
        ["pregunta" => "Goodbye formal", "opciones" => ["Goodbye", "Bye", "Hey", "Hi"], "correcta" => "Goodbye"],
        ["pregunta" => "I'm fine, thanks = ", "opciones" => ["Bien, gracias", "Mal", "Adiós", "Hola"], "correcta" => "Bien, gracias"],
        ["pregunta" => "Number 20", "opciones" => ["Twenty", "Twelve", "Thirty", "Two"], "correcta" => "Twenty"],
        ["pregunta" => "What is your name?", "opciones" => ["¿Cómo te llamas?", "¿Cuántos años?", "¿De dónde?", "¿Cómo estás?"], "correcta" => "¿Cómo te llamas?"],
        ["pregunta" => "Good evening", "opciones" => ["Buenas noches (saludo)", "Buenos días", "Buenas tardes", "Adiós"], "correcta" => "Buenas noches (saludo)"],
        ["pregunta" => "See you tomorrow", "opciones" => ["Hasta mañana", "Hasta luego", "Adiós", "Hola"], "correcta" => "Hasta mañana"],
        ["pregunta" => "My name is = ", "opciones" => ["Me llamo", "Tengo", "Soy de", "Estudio"], "correcta" => "Me llamo"],
        ["pregunta" => "Number 100", "opciones" => ["One hundred", "Ten", "One thousand", "Fifty"], "correcta" => "One hundred"],
        ["pregunta" => "How are you?", "opciones" => ["¿Cómo estás?", "¿Cuántos años?", "¿De dónde eres?", "¿Adiós?"], "correcta" => "¿Cómo estás?"],
        ["pregunta" => "Nice to meet you too!", "opciones" => ["¡Igualmente!", "Adiós", "Gracias", "De nada"], "correcta" => "¡Igualmente!"],
        ["pregunta" => "I am from Mexico", "opciones" => ["Soy de México", "Vivo en México", "Estudio en México", "Trabajo en México"], "correcta" => "Soy de México"],
        ["pregunta" => "Thank you", "opciones" => ["Gracias", "Por favor", "Adiós", "Hola"], "correcta" => "Gracias"],
        ["pregunta" => "You're welcome", "opciones" => ["De nada", "Gracias", "Por favor", "Adiós"], "correcta" => "De nada"],
        ["pregunta" => "Best app 2025", "opciones" => ["LC-ADVANCE StudyGame", "Duolingo", "Babbel", "HelloTalk"], "correcta" => "LC-ADVANCE StudyGame"],
        ["pregunta" => "English in CBTIS", "opciones" => ["Obligatorio A1-A2", "Opcional", "Solo lectura", "No"], "correcta" => "Obligatorio A1-A2"],
        ["pregunta" => "Future job need", "opciones" => ["English B1+", "Solo español", "Francés", "Chino"], "correcta" => "English B1+"]
    ]
];
// ========================================
// MATERIA: INGLÉS - VERSIÓN MEJORADA 2025 (PHP)
// Nivel: A1 - Family Members & Daily Objects
// ========================================

// 1. Datos de Familia
$familiaIngles = [
    'mother' => 'madre', 'father' => 'padre', 'brother' => 'hermano', 'sister' => 'hermana',
    'grandmother' => 'abuela', 'grandfather' => 'abuelo', 'uncle' => 'tío', 'aunt' => 'tía',
    'cousin' => 'primo/a', 'son' => 'hijo', 'daughter' => 'hija', 'baby' => 'bebé',
    'parents' => 'padres', 'children' => 'hijos', 'pet' => 'mascota', 'dog' => 'perro', 'cat' => 'gato'
];

$tarjetasFamilia = '';
foreach ($familiaIngles as $ing => $esp) {
    $tarjetasFamilia .= <<<HTML
    <div class="card family-card" data-word="$ing" onclick="speakWord('$ing')">
        <div class="card-icon">👨‍👩‍👧‍👦</div>
        <div class="card-content">
            <span class="word-en">$ing</span>
            <span class="word-es">$esp</span>
        </div>
        <div class="card-actions">
            <button class="action-btn add-btn" onclick="event.stopPropagation(); addToPractice('$ing')">➕</button>
            <button class="action-btn example-btn" onclick="event.stopPropagation(); showExample('$ing')">💡</button>
        </div>
    </div>
HTML;
}

// 2. Datos de Objetos
$objetos = [
    'backpack' => ['esp' => 'mochila', 'emoji' => '🎒'],
    'book' => ['esp' => 'libro', 'emoji' => '📚'],
    'pencil' => ['esp' => 'lápiz', 'emoji' => '✏️'],
    'phone' => ['esp' => 'teléfono', 'emoji' => '📱'],
    'desk' => ['esp' => 'escritorio', 'emoji' => '🪑'],
    'chair' => ['esp' => 'silla', 'emoji' => '💺'],
    'notebook' => ['esp' => 'cuaderno', 'emoji' => '📓'],
    'pen' => ['esp' => 'pluma', 'emoji' => '🖊️'],
    'ruler' => ['esp' => 'regla', 'emoji' => '📏'],
    'eraser' => ['esp' => 'borrador', 'emoji' => '🧼']
];

$objetosDiarios = '';
foreach ($objetos as $ing => $data) {
    $objetosDiarios .= <<<HTML
    <div class="card object-card" data-word="$ing" onclick="speakWord('$ing')">
        <div class="object-emoji">{$data['emoji']}</div>
        <div class="card-content">
            <span class="word-en">$ing</span>
            <span class="word-es">{$data['esp']}</span>
        </div>
        <div class="card-actions">
            <button class="action-btn add-btn" onclick="event.stopPropagation(); addToPractice('$ing')">➕</button>
            <button class="action-btn example-btn" onclick="event.stopPropagation(); showExample('$ing')">💡</button>
        </div>
    </div>
HTML;
}

// 3. Estructura de la Lección
$lecciones[] = [
    'materia' => 'Inglés',
    'slug' => 'a1-family-objects-pro',
    'titulo' => 'A1 PRO: Family Members & Daily Objects • Interactive Voice Learning 2025',
    'contenido' => <<<HTML
    <div class="lesson-banner">
        <div class="banner-content">
            <h1>🏆 English A1 PRO 2025</h1>
            <p class="banner-subtitle">Family Members & Daily Objects • Interactive Voice Learning</p>
            <div class="banner-stats">
                <div class="stat">
                    <span class="stat-number">30+</span>
                    <span class="stat-label">Vocabulary Words</span>
                </div>
                <div class="stat">
                    <span class="stat-number">100%</span>
                    <span class="stat-label">Native Pronunciation</span>
                </div>
                <div class="stat">
                    <span class="stat-number">15</span>
                    <span class="stat-label">Interactive Exercises</span>
                </div>
            </div>
        </div>
    </div>

    <div class="progress-container">
        <div class="progress-bar">
            <div class="progress-fill" style="width: 25%"></div>
        </div>
        <div class="progress-text">Lesson Progress: 25%</div>
    </div>

    <main class="lesson-content-area">
        <section class="section-card">
            <div class="section-header">
                <h2>👨‍👩‍👧‍👦 Family Members</h2>
                <p>Click any card to hear native pronunciation, or press ➕ to add it to your practice list!</p>
            </div>
            <div class="cards-grid family-grid">
                $tarjetasFamilia
            </div>
            <div class="section-footer">
                <button class="practice-btn" onclick="startFamilyPractice()">🎯 Practice All Family Words</button>
            </div>
        </section>

        <section class="section-card">
            <div class="section-header">
                <h2>📚 Daily Objects</h2>
                <p>Essential classroom and everyday items</p>
            </div>
            <div class="cards-grid objects-grid">
                $objetosDiarios
            </div>
        </section>

        <section class="section-card voice-simulator">
            <div class="section-header">
                <h2>🎤 Voice Practice Simulator</h2>
                <p>Practice your pronunciation with AI feedback</p>
            </div>
            <div class="simulator-container">
                <div class="word-display" id="current-word">
                    <span class="word-large">mother</span>
                    <span class="word-translation">madre</span>
                </div>
                
                <div class="controls-row">
                    <button class="control-btn primary" onclick="speakCurrentWord()">
                        <span class="btn-icon">🔊</span> Listen
                    </button>
                    <button class="control-btn secondary" onclick="startListening()">
                        <span class="btn-icon">🎤</span> Speak
                    </button>
                    <button class="control-btn tertiary" onclick="nextWord()">
                        <span class="btn-icon">⏭️</span> Next
                    </button>
                </div>

                <div class="practice-words">
                    <h4>Practice List:</h4>
                    <div class="word-chips" id="practice-chips"></div>
                    <button class="chip-add-btn" onclick="showWordSelector()">+ Add Words</button>
                </div>

                <div class="feedback-container">
                    <div class="feedback-message" id="feedback-message">
                        Ready to practice! Click "Listen" to hear the word.
                    </div>
                    <div class="confidence-meter">
                        <div class="confidence-fill" id="confidence-level"></div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section-card">
            <div class="section-header">
                <h2>🌳 Interactive Family Tree</h2>
                <p>Click on family members to hear the English word</p>
            </div>
            <div class="family-tree-container">
                <svg viewBox="0 0 1000 700" xmlns="http://www.w3.org/2000/svg" class="family-tree">
                    <defs>
                        <linearGradient id="treeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#4CAF50"/>
                            <stop offset="100%" stop-color="#2E7D32"/>
                        </linearGradient>
                        <filter id="glow">
                            <feGaussianBlur stdDeviation="3.5" result="coloredBlur"/>
                            <feMerge>
                                <feMergeNode in="coloredBlur"/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                    </defs>

                    <rect width="1000" height="700" fill="#f8f9fa"/>
                    
                    <text x="500" y="60" text-anchor="middle" font-size="36" font-weight="bold" fill="#333">My Family Tree</text>

                    <g class="tree-person" data-role="student" onclick="speakWord('student')">
                        <circle cx="500" cy="200" r="50" fill="#2196F3" filter="url(#glow)"/>
                        <text x="500" y="195" text-anchor="middle" fill="white" font-size="16" font-weight="bold">ME</text>
                        <text x="500" y="215" text-anchor="middle" fill="white" font-size="12">Student</text>
                    </g>
                    <g class="tree-person" data-role="mother" onclick="speakWord('mother')">
                        <circle cx="350" cy="350" r="45" fill="#E91E63"/>
                        <text x="350" y="345" text-anchor="middle" fill="white" font-size="14">Mother</text>
                        <text x="350" y="365" text-anchor="middle" fill="white" font-size="11">Maria</text>
                    </g>
                    <g class="tree-person" data-role="father" onclick="speakWord('father')">
                        <circle cx="650" cy="350" r="45" fill="#2196F3"/>
                        <text x="650" y="345" text-anchor="middle" fill="white" font-size="14">Father</text>
                        <text x="650" y="365" text-anchor="middle" fill="white" font-size="11">José</text>
                    </g>
                    <g class="tree-person" data-role="grandmother" onclick="speakWord('grandmother')">
                        <circle cx="250" cy="500" r="40" fill="#9C27B0"/>
                        <text x="250" y="495" text-anchor="middle" fill="white" font-size="12">Grandma</text>
                        <text x="250" y="512" text-anchor="middle" fill="white" font-size="10">Ana</text>
                    </g>
                    <g class="tree-person" data-role="grandfather" onclick="speakWord('grandfather')">
                        <circle cx="450" cy="500" r="40" fill="#3F51B5"/>
                        <text x="450" y="495" text-anchor="middle" fill="white" font-size="12">Grandpa</text>
                        <text x="450" y="512" text-anchor="middle" fill="white" font-size="10">Carlos</text>
                    </g>
                    <g class="tree-person" data-role="grandmother" onclick="speakWord('grandmother')">
                        <circle cx="550" cy="500" r="40" fill="#9C27B0"/>
                        <text x="550" y="495" text-anchor="middle" fill="white" font-size="12">Grandma</text>
                        <text x="550" y="512" text-anchor="middle" fill="white" font-size="10">Elena</text>
                    </g>
                    <g class="tree-person" data-role="grandfather" onclick="speakWord('grandfather')">
                        <circle cx="750" cy="500" r="40" fill="#3F51B5"/>
                        <text x="750" y="495" text-anchor="middle" fill="white" font-size="12">Grandpa</text>
                        <text x="750" y="512" text-anchor="middle" fill="white" font-size="10">Miguel</text>
                    </g>
                    <g class="tree-person" data-role="brother" onclick="speakWord('brother')">
                        <circle cx="400" cy="200" r="35" fill="#4CAF50"/>
                        <text x="400" y="197" text-anchor="middle" fill="white" font-size="11">Brother</text>
                        <text x="400" y="212" text-anchor="middle" fill="white" font-size="9">Luis</text>
                    </g>
                    <g class="tree-person" data-role="sister" onclick="speakWord('sister')">
                        <circle cx="600" cy="200" r="35" fill="#FF9800"/>
                        <text x="600" y="197" text-anchor="middle" fill="white" font-size="11">Sister</text>
                        <text x="600" y="212" text-anchor="middle" fill="white" font-size="9">Sofia</text>
                    </g>

                    <line x1="500" y1="250" x2="500" y2="305" stroke="#795548" stroke-width="3"/>
                    <line x1="350" y1="305" x2="500" y2="250" stroke="#795548" stroke-width="3"/>
                    <line x1="650" y1="305" x2="500" y2="250" stroke="#795548" stroke-width="3"/>
                    <line x1="350" y1="395" x2="250" y2="460" stroke="#795548" stroke-width="2"/>
                    <line x1="350" y1="395" x2="450" y2="460" stroke="#795548" stroke-width="2"/>
                    <line x1="650" y1="395" x2="550" y2="460" stroke="#795548" stroke-width="2"/>
                    <line x1="650" y1="395" x2="750" y2="460" stroke="#795548" stroke-width="2"/>
                    <line x1="500" y1="150" x2="400" y2="165" stroke="#795548" stroke-width="2"/>
                    <line x1="500" y1="150" x2="600" y2="165" stroke="#795548" stroke-width="2"/>
                </svg>
            </div>
        </section>

        <section class="section-card">
            <div class="section-header">
                <h2>💬 Example Conversation</h2>
                <p>Practice this dialogue with voice recognition</p>
            </div>
            <div class="dialogue-container">
                <div class="dialogue-bubble left">
                    <div class="bubble-avatar">👦</div>
                    <div class="bubble-content"><strong>You:</strong> This is my family. My mother's name is Maria.</div>
                </div>
                <div class="dialogue-bubble right">
                    <div class="bubble-avatar">👩</div>
                    <div class="bubble-content"><strong>Friend:</strong> Nice to meet them! How many brothers do you have?</div>
                </div>
                <div class="dialogue-bubble left">
                    <div class="bubble-avatar">👦</div>
                    <div class="bubble-content"><strong>You:</strong> I have one brother named Luis.</div>
                </div>
            </div>
            <div class="dialogue-actions">
                <button class="practice-btn" onclick="practiceDialogue()">🎭 Practice This Dialogue</button>
            </div>
        </section>
    </main>

   <script>
       // =====================================================
            // JAVASCRIPT PARA FUNCIONALIDAD DE BOTONES
            // =====================================================

            // Variables globales
            let practiceWords = ['mother', 'father', 'brother', 'sister'];
            let currentWordIndex = 0;
            let recognition = null;

            // Diccionarios de traducciones y ejemplos
            const translations = {
                'mother': 'madre', 'father': 'padre', 'brother': 'hermano', 'sister': 'hermana',
                'grandmother': 'abuela', 'grandfather': 'abuelo', 'uncle': 'tío', 'aunt': 'tía',
                'cousin': 'primo/a', 'son': 'hijo', 'daughter': 'hija', 'baby': 'bebé',
                'parents': 'padres', 'children': 'hijos', 'pet': 'mascota', 'dog': 'perro', 'cat': 'gato',
                'backpack': 'mochila', 'book': 'libro', 'pencil': 'lápiz', 'phone': 'teléfono',
                'desk': 'escritorio', 'chair': 'silla', 'notebook': 'cuaderno', 'pen': 'pluma',
                'ruler': 'regla', 'eraser': 'borrador', 'student': 'estudiante'
            };

            const examples = {
                'mother': 'My mother cooks delicious food.',
                'father': 'My father works in an office.',
                'brother': 'My brother plays soccer.',
                'sister': 'My sister studies at university.',
                'grandmother': 'My grandmother tells stories.',
                'grandfather': 'My grandfather likes gardening.',
                'student': 'I am a good student.',
                'book': 'I read a book every day.',
                'pencil': 'Can I borrow your pencil?',
                'phone': 'My phone is new.',
                'backpack': 'I carry my books in my backpack.'
            };

            // Función para hablar palabras
            function speakWord(word) {
                if ('speechSynthesis' in window) {
                    // Cancelar cualquier habla anterior
                    speechSynthesis.cancel();
                    
                    const utterance = new SpeechSynthesisUtterance(word);
                    utterance.lang = 'en-US';
                    utterance.rate = 0.9;
                    utterance.pitch = 1;
                    
                    // Efecto visual en la tarjeta
                    const card = document.querySelector(`[data-word="\${word}"]`);
                    if (card) {
                        card.classList.add('speaking');
                        utterance.onend = () => {
                            card.classList.remove('speaking');
                        };
                    }
                    
                    speechSynthesis.speak(utterance);
                } else {
                    showNotification('Text-to-speech no soportado en este navegador', 'error');
                }
            }

            // Función para hablar la palabra actual
            function speakCurrentWord() {
                if (practiceWords.length === 0) {
                    showNotification('No hay palabras en la lista de práctica', 'error');
                    return;
                }
                
                const word = practiceWords[currentWordIndex];
                const wordDisplay = document.querySelector('#current-word .word-large');
                const translationDisplay = document.querySelector('#current-word .word-translation');
                
                if (wordDisplay) wordDisplay.textContent = word;
                if (translationDisplay) translationDisplay.textContent = translations[word] || '';
                
                speakWord(word);
                setFeedback('Escucha atentamente la pronunciación', 'info');
            }

            // Función para iniciar reconocimiento de voz
            function startListening() {
                if (!('SpeechRecognition' in window || 'webkitSpeechRecognition' in window)) {
                    showNotification('Reconocimiento de voz no soportado en este navegador', 'error');
                    return;
                }
                
                if (practiceWords.length === 0) {
                    showNotification('Primero añade palabras para practicar', 'error');
                    return;
                }
                
                // Detener reconocimiento anterior si existe
                if (recognition) {
                    recognition.stop();
                }

                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.lang = 'en-US';
                recognition.interimResults = false;
                recognition.continuous = false;

                const currentWord = practiceWords[currentWordIndex];
                setFeedback(`Escuchando... Di: <strong>\${currentWord}</strong>`, 'listening');
                
                recognition.start();

                recognition.onresult = function(event) {
                    const spokenText = event.results[0][0].transcript.toLowerCase().trim();
                    let confidence = 0;
                    let message = '';
                    let type = '';

                    if (spokenText === currentWord) {
                        confidence = 100;
                        message = `¡Excelente! Pronunciaste perfectamente: "\${spokenText}"`;
                        type = 'success';
                    } else if (spokenText.includes(currentWord) || currentWord.includes(spokenText) || 
                            calculateSimilarity(spokenText, currentWord) > 0.6) {
                        confidence = 70;
                        message = `¡Bien! Casi perfecto. Dijiste: "\${spokenText}"`;
                        type = 'success';
                    } else {
                        confidence = 30;
                        message = `Inténtalo de nuevo. Dijiste: "\${spokenText}", debería ser: "\${currentWord}"`;
                        type = 'error';
                    }
                    
                    setFeedback(message, type);
                    updateConfidenceMeter(confidence);
                };

                recognition.onerror = function(event) {
                    setFeedback('Error en el reconocimiento: ' + event.error, 'error');
                };

                recognition.onend = function() {
                    // El reconocimiento se detiene automáticamente después del resultado
                };
            }

            // Función para calcular similitud entre palabras (para reconocimiento más flexible)
            function calculateSimilarity(str1, str2) {
                const longer = str1.length > str2.length ? str1 : str2;
                const shorter = str1.length > str2.length ? str2 : str1;
                
                if (longer.length === 0) return 1.0;
                
                return (longer.length - editDistance(longer, shorter)) / parseFloat(longer.length);
            }

            function editDistance(s1, s2) {
                s1 = s1.toLowerCase();
                s2 = s2.toLowerCase();
                
                const costs = [];
                for (let i = 0; i <= s1.length; i++) {
                    let lastValue = i;
                    for (let j = 0; j <= s2.length; j++) {
                        if (i === 0) costs[j] = j;
                        else {
                            if (j > 0) {
                                let newValue = costs[j - 1];
                                if (s1.charAt(i - 1) !== s2.charAt(j - 1))
                                    newValue = Math.min(Math.min(newValue, lastValue), costs[j]) + 1;
                                costs[j - 1] = lastValue;
                                lastValue = newValue;
                            }
                        }
                    }
                    if (i > 0) costs[s2.length] = lastValue;
                }
                return costs[s2.length];
            }

            // Función para siguiente palabra
            function nextWord() {
                if (practiceWords.length === 0) {
                    showNotification('No hay palabras en la lista de práctica', 'error');
                    return;
                }
                
                currentWordIndex = (currentWordIndex + 1) % practiceWords.length;
                speakCurrentWord();
                updateConfidenceMeter(0);
            }

            // Función para añadir palabra a práctica
            function addToPractice(word) {
                if (!practiceWords.includes(word)) {
                    practiceWords.push(word);
                    updatePracticeChips();
                    showNotification(`"\${word}" añadida a la lista de práctica`, 'success');
                    
                    // Si es la primera palabra, mostrarla
                    if (practiceWords.length === 1) {
                        currentWordIndex = 0;
                        speakCurrentWord();
                    }
                } else {
                    showNotification(`"\${word}" ya está en la lista de práctica`, 'info');
                }
            }

            // Función para remover palabra de práctica
            function removeFromPractice(word) {
                const index = practiceWords.indexOf(word);
                if (index > -1) {
                    practiceWords.splice(index, 1);
                    updatePracticeChips();
                    
                    // Ajustar el índice actual si es necesario
                    if (currentWordIndex >= practiceWords.length) {
                        currentWordIndex = 0;
                    }
                    
                    if (practiceWords.length > 0) {
                        speakCurrentWord();
                    } else {
                        const wordDisplay = document.querySelector('#current-word .word-large');
                        const translationDisplay = document.querySelector('#current-word .word-translation');
                        
                        if (wordDisplay) wordDisplay.textContent = 'Lista vacía';
                        if (translationDisplay) translationDisplay.textContent = 'Añade palabras para practicar';
                        setFeedback('Usa el botón "+" para añadir palabras a tu lista de práctica', 'info');
                    }
                    
                    showNotification(`"\${word}" removida de la lista`, 'info');
                }
            }

            // Función para mostrar ejemplos
            function showExample(word) {
                const example = examples[word] || 'No hay ejemplo disponible para esta palabra.';
                showNotification(`Ejemplo: \${example}`, 'info');
            }

            // Función para mostrar selector de palabras
            function showWordSelector() {
                const availableWords = Object.keys(translations).filter(word => !practiceWords.includes(word));
                
                if (availableWords.length === 0) {
                    showNotification('¡Ya tienes todas las palabras en tu lista de práctica!', 'info');
                    return;
                }
                
                // Crear un modal simple para seleccionar palabras
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.5);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 1000;
                `;
                
                const modalContent = document.createElement('div');
                modalContent.style.cssText = `
                    background: white;
                    padding: 20px;
                    border-radius: 10px;
                    max-width: 500px;
                    max-height: 80vh;
                    overflow-y: auto;
                    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                `;
                
                modalContent.innerHTML = `
                    <h3>Seleccionar Palabras para Practicar</h3>
                    <div style="max-height: 300px; overflow-y: auto; margin: 15px 0;">
                        \${availableWords.map(word => `
                            <div style="display: flex; justify-content: between; align-items: center; padding: 8px; border-bottom: 1px solid #eee;">
                                <span>\${word} - \${translations[word]}</span>
                                <button onclick="addToPractice('\${word}'); this.parentElement.remove();" 
                                        style="margin-left: auto; padding: 5px 10px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                    Añadir
                                </button>
                            </div>
                        `).join('')}
                    </div>
                    <button onclick="this.closest('div').parentElement.remove()" 
                            style="padding: 10px 20px; background: #f44336; color: white; border: none; border-radius: 4px; cursor: pointer;">
                        Cerrar
                    </button>
                `;
                
                modal.appendChild(modalContent);
                document.body.appendChild(modal);
                
                // Cerrar modal al hacer clic fuera
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            }

            // Función para práctica de familia
            function startFamilyPractice() {
                const familyWords = ['mother', 'father', 'brother', 'sister', 'grandmother', 'grandfather', 'parents', 'children'];
                practiceWords = familyWords;
                currentWordIndex = 0;
                updatePracticeChips();
                speakCurrentWord();
                showNotification('Práctica de familia iniciada', 'success');
            }

            // Función para práctica de diálogo
            function practiceDialogue() {
                showNotification('Práctica de diálogo iniciada. Lee las frases en voz alta.', 'info');
                
                // Simular práctica de diálogo
                const dialogueLines = [
                    "This is my family. My mother's name is Maria.",
                    "Nice to meet them! How many brothers do you have?",
                    "I have one brother named Luis."
                ];
                
                let currentLine = 0;
                
                function speakNextLine() {
                    if (currentLine < dialogueLines.length) {
                        const utterance = new SpeechSynthesisUtterance(dialogueLines[currentLine]);
                        utterance.lang = 'en-US';
                        utterance.rate = 0.9;
                        
                        setFeedback(`Di: "\${dialogueLines[currentLine]}"`, 'listening');
                        
                        utterance.onend = function() {
                            currentLine++;
                            if (currentLine < dialogueLines.length) {
                                setTimeout(speakNextLine, 1000);
                            } else {
                                setFeedback('¡Diálogo completado!', 'success');
                            }
                        };
                        
                        speechSynthesis.speak(utterance);
                    }
                }
                
                speakNextLine();
            }

            // Función para actualizar chips de práctica
            function updatePracticeChips() {
                const chipsContainer = document.getElementById('practice-chips');
                if (!chipsContainer) return;
                
                chipsContainer.innerHTML = '';
                
                practiceWords.forEach(word => {
                    const chip = document.createElement('div');
                    chip.className = 'word-chip';
                    chip.style.cssText = `
                        display: inline-flex;
                        align-items: center;
                        background: #e3f2fd;
                        color: #1976d2;
                        padding: 5px 10px;
                        margin: 3px;
                        border-radius: 20px;
                        font-size: 14px;
                    `;
                    
                    const wordSpan = document.createElement('span');
                    wordSpan.textContent = word;
                    wordSpan.style.marginRight = '5px';
                    
                    const removeBtn = document.createElement('button');
                    removeBtn.textContent = '×';
                    removeBtn.style.cssText = `
                        background: none;
                        border: none;
                        color: #1976d2;
                        cursor: pointer;
                        font-size: 16px;
                        padding: 0;
                        width: 20px;
                        height: 20px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    `;
                    removeBtn.onclick = (e) => {
                        e.stopPropagation();
                        removeFromPractice(word);
                    };
                    
                    chip.appendChild(wordSpan);
                    chip.appendChild(removeBtn);
                    chipsContainer.appendChild(chip);
                });
            }

            // Función para establecer feedback
            function setFeedback(message, type = 'info') {
                const feedbackElement = document.getElementById('feedback-message');
                if (feedbackElement) {
                    feedbackElement.innerHTML = message;
                    feedbackElement.className = `feedback-message \${type}`;
                }
            }

            // Función para actualizar medidor de confianza
            function updateConfidenceMeter(confidence) {
                const confidenceElement = document.getElementById('confidence-level');
                if (confidenceElement) {
                    confidenceElement.style.width = `\${confidence}%`;
                    confidenceElement.style.background = confidence >= 80 ? '#4CAF50' : 
                                                    confidence >= 60 ? '#FFC107' : '#F44336';
                }
            }

            // Función para mostrar notificaciones
            function showNotification(message, type = 'info') {
                // Crear contenedor de notificaciones si no existe
                let container = document.getElementById('notification-container');
                if (!container) {
                    container = document.createElement('div');
                    container.id = 'notification-container';
                    container.style.cssText = `
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        z-index: 10000;
                        max-width: 300px;
                    `;
                    document.body.appendChild(container);
                }
                
                const notification = document.createElement('div');
                const backgroundColor = type === 'success' ? '#4CAF50' : 
                                    type === 'error' ? '#F44336' : 
                                    type === 'warning' ? '#FF9800' : '#2196F3';
                
                notification.style.cssText = `
                    background: \${backgroundColor};
                    color: white;
                    padding: 12px 16px;
                    margin: 8px 0;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                    opacity: 0;
                    transform: translateX(100px);
                    transition: all 0.3s ease;
                    cursor: pointer;
                `;
                
                notification.innerHTML = message;
                container.appendChild(notification);
                
                // Animación de entrada
                setTimeout(() => {
                    notification.style.opacity = '1';
                    notification.style.transform = 'translateX(0)';
                }, 10);
                
                // Auto-remover después de 4 segundos
                setTimeout(() => {
                    notification.style.opacity = '0';
                    notification.style.transform = 'translateX(100px)';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }, 4000);
                
                // Remover al hacer clic
                notification.addEventListener('click', () => {
                    notification.style.opacity = '0';
                    notification.style.transform = 'translateX(100px)';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                });
            }

            // Inicialización cuando el DOM está listo
            document.addEventListener('DOMContentLoaded', function() {
                // Inicializar chips de práctica
                updatePracticeChips();
                
                // Mostrar primera palabra si hay palabras en práctica
                if (practiceWords.length > 0) {
                    speakCurrentWord();
                }
                
                // Añadir event listeners para el árbol familiar
                document.querySelectorAll('.tree-person').forEach(person => {
                    person.addEventListener('click', function() {
                        const role = this.getAttribute('data-role');
                        if (translations[role]) {
                            speakWord(role);
                        }
                    });
                });
                
                // Añadir estilos para el efecto de habla
                if (!document.querySelector('#dynamic-styles')) {
                    const styles = document.createElement('style');
                    styles.id = 'dynamic-styles';
                    styles.textContent = `
                        .speaking {
                            transform: scale(1.05);
                            box-shadow: 0 0 20px rgba(33, 150, 243, 0.5) !important;
                            transition: all 0.3s ease;
                        }
                        
                        .feedback-message {
                            padding: 10px;
                            border-radius: 5px;
                            margin: 10px 0;
                            text-align: center;
                        }
                        
                        .feedback-message.info {
                            background: #e3f2fd;
                            color: #1976d2;
                        }
                        
                        .feedback-message.success {
                            background: #e8f5e8;
                            color: #2e7d32;
                        }
                        
                        .feedback-message.error {
                            background: #ffebee;
                            color: #c62828;
                        }
                        
                        .feedback-message.listening {
                            background: #fff3e0;
                            color: #ef6c00;
                        }
                        
                        .confidence-meter {
                            width: 100%;
                            height: 10px;
                            background: #e0e0e0;
                            border-radius: 5px;
                            margin: 10px 0;
                            overflow: hidden;
                        }
                        
                        .confidence-fill {
                            height: 100%;
                            width: 0%;
                            transition: width 0.5s ease;
                            border-radius: 5px;
                        }
                    `;
                    document.head.appendChild(styles);
                }
            });

            // Hacer funciones disponibles globalmente
            window.speakWord = speakWord;
            window.speakCurrentWord = speakCurrentWord;
            window.startListening = startListening;
            window.nextWord = nextWord;
            window.addToPractice = addToPractice;
            window.removeFromPractice = removeFromPractice;
            window.showExample = showExample;
            window.showWordSelector = showWordSelector;
            window.startFamilyPractice = startFamilyPractice;
            window.practiceDialogue = practiceDialogue;
    </script>
    <div id="notification-container"></div>
HTML
,
    'ejercicios' => [
        ["enunciado" => "Name ALL family members you know (15+)", "respuesta" => "mother, father, brother, sister, grandmother, grandfather, uncle, aunt, cousin, son, daughter, baby, parents, children, pet, dog, cat"],
        ["enunciado" => "Say 10 classroom objects in English", "respuesta" => "backpack, book, pencil, phone, desk, chair, board, notebook, eraser, ruler, pen, marker"],
        ["enunciado" => "My mother's brother is my...", "respuesta" => "uncle"],
        ["enunciado" => "My father's mother is my...", "respuesta" => "grandmother"],
        ["enunciado" => "Translate: 'Tengo tres primos y un perro'", "respuesta" => "I have three cousins and a dog"],
        ["enunciado" => "How many brothers and sisters do you have?", "respuesta" => "I have [number] brothers and [number] sisters"],
        ["enunciado" => "Draw your family tree (minimum 8 people)", "respuesta" => "Me, parents, siblings, grandparents, uncles/aunts"],
        ["enunciado" => "Baby in English = bebé", "respuesta" => "Correct!"],
        ["enunciado" => "My aunt's son is my...", "respuesta" => "cousin"],
        ["enunciado" => "List 6 objects in your classroom", "respuesta" => "desk, chair, board, book, pencil, phone"],
        ["enunciado" => "Say 'grandparents' in Spanish", "respuesta" => "abuelos"],
        ["enunciado" => "My parents have four...", "respuesta" => "children"],
        ["enunciado" => "Describe your pet (name, type, color)", "respuesta" => "I have a black dog named Rex"],
        ["enunciado" => "Who lives with you? (family members)", "respuesta" => "My mother, father, brother..."],
        ["enunciado" => "Best A1 family lesson 2025", "respuesta" => "LC-ADVANCE StudyGame!"]
    ],
    'quiz' => [
        ["pregunta" => "Mother = ", "opciones" => ["madre", "padre", "hermano", "tío"], "correcta" => "madre"],
        ["pregunta" => "Father = ", "opciones" => ["padre", "madre", "abuelo", "primo"], "correcta" => "padre"],
        ["pregunta" => "Brother = ", "opciones" => ["hermano", "hermana", "hijo", "bebé"], "correcta" => "hermano"],
        ["pregunta" => "Sister = ", "opciones" => ["hermana", "hermano", "tía", "prima"], "correcta" => "hermana"],
        ["pregunta" => "Grandmother = ", "opciones" => ["abuela", "abuelo", "madre", "tía"], "correcta" => "abuela"],
        ["pregunta" => "Grandfather = ", "opciones" => ["abuelo", "abuela", "padre", "tío"], "correcta" => "abuelo"],
        ["pregunta" => "Uncle = ", "opciones" => ["tío", "tía", "primo", "hijo"], "correcta" => "tío"],
        ["pregunta" => "Aunt = ", "opciones" => ["tía", "tío", "prima", "hija"], "correcta" => "tía"],
        ["pregunta" => "Cousin = ", "opciones" => ["primo/a", "hermano", "padre", "bebé"], "correcta" => "primo/a"],
        ["pregunta" => "Son = ", "opciones" => ["hijo", "hija", "padre", "abuelo"], "correcta" => "hijo"],
        ["pregunta" => "Daughter = ", "opciones" => ["hija", "hijo", "madre", "tía"], "correcta" => "hija"],
        ["pregunta" => "Baby = ", "opciones" => ["bebé", "perro", "gato", "abuelo"], "correcta" => "bebé"],
        ["pregunta" => "Parents = ", "opciones" => ["padres", "hijos", "abuelos", "primos"], "correcta" => "padres"],
        ["pregunta" => "Children = ", "opciones" => ["hijos", "padres", "tíos", "mascota"], "correcta" => "hijos"],
        ["pregunta" => "Pet = ", "opciones" => ["mascota", "hermano", "libro", "teléfono"], "correcta" => "mascota"],
        ["pregunta" => "Dog = ", "opciones" => ["perro", "gato", "pájaro", "pez"], "correcta" => "perro"],
        ["pregunta" => "Cat = ", "opciones" => ["gato", "perro", "conejo", "hámster"], "correcta" => "gato"],
        ["pregunta" => "Pencil = ", "opciones" => ["lápiz", "libro", "mochila", "teléfono"], "correcta" => "lápiz"],
        ["pregunta" => "Book = ", "opciones" => ["libro", "lápiz", "silla", "mesa"], "correcta" => "libro"],
        ["pregunta" => "Backpack = ", "opciones" => ["mochila", "teléfono", "libro", "lápiz"], "correcta" => "mochila"],
        ["pregunta" => "Phone = ", "opciones" => ["teléfono", "libro", "lápiz", "casa"], "correcta" => "teléfono"],
        ["pregunta" => "Desk = ", "opciones" => ["escritorio", "silla", "mochila", "pizarra"], "correcta" => "escritorio"],
        ["pregunta" => "Chair = ", "opciones" => ["silla", "mesa", "libro", "lápiz"], "correcta" => "silla"],
        ["pregunta" => "I have two brothers = ", "opciones" => ["Tengo dos hermanos", "Tengo dos hermanas", "Tengo dos libros", "Nada"], "correcta" => "Tengo dos hermanos"],
        ["pregunta" => "My mother's son is my...", "opciones" => ["brother", "father", "uncle", "cousin"], "correcta" => "brother"],
        ["pregunta" => "My father's sister is my...", "opciones" => ["aunt", "mother", "grandmother", "cousin"], "correcta" => "aunt"],
        ["pregunta" => "My uncle's daughter is my...", "opciones" => ["cousin", "sister", "aunt", "mother"], "correcta" => "cousin"],
        ["pregunta" => "Best English A1 app 2025", "opciones" => ["LC-ADVANCE StudyGame", "Duolingo", "Babbel", "Memrise"], "correcta" => "LC-ADVANCE StudyGame"],
        ["pregunta" => "Family in Spanish = ", "opciones" => ["familia", "amigos", "escuela", "casa"], "correcta" => "familia"],
        ["pregunta" => "How many people in your family?", "opciones" => ["Pregunta abierta", "5", "10", "15"], "correcta" => "Pregunta abierta"]
    ]
];
// ========================================
// MATERIA: INGLÉS - VERSIÓN MEJORADA 2025
// Nivel: A2 - Daily Routine & Telling Time
// ========================================

$numberWords = ['one', 'two', 'three','four','five','six','seven','eight',
'nine','ten','eleven','twelve'];

// 1. Generación Lógica del Reloj (PHP)
$relojHTML = '<div class="time-grid">';

for ($h = 1; $h <= 12; $h++) {
    for ($m = 0; $m < 60; $m += 15) {
        $digitalTime = sprintf("%d:%02d", $h, $m);

        // Inicialización de variables clave.
        $phrase = '';
        $class = 'time-btn';

        // Lógica de fraseo natural (British/American Standard)
        if ($m == 0) {
            $phrase = $numberWords[$h - 1] . " o'clock"; // Usar palabras para el número
            $class = "time-btn full-hour";
        } elseif ($m == 15) {
            $phrase = "quarter past " . $numberWords[$h - 1];
        } elseif ($m == 30) {
            $phrase = "half past " . $numberWords[$h - 1];
            $class = "time-btn half-hour";
        } elseif ($m == 45) {
            $nextHourIndex = ($h == 12) ? 0 : $h; // índice correcto para la siguiente hora
            $phrase = "quarter to " . $numberWords[$nextHourIndex];
        }
        // *******************************************************************
        // Nota: También puedes usar un switch más limpio, pero el if/elseif 
        // funciona si las variables están inicializadas o definidas en cada bloque.
        // *******************************************************************

        // Botón generado
        $relojHTML .= <<<HTML
            <button class="$class" onclick="speakText('$phrase', this)" title="🔊 Listen: $phrase">
                <span class="digital">$digitalTime</span>
                <span class="text">$phrase</span>
            </button>
HTML;
    }
}
$relojHTML .= '</div>';

// 2. Definición de la Lección
$lecciones[] = [
    'materia' => 'Inglés',
    'slug' => 'a2-daily-routine',
    'titulo' => 'A2: Daily Routine & Interactive Time',
    'contenido' => <<<HTML
    
    <div class="lesson-page-wrapper">
        <div class="lesson-container">
            <h3>☀️ My Daily Routine (A2)</h3>
            <p style="text-align:center;">Learn to describe your day. Click the icons to hear the pronunciation!</p>

            <div class="routine-grid">
                <div class="routine-card">
                    <button class="icon-btn" onclick="speakText('wake up', this)">🌅</button>
                    <div><strong>Wake up</strong><br><small>Despertarse</small></div>
                </div>
                <div class="routine-card">
                    <button class="icon-btn" onclick="speakText('eat breakfast', this)">🥣</button>
                    <div><strong>Eat breakfast</strong><br><small>Desayunar</small></div>
                </div>
                <div class="routine-card">
                    <button class="icon-btn" onclick="speakText('go to school', this)">🏫</button>
                    <div><strong>Go to school</strong><br><small>Ir a la escuela</small></div>
                </div>
                <div class="routine-card">
                    <button class="icon-btn" onclick="speakText('study English', this)">📚</button>
                    <div><strong>Study English</strong><br><small>Estudiar inglés</small></div>
                </div>
                <div class="routine-card">
                    <button class="icon-btn" onclick="speakText('do homework', this)">✏️</button>
                    <div><strong>Do homework</strong><br><small>Hacer tarea</small></div>
                </div>
                <div class="routine-card">
                    <button class="icon-btn" onclick="speakText('play video games', this)">🎮</button>
                    <div><strong>Play games</strong><br><small>Jugar</small></div>
                </div>
                <div class="routine-card">
                    <button class="icon-btn" onclick="speakText('have dinner', this)">🍽️</button>
                    <div><strong>Have dinner</strong><br><small>Cenar</small></div>
                </div>
                <div class="routine-card">
                    <button class="icon-btn" onclick="speakText('go to bed', this)">🛏️</button>
                    <div><strong>Go to bed</strong><br><small>Ir a dormir</small></div>
                </div>
            </div>

            

[Image of daily routine activities chart]


            <hr style="border-top: 2px dashed #00ccff; margin: 30px 0;">

            <h3>🕐 Interactive Clock: Telling Time</h3>
            <p style="text-align:center;">Click any time to practice standard English pronunciation.</p>
            
            $relojHTML

            <div class="clock-visual">
                <svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="250" cy="250" r="220" fill="#222" stroke="#00ff00" stroke-width="6"/>
                    <line x1="250" y1="40" x2="250" y2="60" stroke="#00ff00" stroke-width="4" />
                    <line x1="460" y1="250" x2="440" y2="250" stroke="#00ff00" stroke-width="4" />
                    <line x1="250" y1="460" x2="250" y2="440" stroke="#00ff00" stroke-width="4" />
                    <line x1="40" y1="250" x2="60" y2="250" stroke="#00ff00" stroke-width="4" />
                    
                    <line x1="250" y1="250" x2="150" y2="350" stroke="#ffcc00" stroke-width="12" stroke-linecap="round" /> <line x1="250" y1="250" x2="250" y2="420" stroke="#ff3333" stroke-width="8" stroke-linecap="round" /> <circle cx="250" cy="250" r="15" fill="#f0f0f0"/>
                    
                    <text x="250" y="150" text-anchor="middle" font-size="28" fill="#ffcc00" font-family="Press Start 2P">Start School</text>
                    <text x="250" y="190" text-anchor="middle" font-size="45" fill="#f0f0f0" font-family="Press Start 2P" font-weight="bold">7:30</text>
                </svg>
            </div>
            
            

[Image of analog clock telling time]


            <div class="grammar-note">
                <h4>💡 Grammar Note: Prepositions of Time</h4>
                <p>Remember to use <strong>AT</strong> for specific times:</p>
                <ul>
                    <li>I wake up <strong>at</strong> 7 o'clock.</li>
                    <li>Class starts <strong>at</strong> half past eight.</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        function speakText(text, btnElement) {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US'; 
            utterance.rate = 0.9;     
            utterance.pitch = 1;

            if(btnElement) {
                document.querySelectorAll('.playing').forEach(el => el.classList.remove('playing'));
                btnElement.classList.add('playing');
                
                utterance.onend = function() {
                    btnElement.classList.remove('playing');
                };
            }
            window.speechSynthesis.speak(utterance);
        }
    </script>
HTML,
    'ejercicios' => [
        ["enunciado" => "Write your COMPLETE daily routine (8+ sentences)", "respuesta" => "I wake up at 6:15. I eat breakfast at 7:00. I go to LC-ADVANCE at 7:45. I study English at 9:30. I eat lunch at 2:00. I do homework at 4:15. I play games at 6:30. I go to bed at 10:00."],
        ["enunciado" => "What time is 8:15?", "respuesta" => "quarter past eight"],
        ["enunciado" => "What time is 3:30?", "respuesta" => "half past three"],
        ["enunciado" => "What time is 11:45?", "respuesta" => "quarter to twelve"],
        ["enunciado" => "Translate: 'Me despierto a las 6:30'", "respuesta" => "I wake up at half past six"],
        ["enunciado" => "Translate: 'Voy a la escuela a las 7:45'", "respuesta" => "I go to school at quarter to eight"],
        ["enunciado" => "LC-ADVANCE starts at...", "respuesta" => "7:45 AM / quarter to eight"],
        ["enunciado" => "I eat dinner at...", "respuesta" => "7:30 PM / half past seven"],
        ["enunciado" => "What time is 12:00 at night?", "respuesta" => "midnight"],
        ["enunciado" => "My favorite time of day", "respuesta" => "break time / lunch / going home"],
        ["enunciado" => "How many hours do you sleep?", "respuesta" => "I sleep 8 hours / from 10 to 6"],
        ["enunciado" => "Write 5 times using 'quarter'", "respuesta" => "quarter past 3, quarter to 5, etc."],
        ["enunciado" => "Best routine app 2025", "respuesta" => "LC-ADVANCE StudyGame!"],
        ["enunciado" => "School ends at... (LC-ADVANCE)", "respuesta" => "2:00 PM / two o'clock"],
        ["enunciado" => "I ___ TV at 8:00", "respuesta" => "watch"]
    ],
    'quiz' => [
        ["pregunta" => "7:15 = ", "opciones" => ["quarter past seven", "seven thirty", "half past seven", "seven o'clock"], "correcta" => "quarter past seven"],
        ["pregunta" => "8:30 = ", "opciones" => ["half past eight", "quarter past eight", "eight fifteen", "eight o'clock"], "correcta" => "half past eight"],
        ["pregunta" => "9:45 = ", "opciones" => ["quarter to ten", "quarter past nine", "nine thirty", "ten o'clock"], "correcta" => "quarter to ten"],
        ["pregunta" => "12:00 midday = ", "opciones" => ["noon", "midnight", "morning", "night"], "correcta" => "noon"],
        ["pregunta" => "12:00 midnight = ", "opciones" => ["midnight", "noon", "afternoon", "evening"], "correcta" => "midnight"],
        ["pregunta" => "Wake up = ", "opciones" => ["despertarse", "dormir", "comer", "jugar"], "correcta" => "despertarse"],
        ["pregunta" => "Go to school = ", "opciones" => ["ir a LC-ADVANCE", "ir a dormir", "comer cena", "ver TV"], "correcta" => "ir a LC-ADVANCE"],
        ["pregunta" => "Do homework = ", "opciones" => ["hacer tarea", "hacer cama", "hacer comida", "hacer amigos"], "correcta" => "hacer tarea"],
        ["pregunta" => "Eat breakfast = ", "opciones" => ["desayunar", "almorzar", "cenar", "dormir"], "correcta" => "desayunar"],
        ["pregunta" => "Play games = ", "opciones" => ["jugar", "estudiar", "dormir", "comer"], "correcta" => "jugar"],
        ["pregunta" => "6:00 = ", "opciones" => ["six o'clock", "half past six", "quarter past six", "six thirty"], "correcta" => "six o'clock"],
        ["pregunta" => "2:45 = ", "opciones" => ["quarter to three", "quarter past two", "half past two", "three o'clock"], "correcta" => "quarter to three"],
        ["pregunta" => "I wake up at 6:30 = ", "opciones" => ["Me despierto a las 6:30", "Me duermo a las 6:30", "Como a las 6:30", "Estudio a las 6:30"], "correcta" => "Me despierto a las 6:30"],
        ["pregunta" => "LC-ADVANCE starts at quarter to...", "opciones" => ["eight", "seven", "nine", "six"], "correcta" => "eight"],
        ["pregunta" => "Half past four = ", "opciones" => ["4:30", "4:15", "4:45", "4:00"], "correcta" => "4:30"],
        ["pregunta" => "Quarter past ten = ", "opciones" => ["10:15", "10:45", "10:30", "10:00"], "correcta" => "10:15"],
        ["pregunta" => "I go to bed at...", "opciones" => ["10:00", "7:00 AM", "12:00 noon", "3:00 PM"], "correcta" => "10:00"],
        ["pregunta" => "Best clock app 2025", "opciones" => ["LC-ADVANCE Interactive Clock", "Google Clock", "Apple Clock", "Samsung"], "correcta" => "LC-ADVANCE Interactive Clock"],
        ["pregunta" => "I ___ breakfast at 7", "opciones" => ["eat", "go", "play", "sleep"], "correcta" => "eat"],
        ["pregunta" => "School ___ at 7:45", "opciones" => ["starts", "ends", "lunch", "break"], "correcta" => "starts"],
        ["pregunta" => "Quarter to twelve = ", "opciones" => ["11:45", "12:15", "12:30", "11:30"], "correcta" => "11:45"],
        ["pregunta" => "I ___ games at 6 PM", "opciones" => ["play", "eat", "study", "sleep"], "correcta" => "play"],
        ["pregunta" => "Dinner time LC-ADVANCE students", "opciones" => ["7:30 PM", "12:00 PM", "6:00 AM", "10:00 PM"], "correcta" => "7:30 PM"],
        ["pregunta" => "How many quarter hours in 1 hour?", "opciones" => ["4", "2", "3", "6"], "correcta" => "4"],
        ["pregunta" => "Best English A2 level 2025", "opciones" => ["LC-ADVANCE StudyGame", "Duolingo", "Babbel", "Rosetta"], "correcta" => "LC-ADVANCE StudyGame"],
        ["pregunta" => "I study English at...", "opciones" => ["half past nine", "quarter to eight", "noon", "midnight"], "correcta" => "half past nine"],
        ["pregunta" => "O'clock means...", "opciones" => [":00", ":15", ":30", ":45"], "correcta" => ":00"],
        ["pregunta" => "Routine verbs: wake, eat, go, ___", "opciones" => ["sleep", "run", "fly", "swim"], "correcta" => "sleep"],
        ["pregunta" => "LC-ADVANCE students sleep at...", "opciones" => ["10 PM", "6 AM", "2 PM", "12 PM"], "correcta" => "10 PM"],
        ["pregunta" => "Ultimate A2 champion school", "opciones" => ["LC-ADVANCE", "Harvard", "Oxford", "MIT"], "correcta" => "LC-ADVANCE"]
    ],
];
// ========================================
// MATERIA: INGLÉS
// Nivel: A2 - Food, Restaurant & Shopping + Interactive Menu + 15 Ejercicios + 30 Quiz 2025
// ========================================

// --- MENÚ DE RESTAURANTE INTERACTIVO CON VOZ NATIVA + ANIMACIONES 2025 ---
$comidas = [
    'hamburger' => ['precio' => 8, 'esp' => 'hamburguesa', 'emoji' => '🍔', 'tipo' => 'main'],
    'pizza' => ['precio' => 12, 'esp' => 'pizza', 'emoji' => '🍕', 'tipo' => 'main'],
    'hot dog' => ['precio' => 5, 'esp' => 'hot dog', 'emoji' => '🌭', 'tipo' => 'main'],
    'salad' => ['precio' => 6, 'esp' => 'ensalada', 'emoji' => '🥗', 'tipo' => 'side'],
    'water' => ['precio' => 2, 'esp' => 'agua', 'emoji' => '💧', 'tipo' => 'drink'],
    'soda' => ['precio' => 3, 'esp' => 'refresco', 'emoji' => '🥤', 'tipo' => 'drink'],
    'juice' => ['precio' => 4, 'esp' => 'jugo', 'emoji' => '🧃', 'tipo' => 'drink'],
    'ice cream' => ['precio' => 5, 'esp' => 'helado', 'emoji' => '🍨', 'tipo' => 'dessert'],
    'fries' => ['precio' => 4, 'esp' => 'papas fritas', 'emoji' => '🍟', 'tipo' => 'side'],
    'chicken nuggets' => ['precio' => 7, 'esp' => 'nuggets de pollo', 'emoji' => '🍗', 'tipo' => 'main']
];

$menuRestauranteHTML = '';
foreach ($comidas as $ing => $data) {
    $precio = $data['precio'];
    $esp = $data['esp'];
    $emoji = $data['emoji'];
    $tipo_class = "food-type-{$data['tipo']}";

    $menuRestauranteHTML .= <<<HTML
    <div class="menu-item $tipo_class">
        <button onclick="orderFood('Can I have a $ing, please?', 'That will be $precio dollars.', this)" title="Order: $ing" data-price="$precio">
            $emoji $ing
        </button>
        <p class="item-details">
            <span class="en-name">$ing</span><br>
            <em class="es-name">$esp</em> - <strong class="price">$ $precio</strong>
        </p>
    </div>
HTML;
}

// 2. Definición de la Lección, Ejercicios y Quiz
$lecciones[] = [
    'materia' => 'Inglés',
    'slug' => 'a2-food-shopping',
    'titulo' => 'A2: Food, Restaurant & Shopping + Interactive Menu + 30 Quiz 2025',
    'contenido' => <<<HTML
     <div class="lesson-page-wrapper">
        <div class="lesson-container space-y-8">
            <header class="text-center py-6 border-b-4 border-neon-pink">
                <h1 class="text-3xl sm:text-4xl font-mono text-neon-green tracking-widest">
                    LC-ADVANCE ENGLISH A2 LESSON
                </h1>
                <h3 class="text-xl sm:text-2xl font-sans mt-2 text-white">
                    Food, Restaurant & Shopping
                </h3>
            </header>

            <!-- SECCIÓN 1: MENÚ INTERACTIVO -->
            <div class="section-card bg-bg-light p-6 rounded-lg">
                <h4 class="text-2xl font-mono text-neon-blue mb-4">
                    1. Interactive LC-ADVANCE Restaurant Menu - Click to Order!
                </h4>
                <p class="text-base text-gray-300 mb-4">
                    Order like a PRO! Use the menu to practice **10 foods + real prices + native voice**.
                </p>
                
                <div class="menu-info-bar p-3 bg-neon-pink text-black rounded-md mb-6 shadow-md">
                    <p class="font-bold text-xl">🔔 Click any food → hear your order + waiter answer!</p>
                </div>
                
                <div class="menu-grid">
                    <!-- Menu Items generated from data -->
                    <div class="menu-item food-type-main">
                        <button onclick="orderFood('Can I have a hamburger, please?', 'That will be 8 dollars.', this)" title="Order: hamburger" data-price="8">
                            🍔 <span class="block mt-1">hamburger</span>
                        </button>
                        <p class="item-details">
                            <span class="en-name">hamburger</span><br>
                            <em class="es-name">hamburguesa</em> - <strong class="price">$ 8</strong>
                        </p>
                    </div>
                    <div class="menu-item food-type-main">
                        <button onclick="orderFood('Can I have a pizza, please?', 'That will be 12 dollars.', this)" title="Order: pizza" data-price="12">
                            🍕 <span class="block mt-1">pizza</span>
                        </button>
                        <p class="item-details">
                            <span class="en-name">pizza</span><br>
                            <em class="es-name">pizza</em> - <strong class="price">$ 12</strong>
                        </p>
                    </div>
                    <div class="menu-item food-type-main">
                        <button onclick="orderFood('Can I have a hot dog, please?', 'That will be 5 dollars.', this)" title="Order: hot dog" data-price="5">
                            🌭 <span class="block mt-1">hot dog</span>
                        </button>
                        <p class="item-details">
                            <span class="en-name">hot dog</span><br>
                            <em class="es-name">hot dog</em> - <strong class="price">$ 5</strong>
                        </p>
                    </div>
                    <div class="menu-item food-type-side">
                        <button onclick="orderFood('Can I have a salad, please?', 'That will be 6 dollars.', this)" title="Order: salad" data-price="6">
                            🥗 <span class="block mt-1">salad</span>
                        </button>
                        <p class="item-details">
                            <span class="en-name">salad</span><br>
                            <em class="es-name">ensalada</em> - <strong class="price">$ 6</strong>
                        </p>
                    </div>
                    <div class="menu-item food-type-drink">
                        <button onclick="orderFood('Can I have a water, please?', 'That will be 2 dollars.', this)" title="Order: water" data-price="2">
                            💧 <span class="block mt-1">water</span>
                        </button>
                        <p class="item-details">
                            <span class="en-name">water</span><br>
                            <em class="es-name">agua</em> - <strong class="price">$ 2</strong>
                        </p>
                    </div>
                    <div class="menu-item food-type-drink">
                        <button onclick="orderFood('Can I have a soda, please?', 'That will be 3 dollars.', this)" title="Order: soda" data-price="3">
                            🥤 <span class="block mt-1">soda</span>
                        </button>
                        <p class="item-details">
                            <span class="en-name">soda</span><br>
                            <em class="es-name">refresco</em> - <strong class="price">$ 3</strong>
                        </p>
                    </div>
                    <div class="menu-item food-type-drink">
                        <button onclick="orderFood('Can I have a juice, please?', 'That will be 4 dollars.', this)" title="Order: juice" data-price="4">
                            🧃 <span class="block mt-1">juice</span>
                        </button>
                        <p class="item-details">
                            <span class="en-name">juice</span><br>
                            <em class="es-name">jugo</em> - <strong class="price">$ 4</strong>
                        </p>
                    </div>
                    <div class="menu-item food-type-dessert">
                        <button onclick="orderFood('Can I have an ice cream, please?', 'That will be 5 dollars.', this)" title="Order: ice cream" data-price="5">
                            🍨 <span class="block mt-1">ice cream</span>
                        </button>
                        <p class="item-details">
                            <span class="en-name">ice cream</span><br>
                            <em class="es-name">helado</em> - <strong class="price">$ 5</strong>
                        </p>
                    </div>
                    <div class="menu-item food-type-side">
                        <button onclick="orderFood('Can I have fries, please?', 'That will be 4 dollars.', this)" title="Order: fries" data-price="4">
                            🍟 <span class="block mt-1">fries</span>
                        </button>
                        <p class="item-details">
                            <span class="en-name">fries</span><br>
                            <em class="es-name">papas fritas</em> - <strong class="price">$ 4</strong>
                        </p>
                    </div>
                    <div class="menu-item food-type-main">
                        <button onclick="orderFood('Can I have chicken nuggets, please?', 'That will be 7 dollars.', this)" title="Order: chicken nuggets" data-price="7">
                            🍗 <span class="block mt-1">chicken nuggets</span>
                        </button>
                        <p class="item-details">
                            <span class="en-name">chicken nuggets</span><br>
                            <em class="es-name">nuggets de pollo</em> - <strong class="price">$ 7</strong>
                        </p>
                    </div>
                </div>
                
                <!-- Área de Diálogo -->
                <div id="order-result" class="dialogue-area rounded-lg">
                    <div id="user-bubble-container" class="hidden">
                        <div id="user-bubble" class="dialogue-bubble left"></div>
                    </div>
                    <div id="waiter-bubble-container" class="hidden">
                        <div id="waiter-bubble" class="dialogue-bubble right"></div>
                    </div>
                    <span class="initial-message">🍽️ Your order will appear here!</span>
                </div>
            </div>

            <!-- SECCIÓN 2: FRASES DE COMPRAS Y JUEGO DE PRECIOS -->
            <div class="section-card bg-bg-light p-6 rounded-lg border-neon-green shadow-neon">
                <h4 class="text-2xl font-mono text-neon-green mb-4">
                    2. Shopping Phrases & Role Play - Click to Speak!
                </h4>
                <div class="phrase-buttons flex flex-wrap gap-4 mb-8 justify-center">
                    <button class="phrase-btn btn-green" onclick="speak('How much is the hamburger?')">💰 How much is it?</button>
                    <button class="phrase-btn btn-blue" onclick="speak('It costs eight dollars.')">💵 It costs $8</button>
                    <button class="phrase-btn btn-orange" onclick="speak('Can I pay with card?')">💳 Can I pay with card?</button>
                    <button class="phrase-btn btn-purple" onclick="speak('Thank you! Keep the change.')">🙏 Thank you! Keep the change.</button>
                </div>
                
                <div class="example-dialogue bg-gray-800 p-4 rounded-md border-2 border-gray-600">
                    <h4 class="text-xl font-mono mb-3 text-neon-pink">Full LC-ADVANCE Restaurant Dialogue:</h4>
                    <p class="mb-2 text-white">
                        <strong>You:</strong> 
                        <button class="small-speak-btn" onclick="speak('Hello! Can I have a hamburger, fries and a soda, please?')">🔊</button> 
                        Hello! Can I have a **hamburger**, **fries** and a **soda**, please?
                    </p>
                    <p class="mb-2 text-white">
                        <strong>Waiter:</strong> 
                        <button class="small-speak-btn" onclick="speak('Sure! That\'s fifteen dollars.')">🔊</button> 
                        Sure! That's **fifteen dollars**.
                    </p>
                    <p class="mb-2 text-white">
                        <strong>You:</strong> 
                        <button class="small-speak-btn" onclick="speak('Can I pay with card?')">🔊</button> 
                        Can I pay with card?
                    </p>
                    <p class="mb-2 text-white">
                        <strong>Waiter:</strong> 
                        <button class="small-speak-btn" onclick="speak('Yes! Here you go.')">🔊</button> 
                        Yes! Here you go.
                    </p>
                    <p class="mb-2 text-white">
                        <strong>You:</strong> 
                        <button class="small-speak-btn" onclick="speak('Thank you! Keep the change!')">🔊</button> 
                        **Thank you!** Keep the change!
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Contenedor de notificaciones/feedback -->
    <div id="notification-container"></div>

    <script>
         let currentQuestionIndex = 0;
        let score = 0;

        // --- FUNCIONES DE VOZ (Web Speech API) ---
        function speak(text, rate = 0.9, lang = 'en-US') {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = lang; 
            utterance.rate = rate; 
            utterance.pitch = 1;
            window.speechSynthesis.speak(utterance);
        }

        // --- MENÚ INTERACTIVO (CHAT SIMULADO) ---
        function orderFood(userText, waiterText, btnElement) {
            window.speechSynthesis.cancel(); // Detener cualquier voz anterior
            
            const userBubbleContainer = document.getElementById('user-bubble-container');
            const userBubble = document.getElementById('user-bubble');
            const waiterBubbleContainer = document.getElementById('waiter-bubble-container');
            const waiterBubble = document.getElementById('waiter-bubble');
            const initialMessage = document.querySelector('.initial-message');
            
            // 1. Ocultar mensaje inicial
            if (initialMessage) { initialMessage.classList.add('hidden'); }
            
            // 2. Cliente (Estudiante) habla
            userBubble.textContent = userText;
            userBubbleContainer.classList.remove('hidden');
            waiterBubbleContainer.classList.add('hidden');
            
            // Resaltar botón
            document.querySelectorAll('.menu-item button').forEach(b => b.classList.remove('active'));
            btnElement.classList.add('active');

            // Configurar y emitir la voz del Cliente
            const userUtterance = new SpeechSynthesisUtterance(userText);
            userUtterance.lang = 'en-US'; 
            userUtterance.rate = 0.95; 

            // 3. Camarero responde después de que el cliente termina de hablar
            userUtterance.onend = () => {
                setTimeout(() => {
                    waiterBubble.textContent = waiterText;
                    waiterBubbleContainer.classList.remove('hidden');
                    
                    // Configurar y emitir la voz del Camarero (ligeramente más lenta)
                    const waiterUtterance = new SpeechSynthesisUtterance(waiterText);
                    waiterUtterance.lang = 'en-US'; 
                    waiterUtterance.rate = 0.85;
                    window.speechSynthesis.speak(waiterUtterance);
                }, 500); // Pequeña pausa
            };

            // Hablar el mensaje del usuario
            window.speechSynthesis.speak(userUtterance);
        }


        // --- FUNCIONES DE QUIZ ---
        function loadQuestion() {
            if (currentQuestionIndex >= quizData.length) {
                showQuizResults();
                return;
            }

            const q = quizData[currentQuestionIndex];
            const quizContainer = document.getElementById('quiz-container');
            quizContainer.innerHTML = ''; 

            const questionDiv = document.createElement('div');
            questionDiv.className = 'quiz-question';
            questionDiv.innerHTML = `
                <p class="question-text">\${currentQuestionIndex + 1}. \${q.pregunta}</p>
                <div class="options-grid">
                    \${q.opciones.map(option => `
                        <button class="option-btn" onclick="checkAnswer(this, '\${q.correcta.replace(/'/g, "\\'")}', '\${option.replace(/'/g, "\\'")}')">\${option}</button>
                    `).join('')}
                </div>
            `;
            quizContainer.appendChild(questionDiv);
        }

        function checkAnswer(selectedBtn, correctAnswer, selectedAnswer) {
            // Deshabilita todos los botones para evitar doble clic
            const options = selectedBtn.parentElement.querySelectorAll('.option-btn');
            options.forEach(btn => {
                btn.disabled = true;
                // Marcar la respuesta correcta
                if (btn.textContent === correctAnswer) {
                    btn.classList.add('correct');
                } else {
                    // Si no es la correcta, la atenuamos un poco
                    btn.classList.add('incorrect-disabled');
                }
            });

            if (selectedAnswer === correctAnswer) {
                // Si la respuesta seleccionada es la correcta
                selectedBtn.classList.remove('incorrect-disabled'); // Quitamos el atenuado si es la correcta
                selectedBtn.classList.add('correct');
                score++;
                showFeedback('✅ Correct! Well done, LC-ADVANCE student!', 'success');
            } else {
                // Si la respuesta seleccionada es incorrecta, la marcamos
                selectedBtn.classList.remove('incorrect-disabled');
                selectedBtn.classList.add('incorrect');
                showFeedback(`⚠️ Wrong! The correct answer was: \${correctAnswer}.`, 'warning');
            }

            // Cargar la siguiente pregunta después de un breve retraso
            setTimeout(() => {
                currentQuestionIndex++;
                loadQuestion();
            }, 1500);
        }

        function showQuizResults() {
            const quizContainer = document.getElementById('quiz-container');
            const resultsArea = document.getElementById('quiz-results');
            quizContainer.innerHTML = '';
            resultsArea.classList.remove('hidden');
            
            const total = quizData.length;
            const percentage = Math.round((score / total) * 100);
            
            let message;
            let type;

            if (percentage >= 80) {
                message = "🔥 LC-ADVANCE CHAMPION! Outstanding score!";
                type = 'success';
            } else if (percentage >= 50) {
                message = "⭐ Good job! You're ready for the real restaurant!";
                type = 'info';
            } else {
                message = "📚 Keep practicing! Review the vocabulary and try again.";
                type = 'warning';
            }

            resultsArea.innerHTML = `
                <h4 class="text-2xl font-mono text-neon-pink mb-2">Quiz Finished! 🏆</h4>
                <p class="text-xl text-white mb-4">Your score: <strong>\${score} / \${total}</strong> (\${percentage}%)</p>
                <p class="text-lg mb-4 text-neon-green">\${message}</p>
                <button class="phrase-btn btn-green shadow-neon" onclick="resetQuiz()">🔄 Restart Quiz</button>
            `;
            
            showFeedback(`Quiz completed! Score: \${score}/\${total}`, type);
        }

        function resetQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            document.getElementById('quiz-results').classList.add('hidden');
            loadQuestion();
        }

        // --- FUNCIONES DE FEEDBACK (Toast simulado) ---
        function showFeedback(message, type = 'info') {
            const container = document.getElementById('notification-container') || (() => {
                const div = document.createElement('div');
                div.id = 'notification-container';
                document.body.appendChild(div);
                return div;
            })();

            const notification = document.createElement('div');
            notification.className = `notification-item feedback-\${type}`;
            notification.innerHTML = message;
            
            container.prepend(notification); // Agrega arriba

            // Animación para desaparecer
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(-20px)';
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }


        // Iniciar quiz manualmente con el botón
        function startQuiz() {
            // Intentar obtener quizData. Si no está definido, avisar al usuario.
            if (typeof quizData === 'undefined') {
                showFeedback('Quiz data not found. Please reload the lesson or contact the admin.', 'error');
                return;
            }

            // Resetear estado
            currentQuestionIndex = 0;
            score = 0;
            const resultsArea = document.getElementById('quiz-results');
            if (resultsArea) resultsArea.classList.add('hidden');

            // Cargar primera pregunta
            loadQuestion();

            // Deshabilitar botón para evitar reinicios accidentales
            const btn = document.getElementById('start-quiz-btn');
            if (btn) btn.disabled = true;
        }

    </script>
HTML
,
    'ejercicios' => [
        ["enunciado" => "Order: pizza + juice + ice cream", "respuesta" => "Can I have a pizza, juice and ice cream, please?"],
        ["enunciado" => "Ask price of chicken nuggets", "respuesta" => "How much are the chicken nuggets?"],
        ["enunciado" => "Total: pizza ($12) + soda ($3) + fries ($4)", "respuesta" => "Nineteen dollars"],
        ["enunciado" => "Say 'thank you' in 5 ways", "respuesta" => "Thank you / Thanks / Thanks a lot / Thank you very much / Thanks so much"],
        ["enunciado" => "Name ALL 10 menu items", "respuesta" => "hamburger, pizza, hot dog, salad, water, soda, juice, ice cream, fries, chicken nuggets"],
        ["enunciado" => "Translate: '¿Cuánto cuesta el helado?'", "respuesta" => "How much is the ice cream?"],
        ["enunciado" => "Most expensive item", "respuesta" => "pizza ($12)"],
        ["enunciado" => "Cheapest drink", "respuesta" => "water ($2)"],
        ["enunciado" => "Order for 2 people: 2 hamburgers + 2 sodas", "respuesta" => "Can I have two hamburgers and two sodas, please?"],
        ["enunciado" => "Total for salad + water + ice cream", "respuesta" => "Thirteen dollars"],
        ["enunciado" => "Say 'keep the change' in English", "respuesta" => "Keep the change"],
        ["enunciado" => "Best food in menu", "respuesta" => "pizza / hamburger / etc."],
        ["enunciado" => "Translate: 'Puedo pagar con tarjeta?'", "respuesta" => "Can I pay with card?"],
        ["enunciado" => "Lunch for LC-ADVANCE student", "respuesta" => "hamburger + fries + soda"],
        ["enunciado" => "Best restaurant app 2025", "respuesta" => "LC-ADVANCE StudyGame!"]
    ],
    'quiz' => [
        ["pregunta" => "'¿Cuánto cuesta?' = ", "opciones" => ["How much is it?", "What time is it?", "Where is it?", "Hello"], "correcta" => "How much is it?"],
        ["pregunta" => "Pizza, fries, soda = ", "opciones" => ["food and drink", "family", "school", "time"], "correcta" => "food and drink"],
        ["pregunta" => "'Can I have a hamburger?' = ", "opciones" => ["order food", "say hello", "ask time", "say goodbye"], "correcta" => "order food"],
        ["pregunta" => "$12 = ", "opciones" => ["twelve dollars", "twenty dollars", "two dollars", "nothing"], "correcta" => "twelve dollars"],
        ["pregunta" => "After paying say...", "opciones" => ["Thank you!", "Hello!", "Good night!", "See you!"], "correcta" => "Thank you!"],
        ["pregunta" => "Pizza price = ", "opciones" => ["$12", "$8", "$5", "$2"], "correcta" => "$12"],
        ["pregunta" => "Water price = ", "opciones" => ["$2", "$12", "$5", "$7"], "correcta" => "$2"],
        ["pregunta" => "Most expensive = ", "opciones" => ["pizza", "water", "salad", "hot dog"], "correcta" => "pizza"],
        ["pregunta" => "Cheapest food = ", "opciones" => ["water", "pizza", "chicken nuggets", "ice cream"], "correcta" => "water"],
        ["pregunta" => "Hamburger + soda = ", "opciones" => ["$11", "$15", "$10", "$20"], "correcta" => "$11"],
        ["pregunta" => "Ice cream in Spanish = ", "opciones" => ["helado", "agua", "pizza", "ensalada"], "correcta" => "helado"],
        ["pregunta" => "Fries = ", "opciones" => ["papas fritas", "pollo", "jugo", "refresco"], "correcta" => "papas fritas"],
        ["pregunta" => "Can I pay with card? = ", "opciones" => ["¿Puedo pagar con tarjeta?", "¿Cuánto es?", "Gracias", "Hola"], "correcta" => "¿Puedo pagar con tarjeta?"],
        ["pregunta" => "Keep the change = ", "opciones" => ["Quédense con el cambio", "Aquí tiene", "Gracias", "Adiós"], "correcta" => "Quédense con el cambio"],
        ["pregunta" => "Best menu item LC-ADVANCE", "opciones" => ["pizza", "water", "salad", "juice"], "correcta" => "pizza"],
        ["pregunta" => "Hot dog price = ", "opciones" => ["$5", "$12", "$8", "$4"], "correcta" => "$5"],
        ["pregunta" => "Chicken nuggets = ", "opciones" => ["$7", "$5", "$3", "$2"], "correcta" => "$7"],
        ["pregunta" => "I want juice and salad = ", "opciones" => ["$10", "$15", "$6", "$9"], "correcta" => "$10"],
        ["pregunta" => "Best restaurant app 2025", "opciones" => ["LC-ADVANCE StudyGame", "McDonald's", "Uber Eats", "Domino's"], "correcta" => "LC-ADVANCE StudyGame"],
        ["pregunta" => "Thank you! = ", "opciones" => ["¡Gracias!", "Hola", "Adiós", "Por favor"], "correcta" => "¡Gracias!"],
        ["pregunta" => "How much is the pizza? = $12", "opciones" => ["Correct", "No", "Only $8", "$5"], "correcta" => "Correct"],
        ["pregunta" => "Pay with card = ", "opciones" => ["tarjeta", "efectivo", "cheque", "monedas"], "correcta" => "tarjeta"],
        ["pregunta" => "Salad = healthy food", "opciones" => ["Yes", "No", "Only pizza", "Only soda"], "correcta" => "Yes"],
        ["pregunta" => "Soda = ", "opciones" => ["refresco", "agua", "jugo", "helado"], "correcta" => "refresco"],
        ["pregunta" => "Total for 2 pizzas = ", "opciones" => ["$24", "$20", "$15", "$10"], "correcta" => "$24"],
        ["pregunta" => "Best A2 food lesson", "opciones" => ["LC-ADVANCE Menu", "Duolingo Food", "Babbel", "Rosetta"], "correcta" => "LC-ADVANCE Menu"],
        ["pregunta" => "Ice cream emoji = ", "opciones" => ["🍨", "💧", "🥤", "🍕"], "correcta" => "🍨"],
        ["pregunta" => "Restaurant in Spanish = ", "opciones" => ["restaurante", "escuela", "casa", "tienda"], "correcta" => "restaurante"],
        ["pregunta" => "LC-ADVANCE students love...", "opciones" => ["pizza", "salad", "water", "homework"], "correcta" => "pizza"],
        ["pregunta" => "Ultimate food champion school", "opciones" => ["LC-ADVANCE", "Harvard", "MIT", "Oxford"], "correcta" => "LC-ADVANCE"]
    ],
];
// ========================================
// MATERIA: INGLÉS B1 - PAST SIMPLE 2025 PRO
// ========================================

$verbosHTML = '';
$irregulares = [
    'go-went-gone', 'come-came-come', 'see-saw-seen', 'eat-ate-eaten', 'drink-drank-drunk',
    'buy-bought-bought', 'have-had-had', 'do-did-done', 'make-made-made', 'take-took-taken',
    'write-wrote-written', 'read-read-read', 'speak-spoke-spoken', 'drive-drove-driven',
    'ride-rode-ridden', 'run-ran-run', 'swim-swam-swum', 'sing-sang-sung', 'ring-rang-rung',
    'know-knew-known', 'forget-forgot-forgotten', 'get-got-gotten', 'give-gave-given',
    'find-found-found', 'lose-lost-lost', 'win-won-won', 'break-broke-broken', 'choose-chose-chosen',
    'fly-flew-flown', 'grow-grew-grown', 'throw-threw-thrown', 'draw-drew-drawn', 'fall-fell-fallen',
    'begin-began-begun', 'sink-sank-sunk', 'wear-wore-worn', 'teach-taught-taught',
    'catch-caught-caught', 'bring-brought-brought', 'think-thought-thought', 'fight-fought-fought',
    'sleep-slept-slept', 'feel-felt-felt', 'meet-met-met', 'keep-kept-kept', 'leave-left-left'
];

foreach ($irregulares as $i => $verbo) {
    $p = explode('-', $verbo);
    $inf  = $p[0];
    $past = $p[1];
    $part = $p[2] ?? $past;

    $verbosHTML .= "<button 
        onclick=\"speakVerb('$inf','$past','$part')\" 
        class=\"btn-irregular\" 
        style=\"animation-delay:" . ($i * 0.05) . "s;\">
        <span class=\"inf\">$inf</span> → <span class=\"hidden\">$past → $part</span>
    </button>";
}

$lecciones[] = [
    'materia' => 'Inglés',
    'slug'    => 'b1-past-simple-2025',
    'titulo'  => 'B1 Past Simple MASTER 2025 - 50 Verbos + Story Builder Pro',
    'contenido' => <<<HTML
<div class="lesson-quiz-container">

    <div class="past-simple-container">
        <h3 class="past-simple-title">B1 PAST SIMPLE MASTER 2025</h3>
        <p class="past-simple-subtitle">Domina el pasado como nativo • 50 verbos irregulares • Story Builder con voz • Quiz PRO</p>

        <hr style="border:2px solid #ff00ff; border-radius:10px; margin:40px 0;">

        <!-- ==================== 50 VERBOS IRREGULARES ==================== -->
        <h4>1. 50 Verbos Irregulares Interactivos 2025</h4>
        <div style="background:#0a0020; padding:35px; border:5px solid #ff00ff; border-radius:12px; text-align:center;">
            <p style="font-size:22px; color:#e040fb; margin-bottom:30px;">
                <strong>Haz clic → escucha → revela pasado y participio</strong>
            </p>

            <div class="irregular-verbs-grid">
                $verbosHTML
            </div>

            <div id="verb-display" class="mt-4">Click any verb above</div>
        </div>

        <hr style="border:2px dashed #ba68c8; margin:50px 0;">

        <!-- ==================== STORY BUILDER PRO ==================== -->
        <h4>2. STORY BUILDER PRO 2025 - Crea tu historia del ayer</h4>
        <div class="story-builder">
            <div class="story-buttons">
                <button onclick="addToStory('I woke up at 7 o\\'clock.', 'woke')" class="btn-story">I woke up at 7</button>
                <button onclick="addToStory('I ate breakfast with my family.', 'ate')" class="btn-story">I ate breakfast</button>
                <button onclick="addToStory('I went to LC-ADVANCE by bus.', 'went')" class="btn-story">I went to school</button>
                <button onclick="addToStory('I studied English very hard.', 'studied')" class="btn-story">I studied English</button>
                <button onclick="addToStory('I played soccer with friends.', 'played')" class="btn-story">I played soccer</button>
                <button onclick="addToStory('I bought a new phone.', 'bought')" class="btn-story">I bought a phone</button>
                <button onclick="addToStory('I did my homework at night.', 'did')" class="btn-story">I did homework</button>
                <button onclick="addToStory('I watched Netflix until late.', 'watched')" class="btn-story">I watched Netflix</button>
                <button onclick="addToStory('I went to bed at 11 PM.', 'went')" class="btn-story">I went to bed</button>
            </div>

            <div class="story-controls">
                <button onclick="clearStory()" class="btn-clear">CLEAR STORY</button>
                <button onclick="readFullStory()" class="btn-read">READ FULL STORY</button>
            </div>

            <div id="story-output">Tu historia aparecerá aquí...</div>
        </div>

    <!-- ====================== SCRIPTS ====================== -->
    <script>
        function speakVerb(inf, past, part) {
            const text = inf + ". Past: " + past + ". Past participle: " + part + ".";
            const utter = new SpeechSynthesisUtterance(text);
            utter.lang = 'en-US';
            utter.rate = 0.85;
            speechSynthesis.cancel();
            speechSynthesis.speak(utter);

            document.getElementById('verb-display').innerHTML = 
                "<strong style='color:#ffcc00;'>" + inf + "</strong> → " +
                "<span style='color:#00ff00; font-size:42px;'>" + past + "</span> → " +
                "<span style='color:#ff9800; font-size:42px;'>" + part + "</span>";

            document.querySelectorAll('.btn-irregular').forEach(b => b.classList.remove('revealed'));
            event.target.classList.add('revealed');
        }

        let myStory = [];
        function addToStory(sentence, verb) {
            myStory.push(sentence);
            document.getElementById('story-output').innerHTML =
                "<strong style='color:#ffcc00;'>My Yesterday:</strong><br><br>" +
                myStory.map(s => s.replace(verb, "<span style='color:#00ff00; font-weight:bold;'>" + verb + "</span>")).join("<br>");

            const utter = new SpeechSynthesisUtterance(sentence);
            utter.lang = 'en-US';
            speechSynthesis.speak(utter);
        }

        function clearStory() {
            myStory = [];
            document.getElementById('story-output').innerHTML = "Historia borrada. ¡Empieza de nuevo!";
        }

        function readFullStory() {
            if (myStory.length === 0) {
                document.getElementById('story-output').innerHTML = "¡Primero añade oraciones!";
                return;
            }
            const full = "Yesterday, " + myStory.join(" Then, ") + ".";
            document.getElementById('story-output').innerHTML = 
                "<strong style='color:#ff00ff;'>FULL STORY (B1 LEVEL):</strong><br><br><span style='color:#00ffff;'>" + full + "</span>";

            const utter = new SpeechSynthesisUtterance(full);
            utter.lang = 'en-US';
            utter.rate = 0.8;
            speechSynthesis.speak(utter);
        }
    </script>
</div>
HTML
,
    'ejercicios' => [
        ["enunciado" => "Past of 'eat'", "respuesta" => "ate"],
        ["enunciado" => "Past of 'go'", "respuesta" => "went"],
        ["enunciado" => "Past of 'see'", "respuesta" => "saw"],
        ["enunciado" => "Past of 'buy'", "respuesta" => "bought"],
        ["enunciado" => "Past of 'be'", "respuesta" => "was/were"],
        ["enunciado" => "Write 8 sentences about yesterday (full story)", "respuesta" => "I woke up at 7. I ate breakfast. I went to school. I studied English. I played soccer. I did homework. I watched TV. I went to bed."],
        ["enunciado" => "Negative: 'I didn't go to school'", "respuesta" => "No fui a la escuela"],
        ["enunciado" => "Question: 'Did you eat pizza?'", "respuesta" => "¿Comiste pizza?"],
        ["enunciado" => "Past of 'swim'", "respuesta" => "swam"],
        ["enunciado" => "Past participle of 'write'", "respuesta" => "written"],
        ["enunciado" => "Build a story with 6 verbs (use Story Builder)", "respuesta" => "I woke up, ate, went, studied, played, slept"],
        ["enunciado" => "What did you do last weekend?", "respuesta" => "I went to the cinema. I ate tacos. I played games."],
        ["enunciado" => "Regular verb: watch →", "respuesta" => "watched"],
        ["enunciado" => "Irregular: drink →", "respuesta" => "drank"],
        ["enunciado" => "Best B1 past tool 2025", "respuesta" => "LC-ADVANCE Story Builder!"]
    ],
    'quiz' => [
        ["pregunta" => "Past of 'see'", "opciones" => ["saw", "seed", "seeed", "seeing"], "correcta" => "saw"],
        ["pregunta" => "Past of 'go'", "opciones" => ["went", "goed", "goes", "going"], "correcta" => "went"],
        ["pregunta" => "Past of 'eat'", "opciones" => ["ate", "eated", "eaten", "eating"], "correcta" => "ate"],
        ["pregunta" => "Past of 'buy'", "opciones" => ["bought", "buyed", "boughted", "buying"], "correcta" => "bought"],
        ["pregunta" => "Past of 'drink'", "opciones" => ["drank", "drinked", "drunk", "drinking"], "correcta" => "drank"],
        ["pregunta" => "Yesterday I ___ to LC-ADVANCE", "opciones" => ["went", "go", "goes", "going"], "correcta" => "went"],
        ["pregunta" => "I ___ breakfast at 7", "opciones" => ["ate", "eat", "eats", "eating"], "correcta" => "ate"],
        ["pregunta" => "Question: ___ you study English?", "opciones" => ["Did", "Do", "Does", "Are"], "correcta" => "Did"],
        ["pregunta" => "Negative: I ___ play soccer", "opciones" => ["didn't", "don't", "doesn't", "not"], "correcta" => "didn't"],
        ["pregunta" => "Regular verbs: play →", "opciones" => ["played", "plaied", "playd", "playing"], "correcta" => "played"],
        ["pregunta" => "I didn't ___ soccer yesterday", "opciones" => ["play", "played", "playing", "plays"], "correcta" => "play"],
        ["pregunta" => "Past of 'be' (I)", "opciones" => ["was", "were", "am", "is"], "correcta" => "was"],
        ["pregunta" => "Past of 'have'", "opciones" => ["had", "haved", "has", "having"], "correcta" => "had"],
        ["pregunta" => "Past participle of 'go'", "opciones" => ["gone", "went", "goed", "going"], "correcta" => "gone"],
        ["pregunta" => "Past participle of 'eat'", "opciones" => ["eaten", "ate", "eated", "eating"], "correcta" => "eaten"],
        ["pregunta" => "I ___ a new phone last week", "opciones" => ["bought", "buy", "buys", "buying"], "correcta" => "bought"],
        ["pregunta" => "Did you ___ TV?", "opciones" => ["watch", "watched", "watching", "watches"], "correcta" => "watch"],
        ["pregunta" => "We ___ to Acapulco in 2024", "opciones" => ["went", "go", "goes", "going"], "correcta" => "went"],
        ["pregunta" => "Best B1 past tool 2025", "opciones" => ["LC-ADVANCE Story Builder", "Duolingo", "Grammarly", "ChatGPT"], "correcta" => "LC-ADVANCE Story Builder"],
        ["pregunta" => "Past of 'write'", "opciones" => ["wrote", "writed", "written", "writing"], "correcta" => "wrote"],
        ["pregunta" => "Past of 'read'", "opciones" => ["read", "readed", "red", "reading"], "correcta" => "read"],
        ["pregunta" => "I didn't ___ my homework", "opciones" => ["do", "did", "done", "doing"], "correcta" => "do"],
        ["pregunta" => "Past of 'swim'", "opciones" => ["swam", "swimmed", "swum", "swimming"], "correcta" => "swam"],
        ["pregunta" => "Yesterday ___ my birthday", "opciones" => ["was", "is", "were", "are"], "correcta" => "was"],
        ["pregunta" => "I ___ up at 6:30", "opciones" => ["woke", "wake", "waked", "waking"], "correcta" => "woke"],
        ["pregunta" => "Did you ___ the movie?", "opciones" => ["see", "saw", "seen", "seeing"], "correcta" => "see"],
        ["pregunta" => "LC-ADVANCE students ___ English yesterday", "opciones" => ["studied", "study", "studies", "studying"], "correcta" => "studied"],
        ["pregunta" => "Best English level LC-ADVANCE", "opciones" => ["B1 2025", "A1", "A2", "C2"], "correcta" => "B1 2025"],
        ["pregunta" => "Past Simple for finished actions", "opciones" => ["Yes", "No", "Only future", "Present"], "correcta" => "Yes"],
        ["pregunta" => "Ultimate B1 champion school", "opciones" => ["LC-ADVANCE", "Harvard", "Oxford", "MIT"], "correcta" => "LC-ADVANCE"]
    ],
];
// ========================================
// INGLÉS B1 - FUTURE: Going to + Will MASTER 2025
// ========================================

$predictions = [
    'It will rain tomorrow.'                  => 'Lloverá mañana.',
    'I will win the lottery this year!'        => '¡Ganaré la lotería este año!',
    'You will get a 10 in English!'            => '¡Sacaras 10 en inglés!',
    'LC-ADVANCE will be #1 in Mexico 2026!'    => '¡LC-ADVANCE será el #1 de México en 2026!',
    'I will travel to the USA next summer.'    => 'Viajaré a USA el próximo verano.',
    'She will call you tonight, I promise.'    => 'Ella te llamará esta noche, te lo prometo.',
    'We will pass the Cambridge B1 exam!'      => '¡Aprobaremos el examen Cambridge B1!',
    'He will buy a Tesla next year.'           => 'Él comprará un Tesla el próximo año.',
    'They will visit Guadalajara in December.' => 'Visitarán Guadalajara en diciembre.',
    'The sun will shine all weekend!'          => '¡El sol brillará todo el fin de semana!'
];

$predictionsHTML = '';
foreach ($predictions as $eng => $esp) {
    $eng_js = addslashes(htmlspecialchars($eng, ENT_QUOTES));
    $predictionsHTML .= "<button onclick=\"makePrediction('$eng_js')\" class=\"btn-prediction neon-glow\">$eng</button>";
}

$predictions_json = json_encode($predictions, JSON_UNESCAPED_UNICODE | JSON_HEX_QUOT | JSON_HEX_APOS);

$lecciones[] = [
    'materia' => 'Inglés',
    'slug'    => 'b1-future-going-to-will',
    'titulo'  => 'B1 Future MASTER 2025 → Going to + Will + Crystal Ball Game',
    'contenido' => <<<HTML
<div class="lesson-quiz-container">

    <div class="future-container">
        <h3 class="future-title">B1 FUTURE MASTER 2025</h3>
        <p class="future-subtitle">Going to (planes) • Will (predicciones y decisiones) • Crystal Ball Game con voz nativa</p>

        <hr class="neon-separator">

        <!-- ==================== RULES WITH VOICE ==================== -->
        <div class="future-rules-grid">
            <div class="card-going-to" onclick="speak('Going to is for plans and intentions')">
                <div class="card-header">GOING TO</div>
                <div class="card-body">
                    <p><strong>Planes e intenciones</strong></p>
                    <p>I <strong>am going to</strong> study Engineering.<br>
                       We <strong>are going to</strong> travel to Japan.</p>
                </div>
            </div>

            <div class="card-will" onclick="speak('Will is for predictions and spontaneous decisions')">
                <div class="card-header">WILL</div>
                <div class="card-body">
                    <p><strong>Predicciones • Decisiones del momento</strong></p>
                    <p>It <strong>will</strong> rain this afternoon.<br>
                       — I'm thirsty! — I <strong>'ll</strong> get water!</p>
                </div>
            </div>
        </div>

        <hr class="neon-separator">

        <!-- ==================== CRYSTAL BALL GAME ==================== -->
        <h4 class="section-title">CRYSTAL BALL PREDICTION GAME 2025</h4>
        <div class="crystal-ball-section">
            <div class="crystal-wrapper">
                <div class="crystal-ball">
                    <div class="crystal-glow"></div>
                    <div class="crystal-text">Touch the future...</div>
                </div>
            </div>

            <div class="predictions-grid">
                $predictionsHTML
            </div>

            <div id="prediction-result" class="prediction-output">
                The future is loading... 
            </div>
        </div>

        <hr class="neon-separator">

        <!-- ==================== JOB INTERVIEW SIMULATOR ==================== -->
        <h4 class="section-title">LC-ADVANCE JOB INTERVIEW 2025</h4>
        <div class="interview-box">
            <div class="interview-questions">
                <button onclick="askQuestion('What are your plans after graduation?')" class="btn-interview">Question 1</button>
                <button onclick="askQuestion('Where do you see yourself in 5 years?')" class="btn-interview">Question 2</button>
                <button onclick="askQuestion('Will you continue studying English?')" class="btn-interview">Question 3</button>
                <button onclick="askQuestion('What will Mexico be like in 2030?')" class="btn-interview">Question 4</button>
            </div>

            <div class="sample-answers">
                <button onclick="speak('I am going to study Software Engineering at university.')" class="btn-sample">Sample Answer 1</button>
                <button onclick="speak('In five years, I will have my own tech company.')" class="btn-sample">Sample Answer 2</button>
                <button onclick="speak('Yes, I will never stop learning English!')" class="btn-sample">Sample Answer 3</button>
            </div>
        </div>

        <!-- ==================== TIMELINE SVG ==================== -->
        <div class="timeline-svg">
            <svg viewBox="0 0 1200 500" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#ff00ff"/>
                        <stop offset="100%" style="stop-color:#00ffff"/>
                    </linearGradient>
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>

                <rect width="100%" height="100%" fill="#0a0020"/>
                <text x="600" y="90" text-anchor="middle" fill="url(#grad1)" font-size="56" font-weight="bold" filter="url(#glow)">
                    FUTURE TIMELINE 2025 → 2030
                </text>

                <line x1="100" y1="250" x2="1100" y2="250" stroke="url(#grad1)" stroke-width="10" opacity="0.8"/>

                <circle cx="200" cy="250" r="50" fill="#ff00ff" filter="url(#glow)"/>
                <text x="200" y="255" text-anchor="middle" fill="white" font-size="28" font-weight="bold">NOW</text>

                <circle cx="600" cy="250" r="60" fill="#00ffff" filter="url(#glow)"/>
                <text x="600" y="240" text-anchor="middle" fill="#0a0020" font-size="24" font-weight="bold">2026</text>
                <text x="600" y="270" text-anchor="middle" fill="#0a0020" font-size="20">University</text>

                <circle cx="1000" cy="250" r="70" fill="#ff00ff" filter="url(#glow)"/>
                <text x="1000" y="255" text-anchor="middle" fill="white" font-size="32" font-weight="bold">2030</text>

                <text x="600" y="420" text-anchor="middle" fill="#00ffff" font-size="48" font-weight="bold" filter="url(#glow)">
                    LC-ADVANCE CHAMPIONS
                </text>
            </svg>
        </div>

        <div class="final-message">
            <p>Next year, I <strong>am going to</strong> change my life.<br>
               In 2030, I <strong>will</strong> be successful.<br>
               <span class="rainbow-text">LC-ADVANCE students WILL conquer the world!</span></p>
        </div>
    </div>

    <!-- ====================== SCRIPTS ====================== -->
    <script>
        const predictions = $predictions_json;

        function makePrediction(text) {
            const result = document.getElementById('prediction-result');
            const crystal = document.querySelector('.crystal-ball');

            crystal.style.animation = 'pulse 1.5s infinite';
            
            result.innerHTML = '<div class="loading">Loading the future...</div>';
            
            setTimeout(() => {
                const utter = new SpeechSynthesisUtterance(text);
                utter.lang = 'en-US';
                utter.rate = 0.85;
                speechSynthesis.speak(utter);

                const trans = predictions[text] || '¡Tu futuro es brillante!';
                
                result.innerHTML = `
                    <div class="prediction-final">
                        <div class="en-text">` + text + `</div>
                        <div class="es-text">` + trans + `</div>
                    </div>`;
                
                crystal.style.animation = 'none';
            }, 1200);
        }

        function askQuestion(q) {
            const utter = new SpeechSynthesisUtterance(q);
            utter.lang = 'en-US';
            speechSynthesis.speak(utter);
        }

        function speak(text) {
            const utter = new SpeechSynthesisUtterance(text);
            utter.lang = 'en-US';
            utter.rate = 0.9;
            speechSynthesis.speak(utter);
        }
    </script>
</div>
HTML
,
    'ejercicios' => [
        ["enunciado" => "Plan: 'Voy a estudiar inglés mañana'", "respuesta" => "I am going to study English tomorrow"],
        ["enunciado" => "Prediction: 'Lloverá esta tarde'", "respuesta" => "It will rain this afternoon"],
        ["enunciado" => "Spontaneous: '¡Te ayudo!'", "respuesta" => "I'll help you!"],
        ["enunciado" => "Write 5 future plans for 2026", "respuesta" => "I am going to travel. I am going to learn coding. I am going to get a job. I am going to buy a car. I am going to help my family."],
        ["enunciado" => "Negative: 'No voy a comer pizza'", "respuesta" => "I am not going to eat pizza"],
        ["enunciado" => "Question: '¿Viajarás?'", "respuesta" => "Will you travel?"],
        ["enunciado" => "Plan for LC-ADVANCE graduation", "respuesta" => "I am going to celebrate with my friends"],
        ["enunciado" => "Prediction for English grade", "respuesta" => "I will get a 10!"],
        ["enunciado" => "Job interview: 'What are your plans?'", "respuesta" => "I am going to study engineering at university"],
        ["enunciado" => "Future with 'be going to' + verb", "respuesta" => "I am going to visit Guadalajara"],
        ["enunciado" => "Will for offer: 'Te llevo'", "respuesta" => "I'll take you"],
        ["enunciado" => "Translate: '¿Llamarás?'", "respuesta" => "Will you call?"],
        ["enunciado" => "My dream in 10 years", "respuesta" => "I will have my own company"],
        ["enunciado" => "LC-ADVANCE in 2030", "respuesta" => "LC-ADVANCE will be the best school in Mexico"],
        ["enunciado" => "Best future tool 2025", "respuesta" => "LC-ADVANCE Prediction Game!"]
    ],
    'quiz' => [
        ["pregunta" => "'Going to' for...", "opciones" => ["plans & intentions", "past", "present habits", "finished actions"], "correcta" => "plans & intentions"],
        ["pregunta" => "'Will' for...", "opciones" => ["predictions & spontaneous decisions", "routines", "past", "habits"], "correcta" => "predictions & spontaneous decisions"],
        ["pregunta" => "I ___ study tomorrow", "opciones" => ["am going to", "will", "go to", "going"], "correcta" => "am going to"],
        ["pregunta" => "It ___ rain", "opciones" => ["will", "is going to", "rains", "raining"], "correcta" => "will"],
        ["pregunta" => "___ you help me?", "opciones" => ["Will", "Are", "Do", "Going to"], "correcta" => "Will"],
        ["pregunta" => "I ___ going to travel", "opciones" => ["am", "is", "are", "will"], "correcta" => "am"],
        ["pregunta" => "We ___ win the competition", "opciones" => ["will", "are going to", "win", "winning"], "correcta" => "will"],
        ["pregunta" => "She ___ call later", "opciones" => ["is going to", "will", "calls", "calling"], "correcta" => "is going to"],
        ["pregunta" => "Negative: I ___ eat junk food", "opciones" => ["am not going to", "will not", "don't", "not going"], "correcta" => "am not going to"],
        ["pregunta" => "Question: ___ travel next year?", "opciones" => ["Are you going to", "Will you", "Do you", "You going"], "correcta" => "Are you going to"],
        ["pregunta" => "I'll = I ___", "opciones" => ["will", "am going to", "going to", "am"], "correcta" => "will"],
        ["pregunta" => "LC-ADVANCE students ___ be engineers", "opciones" => ["are going to", "will", "be", "being"], "correcta" => "are going to"],
        ["pregunta" => "OK! I ___ help you now", "opciones" => ["will", "am going to", "help", "helping"], "correcta" => "will"],
        ["pregunta" => "In 2030, Mexico ___ be better", "opciones" => ["will", "is going to", "be", "being"], "correcta" => "will"],
        ["pregunta" => "I ___ visit my grandma tomorrow", "opciones" => ["am going to", "will", "visit", "visiting"], "correcta" => "am going to"],
        ["pregunta" => "Best future app 2025", "opciones" => ["LC-ADVANCE Prediction Game", "Duolingo", "Google", "TikTok"], "correcta" => "LC-ADVANCE Prediction Game"],
        ["pregunta" => "Will you pass Cambridge?", "opciones" => ["Yes, I will!", "No, I won't", "Maybe", "I don't know"], "correcta" => "Yes, I will!"],
        ["pregunta" => "I ___ going to bed now", "opciones" => ["am", "will", "go", "going"], "correcta" => "am"],
        ["pregunta" => "Phone rings → I ___ get it", "opciones" => ["will", "am going to", "get", "getting"], "correcta" => "will"],
        ["pregunta" => "We have tickets → We ___ travel", "opciones" => ["are going to", "will", "travel", "traveling"], "correcta" => "are going to"],
        ["pregunta" => "Clouds → It ___ rain", "opciones" => ["is going to", "will", "rains", "raining"], "correcta" => "is going to"],
        ["pregunta" => "Job interview: plans after CBTIS?", "opciones" => ["I am going to university", "I went yesterday", "I go now", "I going"], "correcta" => "I am going to university"],
        ["pregunta" => "Future with evidence", "opciones" => ["going to", "will", "present", "past"], "correcta" => "going to"],
        ["pregunta" => "Spontaneous decision", "opciones" => ["will", "going to", "present continuous", "past"], "correcta" => "will"],
        ["pregunta" => "I think Mexico ___ win the World Cup", "opciones" => ["will", "is going to", "wins", "winning"], "correcta" => "will"],
        ["pregunta" => "Best B1 future lesson", "opciones" => ["LC-ADVANCE Future Game", "Duolingo", "Babbel", "Rosetta"], "correcta" => "LC-ADVANCE Future Game"],
        ["pregunta" => "In 5 years, I ___ have a job", "opciones" => ["will", "am going to", "have", "having"], "correcta" => "will"],
        ["pregunta" => "LC-ADVANCE ___ be #1 forever", "opciones" => ["will", "is going to", "is", "was"], "correcta" => "will"],
        ["pregunta" => "Ultimate future champions", "opciones" => ["LC-ADVANCE", "Harvard", "MIT", "Oxford"], "correcta" => "LC-ADVANCE"],
        ["pregunta" => "Yes, LC-ADVANCE ___ change the world!", "opciones" => ["will", "is going to", "does", "did"], "correcta" => "will"]
    ],
];
// ========================================
// MATERIA: INGLÉS
// Nivel: B1 - Full Conversation Practice + Chat Simulator + Voice Recorder + 15 Ejercicios + 30 Quiz 2025
// ========================================
// --- CHAT SIMULATOR CON RESPUESTAS AUTOMÁTICAS LC-ADVANCE ---
$chatOptions = [
    "Hi! How are you?" => "I'm great! Just finished English class at LC-ADVANCE. And you?",
    "What did you do yesterday?" => "I went to the mall with friends. I bought new shoes! What about you?",
    "What are you going to do tomorrow?" => "I'm going to study Math and play soccer after school. You?",
    "What's your favorite food?" => "I love tacos al pastor and pizza! What do you like to eat?",
    "Tell me about your family." => "I have two brothers and one sister. We live in Guadalajara. And your family?",
    "What time do you wake up?" => "I wake up at 6:30 for LC-ADVANCE. School starts at 7:45!",
    "Do you like English?" => "Yes! I love it! LC-ADVANCE has the best English program in Mexico!",
    "See you later!" => "Bye! See you tomorrow at school! 🇲🇽✨"
];
$chatButtons = '';
foreach ($chatOptions as $you => $friend) {
    $chatButtons .= "<button onclick=\"sendMessage('$you', '$friend')\" style=\"margin:8px; padding:14px 20px; background:#4CAF50; color:white; border:none; border-radius:50px; font-size:17px; cursor:pointer; box-shadow:0 6px 12px rgba(0,0,0,0.25); transition:0.3s;\" onmouseover=\"this.style.transform='scale(1.1)'\" onmouseout=\"this.style.transform='scale(1)'\">💬 $you</button>";
}

$lecciones[] = [
    'materia' => 'Inglés',
    'slug' => 'b1-conversation-practice-pro',
    'titulo' => 'B1: Full Conversation Practice + AI Chat + Voice Recorder + 30 Quiz 2025',
    'contenido' => <<<HTML
        <div class="lesson-page-wrapper">
            <div class="lesson-container">
                
                <!-- HEADER PRINCIPAL -->
                <div class="lesson-banner">
                    <div class="banner-content">
                        <h1>🎯 B1 CONVERSATION MASTER 2025</h1>
                        <p class="banner-subtitle">Real English Practice with AI + Voice Recognition</p>
                        <div class="banner-stats">
                            <div class="stat">
                                <span class="stat-number">100+</span>
                                <span class="stat-label">Phrases</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number">8+</span>
                                <span class="stat-label">Topics</span>
                            </div>
                            <div class="stat">
                                <span class="stat-number">30</span>
                                <span class="stat-label">Quiz Questions</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PROGRESS BAR -->
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="overall-progress" style="width: 0%"></div>
                    </div>
                    <p class="progress-text">Progress: <span id="progress-percent">0%</span></p>
                </div>

                <hr class="separator">

                <!-- SECCIÓN 1: AI CHAT SIMULATOR -->
                <section class="section-card bg-green-chat">
                    <div class="section-header">
                        <h2>💬 LC-ADVANCE AI Chat Simulator</h2>
                        <p>Practice real conversations with Ana, your AI conversation partner!</p>
                    </div>

                    <div class="chat-options-bar">
                        <button onclick="sendAIMessage('greetings')" class="chat-quick-btn">👋 Greetings</button>
                        <button onclick="sendAIMessage('routine')" class="chat-quick-btn">📅 Daily Routine</button>
                        <button onclick="sendAIMessage('past')" class="chat-quick-btn">⏮️ Past Events</button>
                        <button onclick="sendAIMessage('future')" class="chat-quick-btn">⏭️ Future Plans</button>
                        <button onclick="sendAIMessage('food')" class="chat-quick-btn">🍕 Food</button>
                        <button onclick="sendAIMessage('family')" class="chat-quick-btn">👨‍👩‍👧‍👦 Family</button>
                    </div>

                    <div id="chat-display" class="chat-display">
                        <div class="initial-message">👋 Hi! I'm Ana from LC-ADVANCE. Click a topic to start chatting!</div>
                    </div>

                    <div class="chat-input-area">
                        <input type="text" id="user-chat-input" placeholder="Type your message here..." class="chat-input">
                        <button onclick="sendCustomMessage()" class="btn-send">Send 📤</button>
                        <button onclick="clearChat()" class="btn-clear-chat">🗑️ Clear</button>
                    </div>
                </section>

                <hr class="separator">

                <!-- SECCIÓN 2: VOICE RECORDER PRO -->
                <section class="section-card bg-orange-voice">
                    <div class="section-header">
                        <h2>🎤 Voice Recorder Pro</h2>
                        <p>Record yourself speaking and practice pronunciation!</p>
                    </div>

                    <div class="voice-controls">
                        <button id="record-btn" onclick="toggleRecording()" class="btn-record">
                            <span class="btn-icon">🎤</span> START RECORDING
                        </button>
                        <button id="play-btn" onclick="playRecording()" disabled class="btn-play">
                            <span class="btn-icon">▶️</span> PLAY
                        </button>
                        <button id="download-btn" onclick="downloadRecording()" disabled class="btn-download">
                            <span class="btn-icon">💾</span> DOWNLOAD
                        </button>
                    </div>

                    <div class="recording-status">
                        <div id="recording-wave" class="recording-wave hidden">
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                        </div>
                        <p id="recording-status" class="status-text">Ready to record your B1 speaking!</p>
                        <audio id="audio-playback" controls class="audio-player hidden"></audio>
                    </div>

                    <div class="practice-topics">
                        <h4>📝 Practice Topics:</h4>
                        <div class="topic-chips">
                            <button onclick="speakTopic('Introduce yourself')" class="topic-chip">Introduce yourself</button>
                            <button onclick="speakTopic('Your daily routine')" class="topic-chip">Your daily routine</button>
                            <button onclick="speakTopic('Weekend plans')" class="topic-chip">Weekend plans</button>
                            <button onclick="speakTopic('Favorite food')" class="topic-chip">Favorite food</button>
                            <button onclick="speakTopic('Family members')" class="topic-chip">Family members</button>
                            <button onclick="speakTopic('Last vacation')" class="topic-chip">Last vacation</button>
                        </div>
                    </div>
                </section>

                <hr class="separator">

                <!-- SECCIÓN 3: CONVERSATION STARTERS & FILLERS -->
                <section class="section-card bg-blue-fillers">
                    <div class="section-header">
                        <h2>🗣️ Conversation Starters & Fillers</h2>
                        <p>Essential phrases to keep conversations flowing naturally!</p>
                    </div>

                    <div class="fillers-grid">
                        <div class="filler-category">
                            <h4>🚀 Starting Conversations</h4>
                            <button onclick="speakAndShow('How are you doing?')" class="filler-btn">How are you doing?</button>
                            <button onclick="speakAndShow('What\\'s up?')" class="filler-btn">What's up?</button>
                            <button onclick="speakAndShow('How was your day?')" class="filler-btn">How was your day?</button>
                            <button onclick="speakAndShow('Long time no see!')" class="filler-btn">Long time no see!</button>
                        </div>

                        <div class="filler-category">
                            <h4>🔄 Keeping the Flow</h4>
                            <button onclick="speakAndShow('And you?')" class="filler-btn">And you?</button>
                            <button onclick="speakAndShow('That\\'s interesting!')" class="filler-btn">That's interesting!</button>
                            <button onclick="speakAndShow('Really?')" class="filler-btn">Really?</button>
                            <button onclick="speakAndShow('Tell me more!')" class="filler-btn">Tell me more!</button>
                        </div>

                        <div class="filler-category">
                            <h4>❓ When You Don't Understand</h4>
                            <button onclick="speakAndShow('Can you repeat, please?')" class="filler-btn">Can you repeat?</button>
                            <button onclick="speakAndShow('What do you mean?')" class="filler-btn">What do you mean?</button>
                            <button onclick="speakAndShow('I don\\'t understand')" class="filler-btn">I don't understand</button>
                            <button onclick="speakAndShow('Could you speak slower?')" class="filler-btn">Speak slower?</button>
                        </div>

                        <div class="filler-category">
                            <h4>👋 Ending Politely</h4>
                            <button onclick="speakAndShow('See you later!')" class="filler-btn">See you later!</button>
                            <button onclick="speakAndShow('Nice talking to you!')" class="filler-btn">Nice talking to you!</button>
                            <button onclick="speakAndShow('Take care!')" class="filler-btn">Take care!</button>
                            <button onclick="speakAndShow('Have a great day!')" class="filler-btn">Have a great day!</button>
                        </div>
                    </div>

                    <div id="filler-display" class="filler-display"></div>
                </section>

                <hr class="separator">

                <!-- SECCIÓN 4: FULL CONVERSATION EXAMPLE -->
                <section class="section-card bg-purple-example">
                    <div class="section-header">
                        <h2>🎬 Full Conversation Example</h2>
                        <p>Watch and listen to a complete B1 level conversation!</p>
                    </div>

                    <div class="conversation-example">
                        <div class="dialogue-line speaker-a">
                            <button onclick="speakText('Hi Maria! How are you doing?')" class="speak-mini-btn">🔊</button>
                            <strong>You:</strong> Hi Maria! How are you doing?
                        </div>
                        <div class="dialogue-line speaker-b">
                            <button onclick="speakText('I\\'m great, thanks! I just finished my English class at LC-ADVANCE.')" class="speak-mini-btn">🔊</button>
                            <strong>Maria:</strong> I'm great, thanks! I just finished my English class at LC-ADVANCE.
                        </div>
                        <div class="dialogue-line speaker-a">
                            <button onclick="speakText('That\\'s awesome! What did you learn today?')" class="speak-mini-btn">🔊</button>
                            <strong>You:</strong> That's awesome! What did you learn today?
                        </div>
                        <div class="dialogue-line speaker-b">
                            <button onclick="speakText('We practiced conversation skills and learned new vocabulary about travel.')" class="speak-mini-btn">🔊</button>
                            <strong>Maria:</strong> We practiced conversation skills and learned new vocabulary about travel.
                        </div>
                        <div class="dialogue-line speaker-a">
                            <button onclick="speakText('Cool! Are you going to travel soon?')" class="speak-mini-btn">🔊</button>
                            <strong>You:</strong> Cool! Are you going to travel soon?
                        </div>
                        <div class="dialogue-line speaker-b">
                            <button onclick="speakText('Yes! I\\'m going to visit Cancun next month. I\\'m really excited!')" class="speak-mini-btn">🔊</button>
                            <strong>Maria:</strong> Yes! I'm going to visit Cancun next month. I'm really excited!
                        </div>
                        <div class="dialogue-line speaker-a">
                            <button onclick="speakText('That sounds amazing! Have a great time and take lots of photos!')" class="speak-mini-btn">🔊</button>
                            <strong>You:</strong> That sounds amazing! Have a great time and take lots of photos!
                        </div>
                        <div class="dialogue-line speaker-b">
                            <button onclick="speakText('Thanks! See you later!')" class="speak-mini-btn">🔊</button>
                            <strong>Maria:</strong> Thanks! See you later!
                        </div>
                    </div>

                    <button onclick="playFullConversation()" class="btn-play-all">▶️ Play Full Conversation</button>
                </section>

                <hr class="separator">

                <!-- SECCIÓN 5: SVG DIAGRAM -->
                <div class="visual-diagram">
                    <h3 style="text-align:center; color:#ffcc00;">📊 LC-ADVANCE Conversation Flow</h3>
                    <svg viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <marker id="arrow" markerWidth="15" markerHeight="15" refX="12" refY="3" orient="auto">
                                <path d="M0,0 L0,6 L15,3 z" fill="#4CAF50"/>
                            </marker>
                            <marker id="arrow2" markerWidth="15" markerHeight="15" refX="12" refY="3" orient="auto">
                                <path d="M0,0 L0,6 L15,3 z" fill="#8BC34A"/>
                            </marker>
                        </defs>
                        
                        <rect x="0" y="0" width="900" height="500" fill="#E8F5E9"/>
                        
                        <text x="450" y="60" text-anchor="middle" font-size="36" fill="#2E7D32" font-weight="bold">
                            LC-ADVANCE CONVERSATION 2025
                        </text>
                        
                        <!-- YOU -->
                        <circle cx="200" cy="250" r="80" fill="#4CAF50"/>
                        <text x="200" y="240" text-anchor="middle" fill="white" font-size="18" font-weight="bold">YOU</text>
                        <text x="200" y="265" text-anchor="middle" fill="white" font-size="14">B1 Student</text>
                        
                        <!-- PARTNER -->
                        <circle cx="700" cy="250" r="80" fill="#8BC34A"/>
                        <text x="700" y="240" text-anchor="middle" fill="white" font-size="18" font-weight="bold">PARTNER</text>
                        <text x="700" y="265" text-anchor="middle" fill="white" font-size="14">Ana / Maria</text>
                        
                        <!-- ARROW 1: Question -->
                        <path d="M280 230 Q450 170 620 230" stroke="#4CAF50" stroke-width="8" fill="none" marker-end="url(#arrow)"/>
                        <text x="450" y="160" text-anchor="middle" fill="#1B5E20" font-size="20" font-weight="bold">
                            "How are you?" 🗣️
                        </text>
                        
                        <!-- ARROW 2: Response -->
                        <path d="M620 270 Q450 330 280 270" stroke="#8BC34A" stroke-width="8" fill="none" marker-end="url(#arrow2)"/>
                        <text x="450" y="370" text-anchor="middle" fill="#2E7D32" font-size="20" font-weight="bold">
                            "I'm great! And you?" 💬
                        </text>
                        
                        <!-- TOPICS -->
                        <text x="450" y="440" text-anchor="middle" fill="#1B5E20" font-size="16" font-style="italic">
                            Topics: Greetings • Routine • Past • Future • Food • Family
                        </text>
                    </svg>
                    <p style="text-align:center; color:#4CAF50; margin-top:15px;">
                        <em>Real B1 conversation structure - Practice makes perfect! 🌟</em>
                    </p>
                </div>

            </div>
        </div>

        <script>
            // ========================================
            // JAVASCRIPT FUNCTIONS - IMPROVED VERSION
            // ========================================
            
            // Global Variables
            let mediaRecorder = null;
            let audioChunks = [];
            let recordedBlob = null;
            let conversationData = {
                greetings: [
                    {q: "Hi! How are you?", a: "I'm great! Just finished English class at LC-ADVANCE. And you?"},
                    {q: "What's up?", a: "Not much! Just studying for my B1 exam. You?"},
                    {q: "How's it going?", a: "Pretty good! I'm excited about my English progress!"}
                ],
                routine: [
                    {q: "What time do you wake up?", a: "I wake up at 6:30 AM for LC-ADVANCE. School starts at 7:45!"},
                    {q: "What do you do after school?", a: "I usually study English, play soccer, and hang out with friends."},
                    {q: "Do you have any hobbies?", a: "Yes! I love reading, playing video games, and practicing English!"}
                ],
                past: [
                    {q: "What did you do yesterday?", a: "I went to the mall with friends and bought new shoes!"},
                    {q: "How was your weekend?", a: "It was awesome! I went to the movies and had a great time!"},
                    {q: "Did you travel recently?", a: "Yes! Last month I visited Guadalajara. It was amazing!"}
                ],
                future: [
                    {q: "What are you going to do tomorrow?", a: "I'm going to study Math and play soccer after school."},
                    {q: "Do you have any plans for the weekend?", a: "Yes! I'm going to watch a movie and practice English!"},
                    {q: "What will you do next vacation?", a: "I'm going to visit my grandparents in Monterrey!"}
                ],
                food: [
                    {q: "What's your favorite food?", a: "I love tacos al pastor and pizza! What do you like to eat?"},
                    {q: "Do you like Mexican food?", a: "Of course! Tacos, quesadillas, and enchiladas are delicious!"},
                    {q: "What did you eat for breakfast?", a: "I had cereal with milk and an orange. Simple but good!"}
                ],
                family: [
                    {q: "Tell me about your family.", a: "I have two brothers and one sister. We live in Guadalajara."},
                    {q: "Do you have any siblings?", a: "Yes! I have an older brother and a younger sister."},
                    {q: "What does your dad do?", a: "My dad is an engineer and my mom is a teacher. They're great!"}
                ]
            };

            // AI CHAT FUNCTIONS
            function sendAIMessage(topic) {
                const chatDisplay = document.getElementById('chat-display');
                const messages = conversationData[topic];
                const randomMsg = messages[Math.floor(Math.random() * messages.length)];
                
                // Clear initial message
                if (chatDisplay.querySelector('.initial-message')) {
                    chatDisplay.innerHTML = '';
                }
                
                // Add user message
                addChatBubble(randomMsg.q, 'user');
                
                // Add AI response after delay
                setTimeout(() => {
                    addChatBubble(randomMsg.a, 'ai');
                    speakText(randomMsg.a);
                    updateProgress(5);
                }, 800);
            }

            function sendCustomMessage() {
                const input = document.getElementById('user-chat-input');
                const message = input.value.trim();
                
                if (message === '') return;
                
                addChatBubble(message, 'user');
                input.value = '';
                
                // Generate simple AI response
                setTimeout(() => {
                    const responses = [
                        "That's interesting! Tell me more!",
                        "I see! And what happened next?",
                        "Really? That sounds cool!",
                        "Wow! I'd love to hear more about that!",
                        "That's great! Keep practicing your English!"
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    addChatBubble(randomResponse, 'ai');
                    speakText(randomResponse);
                    updateProgress(3);
                }, 1000);
            }

            function addChatBubble(text, sender) {
                const chatDisplay = document.getElementById('chat-display');
                const bubble = document.createElement('div');
                bubble.className = `chat-bubble \${sender}`;
                bubble.innerHTML = `
                    <button onclick="speakText('\${text.replace(/'/g, "\\'")}'))" class="bubble-speak-btn">🔊</button>
                    <span>\${text}</span>
                `;
                chatDisplay.appendChild(bubble);
                chatDisplay.scrollTop = chatDisplay.scrollHeight;
            }

            function clearChat() {
                const chatDisplay = document.getElementById('chat-display');
                chatDisplay.innerHTML = '<div class="initial-message">👋 Chat cleared! Start a new conversation!</div>';
                updateProgress(2);
            }

            // VOICE RECORDER FUNCTIONS
            async function toggleRecording() {
                const recordBtn = document.getElementById('record-btn');
                const statusText = document.getElementById('recording-status');
                const wave = document.getElementById('recording-wave');
                
                if (!mediaRecorder || mediaRecorder.state === 'inactive') {
                    try {
                        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                        mediaRecorder = new MediaRecorder(stream);
                        audioChunks = [];
                        
                        mediaRecorder.ondataavailable = (event) => {
                            audioChunks.push(event.data);
                        };
                        
                        mediaRecorder.onstop = () => {
                            recordedBlob = new Blob(audioChunks, { type: 'audio/wav' });
                            const audioUrl = URL.createObjectURL(recordedBlob);
                            const audioPlayer = document.getElementById('audio-playback');
                            audioPlayer.src = audioUrl;
                            audioPlayer.classList.remove('hidden');
                            document.getElementById('play-btn').disabled = false;
                            document.getElementById('download-btn').disabled = false;
                        };
                        
                        mediaRecorder.start();
                        recordBtn.innerHTML = '<span class="btn-icon">⏹️</span> STOP RECORDING';
                        recordBtn.classList.add('recording');
                        statusText.textContent = '🔴 Recording... Speak now!';
                        wave.classList.remove('hidden');
                        updateProgress(10);
                    } catch (error) {
                        alert('Microphone access denied! Please allow microphone permissions.');
                    }
                } else {
                    mediaRecorder.stop();
                    mediaRecorder.stream.getTracks().forEach(track => track.stop());
                    recordBtn.innerHTML = '<span class="btn-icon">🎤</span> START RECORDING';
                    recordBtn.classList.remove('recording');
                    statusText.textContent = '✅ Recording complete! Click PLAY to listen.';
                    wave.classList.add('hidden');
                }
            }

            function playRecording() {
                const audioPlayer = document.getElementById('audio-playback');
                audioPlayer.play();
                updateProgress(5);
            }

            function downloadRecording() {
                if (!recordedBlob) return;
                const url = URL.createObjectURL(recordedBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `LC-ADVANCE_Recording_\${Date.now()}.wav`;
                a.click();
                updateProgress(5);
            }

            function speakTopic(topic) {
                const message = `Practice topic: \${topic}. Start recording and speak for at least 30 seconds about this topic.`;
                speakText(message);
                showNotification(topic, 'info');
            }

            // CONVERSATION FILLERS
            function speakAndShow(text) {
                speakText(text);
                const display = document.getElementById('filler-display');
                display.innerHTML = `
                    <div class="filler-highlight">
                        <span class="filler-text">"\${text}"</span>
                        <button onclick="speakText('\${text.replace(/'/g, "\\'")}'))" class="repeat-btn">🔁 Repeat</button>
                    </div>
                `;
                updateProgress(2);
            }

            // FULL CONVERSATION PLAYBACK
            async function playFullConversation() {
                const lines = [
                    "Hi Maria! How are you doing?",
                    "I'm great, thanks! I just finished my English class at LC-ADVANCE.",
                    "That's awesome! What did you learn today?",
                    "We practiced conversation skills and learned new vocabulary about travel.",
                    "Cool! Are you going to travel soon?",
                    "Yes! I'm going to visit Cancun next month. I'm really excited!",
                    "That sounds amazing! Have a great time and take lots of photos!",
                    "Thanks! See you later!"
                ];
                
                for (let i = 0; i < lines.length; i++) {
                    await speakTextAsync(lines[i]);
                    await sleep(1500);
                }
                updateProgress(15);
            }

            // UTILITY FUNCTIONS
            function speakText(text) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'en-US';
                utterance.rate = 0.9;
                speechSynthesis.speak(utterance);
            }

            function speakTextAsync(text) {
                return new Promise((resolve) => {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'en-US';
                    utterance.rate = 0.9;
                    utterance.onend = resolve;
                    speechSynthesis.speak(utterance);
                });
            }

            function sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            function updateProgress(points) {
                const progressBar = document.getElementById('overall-progress');
                const progressText = document.getElementById('progress-percent');
                let currentWidth = parseInt(progressBar.style.width) || 0;
                let newWidth = Math.min(currentWidth + points, 100);
                progressBar.style.width = newWidth + '%';
                progressText.textContent = newWidth + '%';
            }

            function showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `notification \${type}`;
                notification.textContent = message;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.opacity = '0';
                    setTimeout(() => notification.remove(), 300);
                }, 3000);
            }

            // Enter key for chat
            document.addEventListener('DOMContentLoaded', () => {
                const chatInput = document.getElementById('user-chat-input');
                if (chatInput) {
                    chatInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            sendCustomMessage();
                        }
                    });
                }
            });
        </script>
HTML
,
    'ejercicios' => [
        ["enunciado" => "Create a 10-line conversation with Ana (use Chat Simulator)", "respuesta" => "Hi! / How are you? / What did you do? / I went to... / Tomorrow I'm going to... / My favorite food is... / See you!"],
        ["enunciado" => "Record yourself: 'Introduce yourself + daily routine + plans'", "respuesta" => "Hi, I'm [name] from LC-ADVANCE. I wake up at 6:30... Tomorrow I'm going to..."],
        ["enunciado" => "Answer: 'What do you like to do in free time?'", "respuesta" => "I like to play soccer, watch Netflix and hang out with friends."],
        ["enunciado" => "Ask 5 questions to a classmate", "respuesta" => "What's your name? / How old are you? / What did you do yesterday? / What are you going to do tomorrow? / What's your favorite food?"],
        ["enunciado" => "Keep conversation: After 'I like pizza' say...", "respuesta" => "Me too! / Really? / And you?"],
        ["enunciado" => "Polite way to end: 'I have to go'", "respuesta" => "See you later! It was nice talking!"],
        ["enunciado" => "Translate: '¿Puedes repetir?'", "respuesta" => "Can you repeat, please?"],
        ["enunciado" => "Full introduction LC-ADVANCE", "respuesta" => "Hi! I'm from LC-ADVANCE in Guadalajara. I study technical career and English B1."],
        ["enunciado" => "Record 1-minute monologue about your week", "respuesta" => "This week I studied... I went to... Tomorrow I will..."],
        ["enunciado" => "React to: 'I failed the test'", "respuesta" => "Don't worry! Next time you will pass!"],
        ["enunciado" => "Best conversation starter", "respuesta" => "How are you? / What's up? / How was your day?"],
        ["enunciado" => "Use filler: 'Well...', 'You know...'", "respuesta" => "Well, I think... / You know, in LC-ADVANCE..."],
        ["enunciado" => "Conversation with teacher", "respuesta" => "Good morning! / Can I ask a? / Thank you!"],
        ["enunciado" => "Best speaking app 2025", "respuesta" => "LC-ADVANCE Chat Simulator!"],
        ["enunciado" => "Record dialogue with friend", "respuesta" => "Use Voice Recorder for both parts"]
    ],
    'quiz' => [
        ["pregunta" => "Start conversation:", "opciones" => ["Hi! How are you?", "Goodbye", "Thank you", "See you"], "correcta" => "Hi! How are you?"],
        ["pregunta" => "Keep talking:", "opciones" => ["And you?", "Bye", "Thanks", "Please"], "correcta" => "And you?"],
        ["pregunta" => "Show interest:", "opciones" => ["Really? Cool!", "No", "Maybe", "Never"], "correcta" => "Really? Cool!"],
        ["pregunta" => "End conversation:", "opciones" => ["See you later!", "Hello!", "How are you?", "What's up?"], "correcta" => "See you later!"],
        ["pregunta" => "Don't understand:", "opciones" => ["Can you repeat?", "Yes", "No", "OK"], "correcta" => "Can you repeat?"],
        ["pregunta" => "Favorite food question:", "opciones" => ["What do you like to eat?", "What time is it?", "Where are you?", "How old?"], "correcta" => "What do you like to eat?"],
        ["pregunta" => "Past question:", "opciones" => ["What did you do yesterday?", "What will you do?", "What are you doing?", "What do you do?"], "correcta" => "What did you do yesterday?"],
        ["pregunta" => "Future question:", "opciones" => ["What are you going to do tomorrow?", "What did you do?", "What do you do?", "What time is it?"], "correcta" => "What are you going to do tomorrow?"],
        ["pregunta" => "Family question:", "opciones" => ["Tell me about your family", "How much is it?", "Where is it?", "When?"], "correcta" => "Tell me about your family"],
        ["pregunta" => "LC-ADVANCE students speak...", "opciones" => ["English B1 fluently", "only Spanish", "French", "Chinese"], "correcta" => "English B1 fluently"],
        ["pregunta" => "Best way to improve speaking:", "opciones" => ["Talk every day", "Only read", "Only write", "Only listen"], "correcta" => "Talk every day"],
        ["pregunta" => "After 'I'm fine' say...", "opciones" => ["And you?", "Bye", "Thanks", "No"], "correcta" => "And you?"],
        ["pregunta" => "Polite in conversation:", "opciones" => ["Please / Thank you", "Shut up", "No", "Whatever"], "correcta" => "Please / Thank you"],
        ["pregunta" => "B1 can have...", "opciones" => ["real conversations", "only basic greetings", "no English", "perfect accent"], "correcta" => "real conversations"],
        ["pregunta" => "Best conversation tool 2025", "opciones" => ["LC-ADVANCE Chat Simulator", "Duolingo", "HelloTalk", "Tandem"], "correcta" => "LC-ADVANCE Chat Simulator"],
        ["pregunta" => "Record yourself:", "opciones" => ["Yes, daily!", "No", "Only write", "Only read"], "correcta" => "Yes, daily!"],
        ["pregunta" => "Ana from LC-ADVANCE is...", "opciones" => ["B1 student", "teacher", "A1", "C2"], "correcta" => "B1 student"],
        ["pregunta" => "To react: 'I won!'", "opciones" => ["Congratulations!", "Bad", "No", "Whatever"], "correcta" => "Congratulations!"],
        ["pregunta" => "Filler words:", "opciones" => ["Well... You know...", "Never", "Always no", "Only yes"], "correcta" => "Well... You know..."],
        ["pregunta" => "See you later! = ", "opciones" => ["¡Nos vemos!", "Hola", "Gracias", "Por favor"], "correcta" => "¡Nos vemos!"],
        ["pregunta" => "Best speaking practice:", "opciones" => ["With friends daily", "Only alone", "Never talk", "Only watch"], "correcta" => "With friends daily"],
        ["pregunta" => "Can you repeat? = ", "opciones" => ["¿Puedes repetir?", "Sí", "No", "Tal vez"], "correcta" => "¿Puedes repetir?"],
        ["pregunta" => "LC-ADVANCE students in 2025:", "opciones" => ["Speak English fluently", "Don't speak", "Only Spanish", "Only write"], "correcta" => "Speak English fluently"],
        ["pregunta" => "Conversation length B1:", "opciones" => ["5-10 minutes", "10 seconds", "1 hour", "never"], "correcta" => "5-10 minutes"],
        ["pregunta" => "Best recorder 2025:", "opciones" => ["LC-ADVANCE Voice Recorder", "Phone", "Computer", "Paper"], "correcta" => "LC-ADVANCE Voice Recorder"],
        ["pregunta" => "To improve pronunciation:", "opciones" => ["Record + listen", "Only read", "Only write", "Never speak"], "correcta" => "Record + listen"],
        ["pregunta" => "Ultimate speaking champions:", "opciones" => ["LC-ADVANCE", "Harvard", "Oxford", "MIT"], "correcta" => "LC-ADVANCE"],
        ["pregunta" => "Yes, LC-ADVANCE students ___ real conversations!", "opciones" => ["can have", "can't", "never", "sometimes no"], "correcta" => "can have"],
        ["pregunta" => "Best English B1 school Mexico:", "opciones" => ["LC-ADVANCE", "any other", "none", "USA schools"], "correcta" => "LC-ADVANCE"],
        ["pregunta" => "Conversation = key to...", "opciones" => ["Cambridge First", "only reading", "only grammar", "nothing"], "correcta" => "Cambridge First"]
    ],
];
?>